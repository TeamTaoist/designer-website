/*! For license information please see main.51d23578.js.LICENSE.txt */
!function(){var e={9387:function(e,t,n){"use strict";n.d(t,{Z:function(){return mu}});var i=n(168),r=n(6444),a=n(5671),o=n(3144),s=n(7326),l=n(136),u=n(9388);function c(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(c.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var d,h,p="107",f=0,m=1,g=2,v=1,y=2,b=0,_=1,x=2,w=0,T=1,S=2,E=0,k=1,C=2,M=3,A=4,P=5,L=100,I=101,O=102,R=103,D=104,N=200,U=201,B=202,F=203,j=204,z=205,H=206,V=207,G=208,W=209,Z=210,q=0,X=1,Y=2,K=3,Q=4,$=5,J=6,ee=7,te=0,ne=1,ie=2,re=0,ae=1,oe=2,se=3,le=4,ue=5,ce=301,de=302,he=303,pe=304,fe=305,me=306,ge=307,ve=1e3,ye=1001,be=1002,_e=1003,xe=1004,we=1005,Te=1006,Se=1007,Ee=1008,ke=1009,Ce=1010,Me=1011,Ae=1012,Pe=1013,Le=1014,Ie=1015,Oe=1016,Re=1017,De=1018,Ne=1019,Ue=1020,Be=1021,Fe=1022,je=1023,ze=1024,He=1025,Ve=1026,Ge=1027,We=1028,Ze=33776,qe=33777,Xe=33778,Ye=33779,Ke=35840,Qe=35841,$e=35842,Je=35843,et=36196,tt=37808,nt=37809,it=37810,rt=37811,at=37812,ot=37813,st=37814,lt=37815,ut=37816,ct=37817,dt=37818,ht=37819,pt=37820,ft=37821,mt=2201,gt=2300,vt=2301,yt=2302,bt=2400,_t=2401,xt=2402,wt=0,Tt=1,St=2,Et=3e3,kt=3001,Ct=3007,Mt=3002,At=3004,Pt=3005,Lt=3006,It=3200,Ot=3201,Rt=0,Dt=1,Nt=7680,Ut=519,Bt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Bt.DEG2RAD},radToDeg:function(e){return e*Bt.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Ft(e,t){this.x=e||0,this.y=t||0}function jt(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function zt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Ht(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Ft.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Ft.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}}),Object.assign(jt,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],d=r[a+0],h=r[a+1],p=r[a+2],f=r[a+3];if(c!==f||s!==d||l!==h||u!==p){var m=1-o,g=s*d+l*h+u*p+c*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,g*v);m=Math.sin(m*_)/b,o=Math.sin(o*_)/b}var x=o*v;if(s=s*m+d*x,l=l*m+h*x,u=u*m+p*x,c=c*m+f*x,m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(jt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(jt.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),d=s(n/2),h=s(i/2),p=s(r/2);return"XYZ"===a?(this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p):"YXZ"===a?(this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p):"ZXY"===a?(this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p):"ZYX"===a?(this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p):"YZX"===a?(this._x=d*u*c+l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c-d*h*p):"XZY"===a&&(this._x=d*u*c-l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c+d*h*p),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],d=n[10],h=i+s+d;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(o-r)*t):i>s&&i>d?(t=2*Math.sqrt(1+i-s-d),this._w=(c-l)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(a+u)/t):s>d?(t=2*Math.sqrt(1+s-i-d),this._w=(a-u)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+d-i-s),this._w=(o-r)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Bt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=a*d+this._w*h,this._x=n*d+this._x*h,this._y=i*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(zt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new jt;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new jt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*n,u=s*n+o*t-r*i,c=s*i+r*n-a*t,d=-r*t-a*n-o*i;return this.x=l*s+d*-r+u*-o-c*-a,this.y=u*s+d*-a+c*-r-l*-o,this.z=c*s+d*-o+l*-a-u*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new zt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new zt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Bt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Ht.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){void 0===d&&(d=new zt);for(var t=0,n=e.count;t<n;t++)d.x=e.getX(t),d.y=e.getY(t),d.z=e.getZ(t),d.applyMatrix3(this),e.setXYZ(t,d.x,d.y,d.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],b=i[7],_=i[2],x=i[5],w=i[8];return r[0]=a*f+o*v+s*_,r[3]=a*m+o*y+s*x,r[6]=a*g+o*b+s*w,r[1]=l*f+u*v+c*_,r[4]=l*m+u*y+c*x,r[7]=l*g+u*b+c*w,r[2]=d*f+h*v+p*_,r[5]=d*m+h*y+p*x,r[8]=d*g+h*b+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*r*u+n*o*s+i*r*l-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],d=n[7],h=n[8],p=h*l-u*d,f=u*c-h*s,m=d*s-l*c,g=r*p+a*f+o*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=p*y,i[1]=(o*d-h*a)*y,i[2]=(u*a-o*l)*y,i[3]=f*y,i[4]=(h*r-o*c)*y,i[5]=(o*s-u*r)*y,i[6]=m*y,i[7]=(a*c-d*r)*y,i[8]=(l*r-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],u=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*l,i[6]=t*o+n*u,i[1]=-n*r+t*s,i[4]=-n*a+t*l,i[7]=-n*o+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Vt,Gt,Wt={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===h&&(h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),h.width=e.width,h.height=e.height;var n=h.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=h}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Zt=0;function qt(e,t,n,i,r,a,o,s,l,u){Object.defineProperty(this,"id",{value:Zt++}),this.uuid=Bt.generateUUID(),this.name="",this.image=void 0!==e?e:qt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:qt.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ye,this.wrapT=void 0!==i?i:ye,this.magFilter=void 0!==r?r:Te,this.minFilter=void 0!==a?a:Ee,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:je,this.type=void 0!==s?s:ke,this.offset=new Ft(0,0),this.repeat=new Ft(1,1),this.center=new Ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Et,this.version=0,this.onUpdate=null}function Xt(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function Yt(e,t,n){this.width=e,this.height=t,this.scissor=new Xt(0,0,e,t),this.scissorTest=!1,this.viewport=new Xt(0,0,e,t),n=n||{},this.texture=new qt(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Te,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Kt(e,t,n){Yt.call(this,e,t,n),this.samples=4}function Qt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function $t(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||$t.DefaultOrder}function Jt(){this.mask=1}qt.DEFAULT_IMAGE=void 0,qt.DEFAULT_MAPPING=300,qt.prototype=Object.assign(Object.create(c.prototype),{constructor:qt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Bt.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)r.push(Wt.getDataURL(i[a]))}else r=Wt.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ve:e.x=e.x-Math.floor(e.x);break;case ye:e.x=e.x<0?0:1;break;case be:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ve:e.y=e.y-Math.floor(e.y);break;case ye:e.y=e.y<0?0:1;break;case be:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(qt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Xt.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Xt.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],d=s[1],h=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(u-d)<a&&Math.abs(c-f)<a&&Math.abs(p-m)<a){if(Math.abs(u+d)<o&&Math.abs(c+f)<o&&Math.abs(p+m)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,y=(h+1)/2,b=(g+1)/2,_=(u+d)/4,x=(c+f)/4,w=(p+m)/4;return v>y&&v>b?v<a?(n=0,i=.707106781,r=.707106781):(i=_/(n=Math.sqrt(v)),r=x/n):y>b?y<a?(n=.707106781,i=0,r=.707106781):(n=_/(i=Math.sqrt(y)),r=w/i):b<a?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(b)),i=w/r),this.set(n,i,r,t),this}var T=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(d-u)*(d-u));return Math.abs(T)<.001&&(T=1),this.x=(m-p)/T,this.y=(c-f)/T,this.z=(d-u)/T,this.w=Math.acos((l+h+g-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Yt.prototype=Object.assign(Object.create(c.prototype),{constructor:Yt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Kt.prototype=Object.assign(Object.create(Yt.prototype),{constructor:Kt,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Yt.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(Qt.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,o,s,l,u,c,d,h,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Qt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new zt;return function(t){var n=this.elements,i=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var d=a*u,h=a*c,p=o*u,f=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=h+p*l,t[5]=d-f*l,t[9]=-o*s,t[2]=f-d*l,t[6]=p+h*l,t[10]=a*s}else if("YXZ"===e.order){var m=s*u,g=s*c,v=l*u,y=l*c;t[0]=m+y*o,t[4]=v*o-g,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=g*o-v,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*u,g=s*c,v=l*u,y=l*c;t[0]=m-y*o,t[4]=-a*c,t[8]=v+g*o,t[1]=g+v*o,t[5]=a*u,t[9]=y-m*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){d=a*u,h=a*c,p=o*u,f=o*c;t[0]=s*u,t[4]=p*l-h,t[8]=d*l+f,t[1]=s*c,t[5]=f*l+d,t[9]=h*l-p,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var b=a*s,_=a*l,x=o*s,w=o*l;t[0]=s*u,t[4]=w-b*c,t[8]=x*c+_,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=_*c+x,t[10]=b-w*c}else if("XZY"===e.order){b=a*s,_=a*l,x=o*s,w=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=b*c+w,t[5]=a*u,t[9]=_*c-x,t[2]=x*c-_,t[6]=o*u,t[10]=w*c+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new zt(0,0,0),t=new zt(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new zt,t=new zt,n=new zt;return function(i,r,a){var o=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(a,n),0===e.lengthSq()&&(1===Math.abs(a.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(a,n)),e.normalize(),t.crossVectors(n,e),o[0]=e.x,o[4]=t.x,o[8]=n.x,o[1]=e.y,o[5]=t.y,o[9]=n.y,o[2]=e.z,o[6]=t.z,o[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=i[0],w=i[4],T=i[8],S=i[12],E=i[1],k=i[5],C=i[9],M=i[13],A=i[2],P=i[6],L=i[10],I=i[14],O=i[3],R=i[7],D=i[11],N=i[15];return r[0]=a*x+o*E+s*A+l*O,r[4]=a*w+o*k+s*P+l*R,r[8]=a*T+o*C+s*L+l*D,r[12]=a*S+o*M+s*I+l*N,r[1]=u*x+c*E+d*A+h*O,r[5]=u*w+c*k+d*P+h*R,r[9]=u*T+c*C+d*L+h*D,r[13]=u*S+c*M+d*I+h*N,r[2]=p*x+f*E+m*A+g*O,r[6]=p*w+f*k+m*P+g*R,r[10]=p*T+f*C+m*L+g*D,r[14]=p*S+f*M+m*I+g*N,r[3]=v*x+y*E+b*A+_*O,r[7]=v*w+y*k+b*P+_*R,r[11]=v*T+y*C+b*L+_*D,r[15]=v*S+y*M+b*I+_*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new zt;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+r*s*c-i*l*c-r*o*d+n*l*d+i*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+r*a*d-i*a*h+i*l*u-r*s*u)+e[11]*(+t*l*c-t*o*h-r*a*c+n*a*h+r*o*u-n*l*u)+e[15]*(-i*o*u-t*s*c+t*o*d+i*a*c-n*a*d+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],d=i[7],h=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],b=i[15],_=p*y*d-v*f*d+v*c*m-u*y*m-p*c*b+u*f*b,x=g*f*d-h*y*d-g*c*m+l*y*m+h*c*b-l*f*b,w=h*v*d-g*p*d+g*u*m-l*v*m-h*u*b+l*p*b,T=g*p*c-h*v*c-g*u*f+l*v*f+h*u*y-l*p*y,S=r*_+a*x+o*w+s*T;if(0===S){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var k=1/S;return n[0]=_*k,n[1]=(v*f*s-p*y*s-v*o*m+a*y*m+p*o*b-a*f*b)*k,n[2]=(u*y*s-v*c*s+v*o*d-a*y*d-u*o*b+a*c*b)*k,n[3]=(p*c*s-u*f*s-p*o*d+a*f*d+u*o*m-a*c*m)*k,n[4]=x*k,n[5]=(h*y*s-g*f*s+g*o*m-r*y*m-h*o*b+r*f*b)*k,n[6]=(g*c*s-l*y*s-g*o*d+r*y*d+l*o*b-r*c*b)*k,n[7]=(l*f*s-h*c*s+h*o*d-r*f*d-l*o*m+r*c*m)*k,n[8]=w*k,n[9]=(g*p*s-h*v*s-g*a*m+r*v*m+h*a*b-r*p*b)*k,n[10]=(l*v*s-g*u*s+g*a*d-r*v*d-l*a*b+r*u*b)*k,n[11]=(h*u*s-l*p*s-h*a*d+r*p*d+l*a*m-r*u*m)*k,n[12]=T*k,n[13]=(h*v*o-g*p*o+g*a*f-r*v*f-h*a*y+r*p*y)*k,n[14]=(g*u*o-l*v*o-g*a*c+r*v*c+l*a*y-r*u*y)*k,n[15]=(l*p*o-h*u*o+h*a*c-r*p*c-l*a*f+r*u*f)*k,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,l=r+r,u=a+a,c=o+o,d=r*l,h=r*u,p=r*c,f=a*u,m=a*c,g=o*c,v=s*l,y=s*u,b=s*c,_=n.x,x=n.y,w=n.z;return i[0]=(1-(f+g))*_,i[1]=(h+b)*_,i[2]=(p-y)*_,i[3]=0,i[4]=(h-b)*x,i[5]=(1-(d+g))*x,i[6]=(m+v)*x,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(d+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(){var e=new zt,t=new Qt;return function(n,i,r){var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),l=e.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),n.x=a[12],n.y=a[13],n.z=a[14],t.copy(this);var u=1/o,c=1/s,d=1/l;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,i.setFromRotationMatrix(t),r.x=o,r.y=s,r.z=l,this}}(),makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),d=-(a+r)/(a-r),h=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),l=1/(n-i),u=1/(a-r),c=(t+e)*s,d=(n+i)*l,h=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),$t.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],$t.DefaultOrder="XYZ",Object.defineProperties($t.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign($t.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Bt.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],l=r[1],u=r[5],c=r[9],d=r[2],h=r[6],p=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return void 0===Vt&&(Vt=new Qt),Vt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Vt,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return void 0===Gt&&(Gt=new jt),Gt.setFromEuler(this),this.setFromQuaternion(Gt,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new zt(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Jt.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var en,tn=0;function nn(){Object.defineProperty(this,"id",{value:tn++}),this.uuid=Bt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=nn.DefaultUp.clone();var e=new zt,t=new $t,n=new jt,i=new zt(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Qt},normalMatrix:{value:new Ht}}),this.matrix=new Qt,this.matrixWorld=new Qt,this.matrixAutoUpdate=nn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Jt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function rn(){nn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function an(e,t){this.min=void 0!==e?e:new zt(1/0,1/0,1/0),this.max=void 0!==t?t:new zt(-1/0,-1/0,-1/0)}function on(e,t){this.center=void 0!==e?e:new zt,this.radius=void 0!==t?t:0}function sn(e,t){this.origin=void 0!==e?e:new zt,this.direction=void 0!==t?t:new zt}function ln(e,t,n){this.a=void 0!==e?e:new zt,this.b=void 0!==t?t:new zt,this.c=void 0!==n?n:new zt}nn.DefaultUp=new zt(0,1,0),nn.DefaultMatrixAutoUpdate=!0,nn.prototype=Object.assign(Object.create(c.prototype),{constructor:nn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new jt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new jt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new zt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new zt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new zt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new zt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new zt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new zt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new zt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Qt;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new jt,t=new Qt,n=new zt,i=new zt;return function(r,a,o){r.isVector3?n.copy(r):n.set(r,a,o);var s=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(i,n,this.up):t.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent({type:"added"})):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent({type:"removed"})),this},attach:function(){var e=new Qt;return function(t){return this.updateWorldMatrix(!0,!1),e.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),e.multiply(t.parent.matrixWorld)),t.applyMatrix(e),t.updateWorldMatrix(!1,!1),this.add(t),this}}(),getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new zt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new zt,t=new zt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new jt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new zt,t=new jt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new zt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new zt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==wt&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];r(e.shapes,u)}else r(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(r(e.materials,this.material[s]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(t){var d=m(e.geometries),h=m(e.materials),p=m(e.textures),f=m(e.images);o=m(e.shapes);d.length>0&&(n.geometries=d),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),o.length>0&&(n.shapes=o)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),rn.prototype=Object.assign(Object.create(nn.prototype),{constructor:rn,isScene:!0,copy:function(e,t){return nn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=nn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(an.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],d=e[s+2];u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),u>r&&(r=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),d=e.getZ(s);u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),u>r&&(r=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new zt;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new zt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new zt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,i=new zt;function r(r){var a=r.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,n=o.length;t<n;t++)i.copy(o[t]),i.applyMatrix4(r.matrixWorld),e.expandByPoint(i)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)i.fromBufferAttribute(s,t).applyMatrix4(r.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new zt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new zt;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new zt,t=new zt,n=new zt,i=new zt,r=new zt,a=new zt,o=new zt,s=new zt,l=new zt,u=new zt;function c(i){var r,a;for(r=0,a=i.length-3;r<=a;r+=3){o.fromArray(i,r);var s=l.x*Math.abs(o.x)+l.y*Math.abs(o.y)+l.z*Math.abs(o.z),u=e.dot(o),c=t.dot(o),d=n.dot(o);if(Math.max(-Math.max(u,c,d),Math.min(u,c,d))>s)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),e.subVectors(o.a,s),t.subVectors(o.b,s),n.subVectors(o.c,s),i.subVectors(t,e),r.subVectors(n,t),a.subVectors(e,n);var d=[0,-i.z,i.y,0,-r.z,r.y,0,-a.z,a.y,i.z,0,-i.x,r.z,0,-r.x,a.z,0,-a.x,-i.y,i.x,0,-r.y,r.x,0,-a.y,a.x,0];return!!c(d)&&(!!c(d=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(i,r),c(d=[u.x,u.y,u.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new zt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new zt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new zt;return function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new zt,new zt,new zt,new zt,new zt,new zt,new zt,new zt];return function(t){return this.isEmpty()||(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e)),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(on.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){void 0===en&&(en=new an);var n=this.center;void 0!==t?n.copy(t):en.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new zt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new an),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(sn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new zt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new zt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new zt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new zt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new zt,t=new zt,n=new zt;return function(i,r,a,o){e.copy(i).add(r).multiplyScalar(.5),t.copy(r).sub(i).normalize(),n.copy(this.origin).sub(e);var s,l,u,c,d=.5*i.distanceTo(r),h=-this.direction.dot(t),p=n.dot(this.direction),f=-n.dot(t),m=n.lengthSq(),g=Math.abs(1-h*h);if(g>0)if(l=h*p-f,c=d*g,(s=h*f-p)>=0)if(l>=-c)if(l<=c){var v=1/g;u=(s*=v)*(s+h*(l*=v)+2*p)+l*(h*s+l+2*f)+m}else l=d,u=-(s=Math.max(0,-(h*l+p)))*s+l*(l+2*f)+m;else l=-d,u=-(s=Math.max(0,-(h*l+p)))*s+l*(l+2*f)+m;else l<=-c?u=-(s=Math.max(0,-(-h*d+p)))*s+(l=s>0?-d:Math.min(Math.max(-d,-f),d))*(l+2*f)+m:l<=c?(s=0,u=(l=Math.min(Math.max(-d,-f),d))*(l+2*f)+m):u=-(s=Math.max(0,-(h*d+p)))*s+(l=s>0?d:Math.min(Math.max(-d,-f),d))*(l+2*f)+m;else l=h>0?-d:d,u=-(s=Math.max(0,-(h*l+p)))*s+l*(l+2*f)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(l).add(e),u}}(),intersectSphere:function(){var e=new zt;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,a=t.radius*t.radius;if(r>a)return null;var o=Math.sqrt(a-r),s=i-o,l=i+o;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),u>=0?(r=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(){var e=new zt;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new zt,t=new zt,n=new zt,i=new zt;return function(r,a,o,s,l){t.subVectors(a,r),n.subVectors(o,r),i.crossVectors(t,n);var u,c=this.direction.dot(i);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,r);var d=u*this.direction.dot(n.crossVectors(e,n));if(d<0)return null;var h=u*this.direction.dot(t.cross(e));if(h<0)return null;if(d+h>c)return null;var p=-u*e.dot(i);return p<0?null:this.at(p/c,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(ln,{getNormal:function(){var e=new zt;return function(t,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new zt),r.subVectors(i,n),e.subVectors(t,n),r.cross(e);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}}(),getBarycoord:function(){var e=new zt,t=new zt,n=new zt;return function(i,r,a,o,s){e.subVectors(o,r),t.subVectors(a,r),n.subVectors(i,r);var l=e.dot(e),u=e.dot(t),c=e.dot(n),d=t.dot(t),h=t.dot(n),p=l*d-u*u;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new zt),0===p)return s.set(-2,-1,-1);var f=1/p,m=(d*c-u*h)*f,g=(l*h-u*c)*f;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new zt;return function(t,n,i,r){return ln.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new zt;return function(t,n,i,r,a,o,s,l){return this.getBarycoord(t,n,i,r,e),l.set(0,0),l.addScaledVector(a,e.x),l.addScaledVector(o,e.y),l.addScaledVector(s,e.z),l}}(),isFrontFacing:function(){var e=new zt,t=new zt;return function(n,i,r,a){return e.subVectors(r,i),t.subVectors(n,i),e.cross(t).dot(a)<0}}()}),Object.assign(ln.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new zt,t=new zt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new zt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ln.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new zt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ln.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,i,r){return ln.getUV(e,this.a,this.b,this.c,t,n,i,r)},containsPoint:function(e){return ln.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return ln.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new zt,t=new zt,n=new zt,i=new zt,r=new zt,a=new zt;return function(o,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new zt);var l,u,c=this.a,d=this.b,h=this.c;e.subVectors(d,c),t.subVectors(h,c),i.subVectors(o,c);var p=e.dot(i),f=t.dot(i);if(p<=0&&f<=0)return s.copy(c);r.subVectors(o,d);var m=e.dot(r),g=t.dot(r);if(m>=0&&g<=m)return s.copy(d);var v=p*g-m*f;if(v<=0&&p>=0&&m<=0)return l=p/(p-m),s.copy(c).addScaledVector(e,l);a.subVectors(o,h);var y=e.dot(a),b=t.dot(a);if(b>=0&&y<=b)return s.copy(h);var _=y*f-p*b;if(_<=0&&f>=0&&b<=0)return u=f/(f-b),s.copy(c).addScaledVector(t,u);var x=m*b-y*g;if(x<=0&&g-m>=0&&y-b>=0)return n.subVectors(h,d),u=(g-m)/(g-m+(y-b)),s.copy(d).addScaledVector(n,u);var w=1/(x+_+v);return l=_*w,u=v*w,s.copy(c).addScaledVector(e,l).addScaledVector(t,u)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var un={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cn(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function dn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function hn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function pn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function fn(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new zt,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new cn,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Object.assign(cn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Bt.euclideanModulo(e,1),t=Bt.clamp(t,0,1),n=Bt.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=dn(r,i,e+1/3),this.g=dn(r,i,e),this.b=dn(r,i,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=un[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=hn(e.r),this.g=hn(e.g),this.b=hn(e.b),this},copyLinearToSRGB:function(e){return this.r=pn(e.r),this.g=pn(e.g),this.b=pn(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),l=(s+o)/2;if(s===o)t=0,n=0;else{var u=o-s;switch(n=l<=.5?u/(o+s):u/(2-o-s),o){case i:t=(r-a)/u+(r<a?6:0);break;case r:t=(a-i)/u+2;break;case a:t=(i-r)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,i){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=i,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,i){this.getHSL(e),n.getHSL(t);var r=Bt.lerp(e.h,t.h,i),a=Bt.lerp(e.s,t.s,i),o=Bt.lerp(e.l,t.l,i);return this.setHSL(r,a,o),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Object.assign(fn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var mn=0;function gn(){Object.defineProperty(this,"id",{value:mn++}),this.uuid=Bt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=k,this.side=b,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=w,this.opacity=1,this.transparent=!1,this.blendSrc=j,this.blendDst=z,this.blendEquation=L,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=K,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=Ut,this.stencilRef=0,this.stencilMask=255,this.stencilFail=Nt,this.stencilZFail=Nt,this.stencilZPass=Nt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function vn(e){gn.call(this),this.type="MeshBasicMaterial",this.color=new cn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=te,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function yn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function bn(e,t,n){yn.call(this,new Int8Array(e),t,n)}function _n(e,t,n){yn.call(this,new Uint8Array(e),t,n)}function xn(e,t,n){yn.call(this,new Uint8ClampedArray(e),t,n)}function wn(e,t,n){yn.call(this,new Int16Array(e),t,n)}function Tn(e,t,n){yn.call(this,new Uint16Array(e),t,n)}function Sn(e,t,n){yn.call(this,new Int32Array(e),t,n)}function En(e,t,n){yn.call(this,new Uint32Array(e),t,n)}function kn(e,t,n){yn.call(this,new Float32Array(e),t,n)}function Cn(e,t,n){yn.call(this,new Float64Array(e),t,n)}function Mn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function An(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}gn.prototype=Object.assign(Object.create(c.prototype),{constructor:gn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==k&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==b&&(n.side=this.side),this.vertexColors!==w&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWrite=e.stencilWrite,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilMask=e.stencilMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),vn.prototype=Object.create(gn.prototype),vn.prototype.constructor=vn,vn.prototype.isMeshBasicMaterial=!0,vn.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(yn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(yn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new cn),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Ft),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new zt),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Xt),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),bn.prototype=Object.create(yn.prototype),bn.prototype.constructor=bn,_n.prototype=Object.create(yn.prototype),_n.prototype.constructor=_n,xn.prototype=Object.create(yn.prototype),xn.prototype.constructor=xn,wn.prototype=Object.create(yn.prototype),wn.prototype.constructor=wn,Tn.prototype=Object.create(yn.prototype),Tn.prototype.constructor=Tn,Sn.prototype=Object.create(yn.prototype),Sn.prototype.constructor=Sn,En.prototype=Object.create(yn.prototype),En.prototype.constructor=En,kn.prototype=Object.create(yn.prototype),kn.prototype.constructor=kn,Cn.prototype=Object.create(yn.prototype),Cn.prototype.constructor=Cn,Object.assign(Mn.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var c,d=e.morphNormals,h=d.length;if(h>0){c=[];for(u=0;u<h;u++)c[u]={name:d[u].name,data:[]};this.morphTargets.normal=c}var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,g=f.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var v=n[u];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=v.normal;this.normals.push(b,b,b)}var _,x=v.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=v.color;this.colors.push(w,w,w)}if(!0===a)void 0!==(_=r[0][u])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new Ft,new Ft,new Ft));if(!0===o)void 0!==(_=r[1][u])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new Ft,new Ft,new Ft));for(var T=0;T<l;T++){var S=s[T].vertices;t[T].data.push(S[v.a],S[v.b],S[v.c])}for(T=0;T<h;T++){var E=d[T].vertexNormals[u];c[T].data.push(E.a,E.b,E.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Pn=1;function Ln(){Object.defineProperty(this,"id",{value:Pn+=2}),this.uuid=Bt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function In(e,t){nn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ln,this.material=void 0!==t?t:new vn({color:16777215*Math.random()}),this.drawMode=wt,this.updateMorphTargets()}Ln.prototype=Object.assign(Object.create(c.prototype),{constructor:Ln,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(An(e)>65535?En:Tn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new yn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Ht).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new Ht).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Qt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Qt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Qt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Qt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Qt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new nn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new zt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new kn(3*t.vertices.length,3),i=new kn(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new kn(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new kn(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Mn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new yn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new yn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new yn(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new yn(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new yn(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[o],u=0,c=l.length;u<c;u++){var d=l[u],h=new kn(3*d.data.length,3);h.name=d.name,s.push(h.copyVector3sArray(d.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var p=new kn(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new kn(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new an;return function(){null===this.boundingBox&&(this.boundingBox=new an);var t=this.attributes.position,n=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(var i=0,r=n.length;i<r;i++){var a=n[i];e.setFromBufferAttribute(a),this.boundingBox.expandByPoint(e.min),this.boundingBox.expandByPoint(e.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new an,t=new an,n=new zt;return function(){null===this.boundingSphere&&(this.boundingSphere=new on);var i=this.attributes.position,r=this.morphAttributes.position;if(i){var a=this.boundingSphere.center;if(e.setFromBufferAttribute(i),r)for(var o=0,s=r.length;o<s;o++){var l=r[o];t.setFromBufferAttribute(l),e.expandByPoint(t.min),e.expandByPoint(t.max)}e.getCenter(a);var u=0;for(o=0,s=i.count;o<s;o++)n.fromBufferAttribute(i,o),u=Math.max(u,a.distanceToSquared(n));if(r)for(o=0,s=r.length;o<s;o++)for(var c=0,d=(l=r[o]).count;c<d;c++)n.fromBufferAttribute(l,c),u=Math.max(u,a.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new yn(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;var o,s,l,u=t.normal.array,c=new zt,d=new zt,h=new zt,p=new zt,f=new zt;if(e){var m=e.array;for(r=0,a=e.count;r<a;r+=3)o=3*m[r+0],s=3*m[r+1],l=3*m[r+2],c.fromArray(n,o),d.fromArray(n,s),h.fromArray(n,l),p.subVectors(h,d),f.subVectors(c,d),p.cross(f),u[o]+=p.x,u[o+1]+=p.y,u[o+2]+=p.z,u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z}else for(r=0,a=n.length;r<a;r+=9)c.fromArray(n,r),d.fromArray(n,r+3),h.fromArray(n,r+6),p.subVectors(h,d),f.subVectors(c,d),p.cross(f),u[r]=p.x,u[r+1]=p.y,u[r+2]=p.z,u[r+3]=p.x,u[r+4]=p.y,u[r+5]=p.z,u[r+6]=p.x,u[r+7]=p.y,u[r+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],o=a.array,s=a.itemSize*t,l=Math.min(o.length,r.length-s),u=0,c=s;u<l;u++,c++)r[c]=o[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new zt;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=new n.constructor(t.length*i),a=0,o=0,s=0,l=t.length;s<l;s++){a=t[s]*i;for(var u=0;u<i;u++)r[o++]=n[a++]}return new yn(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Ln,n=this.index.array,i=this.attributes;for(var r in i){var a=e(i[r],n);t.addAttribute(r,a)}var o=this.morphAttributes;for(r in o){for(var s=[],l=o[r],u=0,c=l.length;u<c;u++){a=e(l[u],n);s.push(a)}t.morphAttributes[r]=s}for(var d=this.groups,h=(u=0,d.length);u<h;u++){var p=d[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var a=(h=r[n]).toJSON();""!==h.name&&(a.name=h.name),e.data.attributes[n]=a}var o={},s=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,d=l.length;c<d;c++){var h;a=(h=l[c]).toJSON();""!==h.name&&(a.name=h.name),u.push(a)}u.length>0&&(o[n]=u,s=!0)}s&&(e.data.morphAttributes=o);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new Ln).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,i=c.length;n<i;n++){var d=c[n];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),In.prototype=Object.assign(Object.create(nn.prototype),{constructor:In,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return nn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var e=new Qt,t=new sn,n=new on,i=new zt,r=new zt,a=new zt,o=new zt,s=new zt,l=new zt,u=new zt,c=new zt,d=new zt,h=new Ft,p=new Ft,f=new Ft,m=new zt,g=new zt;function v(e,t,n,i,r,a,o,s){if(null===(t.side===_?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==x,s)))return null;g.copy(s),g.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(g);return l<n.near||l>n.far?null:{distance:l,point:g.clone(),object:e}}function y(e,t,n,g,y,b,_,x,w,T,S){i.fromBufferAttribute(y,w),r.fromBufferAttribute(y,T),a.fromBufferAttribute(y,S);var E=e.morphTargetInfluences;if(t.morphTargets&&b&&E){u.set(0,0,0),c.set(0,0,0),d.set(0,0,0);for(var k=0,C=b.length;k<C;k++){var M=E[k],A=b[k];0!==M&&(o.fromBufferAttribute(A,w),s.fromBufferAttribute(A,T),l.fromBufferAttribute(A,S),u.addScaledVector(o.sub(i),M),c.addScaledVector(s.sub(r),M),d.addScaledVector(l.sub(a),M))}i.add(u),r.add(c),a.add(d)}var P=v(e,t,n,g,i,r,a,m);if(P){_&&(h.fromBufferAttribute(_,w),p.fromBufferAttribute(_,T),f.fromBufferAttribute(_,S),P.uv=ln.getUV(m,i,r,a,h,p,f,new Ft)),x&&(h.fromBufferAttribute(x,w),p.fromBufferAttribute(x,T),f.fromBufferAttribute(x,S),P.uv2=ln.getUV(m,i,r,a,h,p,f,new Ft));var L=new fn(w,T,S);ln.getNormal(i,r,a,L.normal),P.face=L}return P}return function(i,r){var a,o=this.geometry,s=this.material,l=this.matrixWorld;if(void 0!==s&&(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)&&(e.getInverse(l),t.copy(i.ray).applyMatrix4(e),null===o.boundingBox||!1!==t.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var u,c,d,g,b,_,x,w,T,S=o.index,E=o.attributes.position,k=o.morphAttributes.position,C=o.attributes.uv,M=o.attributes.uv2,A=o.groups,P=o.drawRange;if(null!==S)if(Array.isArray(s))for(g=0,_=A.length;g<_;g++)for(T=s[(w=A[g]).materialIndex],b=Math.max(w.start,P.start),x=Math.min(w.start+w.count,P.start+P.count);b<x;b+=3)u=S.getX(b),c=S.getX(b+1),d=S.getX(b+2),(a=y(this,T,i,t,E,k,C,M,u,c,d))&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=w.materialIndex,r.push(a));else for(g=Math.max(0,P.start),_=Math.min(S.count,P.start+P.count);g<_;g+=3)u=S.getX(g),c=S.getX(g+1),d=S.getX(g+2),(a=y(this,s,i,t,E,k,C,M,u,c,d))&&(a.faceIndex=Math.floor(g/3),r.push(a));else if(void 0!==E)if(Array.isArray(s))for(g=0,_=A.length;g<_;g++)for(T=s[(w=A[g]).materialIndex],b=Math.max(w.start,P.start),x=Math.min(w.start+w.count,P.start+P.count);b<x;b+=3)(a=y(this,T,i,t,E,k,C,M,u=b,c=b+1,d=b+2))&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=w.materialIndex,r.push(a));else for(g=Math.max(0,P.start),_=Math.min(E.count,P.start+P.count);g<_;g+=3)(a=y(this,s,i,t,E,k,C,M,u=g,c=g+1,d=g+2))&&(a.faceIndex=Math.floor(g/3),r.push(a))}else if(o.isGeometry){var L,I,O,R,D=Array.isArray(s),N=o.vertices,U=o.faces,B=o.faceVertexUvs[0];B.length>0&&(R=B);for(var F=0,j=U.length;F<j;F++){var z=U[F],H=D?s[z.materialIndex]:s;if(void 0!==H&&(L=N[z.a],I=N[z.b],O=N[z.c],a=v(this,H,i,t,L,I,O,m))){if(R&&R[F]){var V=R[F];h.copy(V[0]),p.copy(V[1]),f.copy(V[2]),a.uv=ln.getUV(m,L,I,O,h,p,f,new Ft)}a.face=z,a.faceIndex=F,r.push(a)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var On=0;function Rn(){Object.defineProperty(this,"id",{value:On+=2}),this.uuid=Bt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Dn(e,t,n,i,r,a){Rn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new Nn(e,t,n,i,r,a)),this.mergeVertices()}function Nn(e,t,n,i,r,a){Ln.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var o=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var s=[],l=[],u=[],c=[],d=0,h=0;function p(e,t,n,i,r,a,p,f,m,g,v){var y,b,_=a/m,x=p/g,w=a/2,T=p/2,S=f/2,E=m+1,k=g+1,C=0,M=0,A=new zt;for(b=0;b<k;b++){var P=b*x-T;for(y=0;y<E;y++){var L=y*_-w;A[e]=L*i,A[t]=P*r,A[n]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,u.push(A.x,A.y,A.z),c.push(y/m),c.push(1-b/g),C+=1}}for(b=0;b<g;b++)for(y=0;y<m;y++){var I=d+y+E*b,O=d+y+E*(b+1),R=d+(y+1)+E*(b+1),D=d+(y+1)+E*b;s.push(I,O,D),s.push(O,R,D),M+=6}o.addGroup(h,M,v),h+=M,d+=C}p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,i,a,2),p("x","z","y",1,-1,e,n,-t,i,a,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new kn(l,3)),this.addAttribute("normal",new kn(u,3)),this.addAttribute("uv",new kn(c,2))}function Un(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function Bn(e){for(var t={},n=0;n<e.length;n++){var i=Un(e[n]);for(var r in i)t[r]=i[r]}return t}Rn.prototype=Object.assign(Object.create(c.prototype),{constructor:Rn,isGeometry:!0,applyMatrix:function(e){for(var t=(new Ht).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Qt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Qt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Qt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Qt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Qt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new nn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<r.length;u+=3)t.vertices.push((new zt).fromArray(r,u)),void 0!==o&&t.colors.push((new cn).fromArray(o,u));function c(e,n,i,r){var u=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],c=new fn(e,n,i,void 0===a?[]:[(new zt).fromArray(a,3*e),(new zt).fromArray(a,3*n),(new zt).fromArray(a,3*i)],u,r);t.faces.push(c),void 0!==s&&t.faceVertexUvs[0].push([(new Ft).fromArray(s,2*e),(new Ft).fromArray(s,2*n),(new Ft).fromArray(s,2*i)]),void 0!==l&&t.faceVertexUvs[1].push([(new Ft).fromArray(l,2*e),(new Ft).fromArray(l,2*n),(new Ft).fromArray(l,2*i)])}var d=e.groups;if(d.length>0)for(u=0;u<d.length;u++)for(var h=d[u],p=h.start,f=p,m=p+h.count;f<m;f+=3)void 0!==n?c(n[f],n[f+1],n[f+2],h.materialIndex):c(f,f+1,f+2,h.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(u=0;u<r.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new zt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Qt;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new zt,t=new zt,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new zt;if(e){var s,l,u,c=new zt,d=new zt;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),d.subVectors(s,l),c.cross(d),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var h=(a=this.faces[i]).vertexNormals;3===h.length?(h[0].copy(o[a.a]),h[1].copy(o[a.b]),h[2].copy(o[a.c])):(h[0]=o[a.a].clone(),h[1]=o[a.b].clone(),h[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var a=new Rn;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new zt,u={a:new zt,b:new zt,c:new zt},o.push(l),s.push(u)}var l,u,c=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new an),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new on),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Ht).getNormalMatrix(t));for(var d=0,h=o.length;d<h;d++){var p=o[d].clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(d=0,h=c.length;d<h;d++)u.push(c[d].clone());for(d=0,h=l.length;d<h;d++){var f,m,g,v=l[d],y=v.vertexNormals,b=v.vertexColors;(f=new fn(v.a+r,v.b+r,v.c+r)).normal.copy(v.normal),void 0!==i&&f.normal.applyMatrix3(i).normalize();for(var _=0,x=y.length;_<x;_++)m=y[_].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),f.vertexNormals.push(m);f.color.copy(v.color);for(_=0,x=b.length;_<x;_++)g=b[_],f.vertexColors.push(g.clone());f.materialIndex=v.materialIndex+n,s.push(f)}for(d=0,h=e.faceVertexUvs.length;d<h;d++){var w=e.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(_=0,x=w.length;_<x;_++){for(var T=w[_],S=[],E=0,k=T.length;E<k;E++)S.push(T[E].clone());this.faceVertexUvs[d].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,a,o,s,l={},u=[],c=[],d=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var h=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(a[p]===a[(p+1)%3]){h.push(n);break}}for(n=h.length-1;n>=0;n--){var f=h[n];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new zt(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),o&&o.length===t&&(r=[]);for(n=0;n<t;n++){var s=e[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},d=[],h={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,b=0;if(b=T(b,0,0),b=T(b,1,!0),b=T(b,2,!1),b=T(b,3,f),b=T(b,4,m),b=T(b,5,g),b=T(b,6,v),b=T(b,7,y),o.push(b),o.push(p.a,p.b,p.c),o.push(p.materialIndex),f){var _=this.faceVertexUvs[0][r];o.push(k(_[0]),k(_[1]),k(_[2]))}if(m&&o.push(S(p.normal)),g){var x=p.vertexNormals;o.push(S(x[0]),S(x[1]),S(x[2]))}if(v&&o.push(E(p.color)),y){var w=p.vertexColors;o.push(E(w[0]),E(w[1]),E(w[2]))}}function T(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function k(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=d.length/2,d.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=i,e.data.normals=s,u.length>0&&(e.data.colors=u),d.length>0&&(e.data.uvs=[d]),e.data.faces=o,e},clone:function(){return(new Rn).copy(this)},copy:function(e){var t,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=c.length;i<r;i++){var d=c[i],h=[];for(a=0,o=d.length;a<o;a++){var p=d[a];h.push(p.clone())}this.faceVertexUvs[t].push(h)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,r=f[t].vertices.length;i<r;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,r=f[t].normals.length;i<r;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],i=0,r=g[t].vertexNormals.length;i<r;i++){var y=g[t].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],i=0,r=g[t].faceNormals.length;i<r;i++)v.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(v)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var x=e.skinIndices;for(t=0,n=x.length;t<n;t++)this.skinIndices.push(x[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var T=e.boundingBox;null!==T&&(this.boundingBox=T.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Dn.prototype=Object.create(Rn.prototype),Dn.prototype.constructor=Dn,Nn.prototype=Object.create(Ln.prototype),Nn.prototype.constructor=Nn;var Fn="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",jn="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function zn(e){gn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Fn,this.fragmentShader=jn,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Hn(){nn.call(this),this.type="Camera",this.matrixWorldInverse=new Qt,this.projectionMatrix=new Qt,this.projectionMatrixInverse=new Qt}function Vn(e,t,n,i){Hn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}zn.prototype=Object.create(gn.prototype),zn.prototype.constructor=zn,zn.prototype.isShaderMaterial=!0,zn.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Un(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},zn.prototype.toJSON=function(e){var t=gn.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return Object.keys(r).length>0&&(t.extensions=r),t},Hn.prototype=Object.assign(Object.create(nn.prototype),{constructor:Hn,isCamera:!0,copy:function(e,t){return nn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new zt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){nn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Vn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Vn,isPerspectiveCamera:!0,copy:function(e,t){return Hn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Bt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Bt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Bt.RAD2DEG*Math.atan(Math.tan(.5*Bt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Bt.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=nn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var Gn=90,Wn=1;function Zn(e,t,n,i){nn.call(this),this.type="CubeCamera";var r=new Vn(Gn,Wn,e,t);r.up.set(0,-1,0),r.lookAt(new zt(1,0,0)),this.add(r);var a=new Vn(Gn,Wn,e,t);a.up.set(0,-1,0),a.lookAt(new zt(-1,0,0)),this.add(a);var o=new Vn(Gn,Wn,e,t);o.up.set(0,0,1),o.lookAt(new zt(0,1,0)),this.add(o);var s=new Vn(Gn,Wn,e,t);s.up.set(0,0,-1),s.lookAt(new zt(0,-1,0)),this.add(s);var l=new Vn(Gn,Wn,e,t);l.up.set(0,-1,0),l.lookAt(new zt(0,0,1)),this.add(l);var u=new Vn(Gn,Wn,e,t);u.up.set(0,-1,0),u.lookAt(new zt(0,0,-1)),this.add(u),i=i||{format:Fe,magFilter:Te,minFilter:Te},this.renderTarget=new qn(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),i=this.renderTarget,c=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,a),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,s),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=c,e.setRenderTarget(i,5),e.render(t,u),e.setRenderTarget(n)},this.clear=function(e,t,n,i){for(var r=e.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)e.setRenderTarget(a,o),e.clear(t,n,i);e.setRenderTarget(r)}}function qn(e,t,n){Yt.call(this,e,t,n)}function Xn(e,t,n,i,r,a,o,s,l,u,c,d){qt.call(this,null,a,o,s,l,u,i,r,c,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:_e,this.minFilter=void 0!==u?u:_e,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Yn(e,t){this.normal=void 0!==e?e:new zt(1,0,0),this.constant=void 0!==t?t:0}function Kn(e,t,n,i,r,a){this.planes=[void 0!==e?e:new Yn,void 0!==t?t:new Yn,void 0!==n?n:new Yn,void 0!==i?i:new Yn,void 0!==r?r:new Yn,void 0!==a?a:new Yn]}Zn.prototype=Object.create(nn.prototype),Zn.prototype.constructor=Zn,qn.prototype=Object.create(Yt.prototype),qn.prototype.constructor=qn,qn.prototype.isWebGLRenderTargetCube=!0,qn.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new rn,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new zn({type:"CubemapFromEquirect",uniforms:Un(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:_,blending:E});r.uniforms.tEquirect.value=t;var a=new In(new Nn(5,5,5),r);n.add(a);var o=new Zn(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(e,n),a.geometry.dispose(),a.material.dispose(),this},Xn.prototype=Object.create(qt.prototype),Xn.prototype.constructor=Xn,Xn.prototype.isDataTexture=!0,Object.assign(Yn.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new zt,t=new zt;return function(n,i,r){var a=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new zt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new zt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new zt);var i=t.delta(e),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/r;return a<0||a>1?void 0:n.copy(i).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new zt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new zt,t=new Ht;return function(n,i){var r=i||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),o=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Kn.prototype,{set:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-i,c-s,f-d,y-m).normalize(),t[1].setComponents(o+i,c+s,f+d,y+m).normalize(),t[2].setComponents(o+r,c+l,f+h,y+g).normalize(),t[3].setComponents(o-r,c-l,f-h,y-g).normalize(),t[4].setComponents(o-a,c-u,f-p,y-v).normalize(),t[5].setComponents(o+a,c+u,f+p,y+v).normalize(),this},intersectsObject:function(){var e=new on;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new on;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(){var e=new zt;return function(t){for(var n=this.planes,i=0;i<6;i++){var r=n[i];if(e.x=r.normal.x>0?t.max.x:t.min.x,e.y=r.normal.y>0?t.max.y:t.min.y,e.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Qn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},$n={common:{diffuse:{value:new cn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ht},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new cn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new cn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Ht}},sprite:{diffuse:{value:new cn(15658734)},opacity:{value:1},center:{value:new Ft(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Ht}}},Jn={basic:{uniforms:Bn([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.fog]),vertexShader:Qn.meshbasic_vert,fragmentShader:Qn.meshbasic_frag},lambert:{uniforms:Bn([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.fog,$n.lights,{emissive:{value:new cn(0)}}]),vertexShader:Qn.meshlambert_vert,fragmentShader:Qn.meshlambert_frag},phong:{uniforms:Bn([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.gradientmap,$n.fog,$n.lights,{emissive:{value:new cn(0)},specular:{value:new cn(1118481)},shininess:{value:30}}]),vertexShader:Qn.meshphong_vert,fragmentShader:Qn.meshphong_frag},standard:{uniforms:Bn([$n.common,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.roughnessmap,$n.metalnessmap,$n.fog,$n.lights,{emissive:{value:new cn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Qn.meshphysical_vert,fragmentShader:Qn.meshphysical_frag},matcap:{uniforms:Bn([$n.common,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.fog,{matcap:{value:null}}]),vertexShader:Qn.meshmatcap_vert,fragmentShader:Qn.meshmatcap_frag},points:{uniforms:Bn([$n.points,$n.fog]),vertexShader:Qn.points_vert,fragmentShader:Qn.points_frag},dashed:{uniforms:Bn([$n.common,$n.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qn.linedashed_vert,fragmentShader:Qn.linedashed_frag},depth:{uniforms:Bn([$n.common,$n.displacementmap]),vertexShader:Qn.depth_vert,fragmentShader:Qn.depth_frag},normal:{uniforms:Bn([$n.common,$n.bumpmap,$n.normalmap,$n.displacementmap,{opacity:{value:1}}]),vertexShader:Qn.normal_vert,fragmentShader:Qn.normal_frag},sprite:{uniforms:Bn([$n.sprite,$n.fog]),vertexShader:Qn.sprite_vert,fragmentShader:Qn.sprite_frag},background:{uniforms:{uvTransform:{value:new Ht},t2D:{value:null}},vertexShader:Qn.background_vert,fragmentShader:Qn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qn.cube_vert,fragmentShader:Qn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qn.equirect_vert,fragmentShader:Qn.equirect_frag},distanceRGBA:{uniforms:Bn([$n.common,$n.displacementmap,{referencePosition:{value:new zt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qn.distanceRGBA_vert,fragmentShader:Qn.distanceRGBA_frag},shadow:{uniforms:Bn([$n.lights,$n.fog,{color:{value:new cn(0)},opacity:{value:1}}]),vertexShader:Qn.shadow_vert,fragmentShader:Qn.shadow_frag}};function ei(){var e=null,t=!1,n=null;function i(r,a){!1!==t&&(n(r,a),e.requestAnimationFrame(i))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(i),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ti(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?35048:35044,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(!function(t,n,i){var r=n.array,a=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,35044):-1===a.count?e.bufferSubData(i,0,r):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function ni(e,t,n,i){Rn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new ii(e,t,n,i)),this.mergeVertices()}function ii(e,t,n,i){Ln.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,a,o=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,d=u+1,h=e/l,p=t/u,f=[],m=[],g=[],v=[];for(a=0;a<d;a++){var y=a*p-s;for(r=0;r<c;r++){var b=r*h-o;m.push(b,-y,0),g.push(0,0,1),v.push(r/l),v.push(1-a/u)}}for(a=0;a<u;a++)for(r=0;r<l;r++){var _=r+c*a,x=r+c*(a+1),w=r+1+c*(a+1),T=r+1+c*a;f.push(_,x,T),f.push(x,w,T)}this.setIndex(f),this.addAttribute("position",new kn(m,3)),this.addAttribute("normal",new kn(g,3)),this.addAttribute("uv",new kn(v,2))}function ri(e,t,n,i){var r,a,o=new cn(0),s=0,l=null,u=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),c(o,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){c(o,s=e)},render:function(t,i,d,h){var p=i.background,f=e.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(c(o,s),l=null,u=0):p&&p.isColor&&(c(p,1),h=!0,l=null,u=0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===a&&((a=new In(new Nn(1,1,1),new zn({type:"BackgroundCubeMaterial",uniforms:Un(Jn.cube.uniforms),vertexShader:Jn.cube.vertexShader,fragmentShader:Jn.cube.fragmentShader,side:_,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var g=p.isWebGLRenderTargetCube?p.texture:p;a.material.uniforms.tCube.value=g,a.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,l===p&&u===g.version||(a.material.needsUpdate=!0,l=p,u=g.version),t.unshift(a,a.geometry,a.material,0,0,null)}else p&&p.isTexture&&(void 0===r&&((r=new In(new ii(2,2),new zn({type:"BackgroundMaterial",uniforms:Un(Jn.background.uniforms),vertexShader:Jn.background.vertexShader,fragmentShader:Jn.background.fragmentShader,side:b,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),r.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&u===p.version||(r.material.needsUpdate=!0,l=p,u=p.version),t.unshift(r,r.geometry,r.material,0,0,null))}}}function ai(e,t,n,i){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(a,o,s){var l;if(i.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,o,s,a.maxInstancedCount),n.update(s,r,a.maxInstancedCount)}}function oi(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=c>0,y=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?e.getParameter(36183):0}}function si(){var e=this,t=null,n=0,i=!1,r=!1,a=new Yn,o=new Ht,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,i,r){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==r||null===u){var c=i+4*l,d=n.matrixWorldInverse;o.getNormalMatrix(d),(null===u||u.length<c)&&(u=new Float32Array(c));for(var h=0,p=i;h!==l;++h,p+=4)a.copy(t[h]).applyMatrix4(d,o),a.normal.toArray(u,p),u[p+3]=a.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,a){var o=0!==e.length||r||0!==n||i;return i=r,t=u(e,a,0),n=e.length,o},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,a,o,c,d,h){if(!i||null===e||0===e.length||r&&!o)r?u(null):l();else{var p=r?0:n,f=4*p,m=d.clippingState||null;s.value=m,m=u(e,c,f,h);for(var g=0;g!==f;++g)m[g]=t[g];d.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=p}}}function li(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function ui(e,t,n){var i={},r={};function a(e){var o=e.target,s=i[o.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);o.removeEventListener("dispose",a),delete i[o.id];var u=r[s.id];u&&(t.remove(u),delete r[s.id]),n.memory.geometries--}function o(e){var n=[],i=e.index,a=e.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],d=s[l+1],h=s[l+2];n.push(c,d,d,h,h,c)}}else{s=a.array;o=a.version;for(l=0,u=s.length/3-1;l<u;l+=3){c=l+0,d=l+1,h=l+2;n.push(c,d,d,h,h,c)}}var p=new(An(n)>65535?En:Tn)(n,1);p.version=o,t.update(p,34963);var f=r[e.id];f&&t.remove(f),r[e.id]=p}return{get:function(e,t){var r=i[t.id];return r||(t.addEventListener("dispose",a),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ln).setFromObject(e)),r=t._bufferGeometry),i[t.id]=r,n.memory.geometries++,r)},update:function(e){var n=e.index,i=e.attributes;for(var r in null!==n&&t.update(n,34963),i)t.update(i[r],34962);var a=e.morphAttributes;for(var r in a)for(var o=a[r],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=r[e.id];if(t){var n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return r[e.id]}}}function ci(e,t,n,i){var r,a,o;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*o),n.update(i,r)},this.renderInstances=function(s,l,u){var c;if(i.isWebGL2)c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,u,a,l*o,s.maxInstancedCount),n.update(u,r,s.maxInstancedCount)}}function di(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(i=i||1,t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 5:case 6:t.triangles+=i*(e-2);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function hi(e,t){return Math.abs(t[1])-Math.abs(e[1])}function pi(e){var t={},n=new Float32Array(8);return{update:function(i,r,a,o){var s=i.morphTargetInfluences,l=s.length,u=t[r.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[r.id]=u}var d=a.morphTargets&&r.morphAttributes.position,h=a.morphNormals&&r.morphAttributes.normal;for(c=0;c<l;c++){0!==(p=u[c])[1]&&(d&&r.removeAttribute("morphTarget"+c),h&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++){(p=u[c])[0]=c,p[1]=s[c]}for(u.sort(hi),c=0;c<8;c++){var p;if(p=u[c]){var f=p[0],m=p[1];if(m){d&&r.addAttribute("morphTarget"+c,d[f]),h&&r.addAttribute("morphNormal"+c,h[f]),n[c]=m;continue}}n[c]=0}o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function fi(e,t){var n={};return{update:function(i){var r=t.render.frame,a=i.geometry,o=e.get(i,a);return n[o.id]!==r&&(a.isGeometry&&o.updateFromObject(i),e.update(o),n[o.id]=r),o},dispose:function(){n={}}}}function mi(e,t,n,i,r,a,o,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:ce,o=void 0!==o?o:Fe,qt.call(this,e,t,n,i,r,a,o,s,l,u),this.flipY=!1}function gi(e,t,n,i){qt.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=_e,this.minFilter=_e,this.wrapR=ye,this.generateMipmaps=!1,this.flipY=!1}function vi(e,t,n,i){qt.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=_e,this.minFilter=_e,this.wrapR=ye,this.generateMipmaps=!1,this.flipY=!1}Jn.physical={uniforms:Bn([Jn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Qn.meshphysical_vert,fragmentShader:Qn.meshphysical_frag},ni.prototype=Object.create(Rn.prototype),ni.prototype.constructor=ni,ii.prototype=Object.create(Ln.prototype),ii.prototype.constructor=ii,mi.prototype=Object.create(qt.prototype),mi.prototype.constructor=mi,mi.prototype.isCubeTexture=!0,Object.defineProperty(mi.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),gi.prototype=Object.create(qt.prototype),gi.prototype.constructor=gi,gi.prototype.isDataTexture2DArray=!0,vi.prototype=Object.create(qt.prototype),vi.prototype.constructor=vi,vi.prototype.isDataTexture3D=!0;var yi=new qt,bi=new gi,_i=new vi,xi=new mi,wi=[],Ti=[],Si=new Float32Array(16),Ei=new Float32Array(9),ki=new Float32Array(4);function Ci(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=wi[r];if(void 0===a&&(a=new Float32Array(r),wi[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Mi(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Ai(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function Pi(e,t){var n=Ti[t];void 0===n&&(n=new Int32Array(t),Ti[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Li(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ii(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Mi(n,t))return;e.uniform2fv(this.addr,t),Ai(n,t)}}function Oi(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Mi(n,t))return;e.uniform3fv(this.addr,t),Ai(n,t)}}function Ri(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Mi(n,t))return;e.uniform4fv(this.addr,t),Ai(n,t)}}function Di(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Mi(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ai(n,t)}else{if(Mi(n,i))return;ki.set(i),e.uniformMatrix2fv(this.addr,!1,ki),Ai(n,i)}}function Ni(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Mi(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ai(n,t)}else{if(Mi(n,i))return;Ei.set(i),e.uniformMatrix3fv(this.addr,!1,Ei),Ai(n,i)}}function Ui(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Mi(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ai(n,t)}else{if(Mi(n,i))return;Si.set(i),e.uniformMatrix4fv(this.addr,!1,Si),Ai(n,i)}}function Bi(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||yi,r)}function Fi(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||bi,r)}function ji(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||_i,r)}function zi(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||xi,r)}function Hi(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Vi(e,t){var n=this.cache;Mi(n,t)||(e.uniform2iv(this.addr,t),Ai(n,t))}function Gi(e,t){var n=this.cache;Mi(n,t)||(e.uniform3iv(this.addr,t),Ai(n,t))}function Wi(e,t){var n=this.cache;Mi(n,t)||(e.uniform4iv(this.addr,t),Ai(n,t))}function Zi(e,t){e.uniform1fv(this.addr,t)}function qi(e,t){e.uniform1iv(this.addr,t)}function Xi(e,t){e.uniform2iv(this.addr,t)}function Yi(e,t){e.uniform3iv(this.addr,t)}function Ki(e,t){e.uniform4iv(this.addr,t)}function Qi(e,t){var n=Ci(t,this.size,2);e.uniform2fv(this.addr,n)}function $i(e,t){var n=Ci(t,this.size,3);e.uniform3fv(this.addr,n)}function Ji(e,t){var n=Ci(t,this.size,4);e.uniform4fv(this.addr,n)}function er(e,t){var n=Ci(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function tr(e,t){var n=Ci(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function nr(e,t){var n=Ci(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ir(e,t,n){var i=t.length,r=Pi(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(t[a]||yi,r[a])}function rr(e,t,n){var i=t.length,r=Pi(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(t[a]||xi,r[a])}function ar(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Li;case 35664:return Ii;case 35665:return Oi;case 35666:return Ri;case 35674:return Di;case 35675:return Ni;case 35676:return Ui;case 35678:case 36198:return Bi;case 35679:return ji;case 35680:return zi;case 36289:return Fi;case 5124:case 35670:return Hi;case 35667:case 35671:return Vi;case 35668:case 35672:return Gi;case 35669:case 35673:return Wi}}(t.type)}function or(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Zi;case 35664:return Qi;case 35665:return $i;case 35666:return Ji;case 35674:return er;case 35675:return tr;case 35676:return nr;case 35678:return ir;case 35680:return rr;case 5124:case 35670:return qi;case 35667:case 35671:return Xi;case 35668:case 35672:return Yi;case 35669:case 35673:return Ki}}(t.type)}function sr(e){this.id=e,this.seq=[],this.map={}}or.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Ai(t,e)},sr.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}};var lr=/([\w\d_]+)(\])?(\[|\.)?/g;function ur(e,t){e.seq.push(t),e.map[t.id]=t}function cr(e,t,n){var i=e.name,r=i.length;for(lr.lastIndex=0;;){var a=lr.exec(i),o=lr.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){ur(n,void 0===u?new ar(s,e,t):new or(s,e,t));break}var c=n.map[s];void 0===c&&ur(n,c=new sr(s)),n=c}}function dr(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var r=e.getActiveUniform(t,i);cr(r,e.getUniformLocation(t,r.name),this)}}function hr(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}dr.prototype.setValue=function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)},dr.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},dr.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},dr.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var pr=0;function fr(e){switch(e){case Et:return["Linear","( value )"];case kt:return["sRGB","( value )"];case Mt:return["RGBE","( value )"];case At:return["RGBM","( value, 7.0 )"];case Pt:return["RGBM","( value, 16.0 )"];case Lt:return["RGBD","( value, 256.0 )"];case Ct:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function mr(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function gr(e,t){var n=fr(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function vr(e,t){var n=fr(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function yr(e,t){var n;switch(t){case ae:n="Linear";break;case oe:n="Reinhard";break;case se:n="Uncharted2";break;case le:n="OptimizedCineon";break;case ue:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function br(e){return""!==e}function _r(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function xr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function wr(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=Qn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return wr(n)}))}function Tr(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r}))}function Sr(e,t,n,i,r,a,o){var s=e.getContext(),l=i.defines,u=r.vertexShader,c=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";a.shadowMapType===v?d="SHADOWMAP_TYPE_PCF":a.shadowMapType===y&&(d="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(i.envMap.mapping){case ce:case de:h="ENVMAP_TYPE_CUBE";break;case me:case ge:h="ENVMAP_TYPE_CUBE_UV";break;case he:case pe:h="ENVMAP_TYPE_EQUIREC";break;case fe:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case de:case pe:p="ENVMAP_MODE_REFRACTION"}switch(i.combine){case te:f="ENVMAP_BLENDING_MULTIPLY";break;case ne:f="ENVMAP_BLENDING_MIX";break;case ie:f="ENVMAP_BLENDING_ADD"}}var m,g,b=e.gammaFactor>0?e.gammaFactor:1,_=o.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(br).join("\n")}(i.extensions,a,t),x=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(l),w=s.createProgram();if(i.isRawShaderMaterial?((m=[x].filter(br).join("\n")).length>0&&(m+="\n"),(g=[_,x].filter(br).join("\n")).length>0&&(g+="\n")):(m=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,x,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(br).join("\n"),g=[_,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,x,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.envMap?"#define "+p:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==re?"#define TONE_MAPPING":"",a.toneMapping!==re?Qn.tonemapping_pars_fragment:"",a.toneMapping!==re?yr("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Qn.encodings_pars_fragment:"",a.mapEncoding?gr("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?gr("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?gr("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?gr("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?vr("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(br).join("\n")),u=xr(u=_r(u=wr(u),a),a),c=xr(c=_r(c=wr(c),a),a),u=Tr(u),c=Tr(c),o.isWebGL2&&!i.isRawShaderMaterial){var T=!1,S=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==u.match(S)&&null!==c.match(S)&&(T=!0,u=u.replace(S,""),c=c.replace(S,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#version 300 es\n","#define varying in",T?"":"out highp vec4 pc_fragColor;",T?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var E,k,C=g+c,M=hr(s,35633,m+u),A=hr(s,35632,C);if(s.attachShader(w,M),s.attachShader(w,A),void 0!==i.index0AttributeName?s.bindAttribLocation(w,0,i.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(w,0,"position"),s.linkProgram(w),e.debug.checkShaderErrors){var P=s.getProgramInfoLog(w).trim(),L=s.getShaderInfoLog(M).trim(),I=s.getShaderInfoLog(A).trim(),O=!0,R=!0;if(!1===s.getProgramParameter(w,35714)){O=!1;var D=mr(s,M,"vertex"),N=mr(s,A,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(w,35715),"gl.getProgramInfoLog",P,D,N)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==L&&""!==I||(R=!1);R&&(this.diagnostics={runnable:O,material:i,programLog:P,vertexShader:{log:L,prefix:m},fragmentShader:{log:I,prefix:g}})}return s.deleteShader(M),s.deleteShader(A),this.getUniforms=function(){return void 0===E&&(E=new dr(s,w)),E},this.getAttributes=function(){return void 0===k&&(k=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r).name;n[a]=e.getAttribLocation(t,a)}return n}(s,w)),k},this.destroy=function(){s.deleteProgram(w),this.program=void 0},this.name=r.name,this.id=pr++,this.code=n,this.usedTimes=1,this.program=w,this.vertexShader=M,this.fragmentShader=A,this}function Er(e,t,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Et,n===Et&&t&&(n=Ct),n}this.getParameters=function(t,i,a,s,l,u,c){var d=r[t.type],h=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),a=Math.min(r,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(c):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var f=e.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:o(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:o(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===me||t.envMap.mapping===ge),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Dt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===x,flipSided:t.side===_,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.push(e.gammaFactor),i.join()},this.acquireProgram=function(r,a,o,s){for(var l,u=0,c=i.length;u<c;u++){var d=i[u];if(d.code===s){++(l=d).usedTimes;break}}return void 0===l&&(l=new Sr(e,t,s,r,a,o,n),i.push(l)),l},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function kr(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Cr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Mr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ar(){var e=[],t=0,n=[],i=[],r={id:-1};function a(n,i,a,o,s,l){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:i,material:a,program:a.program||r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:l},e[t]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=a,u.program=a.program||r,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=s,u.group=l),t++,u}return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(e,t,r,o,s,l){var u=a(e,t,r,o,s,l);(!0===r.transparent?i:n).push(u)},unshift:function(e,t,r,o,s,l){var u=a(e,t,r,o,s,l);(!0===r.transparent?i:n).unshift(u)},sort:function(){n.length>1&&n.sort(Cr),i.length>1&&i.sort(Mr)}}}function Pr(){var e={};function t(n){var i=n.target;i.removeEventListener("dispose",t),delete e[i.id]}return{get:function(n,i){var r,a=e[n.id];return void 0===a?(r=new Ar,e[n.id]={},e[n.id][i.id]=r,n.addEventListener("dispose",t)):void 0===(r=a[i.id])&&(r=new Ar,a[i.id]=r),r},dispose:function(){e={}}}}function Lr(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new zt,color:new cn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ft};break;case"SpotLight":n={position:new zt,direction:new zt,color:new cn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ft};break;case"PointLight":n={position:new zt,color:new cn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ft,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new zt,skyColor:new cn,groundColor:new cn};break;case"RectAreaLight":n={color:new cn,position:new zt,halfWidth:new zt,halfHeight:new zt}}return e[t.id]=n,n}}}var Ir=0;function Or(){for(var e=new Lr,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=0;n<9;n++)t.probe.push(new zt);var i=new zt,r=new Qt,a=new Qt;return{setup:function(n,o,s){for(var l=0,u=0,c=0,d=0;d<9;d++)t.probe[d].set(0,0,0);for(var h=0,p=0,f=0,m=0,g=0,v=s.matrixWorldInverse,y=(d=0,n.length);d<y;d++){var b=n[d],_=b.color,x=b.intensity,w=b.distance,T=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=_.r*x,u+=_.g*x,c+=_.b*x;else if(b.isLightProbe)for(var S=0;S<9;S++)t.probe[S].addScaledVector(b.sh.coefficients[S],x);else if(b.isDirectionalLight){if((k=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),k.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),k.direction.sub(i),k.direction.transformDirection(v),k.shadow=b.castShadow,b.castShadow){var E=b.shadow;k.shadowBias=E.bias,k.shadowRadius=E.radius,k.shadowMapSize=E.mapSize}t.directionalShadowMap[h]=T,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=k,h++}else if(b.isSpotLight){if((k=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(v),k.color.copy(_).multiplyScalar(x),k.distance=w,k.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),k.direction.sub(i),k.direction.transformDirection(v),k.coneCos=Math.cos(b.angle),k.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),k.decay=b.decay,k.shadow=b.castShadow,b.castShadow){E=b.shadow;k.shadowBias=E.bias,k.shadowRadius=E.radius,k.shadowMapSize=E.mapSize}t.spotShadowMap[f]=T,t.spotShadowMatrix[f]=b.shadow.matrix,t.spot[f]=k,f++}else if(b.isRectAreaLight){(k=e.get(b)).color.copy(_).multiplyScalar(x),k.position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(v),a.identity(),r.copy(b.matrixWorld),r.premultiply(v),a.extractRotation(r),k.halfWidth.set(.5*b.width,0,0),k.halfHeight.set(0,.5*b.height,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),t.rectArea[m]=k,m++}else if(b.isPointLight){if((k=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),k.position.applyMatrix4(v),k.color.copy(b.color).multiplyScalar(b.intensity),k.distance=b.distance,k.decay=b.decay,k.shadow=b.castShadow,b.castShadow){E=b.shadow;k.shadowBias=E.bias,k.shadowRadius=E.radius,k.shadowMapSize=E.mapSize,k.shadowCameraNear=E.camera.near,k.shadowCameraFar=E.camera.far}t.pointShadowMap[p]=T,t.pointShadowMatrix[p]=b.shadow.matrix,t.point[p]=k,p++}else if(b.isHemisphereLight){var k;(k=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),k.direction.transformDirection(v),k.direction.normalize(),k.skyColor.copy(b.color).multiplyScalar(x),k.groundColor.copy(b.groundColor).multiplyScalar(x),t.hemi[g]=k,g++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c;var C=t.hash;C.directionalLength===h&&C.pointLength===p&&C.spotLength===f&&C.rectAreaLength===m&&C.hemiLength===g&&C.shadowsLength===o.length||(t.directional.length=h,t.spot.length=f,t.rectArea.length=m,t.point.length=p,t.hemi.length=g,C.directionalLength=h,C.pointLength=p,C.spotLength=f,C.rectAreaLength=m,C.hemiLength=g,C.shadowsLength=o.length,t.version=Ir++)},state:t}}function Rr(){var e=new Or,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Dr(){var e={};function t(n){var i=n.target;i.removeEventListener("dispose",t),delete e[i.id]}return{get:function(n,i){var r;return void 0===e[n.id]?(r=new Rr,e[n.id]={},e[n.id][i.id]=r,n.addEventListener("dispose",t)):void 0===e[n.id][i.id]?(r=new Rr,e[n.id][i.id]=r):r=e[n.id][i.id],r},dispose:function(){e={}}}}function Nr(e){gn.call(this),this.type="MeshDepthMaterial",this.depthPacking=It,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Ur(e){gn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new zt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Br(e,t,n){for(var i=new Kn,r=new Qt,a=new Ft,o=new Ft(n,n),s=new zt,l=new zt,u=1,c=2,d=1+(u|c),h=new Array(d),p=new Array(d),f={},m={0:_,1:b,2:x},g=[new zt(1,0,0),new zt(-1,0,0),new zt(0,0,1),new zt(0,0,-1),new zt(0,1,0),new zt(0,-1,0)],y=[new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,0,1),new zt(0,0,-1)],w=[new Xt,new Xt,new Xt,new Xt,new Xt,new Xt],T=0;T!==d;++T){var S=0!==(T&u),k=0!==(T&c),C=new Nr({depthPacking:Ot,morphTargets:S,skinning:k});h[T]=C;var M=new Ur({morphTargets:S,skinning:k});p[T]=M}var A=this;function P(t,n,i,r,a,o){var s=t.geometry,l=null,d=h,g=t.customDepthMaterial;if(i&&(d=p,g=t.customDistanceMaterial),g)l=g;else{var v=!1;n.morphTargets&&(s&&s.isBufferGeometry?v=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(v=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&n.skinning,b=0;v&&(b|=u),y&&(b|=c),l=d[b]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var _=l.uuid,x=n.uuid,w=f[_];void 0===w&&(w={},f[_]=w);var T=w[x];void 0===T&&(T=l.clone(),w[x]=T),l=T}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:m[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=a,l.farDistance=o),l}function L(n,r,a,o){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var s=t.update(n),u=n.material;if(Array.isArray(u))for(var c=s.groups,d=0,h=c.length;d<h;d++){var p=c[d],f=u[p.materialIndex];if(f&&f.visible){var m=P(n,f,o,l,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,p)}}else if(u.visible){m=P(n,u,o,l,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,null)}}for(var g=n.children,v=0,y=g.length;v<y;v++)L(g[v],r,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v,this.render=function(t,n,u){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var c,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),f=e.state;f.setBlending(E),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var m=0,v=t.length;m<v;m++){var b=t[m],_=b.shadow,x=b&&b.isPointLight;if(void 0!==_){var T=_.camera;if(a.copy(_.mapSize),a.min(o),x){var S=a.x,k=a.y;w[0].set(2*S,k,S,k),w[1].set(0,k,S,k),w[2].set(3*S,k,S,k),w[3].set(S,k,S,k),w[4].set(3*S,0,S,k),w[5].set(S,0,S,k),a.x*=4,a.y*=2}if(null===_.map){var C={minFilter:_e,magFilter:_e,format:je};_.map=new Yt(a.x,a.y,C),_.map.texture.name=b.name+".shadowMap",T.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(b);var M=_.map,P=_.matrix;l.setFromMatrixPosition(b.matrixWorld),T.position.copy(l),x?(c=6,P.makeTranslation(-l.x,-l.y,-l.z)):(c=1,s.setFromMatrixPosition(b.target.matrixWorld),T.lookAt(s),T.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(T.projectionMatrix),P.multiply(T.matrixWorldInverse)),e.setRenderTarget(M),e.clear();for(var I=0;I<c;I++){if(x){s.copy(T.position),s.add(g[I]),T.up.copy(y[I]),T.lookAt(s),T.updateMatrixWorld();var O=w[I];f.viewport(O)}r.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),i.setFromMatrix(r),L(n,u,T,x)}}else console.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}A.needsUpdate=!1,e.setRenderTarget(d,h,p)}}}function Fr(e,t,n,i){var r=new function(){var t=!1,n=new Xt,i=null,r=new Xt(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?ae(2929):oe(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case q:e.depthFunc(512);break;case X:e.depthFunc(519);break;case Y:e.depthFunc(513);break;case K:e.depthFunc(515);break;case Q:e.depthFunc(514);break;case $:e.depthFunc(518);break;case J:e.depthFunc(516);break;case ee:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},o=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){e?ae(2960):oe(2960)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&l===i||(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null}}},s=e.getParameter(34921),l=new Uint8Array(s),u=new Uint8Array(s),c=new Uint8Array(s),d={},h=null,p=null,v=null,y=null,b=null,w=null,T=null,S=null,I=null,O=null,R=!1,D=null,N=null,U=null,B=null,F=null,j=e.getParameter(35661),z=!1,H=0,V=e.getParameter(7938);-1!==V.indexOf("WebGL")?(H=parseFloat(/^WebGL\ ([0-9])/.exec(V)[1]),z=H>=1):-1!==V.indexOf("OpenGL ES")&&(H=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(V)[1]),z=H>=2);var G=null,W={},Z=new Xt,te=new Xt;function ne(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var ie={};function re(n,r){(l[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),c[n]!==r)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),c[n]=r)}function ae(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function oe(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}function se(t,i,r,a,o,s,l,u){if(t!==E){if(v||(ae(3042),v=!0),t===P)o=o||i,s=s||r,l=l||a,i===b&&o===S||(e.blendEquationSeparate(n.convert(i),n.convert(o)),b=i,S=o),r===w&&a===T&&s===I&&l===O||(e.blendFuncSeparate(n.convert(r),n.convert(a),n.convert(s),n.convert(l)),w=r,T=a,I=s,O=l),y=t,R=null;else if(t!==y||u!==R){if(b===L&&S===L||(e.blendEquation(32774),b=L,S=L),u)switch(t){case k:e.blendFuncSeparate(1,771,1,771);break;case C:e.blendFunc(1,1);break;case M:e.blendFuncSeparate(0,0,769,771);break;case A:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case k:e.blendFuncSeparate(770,771,1,771);break;case C:e.blendFunc(770,1);break;case M:e.blendFunc(0,769);break;case A:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}w=null,T=null,I=null,O=null,y=t,R=u}}else v&&(oe(3042),v=!1)}function le(t){D!==t&&(t?e.frontFace(2304):e.frontFace(2305),D=t)}function ue(t){t!==f?(ae(2884),t!==N&&(t===m?e.cullFace(1029):t===g?e.cullFace(1028):e.cullFace(1032))):oe(2884),N=t}function ce(t,n,i){t?(ae(32823),B===n&&F===i||(e.polygonOffset(n,i),B=n,F=i)):oe(32823)}function de(t){void 0===t&&(t=33984+j-1),G!==t&&(e.activeTexture(t),G=t)}return ie[3553]=ne(3553,3553,1),ie[34067]=ne(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ae(2929),a.setFunc(K),le(!1),ue(m),ae(2884),se(E),{buffers:{color:r,depth:a,stencil:o},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){re(e,0)},enableAttributeAndDivisor:re,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==l[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:ae,disable:oe,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),i=0;i<n.length;i++)h.push(n[i]);return h},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:se,setMaterial:function(e,t){e.side===x?oe(2884):ae(2884);var n=e.side===_;t&&(n=!n),le(n),e.blending===k&&!1===e.transparent?se(E):se(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);var i=e.stencilWrite;o.setTest(i),i&&(o.setFunc(e.stencilFunc,e.stencilRef,e.stencilMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),ce(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:le,setCullFace:ue,setLineWidth:function(t){t!==U&&(z&&e.lineWidth(t),U=t)},setPolygonOffset:ce,setScissorTest:function(e){e?ae(3089):oe(3089)},activeTexture:de,bindTexture:function(t,n){null===G&&de();var i=W[G];void 0===i&&(i={type:void 0,texture:void 0},W[G]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||ie[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===Z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),Z.copy(t))},viewport:function(t){!1===te.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),te.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);d={},h=null,G=null,W={},p=null,y=null,D=null,N=null,r.reset(),a.reset(),o.reset()}}}function jr(e,t,n,i,r,a,o){var s,l={},u="undefined"!==typeof OffscreenCanvas;function c(e,t){return u?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function d(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Bt.floorPowerOfTwo:Math.floor,o=a(r*e.width),l=a(r*e.height);void 0===s&&(s=c(o,l));var u=n?c(o,l):s;return u.width=o,u.height=l,u.getContext("2d").drawImage(e,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+l+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function h(e){return Bt.isPowerOfTwo(e.width)&&Bt.isPowerOfTwo(e.height)}function p(e,t){return e.generateMipmaps&&t&&e.minFilter!==_e&&e.minFilter!==Te}function f(t,n,r,a){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function m(e,n){if(!r.isWebGL2)return e;var i=e;return 6403===e&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===e&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===e&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?t.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function g(e){return e===_e||e===xe||e===we?9728:9729}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&delete l[n.id],o.memory.textures--}function y(t){var n=t.target;n.removeEventListener("dispose",y),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}(n),o.memory.textures--}var b=0;function _(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=e.id,n=o.render.frame;l[t]!==n&&(l[t]=n,e.update())}(e),e.version>0&&r.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void E(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function x(t,o){var s=i.get(t);if(6===t.image.length)if(t.version>0&&s.__version!==t.version){S(s,t),n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture),e.pixelStorei(37440,t.flipY);for(var l=t&&t.isCompressedTexture,u=t.image[0]&&t.image[0].isDataTexture,c=[],g=0;g<6;g++)c[g]=l||u?u?t.image[g].image:t.image[g]:d(t.image[g],!1,!0,r.maxCubemapSize);var v=c[0],y=h(v)||r.isWebGL2,b=a.convert(t.format),_=a.convert(t.type),x=m(b,_);T(34067,t,y);for(g=0;g<6;g++)if(l)for(var w,E=c[g].mipmaps,k=0,C=E.length;k<C;k++)w=E[k],t.format!==je&&t.format!==Fe?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+g,k,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,k,x,w.width,w.height,0,b,_,w.data);else u?n.texImage2D(34069+g,0,x,c[g].width,c[g].height,0,b,_,c[g].data):n.texImage2D(34069+g,0,x,b,_,c[g]);s.__maxMipLevel=l?E.length-1:0,p(t,y)&&f(34067,t,v.width,v.height),s.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture)}function w(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}function T(n,o,s){var l;if(s?(e.texParameteri(n,10242,a.convert(o.wrapS)),e.texParameteri(n,10243,a.convert(o.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,a.convert(o.wrapR)),e.texParameteri(n,10240,a.convert(o.magFilter)),e.texParameteri(n,10241,a.convert(o.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===ye&&o.wrapT===ye||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,g(o.magFilter)),e.texParameteri(n,10241,g(o.minFilter)),o.minFilter!==_e&&o.minFilter!==Te&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(o.type===Ie&&null===t.get("OES_texture_float_linear"))return;if(o.type===Oe&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function S(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",v),t.__webglTexture=e.createTexture(),o.memory.textures++)}function E(t,i,o){var s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),S(t,i),n.activeTexture(33984+o),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);var l=function(e){return!r.isWebGL2&&(e.wrapS!==ye||e.wrapT!==ye||e.minFilter!==_e&&e.minFilter!==Te)}(i)&&!1===h(i.image),u=d(i.image,l,!1,r.maxTextureSize),c=h(u)||r.isWebGL2,g=a.convert(i.format),v=a.convert(i.type),y=m(g,v);T(s,i,c);var b,_=i.mipmaps;if(i.isDepthTexture){if(y=6402,i.type===Ie){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else r.isWebGL2&&(y=33189);i.format===Ve&&6402===y&&i.type!==Ae&&i.type!==Le&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ae,v=a.convert(i.type)),i.format===Ge&&(y=34041,i.type!==Ue&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ue,v=a.convert(i.type))),n.texImage2D(3553,0,y,u.width,u.height,0,g,v,null)}else if(i.isDataTexture)if(_.length>0&&c){for(var x=0,w=_.length;x<w;x++)b=_[x],n.texImage2D(3553,x,y,b.width,b.height,0,g,v,b.data);i.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,u.width,u.height,0,g,v,u.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(x=0,w=_.length;x<w;x++)b=_[x],i.format!==je&&i.format!==Fe?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,x,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,x,y,b.width,b.height,0,g,v,b.data);t.__maxMipLevel=_.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,y,u.width,u.height,u.depth,0,g,v,u.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,y,u.width,u.height,u.depth,0,g,v,u.data),t.__maxMipLevel=0;else if(_.length>0&&c){for(x=0,w=_.length;x<w;x++)b=_[x],n.texImage2D(3553,x,y,g,v,b);i.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,g,v,u),t.__maxMipLevel=0;p(i,c)&&f(3553,i,u.width,u.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function k(t,r,o,s){var l=a.convert(r.texture.format),u=a.convert(r.texture.type),c=m(l,u);n.texImage2D(s,0,c,r.width,r.height,0,l,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function C(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(i){var r=A(n);e.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=A(n);e.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var o=m(a.convert(n.texture.format),a.convert(n.texture.type));if(i){r=A(n);e.renderbufferStorageMultisample(36161,r,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function M(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),_(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ve)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),C(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),C(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function A(e){return r.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,e.samples):0}var P=!1,L=!1;this.allocateTextureUnit=function(){var e=b;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),b+=1,e},this.resetTextureUnits=function(){b=0},this.setTexture2D=_,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?E(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?E(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=x,this.setTextureCubeDynamic=w,this.setupRenderTarget=function(t){var s=i.get(t),l=i.get(t.texture);t.addEventListener("dispose",y),l.__webglTexture=e.createTexture(),o.memory.textures++;var u=!0===t.isWebGLRenderTargetCube,c=!0===t.isWebGLMultisampleRenderTarget,d=h(t)||r.isWebGL2;if(u){s.__webglFramebuffer=[];for(var g=0;g<6;g++)s.__webglFramebuffer[g]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),c)if(r.isWebGL2){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var v=m(a.convert(t.texture.format),a.convert(t.texture.type)),b=A(t);e.renderbufferStorageMultisample(36161,b,v,t.width,t.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),C(s.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,l.__webglTexture),T(34067,t.texture,d);for(g=0;g<6;g++)k(s.__webglFramebuffer[g],t,36064,34069+g);p(t.texture,d)&&f(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),T(3553,t.texture,d),k(s.__webglFramebuffer,t,36064,3553),p(t.texture,d)&&f(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&M(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(p(t,h(e)||r.isWebGL2)){var a=e.isWebGLRenderTargetCube?34067:3553,o=i.get(t).__webglTexture;n.bindTexture(a,o),f(a,t,e.width,e.height),n.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var a=t.width,o=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===P&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),P=!0),e=e.texture),_(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),L=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?x(e,t):w(e,t)}}function zr(e,t,n){return{convert:function(e){var i;if(e===ve)return 10497;if(e===ye)return 33071;if(e===be)return 33648;if(e===_e)return 9728;if(e===xe)return 9984;if(e===we)return 9986;if(e===Te)return 9729;if(e===Se)return 9985;if(e===Ee)return 9987;if(e===ke)return 5121;if(e===Re)return 32819;if(e===De)return 32820;if(e===Ne)return 33635;if(e===Ce)return 5120;if(e===Me)return 5122;if(e===Ae)return 5123;if(e===Pe)return 5124;if(e===Le)return 5125;if(e===Ie)return 5126;if(e===Oe){if(n.isWebGL2)return 5131;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(e===Be)return 6406;if(e===Fe)return 6407;if(e===je)return 6408;if(e===ze)return 6409;if(e===He)return 6410;if(e===Ve)return 6402;if(e===Ge)return 34041;if(e===We)return 6403;if(e===L)return 32774;if(e===I)return 32778;if(e===O)return 32779;if(e===N)return 0;if(e===U)return 1;if(e===B)return 768;if(e===F)return 769;if(e===j)return 770;if(e===z)return 771;if(e===H)return 772;if(e===V)return 773;if(e===G)return 774;if(e===W)return 775;if(e===Z)return 776;if((e===Ze||e===qe||e===Xe||e===Ye)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(e===Ze)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===qe)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Xe)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ye)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Ke||e===Qe||e===$e||e===Je)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===Ke)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Qe)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===$e)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Je)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===et&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((e===tt||e===nt||e===it||e===rt||e===at||e===ot||e===st||e===lt||e===ut||e===ct||e===dt||e===ht||e===pt||e===ft)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return e;if(e===R||e===D){if(n.isWebGL2){if(e===R)return 32775;if(e===D)return 32776}if(null!==(i=t.get("EXT_blend_minmax"))){if(e===R)return i.MIN_EXT;if(e===D)return i.MAX_EXT}}if(e===Ue){if(n.isWebGL2)return 34042;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Hr(){nn.call(this),this.type="Group"}function Vr(e){Vn.call(this),this.cameras=e||[]}Nr.prototype=Object.create(gn.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isMeshDepthMaterial=!0,Nr.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Ur.prototype=Object.create(gn.prototype),Ur.prototype.constructor=Ur,Ur.prototype.isMeshDistanceMaterial=!0,Ur.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Hr.prototype=Object.assign(Object.create(nn.prototype),{constructor:Hr,isGroup:!0}),Vr.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Vr,isArrayCamera:!0});var Gr,Wr=new zt,Zr=new zt;function qr(e,t,n){Wr.setFromMatrixPosition(t.matrixWorld),Zr.setFromMatrixPosition(n.matrixWorld);var i=Wr.distanceTo(Zr),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=o*c,p=o*d,f=i/(-c+d),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var g=o+f,v=s+f,y=h-m,b=p+(i-m),_=l*s/v*g,x=u*s/v*g;e.projectionMatrix.makePerspective(y,b,_,x,g,v)}function Xr(e){var t,n,i=this,r=null,a=null,o=null,s=[],l=new Qt,u=new Qt,c=1,d="local-floor";"undefined"!==typeof window&&"VRFrameData"in window&&(a=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",x,!1));var h=new Qt,p=new jt,f=new zt,m=new Vn;m.viewport=new Xt,m.layers.enable(1);var g=new Vn;g.viewport=new Xt,g.layers.enable(2);var v=new Vr([m,g]);function y(){return null!==r&&!0===r.isPresenting}v.layers.enable(1),v.layers.enable(2);var b,_=new Ft;function x(){if(y()){var a=r.getEyeParameters("left");t=2*a.renderWidth*c,n=a.renderHeight*c,b=e.getPixelRatio(),e.getSize(_),e.setDrawingBufferSize(t,n,1),m.viewport.set(0,0,t/2,n),g.viewport.set(t/2,0,t/2,n),E.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&e.setDrawingBufferSize(_.width,_.height,b),E.stop(),i.dispatchEvent({type:"sessionend"})}var w=[];function T(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=t.length;n<r;n++){var a=t[n];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("HTC Vive Focus")||a.id.startsWith("Spatial Controller"))){if(i===e)return a;i++}}}function S(e,i){null!==i&&4===i.length&&e.set(i[0]*t,i[1]*n,i[2]*t,i[3]*n)}this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new Hr).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),E.setContext(e)},this.setFramebufferScaleFactor=function(e){c=e},this.setReferenceSpaceType=function(e){d=e},this.setPoseTarget=function(e){void 0!==e&&(o=e)},this.getCamera=function(e){var t="local-floor"===d?1.6:0;if(!1===y())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(a),"local-floor"===d){var n=r.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,t,0)}var i=a.pose,c=null!==o?o:e;c.matrix.copy(l),c.matrix.decompose(c.position,c.quaternion,c.scale),null!==i.orientation&&(p.fromArray(i.orientation),c.quaternion.multiply(p)),null!==i.position&&(p.setFromRotationMatrix(l),f.fromArray(i.position),f.applyQuaternion(p),c.position.add(f)),c.updateMatrixWorld(),m.near=e.near,g.near=e.near,m.far=e.far,g.far=e.far,m.matrixWorldInverse.fromArray(a.leftViewMatrix),g.matrixWorldInverse.fromArray(a.rightViewMatrix),u.getInverse(l),"local-floor"===d&&(m.matrixWorldInverse.multiply(u),g.matrixWorldInverse.multiply(u));var b=c.parent;null!==b&&(h.getInverse(b.matrixWorld),m.matrixWorldInverse.multiply(h),g.matrixWorldInverse.multiply(h)),m.matrixWorld.getInverse(m.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),m.projectionMatrix.fromArray(a.leftProjectionMatrix),g.projectionMatrix.fromArray(a.rightProjectionMatrix),qr(v,m,g);var _=r.getLayers();if(_.length){var x=_[0];S(m.viewport,x.leftBounds),S(g.viewport,x.rightBounds)}return function(){for(var e=0;e<s.length;e++){var t=s[e],n=T(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&t.position.set(.2,-.6,-.05),null!==i.position&&t.position.fromArray(i.position),null!==i.orientation&&t.quaternion.fromArray(i.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(l),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===w[e]&&(w[e]=!1),w[e]!==n.buttons[r].pressed&&(w[e]=n.buttons[r].pressed,!0===w[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),v},this.getStandingMatrix=function(){return l},this.isPresenting=y;var E=new ei;this.setAnimationLoop=function(e){E.setAnimationLoop(e),y()&&E.start()},this.submitFrame=function(){y()&&r.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",x)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Yr(e,t){var n=this,i=null,r=null,a="local-floor",o=null,s=[],l=[];function u(){return null!==i&&null!==r}var c=new Vn;c.layers.enable(1),c.viewport=new Xt;var d=new Vn;d.layers.enable(2),d.viewport=new Xt;var h=new Vr([c,d]);function p(e){for(var t=0;t<s.length;t++)l[t]===e.inputSource&&s[t].dispatchEvent({type:e.type})}function f(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),y.stop(),n.dispatchEvent({type:"sessionend"})}function m(e){r=e,y.setContext(i),y.start(),n.dispatchEvent({type:"sessionstart"})}function g(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new Hr).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.setFramebufferScaleFactor=function(e){},this.setReferenceSpaceType=function(e){a=e},this.getSession=function(){return i},this.setSession=function(e){null!==(i=e)&&(i.addEventListener("select",p),i.addEventListener("selectstart",p),i.addEventListener("selectend",p),i.addEventListener("end",f),i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}),i.requestReferenceSpace(a).then(m),l=i.inputSources,i.addEventListener("inputsourceschange",(function(){l=i.inputSources,console.log(l);for(var e=0;e<s.length;e++){s[e].userData.inputSource=l[e]}})))},this.getCamera=function(e){if(u()){var t=e.parent,n=h.cameras;g(h,t);for(var i=0;i<n.length;i++)g(n[i],t);e.matrixWorld.copy(h.matrixWorld);for(var r=e.children,a=(i=0,r.length);i<a;i++)r[i].updateMatrixWorld(!0);return qr(h,c,d),h}return e},this.isPresenting=u;var v=null;var y=new ei;y.setAnimationLoop((function(t,n){if(null!==(o=n.getViewerPose(r))){var a=o.views,u=i.renderState.baseLayer;e.setFramebuffer(u.framebuffer);for(var c=0;c<a.length;c++){var d=a[c],p=u.getViewport(d),f=d.transform.inverse.matrix,m=h.cameras[c];m.matrix.fromArray(f).getInverse(m.matrix),m.projectionMatrix.fromArray(d.projectionMatrix),m.viewport.set(p.x,p.y,p.width,p.height),0===c&&h.matrix.copy(m.matrix)}}for(c=0;c<s.length;c++){var g=s[c],y=l[c];if(y){var b=n.getPose(y.targetRaySpace,r);if(null!==b){g.matrix.fromArray(b.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}v&&v(t)})),this.setAnimationLoop=function(e){v=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Qt},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Kr(e){console.log("THREE.WebGLRenderer",p);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,d=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ae,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var f,m,g,v,y,b,x,w,T,S,E,k,C,M,A,P,L,I,O=this,R=!1,D=null,N=0,U=0,B=null,F=null,j=-1,z={geometry:null,program:null,wireframe:!1},H=null,V=null,G=new Xt,W=new Xt,Z=null,q=t.width,X=t.height,Y=1,K=new Xt(0,0,q,X),Q=new Xt(0,0,q,X),$=!1,J=new Kn,ee=new si,te=!1,ne=!1,ie=new Qt,re=new zt;function oe(){return null===B?Y:1}try{var se={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(t.addEventListener("webglcontextlost",de,!1),t.addEventListener("webglcontextrestored",he,!1),null===(f=n||t.getContext("webgl",se)||t.getContext("experimental-webgl",se)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===f.getShaderPrecisionFormat&&(f.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ee){throw console.error("THREE.WebGLRenderer: "+Ee.message),Ee}function le(){m=new li(f),(g=new oi(f,m,e)).isWebGL2||(m.get("WEBGL_depth_texture"),m.get("OES_texture_float"),m.get("OES_texture_half_float"),m.get("OES_texture_half_float_linear"),m.get("OES_standard_derivatives"),m.get("OES_element_index_uint"),m.get("ANGLE_instanced_arrays")),m.get("OES_texture_float_linear"),I=new zr(f,m,g),(v=new Fr(f,m,I,g)).scissor(W.copy(Q).multiplyScalar(Y).floor()),v.viewport(G.copy(K).multiplyScalar(Y).floor()),y=new di(f),b=new kr,x=new jr(f,m,v,b,g,I,y),w=new ti(f),T=new ui(f,w,y),S=new fi(T,y),A=new pi(f),E=new Er(O,m,g),k=new Pr,C=new Dr,M=new ri(O,v,S,s),P=new ai(f,m,y,g),L=new ci(f,m,y,g),y.programs=E.programs,O.capabilities=g,O.extensions=m,O.properties=b,O.renderLists=k,O.state=v,O.info=y}le();var ue="undefined"!==typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new Yr(O,f):new Xr(O);this.vr=ue;var ce=new Br(O,S,g.maxTextureSize);function de(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,le()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){fe(e),b.remove(e)}(t)}function fe(e){var t=b.get(e).program;e.program=void 0,void 0!==t&&E.releaseProgram(t)}this.shadowMap=ce,this.getContext=function(){return f},this.getContextAttributes=function(){return f.getContextAttributes()},this.forceContextLoss=function(){var e=m.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=m.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(q,X,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Ft),e.set(q,X)},this.setSize=function(e,n,i){ue.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=e,X=n,t.width=Math.floor(e*Y),t.height=Math.floor(n*Y),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Ft),e.set(q*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,n,i){q=e,X=n,Y=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Xt),e.copy(G)},this.getViewport=function(e){return e.copy(K)},this.setViewport=function(e,t,n,i){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,n,i),v.viewport(G.copy(K).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(Q)},this.setScissor=function(e,t,n,i){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,i),v.scissor(W.copy(Q).multiplyScalar(Y).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(e){v.setScissorTest($=e)},this.getClearColor=function(){return M.getClearColor()},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),f.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",de,!1),t.removeEventListener("webglcontextrestored",he,!1),k.dispose(),C.dispose(),b.dispose(),S.dispose(),ue.dispose(),ge.stop()},this.renderBufferImmediate=function(e,t){v.initAttributes();var n=b.get(e);e.hasPositions&&!n.position&&(n.position=f.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=f.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=f.createBuffer()),e.hasColors&&!n.color&&(n.color=f.createBuffer());var i=t.getAttributes();e.hasPositions&&(f.bindBuffer(34962,n.position),f.bufferData(34962,e.positionArray,35048),v.enableAttribute(i.position),f.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(f.bindBuffer(34962,n.normal),f.bufferData(34962,e.normalArray,35048),v.enableAttribute(i.normal),f.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(f.bindBuffer(34962,n.uv),f.bufferData(34962,e.uvArray,35048),v.enableAttribute(i.uv),f.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(f.bindBuffer(34962,n.color),f.bufferData(34962,e.colorArray,35048),v.enableAttribute(i.color),f.vertexAttribPointer(i.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),f.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){var o=r.isMesh&&r.matrixWorld.determinant()<0;v.setMaterial(i,o);var s=xe(e,t,i,r),l=!1;z.geometry===n.id&&z.program===s.id&&z.wireframe===(!0===i.wireframe)||(z.geometry=n.id,z.program=s.id,z.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(A.update(r,n,i,s),l=!0);var u,c=n.index,d=n.attributes.position,h=1;!0===i.wireframe&&(c=T.getWireframeAttribute(n),h=2);var p=P;null!==c&&(u=w.get(c),(p=L).setIndex(u)),l&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&&!g.isWebGL2&&null===m.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");v.initAttributes();var i=n.attributes,r=t.getAttributes(),a=e.defaultAttributeValues;for(var o in r){var s=r[o];if(s>=0){var l=i[o];if(void 0!==l){var u=l.normalized,c=l.itemSize,d=w.get(l);if(void 0===d)continue;var h=d.buffer,p=d.type,y=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var b=l.data,_=b.stride,x=l.offset;b&&b.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):v.enableAttribute(s),f.bindBuffer(34962,h),f.vertexAttribPointer(s,c,p,u,_*y,x*y)}else l.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):v.enableAttribute(s),f.bindBuffer(34962,h),f.vertexAttribPointer(s,c,p,u,0,0)}else if(void 0!==a){var T=a[o];if(void 0!==T)switch(T.length){case 2:f.vertexAttrib2fv(s,T);break;case 3:f.vertexAttrib3fv(s,T);break;case 4:f.vertexAttrib4fv(s,T);break;default:f.vertexAttrib1fv(s,T)}}}}v.disableUnusedAttributes()}(i,s,n),null!==c&&f.bindBuffer(34963,u.buffer));var y=1/0;null!==c?y=c.count:void 0!==d&&(y=d.count);var b=n.drawRange.start*h,_=n.drawRange.count*h,x=null!==a?a.start*h:0,S=null!==a?a.count*h:1/0,E=Math.max(b,x),k=Math.min(y,b+_,x+S)-1,C=Math.max(0,k-E+1);if(0!==C){if(r.isMesh)if(!0===i.wireframe)v.setLineWidth(i.wireframeLinewidth*oe()),p.setMode(1);else switch(r.drawMode){case wt:p.setMode(4);break;case Tt:p.setMode(5);break;case St:p.setMode(6)}else if(r.isLine){var M=i.linewidth;void 0===M&&(M=1),v.setLineWidth(M*oe()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&p.renderInstances(n,E,C):p.render(E,C)}},this.compile=function(e,t){(h=C.get(e,t)).init(),e.traverse((function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)_e(t.material[n],e.fog,t);else _e(t.material,e.fog,t)}))};var me=null;var ge=new ei;function ve(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||J.intersectsSprite(e)){i&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);var r=S.update(e);(a=e.material).visible&&d.push(e,r,a,n,re.z,null)}}else if(e.isImmediateRenderObject)i&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie),d.push(e,null,e.material,n,re.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||J.intersectsObject(e))){i&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);r=S.update(e);var a=e.material;if(Array.isArray(a))for(var o=r.groups,s=0,l=o.length;s<l;s++){var u=o[s],c=a[u.materialIndex];c&&c.visible&&d.push(e,r,c,n,re.z,u)}else a.visible&&d.push(e,r,a,n,re.z,null)}var p=e.children;for(s=0,l=p.length;s<l;s++)ve(p[s],t,n,i)}}function ye(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,l=o.geometry,u=void 0===i?o.material:i,c=o.group;if(n.isArrayCamera){V=n;for(var d=n.cameras,p=0,f=d.length;p<f;p++){var m=d[p];s.layers.test(m.layers)&&(v.viewport(G.copy(m.viewport)),h.setupLights(m),be(s,t,m,l,u,c))}}else V=null,be(s,t,n,l,u,c)}}function be(e,t,n,i,r,a){if(e.onBeforeRender(O,t,n,i,r,a),h=C.get(t,V||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){v.setMaterial(r);var o=xe(n,t.fog,r,e);z.geometry=null,z.program=null,z.wireframe=!1,function(e,t){e.render((function(e){O.renderBufferImmediate(e,t)}))}(e,o)}else O.renderBufferDirect(n,t.fog,i,r,e,a);e.onAfterRender(O,t,n,i,r,a),h=C.get(t,V||n)}function _e(e,t,n){var i=b.get(e),r=h.state.lights,a=h.state.shadowsArray,o=r.state.version,s=E.getParameters(e,r.state,a,t,ee.numPlanes,ee.numIntersection,n),l=E.getProgramCode(e,s),u=i.program,c=!0;if(void 0===u)e.addEventListener("dispose",pe);else if(u.code!==l)fe(e);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var d=Jn[s.shaderID];i.shader={name:e.type,uniforms:Un(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,O),l=E.getProgramCode(e,s),u=E.acquireProgram(e,i.shader,s,l),i.program=u,e.program=u}var p=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<O.maxMorphTargets;f++)p["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(f=0;f<O.maxMorphNormals;f++)p["morphNormal"+f]>=0&&e.numSupportedMorphNormals++}var m=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=ee.numPlanes,i.numIntersection=ee.numIntersection,m.clippingPlanes=ee.uniform),i.fog=t,i.lightsStateVersion=o,e.lights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.spotLights.value=r.state.spot,m.rectAreaLights.value=r.state.rectArea,m.pointLights.value=r.state.point,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=i.program.getUniforms(),v=dr.seqWithValue(g.seq,m);i.uniformsList=v}function xe(e,t,n,i){x.resetTextureUnits();var r=b.get(n),a=h.state.lights;if(te&&(ne||e!==H)){var o=e===H&&n.id===j;ee.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,o)}!1===n.needsUpdate&&(void 0===r.program||n.fog&&r.fog!==t||n.lights&&r.lightsStateVersion!==a.state.version?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===ee.numPlanes&&r.numIntersection===ee.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(_e(n,t,i),n.needsUpdate=!1);var s,l,u=!1,c=!1,d=!1,p=r.program,m=p.getUniforms(),y=r.shader.uniforms;if(v.useProgram(p.program)&&(u=!0,c=!0,d=!0),n.id!==j&&(j=n.id,c=!0),u||H!==e){if(m.setValue(f,"projectionMatrix",e.projectionMatrix),g.logarithmicDepthBuffer&&m.setValue(f,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),H!==e&&(H=e,c=!0,d=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var w=m.map.cameraPosition;void 0!==w&&w.setValue(f,re.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&m.setValue(f,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){m.setOptional(f,i,"bindMatrix"),m.setOptional(f,i,"bindMatrixInverse");var T=i.skeleton;if(T){var S=T.bones;if(g.floatVertexTextures){if(void 0===T.boneTexture){var E=Math.sqrt(4*S.length);E=Bt.ceilPowerOfTwo(E),E=Math.max(E,4);var k=new Float32Array(E*E*4);k.set(T.boneMatrices);var C=new Xn(k,E,E,je,Ie);C.needsUpdate=!0,T.boneMatrices=k,T.boneTexture=C,T.boneTextureSize=E}m.setValue(f,"boneTexture",T.boneTexture,x),m.setValue(f,"boneTextureSize",T.boneTextureSize)}else m.setOptional(f,T,"boneMatrices")}}return c&&(m.setValue(f,"toneMappingExposure",O.toneMappingExposure),m.setValue(f,"toneMappingWhitePoint",O.toneMappingWhitePoint),n.lights&&(l=d,(s=y).ambientLightColor.needsUpdate=l,s.lightProbe.needsUpdate=l,s.directionalLights.needsUpdate=l,s.pointLights.needsUpdate=l,s.spotLights.needsUpdate=l,s.rectAreaLights.needsUpdate=l,s.hemisphereLights.needsUpdate=l),t&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(y,t),n.isMeshBasicMaterial?we(y,n):n.isMeshLambertMaterial?(we(y,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(y,n)):n.isMeshPhongMaterial?(we(y,n),n.isMeshToonMaterial?function(e,t){Te(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(y,n):Te(y,n)):n.isMeshStandardMaterial?(we(y,n),n.isMeshPhysicalMaterial?function(e,t){Se(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(y,n):Se(y,n)):n.isMeshMatcapMaterial?(we(y,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,n)):n.isMeshDepthMaterial?(we(y,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,n)):n.isMeshDistanceMaterial?(we(y,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(y,n)):n.isMeshNormalMaterial?(we(y,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(y,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(y,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Y,e.scale.value=.5*X,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(y,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(y,n):n.isShadowMaterial&&(y.color.value.copy(n.color),y.opacity.value=n.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=$n.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=$n.LTC_2),dr.upload(f,r.uniformsList,y,x)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(dr.upload(f,r.uniformsList,y,x),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&m.setValue(f,"center",i.center),m.setValue(f,"modelViewMatrix",i.modelViewMatrix),m.setValue(f,"normalMatrix",i.normalMatrix),m.setValue(f,"modelMatrix",i.matrixWorld),p}function we(e,t){var n;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=b.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Te(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Se(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}ge.setAnimationLoop((function(e){ue.isPresenting()||me&&me(e)})),"undefined"!==typeof window&&ge.setContext(window),this.setAnimationLoop=function(e){me=e,ue.setAnimationLoop(e),ge.start()},this.render=function(e,t){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),t&&t.isCamera){if(!R){z.geometry=null,z.program=null,z.wireframe=!1,j=-1,H=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ue.enabled&&(t=ue.getCamera(t)),(h=C.get(e,t)).init(),e.onBeforeRender(O,e,t,n||B),ie.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),J.setFromMatrix(ie),ne=this.localClippingEnabled,te=ee.init(this.clippingPlanes,ne,t),(d=k.get(e,t)).init(),ve(e,t,0,O.sortObjects),!0===O.sortObjects&&d.sort(),te&&ee.beginShadows();var r=h.state.shadowsArray;ce.render(r,e,t),h.setupLights(t),te&&ee.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),M.render(d,e,t,i);var a=d.opaque,o=d.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&ye(a,e,t,s),o.length&&ye(o,e,t,s)}else a.length&&ye(a,e,t),o.length&&ye(o,e,t);e.onAfterRender(O,e,t),null!==B&&(x.updateRenderTargetMipmap(B),x.updateMultisampleRenderTarget(B)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),ue.enabled&&ue.submitFrame(),d=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){D!==e&&f.bindFramebuffer(36160,e),D=e},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return U},this.getRenderTarget=function(){return B},this.setRenderTarget=function(e,t,n){B=e,N=t,U=n,e&&void 0===b.get(e).__webglFramebuffer&&x.setupRenderTarget(e);var i=D,r=!1;if(e){var a=b.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(i=a[t||0],r=!0):i=e.isWebGLMultisampleRenderTarget?b.get(e).__webglMultisampledFramebuffer:a,G.copy(e.viewport),W.copy(e.scissor),Z=e.scissorTest}else G.copy(K).multiplyScalar(Y).floor(),W.copy(Q).multiplyScalar(Y).floor(),Z=$;if(F!==i&&(f.bindFramebuffer(36160,i),F=i),v.viewport(G),v.scissor(W),v.setScissorTest(Z),r){var o=b.get(e.texture);f.framebufferTexture2D(36160,36064,34069+(t||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var s=b.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){var l=!1;s!==F&&(f.bindFramebuffer(36160,s),l=!0);try{var u=e.texture,c=u.format,d=u.type;if(c!==je&&I.convert(c)!==f.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(d!==ke&&I.convert(d)!==f.getParameter(35738)&&(d!==Ie||!(g.isWebGL2||m.get("OES_texture_float")||m.get("WEBGL_color_buffer_float")))&&(d!==Oe||!(g.isWebGL2?m.get("EXT_color_buffer_float"):m.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===f.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&f.readPixels(t,n,i,r,I.convert(c),I.convert(d),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&f.bindFramebuffer(36160,F)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,a=I.convert(t.format);x.setTexture2D(t,0),f.copyTexImage2D(3553,n||0,a,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,a=t.image.height,o=I.convert(n.format),s=I.convert(n.type);x.setTexture2D(n,0),t.isDataTexture?f.texSubImage2D(3553,i||0,e.x,e.y,r,a,o,s,t.image.data):f.texSubImage2D(3553,i||0,e.x,e.y,o,s,t.image)},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Qr(e,t){this.name="",this.color=new cn(e),this.density=void 0!==t?t:25e-5}function $r(e,t,n){this.name="",this.color=new cn(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Jr(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ea(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function ta(e){gn.call(this),this.type="SpriteMaterial",this.color=new cn(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function na(e){if(nn.call(this),this.type="Sprite",void 0===Gr){Gr=new Ln;var t=new Jr(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Gr.setIndex([0,1,2,0,2,3]),Gr.addAttribute("position",new ea(t,3,0,!1)),Gr.addAttribute("uv",new ea(t,2,3,!1))}this.geometry=Gr,this.material=void 0!==e?e:new ta,this.center=new Ft(.5,.5)}function ia(){nn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function ra(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),In.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qt,this.bindMatrixInverse=new Qt}function aa(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Qt)}}function oa(){nn.call(this),this.type="Bone"}function sa(e){gn.call(this),this.type="LineBasicMaterial",this.color=new cn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function la(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),nn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ln,this.material=void 0!==t?t:new sa({color:16777215*Math.random()})}function ua(e,t){la.call(this,e,t),this.type="LineSegments"}function ca(e,t){la.call(this,e,t),this.type="LineLoop"}function da(e){gn.call(this),this.type="PointsMaterial",this.color=new cn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function ha(e,t){nn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ln,this.material=void 0!==t?t:new da({color:16777215*Math.random()}),this.updateMorphTargets()}function pa(e,t,n,i,r,a,o,s,l){qt.call(this,e,t,n,i,r,a,o,s,l),this.format=void 0!==o?o:Fe,this.minFilter=void 0!==a?a:Te,this.magFilter=void 0!==r?r:Te,this.generateMipmaps=!1}function fa(e,t,n,i,r,a,o,s,l,u,c,d){qt.call(this,null,a,o,s,l,u,i,r,c,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function ma(e,t,n,i,r,a,o,s,l){qt.call(this,e,t,n,i,r,a,o,s,l),this.needsUpdate=!0}function ga(e,t,n,i,r,a,o,s,l,u){if((u=void 0!==u?u:Ve)!==Ve&&u!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ve&&(n=Ae),void 0===n&&u===Ge&&(n=Ue),qt.call(this,null,i,r,a,o,s,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:_e,this.minFilter=void 0!==s?s:_e,this.flipY=!1,this.generateMipmaps=!1}function va(e){Ln.call(this),this.type="WireframeGeometry";var t,n,i,r,a,o,s,l,u,c,d=[],h=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var g=m[t];for(n=0;n<3;n++)s=g[f[n]],l=g[f[(n+1)%3]],h[0]=Math.min(s,l),h[1]=Math.max(s,l),void 0===p[u=h[0]+","+h[1]]&&(p[u]={index1:h[0],index2:h[1]})}for(u in p)o=p[u],c=e.vertices[o.index1],d.push(c.x,c.y,c.z),c=e.vertices[o.index2],d.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var v,y,b,_,x,w,T;if(c=new zt,null!==e.index){for(v=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),r=0,a=b.length;r<a;++r)for(t=x=(_=b[r]).start,i=x+_.count;t<i;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),l=y.getX(t+(n+1)%3),h[0]=Math.min(s,l),h[1]=Math.max(s,l),void 0===p[u=h[0]+","+h[1]]&&(p[u]={index1:h[0],index2:h[1]});for(u in p)o=p[u],c.fromBufferAttribute(v,o.index1),d.push(c.x,c.y,c.z),c.fromBufferAttribute(v,o.index2),d.push(c.x,c.y,c.z)}else for(t=0,i=(v=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)w=3*t+n,c.fromBufferAttribute(v,w),d.push(c.x,c.y,c.z),T=3*t+(n+1)%3,c.fromBufferAttribute(v,T),d.push(c.x,c.y,c.z)}this.addAttribute("position",new kn(d,3))}function ya(e,t,n){Rn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new ba(e,t,n)),this.mergeVertices()}function ba(e,t,n){Ln.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,a=[],o=[],s=[],l=[],u=1e-5,c=new zt,d=new zt,h=new zt,p=new zt,f=new zt;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(i=0;i<=n;i++){var g=i/n;for(r=0;r<=t;r++){var v=r/t;e(v,g,d),o.push(d.x,d.y,d.z),v-u>=0?(e(v-u,g,h),p.subVectors(d,h)):(e(v+u,g,h),p.subVectors(h,d)),g-u>=0?(e(v,g-u,h),f.subVectors(d,h)):(e(v,g+u,h),f.subVectors(h,d)),c.crossVectors(p,f).normalize(),s.push(c.x,c.y,c.z),l.push(v,g)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var y=i*m+r,b=i*m+r+1,_=(i+1)*m+r+1,x=(i+1)*m+r;a.push(y,b,x),a.push(b,_,x)}this.setIndex(a),this.addAttribute("position",new kn(o,3)),this.addAttribute("normal",new kn(s,3)),this.addAttribute("uv",new kn(l,2))}function _a(e,t,n,i){Rn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new xa(e,t,n,i)),this.mergeVertices()}function xa(e,t,n,i){Ln.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],a=[];function o(e,t,n,i){var r,a,o=Math.pow(2,i),l=[];for(r=0;r<=o;r++){l[r]=[];var u=e.clone().lerp(n,r/o),c=t.clone().lerp(n,r/o),d=o-r;for(a=0;a<=d;a++)l[r][a]=0===a&&r===o?u:u.clone().lerp(c,a/d)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var h=Math.floor(a/2);a%2===0?(s(l[r][h+1]),s(l[r+1][h]),s(l[r][h])):(s(l[r][h+1]),s(l[r+1][h+1]),s(l[r+1][h]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function u(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new zt,i=new zt,r=new zt,a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],i),l(t[a+2],r),o(n,i,r,e)}(i=i||0),function(e){for(var t=new zt,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new zt,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=c(e)/2/Math.PI+.5,i=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-i)}var o;(function(){for(var e=new zt,t=new zt,n=new zt,i=new zt,o=new Ft,s=new Ft,l=new Ft,d=0,h=0;d<r.length;d+=9,h+=6){e.set(r[d+0],r[d+1],r[d+2]),t.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=c(i);u(o,h+0,e,p),u(s,h+2,t,p),u(l,h+4,n,p)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new kn(r,3)),this.addAttribute("normal",new kn(r.slice(),3)),this.addAttribute("uv",new kn(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function wa(e,t){Rn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ta(e,t)),this.mergeVertices()}function Ta(e,t){xa.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Sa(e,t){Rn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ea(e,t)),this.mergeVertices()}function Ea(e,t){xa.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ka(e,t){Rn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ca(e,t)),this.mergeVertices()}function Ca(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];xa.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ma(e,t){Rn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Aa(e,t)),this.mergeVertices()}function Aa(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];xa.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Pa(e,t,n,i,r,a){Rn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new La(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function La(e,t,n,i,r){Ln.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,l=new zt,u=new zt,c=new Ft,d=new zt,h=[],p=[],f=[],m=[];function g(r){d=e.getPointAt(r/t,d);var o=a.normals[r],c=a.binormals[r];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);u.x=g*o.x+m*c.x,u.y=g*o.y+m*c.y,u.z=g*o.z+m*c.z,u.normalize(),p.push(u.x,u.y,u.z),l.x=d.x+n*u.x,l.y=d.y+n*u.y,l.z=d.z+n*u.z,h.push(l.x,l.y,l.z)}}!function(){for(o=0;o<t;o++)g(o);g(!1===r?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=i;s++)c.x=o/t,c.y=s/i,f.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=i;o++){var e=(i+1)*(s-1)+(o-1),n=(i+1)*s+(o-1),r=(i+1)*s+o,a=(i+1)*(s-1)+o;m.push(e,n,a),m.push(n,r,a)}}()}(),this.setIndex(m),this.addAttribute("position",new kn(h,3)),this.addAttribute("normal",new kn(p,3)),this.addAttribute("uv",new kn(f,2))}function Ia(e,t,n,i,r,a,o){Rn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Oa(e,t,n,i,r,a)),this.mergeVertices()}function Oa(e,t,n,i,r,a){Ln.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var o,s,l=[],u=[],c=[],d=[],h=new zt,p=new zt,f=new zt,m=new zt,g=new zt,v=new zt,y=new zt;for(o=0;o<=n;++o){var b=o/n*r*Math.PI*2;for(C(b,r,a,e,f),C(b+.01,r,a,e,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=i;++s){var _=s/i*Math.PI*2,x=-t*Math.cos(_),w=t*Math.sin(_);h.x=f.x+(x*y.x+w*g.x),h.y=f.y+(x*y.y+w*g.y),h.z=f.z+(x*y.z+w*g.z),u.push(h.x,h.y,h.z),p.subVectors(h,f).normalize(),c.push(p.x,p.y,p.z),d.push(o/n),d.push(s/i)}}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var T=(i+1)*(s-1)+(o-1),S=(i+1)*s+(o-1),E=(i+1)*s+o,k=(i+1)*(s-1)+o;l.push(T,S,k),l.push(S,E,k)}function C(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new kn(u,3)),this.addAttribute("normal",new kn(c,3)),this.addAttribute("uv",new kn(d,2))}function Ra(e,t,n,i,r){Rn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Da(e,t,n,i,r)),this.mergeVertices()}function Da(e,t,n,i,r){Ln.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],l=[],u=[],c=[],d=new zt,h=new zt,p=new zt;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var f=o/i*r,m=a/n*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(f),h.y=(e+t*Math.cos(m))*Math.sin(f),h.z=t*Math.sin(m),l.push(h.x,h.y,h.z),d.x=e*Math.cos(f),d.y=e*Math.sin(f),p.subVectors(h,d).normalize(),u.push(p.x,p.y,p.z),c.push(o/i),c.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var g=(i+1)*a+o-1,v=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,b=(i+1)*a+o;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.addAttribute("position",new kn(l,3)),this.addAttribute("normal",new kn(u,3)),this.addAttribute("uv",new kn(c,2))}Object.assign(Xr.prototype,c.prototype),Object.assign(Yr.prototype,c.prototype),Object.assign(Qr.prototype,{isFogExp2:!0,clone:function(){return new Qr(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign($r.prototype,{isFog:!0,clone:function(){return new $r(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Jr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Jr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(ea.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ea.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),ta.prototype=Object.create(gn.prototype),ta.prototype.constructor=ta,ta.prototype.isSpriteMaterial=!0,ta.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},na.prototype=Object.assign(Object.create(nn.prototype),{constructor:na,isSprite:!0,raycast:function(){var e=new zt,t=new zt,n=new zt,i=new Ft,r=new Ft,a=new Qt,o=new zt,s=new zt,l=new zt,u=new Ft,c=new Ft,d=new Ft;function h(e,t,n,o,s,l){i.subVectors(e,n).addScalar(.5).multiply(o),void 0!==s?(r.x=l*i.x-s*i.y,r.y=s*i.x+l*i.y):r.copy(i),e.copy(t),e.x+=r.x,e.y+=r.y,e.applyMatrix4(a)}return function(i,r){t.setFromMatrixScale(this.matrixWorld),a.copy(i._camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(i._camera.matrixWorldInverse,this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix),i._camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&t.multiplyScalar(-n.z);var p,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),p=Math.sin(m));var g=this.center;h(o.set(-.5,-.5,0),n,g,t,p,f),h(s.set(.5,-.5,0),n,g,t,p,f),h(l.set(.5,.5,0),n,g,t,p,f),u.set(0,0),c.set(1,0),d.set(1,1);var v=i.ray.intersectTriangle(o,s,l,!1,e);if(null!==v||(h(s.set(-.5,.5,0),n,g,t,p,f),c.set(0,1),null!==(v=i.ray.intersectTriangle(o,l,s,!1,e)))){var y=i.ray.origin.distanceTo(e);y<i.near||y>i.far||r.push({distance:y,point:e.clone(),uv:ln.getUV(e,o,s,l,u,c,d,new Ft),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return nn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),ia.prototype=Object.assign(Object.create(nn.prototype),{constructor:ia,isLOD:!0,copy:function(e){nn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new zt;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,n)}}(),update:function(){var e=new zt,t=new zt;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var a=1,o=i.length;a<o&&r>=i[a].distance;a++)i[a-1].object.visible=!1,i[a].object.visible=!0;for(;a<o;a++)i[a].object.visible=!1}}}(),toJSON:function(e){var t=nn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),ra.prototype=Object.assign(Object.create(In.prototype),{constructor:ra,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Xt,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){In.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(aa.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Qt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Qt,t=new Qt;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,a=this.boneTexture,o=0,s=n.length;o<s;o++){var l=n[o]?n[o].matrixWorld:t;e.multiplyMatrices(l,i[o]),e.toArray(r,16*o)}void 0!==a&&(a.needsUpdate=!0)}}(),clone:function(){return new aa(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),oa.prototype=Object.assign(Object.create(nn.prototype),{constructor:oa,isBone:!0}),sa.prototype=Object.create(gn.prototype),sa.prototype.constructor=sa,sa.prototype.isLineBasicMaterial=!0,sa.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},la.prototype=Object.assign(Object.create(nn.prototype),{constructor:la,isLine:!0,computeLineDistances:function(){var e=new zt,t=new zt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[0],a=1,o=i.count;a<o;a++)e.fromBufferAttribute(i,a-1),t.fromBufferAttribute(i,a),r[a]=r[a-1],r[a]+=e.distanceTo(t);n.addAttribute("lineDistance",new kn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(r=n.lineDistances)[0]=0;for(a=1,o=s.length;a<o;a++)r[a]=r[a-1],r[a]+=s[a-1].distanceTo(s[a])}return this}}(),raycast:function(){var e=new Qt,t=new sn,n=new on;return function(i,r){var a=i.linePrecision,o=this.geometry,s=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=a,!1!==i.ray.intersectsSphere(n)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var l=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,c=new zt,d=new zt,h=new zt,p=new zt,f=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var m=o.index,g=o.attributes.position.array;if(null!==m)for(var v=m.array,y=0,b=v.length-1;y<b;y+=f){var _=v[y],x=v[y+1];if(c.fromArray(g,3*_),d.fromArray(g,3*x),!(t.distanceSqToSegment(c,d,p,h)>u))p.applyMatrix4(this.matrixWorld),(S=i.ray.origin.distanceTo(p))<i.near||S>i.far||r.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,b=g.length/3-1;y<b;y+=f){if(c.fromArray(g,3*y),d.fromArray(g,3*y+3),!(t.distanceSqToSegment(c,d,p,h)>u))p.applyMatrix4(this.matrixWorld),(S=i.ray.origin.distanceTo(p))<i.near||S>i.far||r.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(o.isGeometry){var w=o.vertices,T=w.length;for(y=0;y<T-1;y+=f){var S;if(!(t.distanceSqToSegment(w[y],w[y+1],p,h)>u))p.applyMatrix4(this.matrixWorld),(S=i.ray.origin.distanceTo(p))<i.near||S>i.far||r.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ua.prototype=Object.assign(Object.create(la.prototype),{constructor:ua,isLineSegments:!0,computeLineDistances:function(){var e=new zt,t=new zt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],a=0,o=i.count;a<o;a+=2)e.fromBufferAttribute(i,a),t.fromBufferAttribute(i,a+1),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t);n.addAttribute("lineDistance",new kn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,a=0,o=s.length;a<o;a+=2)e.copy(s[a]),t.copy(s[a+1]),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t)}return this}}()}),ca.prototype=Object.assign(Object.create(la.prototype),{constructor:ca,isLineLoop:!0}),da.prototype=Object.create(gn.prototype),da.prototype.constructor=da,da.prototype.isPointsMaterial=!0,da.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},ha.prototype=Object.assign(Object.create(nn.prototype),{constructor:ha,isPoints:!0,raycast:function(){var e=new Qt,t=new sn,n=new on;return function(i,r){var a=this,o=this.geometry,s=this.matrixWorld,l=i.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=l,!1!==i.ray.intersectsSphere(n)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var u=l/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,d=new zt,h=new zt;if(o.isBufferGeometry){var p=o.index,f=o.attributes.position.array;if(null!==p)for(var m=p.array,g=0,v=m.length;g<v;g++){var y=m[g];d.fromArray(f,3*y),x(d,y)}else{g=0;for(var b=f.length/3;g<b;g++)d.fromArray(f,3*g),x(d,g)}}else{var _=o.vertices;for(g=0,b=_.length;g<b;g++)x(_[g],g)}}function x(e,n){var o=t.distanceSqToPoint(e);if(o<c){t.closestPointToPoint(e,h),h.applyMatrix4(s);var l=i.ray.origin.distanceTo(h);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(o),point:h.clone(),index:n,face:null,object:a})}}}}(),updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),pa.prototype=Object.assign(Object.create(qt.prototype),{constructor:pa,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),fa.prototype=Object.create(qt.prototype),fa.prototype.constructor=fa,fa.prototype.isCompressedTexture=!0,ma.prototype=Object.create(qt.prototype),ma.prototype.constructor=ma,ma.prototype.isCanvasTexture=!0,ga.prototype=Object.create(qt.prototype),ga.prototype.constructor=ga,ga.prototype.isDepthTexture=!0,va.prototype=Object.create(Ln.prototype),va.prototype.constructor=va,ya.prototype=Object.create(Rn.prototype),ya.prototype.constructor=ya,ba.prototype=Object.create(Ln.prototype),ba.prototype.constructor=ba,_a.prototype=Object.create(Rn.prototype),_a.prototype.constructor=_a,xa.prototype=Object.create(Ln.prototype),xa.prototype.constructor=xa,wa.prototype=Object.create(Rn.prototype),wa.prototype.constructor=wa,Ta.prototype=Object.create(xa.prototype),Ta.prototype.constructor=Ta,Sa.prototype=Object.create(Rn.prototype),Sa.prototype.constructor=Sa,Ea.prototype=Object.create(xa.prototype),Ea.prototype.constructor=Ea,ka.prototype=Object.create(Rn.prototype),ka.prototype.constructor=ka,Ca.prototype=Object.create(xa.prototype),Ca.prototype.constructor=Ca,Ma.prototype=Object.create(Rn.prototype),Ma.prototype.constructor=Ma,Aa.prototype=Object.create(xa.prototype),Aa.prototype.constructor=Aa,Pa.prototype=Object.create(Rn.prototype),Pa.prototype.constructor=Pa,La.prototype=Object.create(Ln.prototype),La.prototype.constructor=La,La.prototype.toJSON=function(){var e=Ln.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Ia.prototype=Object.create(Rn.prototype),Ia.prototype.constructor=Ia,Oa.prototype=Object.create(Ln.prototype),Oa.prototype.constructor=Oa,Ra.prototype=Object.create(Rn.prototype),Ra.prototype.constructor=Ra,Da.prototype=Object.create(Ln.prototype),Da.prototype.constructor=Da;var Na=function(e,t,n){n=n||2;var i,r,a,o,s,l,u,c=t&&t.length,d=c?t[0]*n:e.length,h=Ua(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(e,t,n,i){var r,a,o,s=[];for(r=0,a=t.length;r<a;r++)(o=Ua(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),s.push(qa(o));for(s.sort(Ga),r=0;r<s.length;r++)Wa(s[r],n),n=Ba(n,n.next);return n}(e,t,h,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var f=n;f<d;f+=n)(s=e[f])<i&&(i=s),(l=e[f+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-i,o-r))?1/u:0}return Fa(h,p,n,i,r,u),p};function Ua(e,t,n,i,r){var a,o;if(r===function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=to(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=to(a,e[a],e[a+1],o);return o&&Qa(o,o.next)&&(no(o),o=o.next),o}function Ba(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Qa(i,i.next)&&0!==Ka(i.prev,i,i.next))i=i.next;else{if(no(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Fa(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Za(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<u&&(s++,i=i.nextZ);t++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1)}(r)}(e,i,r,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?za(e,i,r,a):ja(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),no(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Fa(e=Ha(e,t,n),t,n,i,r,a,2):2===o&&Va(e,t,n,i,r,a):Fa(Ba(e),t,n,i,r,a,1);break}}}function ja(e){var t=e.prev,n=e,i=e.next;if(Ka(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Xa(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ka(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function za(e,t,n,i){var r=e.prev,a=e,o=e.next;if(Ka(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,d=Za(s,l,t,n,i),h=Za(u,c,t,n,i),p=e.prevZ,f=e.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&Xa(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ka(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&Xa(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ka(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&Xa(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ka(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&Xa(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ka(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Ha(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!Qa(r,a)&&$a(r,i,i.next,a)&&Ja(r,a)&&Ja(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),no(i),no(i.next),i=e=a),i=i.next}while(i!==e);return i}function Va(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ya(o,s)){var l=eo(o,s);return o=Ba(o,o.next),l=Ba(l,l.next),Fa(o,t,n,i,r,a),void Fa(l,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function Ga(e,t){return e.x-t.x}function Wa(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n.prev;var l,u=n,c=n.x,d=n.y,h=1/0;i=n.next;for(;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&Xa(a<d?r:o,a,c,d,a<d?o:r,a,i.x,i.y)&&((l=Math.abs(a-i.y)/(r-i.x))<h||l===h&&i.x>n.x)&&Ja(i,e)&&(n=i,h=l),i=i.next;return n}(e,t),t){var n=eo(t,e);Ba(n,n.next)}}function Za(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function qa(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Xa(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Ya(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&$a(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Ja(e,t)&&Ja(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function Ka(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Qa(e,t){return e.x===t.x&&e.y===t.y}function $a(e,t,n,i){return!!(Qa(e,n)&&Qa(t,i)||Qa(e,i)&&Qa(n,t))||Ka(e,t,n)>0!==Ka(e,t,i)>0&&Ka(n,i,e)>0!==Ka(n,i,t)>0}function Ja(e,t){return Ka(e.prev,e,e.next)<0?Ka(e,t,e.next)>=0&&Ka(e,e.prev,t)>=0:Ka(e,t,e.prev)<0||Ka(e,e.next,t)<0}function eo(e,t){var n=new io(e.i,e.x,e.y),i=new io(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function to(e,t,n,i){var r=new io(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function no(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function io(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ro={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return ro.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];ao(e),oo(n,e);var a=e.length;t.forEach(ao);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,oo(n,t[o]);var s=Na(n,i);for(o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function ao(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function oo(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function so(e,t){Rn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new lo(e,t)),this.mergeVertices()}function lo(e,t){Ln.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],r=[],a=0,o=e.length;a<o;a++){s(e[a])}function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:c-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:uo;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var g,v,y,b,_,x,w,T,S=!1;f&&(g=f.getSpacedPoints(s),S=!0,u=!1,v=f.computeFrenetFrames(s,!1),y=new zt,b=new zt,_=new zt),u||(p=0,c=0,d=0,h=0);var E=e.extractPoints(o),k=E.shape,C=E.holes;if(!ro.isClockWise(k))for(k=k.reverse(),w=0,T=C.length;w<T;w++)x=C[w],ro.isClockWise(x)&&(C[w]=x.reverse());var M=ro.triangulateShape(k,C),A=k;for(w=0,T=C.length;w<T;w++)x=C[w],k=k.concat(x);function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,I,O,R,D,N,U=k.length,B=M.length;function F(e,t,n){var i,r,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,d=o*u-s*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=t.x-s/h,m=t.y+o/h,g=((n.x-u/p-f)*u-(n.y+l/p-m)*l)/(o*u-s*l),v=(i=f+o*g-e.x)*i+(r=m+s*g-e.y)*r;if(v<=2)return new Ft(i,r);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(i=-s,r=o,a=Math.sqrt(c)):(i=o,r=s,a=Math.sqrt(c/2))}return new Ft(i/a,r/a)}for(var j=[],z=0,H=A.length,V=H-1,G=z+1;z<H;z++,V++,G++)V===H&&(V=0),G===H&&(G=0),j[z]=F(A[z],A[V],A[G]);var W,Z,q=[],X=j.concat();for(w=0,T=C.length;w<T;w++){for(x=C[w],W=[],z=0,V=(H=x.length)-1,G=z+1;z<H;z++,V++,G++)V===H&&(V=0),G===H&&(G=0),W[z]=F(x[z],x[V],x[G]);q.push(W),X=X.concat(W)}for(L=0;L<p;L++){for(O=L/p,R=c*Math.cos(O*Math.PI/2),I=d*Math.sin(O*Math.PI/2)+h,z=0,H=A.length;z<H;z++)K((D=P(A[z],j[z],I)).x,D.y,-R);for(w=0,T=C.length;w<T;w++)for(x=C[w],W=q[w],z=0,H=x.length;z<H;z++)K((D=P(x[z],W[z],I)).x,D.y,-R)}for(I=d+h,z=0;z<U;z++)D=u?P(k[z],X[z],I):k[z],S?(b.copy(v.normals[0]).multiplyScalar(D.x),y.copy(v.binormals[0]).multiplyScalar(D.y),_.copy(g[0]).add(b).add(y),K(_.x,_.y,_.z)):K(D.x,D.y,0);for(Z=1;Z<=s;Z++)for(z=0;z<U;z++)D=u?P(k[z],X[z],I):k[z],S?(b.copy(v.normals[Z]).multiplyScalar(D.x),y.copy(v.binormals[Z]).multiplyScalar(D.y),_.copy(g[Z]).add(b).add(y),K(_.x,_.y,_.z)):K(D.x,D.y,l/s*Z);for(L=p-1;L>=0;L--){for(O=L/p,R=c*Math.cos(O*Math.PI/2),I=d*Math.sin(O*Math.PI/2)+h,z=0,H=A.length;z<H;z++)K((D=P(A[z],j[z],I)).x,D.y,l+R);for(w=0,T=C.length;w<T;w++)for(x=C[w],W=q[w],z=0,H=x.length;z<H;z++)D=P(x[z],W[z],I),S?K(D.x,D.y+g[s-1].y,g[s-1].x+R):K(D.x,D.y,l+R)}function Y(e,t){var n,i;for(z=e.length;--z>=0;){n=z,(i=z-1)<0&&(i=e.length-1);var r=0,a=s+2*p;for(r=0;r<a;r++){var o=U*r,l=U*(r+1);$(t+n+o,t+i+o,t+i+l,t+n+l)}}}function K(e,t,n){a.push(e),a.push(t),a.push(n)}function Q(e,t,r){J(e),J(t),J(r);var a=i.length/3,o=m.generateTopUV(n,i,a-3,a-2,a-1);ee(o[0]),ee(o[1]),ee(o[2])}function $(e,t,r,a){J(e),J(t),J(a),J(t),J(r),J(a);var o=i.length/3,s=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function J(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function ee(e){r.push(e.x),r.push(e.y)}!function(){var e=i.length/3;if(u){var t=0,r=U*t;for(z=0;z<B;z++)Q((N=M[z])[2]+r,N[1]+r,N[0]+r);for(r=U*(t=s+2*p),z=0;z<B;z++)Q((N=M[z])[0]+r,N[1]+r,N[2]+r)}else{for(z=0;z<B;z++)Q((N=M[z])[2],N[1],N[0]);for(z=0;z<B;z++)Q((N=M[z])[0]+U*s,N[1]+U*s,N[2]+U*s)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(Y(A,t),t+=A.length,w=0,T=C.length;w<T;w++)Y(x=C[w],t),t+=x.length;n.addGroup(e,i.length/3-e,1)}()}this.addAttribute("position",new kn(i,3)),this.addAttribute("uv",new kn(r,2)),this.computeVertexNormals()}so.prototype=Object.create(Rn.prototype),so.prototype.constructor=so,so.prototype.toJSON=function(){var e=Rn.prototype.toJSON.call(this);return co(this.parameters.shapes,this.parameters.options,e)},lo.prototype=Object.create(Ln.prototype),lo.prototype.constructor=lo,lo.prototype.toJSON=function(){var e=Ln.prototype.toJSON.call(this);return co(this.parameters.shapes,this.parameters.options,e)};var uo={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new Ft(a,o),new Ft(s,l),new Ft(u,c)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<.01?[new Ft(o,1-l),new Ft(u,1-d),new Ft(h,1-f),new Ft(m,1-v)]:[new Ft(s,1-l),new Ft(c,1-d),new Ft(p,1-f),new Ft(g,1-v)]}};function co(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function ho(e,t){Rn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new po(e,t)),this.mergeVertices()}function po(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Rn;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),lo.call(this,i,t),this.type="TextBufferGeometry"}function fo(e,t,n,i,r,a,o){Rn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new mo(e,t,n,i,r,a,o)),this.mergeVertices()}function mo(e,t,n,i,r,a,o){Ln.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,l,u=Math.min(a+o,Math.PI),c=0,d=[],h=new zt,p=new zt,f=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var y=[],b=l/n,_=0;for(0==l&&0==a?_=.5/t:l==n&&u==Math.PI&&(_=-.5/t),s=0;s<=t;s++){var x=s/t;h.x=-e*Math.cos(i+x*r)*Math.sin(a+b*o),h.y=e*Math.cos(a+b*o),h.z=e*Math.sin(i+x*r)*Math.sin(a+b*o),m.push(h.x,h.y,h.z),p.copy(h).normalize(),g.push(p.x,p.y,p.z),v.push(x+_,1-b),y.push(c++)}d.push(y)}for(l=0;l<n;l++)for(s=0;s<t;s++){var w=d[l][s+1],T=d[l][s],S=d[l+1][s],E=d[l+1][s+1];(0!==l||a>0)&&f.push(w,T,E),(l!==n-1||u<Math.PI)&&f.push(T,S,E)}this.setIndex(f),this.addAttribute("position",new kn(m,3)),this.addAttribute("normal",new kn(g,3)),this.addAttribute("uv",new kn(v,2))}function go(e,t,n,i,r,a){Rn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new vo(e,t,n,i,r,a)),this.mergeVertices()}function vo(e,t,n,i,r,a){Ln.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,l,u=[],c=[],d=[],h=[],p=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new zt,g=new Ft;for(s=0;s<=i;s++){for(l=0;l<=n;l++)o=r+l/n*a,m.x=p*Math.cos(o),m.y=p*Math.sin(o),c.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,h.push(g.x,g.y);p+=f}for(s=0;s<i;s++){var v=s*(n+1);for(l=0;l<n;l++){var y=o=l+v,b=o+n+1,_=o+n+2,x=o+1;u.push(y,b,x),u.push(b,_,x)}}this.setIndex(u),this.addAttribute("position",new kn(c,3)),this.addAttribute("normal",new kn(d,3)),this.addAttribute("uv",new kn(h,2))}function yo(e,t,n,i){Rn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new bo(e,t,n,i)),this.mergeVertices()}function bo(e,t,n,i){Ln.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Bt.clamp(i,0,2*Math.PI);var r,a,o,s=[],l=[],u=[],c=1/t,d=new zt,h=new Ft;for(a=0;a<=t;a++){var p=n+a*c*i,f=Math.sin(p),m=Math.cos(p);for(o=0;o<=e.length-1;o++)d.x=e[o].x*f,d.y=e[o].y,d.z=e[o].x*m,l.push(d.x,d.y,d.z),h.x=a/t,h.y=o/(e.length-1),u.push(h.x,h.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var g=r=o+a*e.length,v=r+e.length,y=r+e.length+1,b=r+1;s.push(g,v,b),s.push(v,y,b)}if(this.setIndex(s),this.addAttribute("position",new kn(l,3)),this.addAttribute("uv",new kn(u,2)),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,x=new zt,w=new zt,T=new zt;for(r=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)x.x=_[o+0],x.y=_[o+1],x.z=_[o+2],w.x=_[r+o+0],w.y=_[r+o+1],w.z=_[r+o+2],T.addVectors(x,w).normalize(),_[o+0]=_[r+o+0]=T.x,_[o+1]=_[r+o+1]=T.y,_[o+2]=_[r+o+2]=T.z}}function _o(e,t){Rn.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new xo(e,t)),this.mergeVertices()}function xo(e,t){Ln.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(o,s,l),o+=s,s=0;function u(e){var o,l,u,c=i.length/3,d=e.extractPoints(t),h=d.shape,p=d.holes;for(!1===ro.isClockWise(h)&&(h=h.reverse()),o=0,l=p.length;o<l;o++)u=p[o],!0===ro.isClockWise(u)&&(p[o]=u.reverse());var f=ro.triangulateShape(h,p);for(o=0,l=p.length;o<l;o++)u=p[o],h=h.concat(u);for(o=0,l=h.length;o<l;o++){var m=h[o];i.push(m.x,m.y,0),r.push(0,0,1),a.push(m.x,m.y)}for(o=0,l=f.length;o<l;o++){var g=f[o],v=g[0]+c,y=g[1]+c,b=g[2]+c;n.push(v,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new kn(i,3)),this.addAttribute("normal",new kn(r,3)),this.addAttribute("uv",new kn(a,2))}function wo(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function To(e,t){Ln.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,a,o=[],s=Math.cos(Bt.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new Rn).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,h=a.faces,p=0,f=h.length;p<f;p++)for(var m=h[p],g=0;g<3;g++)n=m[c[g]],i=m[c[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===u[r=l[0]+","+l[1]]?u[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[r].face2=p;for(r in u){var v=u[r];if(void 0===v.face2||h[v.face1].normal.dot(h[v.face2].normal)<=s){var y=d[v.index1];o.push(y.x,y.y,y.z),y=d[v.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new kn(o,3))}function So(e,t,n,i,r,a,o,s){Rn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Eo(e,t,n,i,r,a,o,s)),this.mergeVertices()}function Eo(e,t,n,i,r,a,o,s){Ln.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],d=[],h=[],p=0,f=[],m=n/2,g=0;function v(n){var r,a,f,v=new Ft,y=new zt,b=0,_=!0===n?e:t,x=!0===n?1:-1;for(a=p,r=1;r<=i;r++)c.push(0,m*x,0),d.push(0,x,0),h.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var w=r/i*s+o,T=Math.cos(w),S=Math.sin(w);y.x=_*S,y.y=m*x,y.z=_*T,c.push(y.x,y.y,y.z),d.push(0,x,0),v.x=.5*T+.5,v.y=.5*S*x+.5,h.push(v.x,v.y),p++}for(r=0;r<i;r++){var E=a+r,k=f+r;!0===n?u.push(k,k+1,E):u.push(k+1,k,E),b+=3}l.addGroup(g,b,!0===n?1:2),g+=b}!function(){var a,v,y=new zt,b=new zt,_=0,x=(t-e)/n;for(v=0;v<=r;v++){var w=[],T=v/r,S=T*(t-e)+e;for(a=0;a<=i;a++){var E=a/i,k=E*s+o,C=Math.sin(k),M=Math.cos(k);b.x=S*C,b.y=-T*n+m,b.z=S*M,c.push(b.x,b.y,b.z),y.set(C,x,M).normalize(),d.push(y.x,y.y,y.z),h.push(E,1-T),w.push(p++)}f.push(w)}for(a=0;a<i;a++)for(v=0;v<r;v++){var A=f[v][a],P=f[v+1][a],L=f[v+1][a+1],I=f[v][a+1];u.push(A,P,I),u.push(P,L,I),_+=6}l.addGroup(g,_,0),g+=_}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.addAttribute("position",new kn(c,3)),this.addAttribute("normal",new kn(d,3)),this.addAttribute("uv",new kn(h,2))}function ko(e,t,n,i,r,a,o){So.call(this,0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Co(e,t,n,i,r,a,o){Eo.call(this,0,e,t,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Mo(e,t,n,i){Rn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Ao(e,t,n,i)),this.mergeVertices()}function Ao(e,t,n,i){Ln.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],s=[],l=[],u=[],c=new zt,d=new Ft;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,r=3;a<=t;a++,r+=3){var h=n+a/t*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),s.push(c.x,c.y,c.z),l.push(0,0,1),d.x=(s[r]/e+1)/2,d.y=(s[r+1]/e+1)/2,u.push(d.x,d.y)}for(r=1;r<=t;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new kn(s,3)),this.addAttribute("normal",new kn(l,3)),this.addAttribute("uv",new kn(u,2))}ho.prototype=Object.create(Rn.prototype),ho.prototype.constructor=ho,po.prototype=Object.create(lo.prototype),po.prototype.constructor=po,fo.prototype=Object.create(Rn.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(Ln.prototype),mo.prototype.constructor=mo,go.prototype=Object.create(Rn.prototype),go.prototype.constructor=go,vo.prototype=Object.create(Ln.prototype),vo.prototype.constructor=vo,yo.prototype=Object.create(Rn.prototype),yo.prototype.constructor=yo,bo.prototype=Object.create(Ln.prototype),bo.prototype.constructor=bo,_o.prototype=Object.create(Rn.prototype),_o.prototype.constructor=_o,_o.prototype.toJSON=function(){var e=Rn.prototype.toJSON.call(this);return wo(this.parameters.shapes,e)},xo.prototype=Object.create(Ln.prototype),xo.prototype.constructor=xo,xo.prototype.toJSON=function(){var e=Ln.prototype.toJSON.call(this);return wo(this.parameters.shapes,e)},To.prototype=Object.create(Ln.prototype),To.prototype.constructor=To,So.prototype=Object.create(Rn.prototype),So.prototype.constructor=So,Eo.prototype=Object.create(Ln.prototype),Eo.prototype.constructor=Eo,ko.prototype=Object.create(So.prototype),ko.prototype.constructor=ko,Co.prototype=Object.create(Eo.prototype),Co.prototype.constructor=Co,Mo.prototype=Object.create(Rn.prototype),Mo.prototype.constructor=Mo,Ao.prototype=Object.create(Ln.prototype),Ao.prototype.constructor=Ao;var Po=Object.freeze({WireframeGeometry:va,ParametricGeometry:ya,ParametricBufferGeometry:ba,TetrahedronGeometry:wa,TetrahedronBufferGeometry:Ta,OctahedronGeometry:Sa,OctahedronBufferGeometry:Ea,IcosahedronGeometry:ka,IcosahedronBufferGeometry:Ca,DodecahedronGeometry:Ma,DodecahedronBufferGeometry:Aa,PolyhedronGeometry:_a,PolyhedronBufferGeometry:xa,TubeGeometry:Pa,TubeBufferGeometry:La,TorusKnotGeometry:Ia,TorusKnotBufferGeometry:Oa,TorusGeometry:Ra,TorusBufferGeometry:Da,TextGeometry:ho,TextBufferGeometry:po,SphereGeometry:fo,SphereBufferGeometry:mo,RingGeometry:go,RingBufferGeometry:vo,PlaneGeometry:ni,PlaneBufferGeometry:ii,LatheGeometry:yo,LatheBufferGeometry:bo,ShapeGeometry:_o,ShapeBufferGeometry:xo,ExtrudeGeometry:so,ExtrudeBufferGeometry:lo,EdgesGeometry:To,ConeGeometry:ko,ConeBufferGeometry:Co,CylinderGeometry:So,CylinderBufferGeometry:Eo,CircleGeometry:Mo,CircleBufferGeometry:Ao,BoxGeometry:Dn,BoxBufferGeometry:Nn});function Lo(e){gn.call(this),this.type="ShadowMaterial",this.color=new cn(0),this.transparent=!0,this.setValues(e)}function Io(e){zn.call(this,e),this.type="RawShaderMaterial"}function Oo(e){gn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new cn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rt,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ro(e){Oo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Do(e){gn.call(this),this.type="MeshPhongMaterial",this.color=new cn(16777215),this.specular=new cn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rt,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=te,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function No(e){Do.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Uo(e){gn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rt,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Bo(e){gn.call(this),this.type="MeshLambertMaterial",this.color=new cn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=te,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Fo(e){gn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new cn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rt,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function jo(e){sa.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Lo.prototype=Object.create(gn.prototype),Lo.prototype.constructor=Lo,Lo.prototype.isShadowMaterial=!0,Lo.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.color.copy(e.color),this},Io.prototype=Object.create(zn.prototype),Io.prototype.constructor=Io,Io.prototype.isRawShaderMaterial=!0,Oo.prototype=Object.create(gn.prototype),Oo.prototype.constructor=Oo,Oo.prototype.isMeshStandardMaterial=!0,Oo.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ro.prototype=Object.create(Oo.prototype),Ro.prototype.constructor=Ro,Ro.prototype.isMeshPhysicalMaterial=!0,Ro.prototype.copy=function(e){return Oo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Do.prototype=Object.create(gn.prototype),Do.prototype.constructor=Do,Do.prototype.isMeshPhongMaterial=!0,Do.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},No.prototype=Object.create(Do.prototype),No.prototype.constructor=No,No.prototype.isMeshToonMaterial=!0,No.prototype.copy=function(e){return Do.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Uo.prototype=Object.create(gn.prototype),Uo.prototype.constructor=Uo,Uo.prototype.isMeshNormalMaterial=!0,Uo.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Bo.prototype=Object.create(gn.prototype),Bo.prototype.constructor=Bo,Bo.prototype.isMeshLambertMaterial=!0,Bo.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Fo.prototype=Object.create(gn.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isMeshMatcapMaterial=!0,Fo.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},jo.prototype=Object.create(sa.prototype),jo.prototype.constructor=jo,jo.prototype.isLineDashedMaterial=!0,jo.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var zo=Object.freeze({ShadowMaterial:Lo,SpriteMaterial:ta,RawShaderMaterial:Io,ShaderMaterial:zn,PointsMaterial:da,MeshPhysicalMaterial:Ro,MeshStandardMaterial:Oo,MeshPhongMaterial:Do,MeshToonMaterial:No,MeshNormalMaterial:Uo,MeshLambertMaterial:Bo,MeshDepthMaterial:Nr,MeshDistanceMaterial:Ur,MeshBasicMaterial:vn,MeshMatcapMaterial:Fo,LineDashedMaterial:jo,LineBasicMaterial:sa,Material:gn}),Ho={arraySlice:function(e,t,n){return Ho.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,l=0;l!==t;++l)r[o++]=e[s+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}};function Vo(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Go(e,t,n,i){Vo.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Wo(e,t,n,i){Vo.call(this,e,t,n,i)}function Zo(e,t,n,i){Vo.call(this,e,t,n,i)}function qo(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ho.convertArray(t,this.TimeBufferType),this.values=Ho.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Xo(e,t,n){qo.call(this,e,t,n)}function Yo(e,t,n,i){qo.call(this,e,t,n,i)}function Ko(e,t,n,i){qo.call(this,e,t,n,i)}function Qo(e,t,n,i){Vo.call(this,e,t,n,i)}function $o(e,t,n,i){qo.call(this,e,t,n,i)}function Jo(e,t,n,i){qo.call(this,e,t,n,i)}function es(e,t,n,i){qo.call(this,e,t,n,i)}function ts(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Bt.generateUUID(),this.duration<0&&this.resetDuration()}function ns(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ko;case"vector":case"vector2":case"vector3":case"vector4":return es;case"color":return Yo;case"quaternion":return $o;case"bool":case"boolean":return Xo;case"string":return Jo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];Ho.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Vo.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Vo.prototype,{beforeStart_:Vo.prototype.copySampleValue_,afterEnd_:Vo.prototype.copySampleValue_}),Go.prototype=Object.assign(Object.create(Vo.prototype),{constructor:Go,DefaultSettings_:{endingStart:bt,endingEnd:bt},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case _t:r=e,o=2*t-n;break;case xt:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case _t:a=e,s=2*n-t;break;case xt:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,b=h*m-h*f,_=0;_!==o;++_)r[_]=g*a[u+_]+v*a[l+_]+y*a[s+_]+b*a[c+_];return r}}),Wo.prototype=Object.assign(Object.create(Vo.prototype),{constructor:Wo,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(i-t),c=1-u,d=0;d!==o;++d)r[d]=a[l+d]*c+a[s+d]*u;return r}}),Zo.prototype=Object.assign(Object.create(Vo.prototype),{constructor:Zo,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(qo,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Ho.convertArray(e.times,Array),values:Ho.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(qo.prototype,{constructor:qo,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:vt,InterpolantFactoryMethodDiscrete:function(e){return new Zo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Wo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Go(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case gt:t=this.InterpolantFactoryMethodDiscrete;break;case vt:t=this.InterpolantFactoryMethodLinear;break;case yt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gt;case this.InterpolantFactoryMethodLinear:return vt;case this.InterpolantFactoryMethodSmooth:return yt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Ho.arraySlice(n,r,a),this.values=Ho.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&Ho.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===yt,r=1,a=e.length-1,o=1;o<a;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(i)s=!0;else for(var u=o*n,c=u-n,d=u+n,h=0;h!==n;++h){var p=t[u+h];if(p!==t[c+h]||p!==t[d+h]){s=!0;break}}if(s){if(o!==r){e[r]=e[o];var f=o*n,m=r*n;for(h=0;h!==n;++h)t[m+h]=t[f+h]}++r}}if(a>0){e[r]=e[a];for(f=a*n,m=r*n,h=0;h!==n;++h)t[m+h]=t[f+h];++r}return r!==e.length&&(this.times=Ho.arraySlice(e,0,r),this.values=Ho.arraySlice(t,0,r*n)),this},clone:function(){var e=Ho.arraySlice(this.times,0),t=Ho.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Xo.prototype=Object.assign(Object.create(qo.prototype),{constructor:Xo,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Yo.prototype=Object.assign(Object.create(qo.prototype),{constructor:Yo,ValueTypeName:"color"}),Ko.prototype=Object.assign(Object.create(qo.prototype),{constructor:Ko,ValueTypeName:"number"}),Qo.prototype=Object.assign(Object.create(Vo.prototype),{constructor:Qo,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=(n-t)/(i-t),u=s+o;s!==u;s+=4)jt.slerpFlat(r,0,a,s-o,a,s,l);return r}}),$o.prototype=Object.assign(Object.create(qo.prototype),{constructor:$o,ValueTypeName:"quaternion",DefaultInterpolation:vt,InterpolantFactoryMethodLinear:function(e){return new Qo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Jo.prototype=Object.assign(Object.create(qo.prototype),{constructor:Jo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),es.prototype=Object.assign(Object.create(qo.prototype),{constructor:es,ValueTypeName:"vector"}),Object.assign(ts,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(ns(n[r]).scale(i));return new ts(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,a=n.length;r!==a;++r)t.push(qo.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=Ho.getKeyframeOrder(s);s=Ho.sortedArray(s,1,u),l=Ho.sortedArray(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new Ko(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new ts(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(r);if(l&&l.length>1){var u=i[d=l[1]];u||(i[d]=u=[]),u.push(s)}}var c=[];for(var d in i)c.push(ts.CreateFromMorphTargetSequence(d,i[d],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];Ho.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},d=0;d<u.length;d++)if(u[d].morphTargets)for(var h=0;h<u[d].morphTargets.length;h++)c[u[d].morphTargets[h]]=-1;for(var p in c){var f=[],m=[];for(h=0;h!==u[d].morphTargets.length;++h){var g=u[d];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new Ko(".morphTargetInfluence["+p+"]",f,m))}a=c.length*(o||1)}else{var v=".bones["+t[l].name+"]";n(es,v+".position",u,"pos",i),n($o,v+".quaternion",u,"rot",i),n(es,v+".scale",u,"scl",i)}}return 0===i.length?null:new ts(r,a,i)}}),Object.assign(ts.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new ts(this.name,this.duration,e)}});var is={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function rs(e,t,n){var i=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var as=new rs,os={};function ss(e){this.manager=void 0!==e?e:as}function ls(e){this.manager=void 0!==e?e:as,this._parser=null}function us(e){this.manager=void 0!==e?e:as}function cs(e){this.manager=void 0!==e?e:as}function ds(e){this.manager=void 0!==e?e:as}function hs(){this.type="Curve",this.arcLengthDivisions=200}function ps(e,t,n,i,r,a,o,s){hs.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function fs(e,t,n,i,r,a){ps.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function ms(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(i-t)/(o+s)+(i-n)/s;r(t,n,l*=o,u*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}Object.assign(ss.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=is.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===os[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],l=!!o[2],u=o[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var h=new Uint8Array(u.length),p=0;p<u.length;p++)h[p]=u.charCodeAt(p);c="blob"===d?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){t&&t(c),r.manager.itemEnd(e)}),0)}catch(v){setTimeout((function(){i&&i(v),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{os[e]=[],os[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response;is.add(e,n);var i=os[e];if(delete os[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=i.length;a<o;a++){(s=i[a]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(a=0,o=i.length;a<o;a++){var s;(s=i[a]).onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=os[e],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=os[e];delete os[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var n=os[e];delete os[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(e),m}os[e].push({onLoad:t,onProgress:n,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:as}.prototype,{load:function(e,t,n,i){var r=this,a=new ss(r.manager);a.setPath(r.path),a.load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var i=ts.parse(e[n]);t.push(i)}return t},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:as,this._parser=null}.prototype,{load:function(e,t,n,i){var r=this,a=[],o=new fa;o.image=a;var s=new ss(this.manager);function l(l){s.load(e[l],(function(e){var n=r._parser(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Te),o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,d=e.length;c<d;++c)l(c);else s.load(e,(function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Te),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,i);return o},setPath:function(e){return this.path=e,this}}),Object.assign(ls.prototype,{load:function(e,t,n,i){var r=this,a=new Xn,o=new ss(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,(function(e){var n=r._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:ye,a.wrapT=void 0!==n.wrapT?n.wrapT:ye,a.magFilter=void 0!==n.magFilter?n.magFilter:Te,a.minFilter=void 0!==n.minFilter?n.minFilter:Ee,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=Te),a.needsUpdate=!0,t&&t(a,n))}),n,i),a},setPath:function(e){return this.path=e,this}}),Object.assign(us.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=is.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),is.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(cs.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new mi,a=new us(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){r.images[n]=e,6===++o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)s(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ds.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new qt,a=new us(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){r.image=n;var i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Fe:je,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(hs.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(a-1)},getTangent:function(e){var t=1e-4,n=e-t,i=e+t;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n);return this.getPoint(i).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,a=new zt,o=[],s=[],l=[],u=new zt,c=new Qt;for(n=0;n<=e;n++)i=n/e,o[n]=this.getTangentAt(i),o[n].normalize();s[0]=new zt,l[0]=new zt;var d=Number.MAX_VALUE,h=Math.abs(o[0].x),p=Math.abs(o[0].y),f=Math.abs(o[0].z);for(h<=d&&(d=h,a.set(1,0,0)),p<=d&&(d=p,a.set(0,1,0)),f<=d&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),l[0].crossVectors(o[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(Bt.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,r))),l[n].crossVectors(o[n],s[n]);if(!0===t)for(r=Math.acos(Bt.clamp(s[0].dot(s[e]),-1,1)),r/=e,o[0].dot(u.crossVectors(s[0],s[e]))>0&&(r=-r),n=1;n<=e;n++)s[n].applyMatrix4(c.makeRotationAxis(o[n],r*n)),l[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ps.prototype=Object.create(hs.prototype),ps.prototype.constructor=ps,ps.prototype.isEllipseCurve=!0,ps.prototype.getPoint=function(e,t){for(var n=t||new Ft,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=l-this.aY;s=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return n.set(s,l)},ps.prototype.copy=function(e){return hs.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ps.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ps.prototype.fromJSON=function(e){return hs.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},fs.prototype=Object.create(ps.prototype),fs.prototype.constructor=fs,fs.prototype.isArcCurve=!0;var gs=new zt,vs=new ms,ys=new ms,bs=new ms;function _s(e,t,n,i){hs.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function xs(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function ws(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Ts(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function Ss(e,t,n,i){hs.call(this),this.type="CubicBezierCurve",this.v0=e||new Ft,this.v1=t||new Ft,this.v2=n||new Ft,this.v3=i||new Ft}function Es(e,t,n,i){hs.call(this),this.type="CubicBezierCurve3",this.v0=e||new zt,this.v1=t||new zt,this.v2=n||new zt,this.v3=i||new zt}function ks(e,t){hs.call(this),this.type="LineCurve",this.v1=e||new Ft,this.v2=t||new Ft}function Cs(e,t){hs.call(this),this.type="LineCurve3",this.v1=e||new zt,this.v2=t||new zt}function Ms(e,t,n){hs.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Ft,this.v1=t||new Ft,this.v2=n||new Ft}function As(e,t,n){hs.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new zt,this.v1=t||new zt,this.v2=n||new zt}function Ps(e){hs.call(this),this.type="SplineCurve",this.points=e||[]}_s.prototype=Object.create(hs.prototype),_s.prototype.constructor=_s,_s.prototype.isCatmullRomCurve3=!0,_s.prototype.getPoint=function(e,t){var n,i,r,a,o=t||new zt,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),d=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===d&&c===l-1&&(c=l-2,d=1),this.closed||c>0?n=s[(c-1)%l]:(gs.subVectors(s[0],s[1]).add(s[0]),n=gs),i=s[c%l],r=s[(c+1)%l],this.closed||c+2<l?a=s[(c+2)%l]:(gs.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=gs),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),h),f=Math.pow(i.distanceToSquared(r),h),m=Math.pow(r.distanceToSquared(a),h);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),vs.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,p,f,m),ys.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,p,f,m),bs.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,p,f,m)}else"catmullrom"===this.curveType&&(vs.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),ys.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),bs.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(vs.calc(d),ys.calc(d),bs.calc(d)),o},_s.prototype.copy=function(e){hs.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},_s.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},_s.prototype.fromJSON=function(e){hs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new zt).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ss.prototype=Object.create(hs.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isCubicBezierCurve=!0,Ss.prototype.getPoint=function(e,t){var n=t||new Ft,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Ts(e,i.x,r.x,a.x,o.x),Ts(e,i.y,r.y,a.y,o.y)),n},Ss.prototype.copy=function(e){return hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ss.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ss.prototype.fromJSON=function(e){return hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Es.prototype=Object.create(hs.prototype),Es.prototype.constructor=Es,Es.prototype.isCubicBezierCurve3=!0,Es.prototype.getPoint=function(e,t){var n=t||new zt,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Ts(e,i.x,r.x,a.x,o.x),Ts(e,i.y,r.y,a.y,o.y),Ts(e,i.z,r.z,a.z,o.z)),n},Es.prototype.copy=function(e){return hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Es.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Es.prototype.fromJSON=function(e){return hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ks.prototype=Object.create(hs.prototype),ks.prototype.constructor=ks,ks.prototype.isLineCurve=!0,ks.prototype.getPoint=function(e,t){var n=t||new Ft;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ks.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ks.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ks.prototype.copy=function(e){return hs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ks.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ks.prototype.fromJSON=function(e){return hs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Cs.prototype=Object.create(hs.prototype),Cs.prototype.constructor=Cs,Cs.prototype.isLineCurve3=!0,Cs.prototype.getPoint=function(e,t){var n=t||new zt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Cs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Cs.prototype.copy=function(e){return hs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Cs.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Cs.prototype.fromJSON=function(e){return hs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ms.prototype=Object.create(hs.prototype),Ms.prototype.constructor=Ms,Ms.prototype.isQuadraticBezierCurve=!0,Ms.prototype.getPoint=function(e,t){var n=t||new Ft,i=this.v0,r=this.v1,a=this.v2;return n.set(ws(e,i.x,r.x,a.x),ws(e,i.y,r.y,a.y)),n},Ms.prototype.copy=function(e){return hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ms.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ms.prototype.fromJSON=function(e){return hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},As.prototype=Object.create(hs.prototype),As.prototype.constructor=As,As.prototype.isQuadraticBezierCurve3=!0,As.prototype.getPoint=function(e,t){var n=t||new zt,i=this.v0,r=this.v1,a=this.v2;return n.set(ws(e,i.x,r.x,a.x),ws(e,i.y,r.y,a.y),ws(e,i.z,r.z,a.z)),n},As.prototype.copy=function(e){return hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},As.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},As.prototype.fromJSON=function(e){return hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ps.prototype=Object.create(hs.prototype),Ps.prototype.constructor=Ps,Ps.prototype.isSplineCurve=!0,Ps.prototype.getPoint=function(e,t){var n=t||new Ft,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(xs(o,s.x,l.x,u.x,c.x),xs(o,s.y,l.y,u.y,c.y)),n},Ps.prototype.copy=function(e){hs.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},Ps.prototype.toJSON=function(){var e=hs.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},Ps.prototype.fromJSON=function(e){hs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Ft).fromArray(i))}return this};var Ls=Object.freeze({ArcCurve:fs,CatmullRomCurve3:_s,CubicBezierCurve:Ss,CubicBezierCurve3:Es,EllipseCurve:ps,LineCurve:ks,LineCurve3:Cs,QuadraticBezierCurve:Ms,QuadraticBezierCurve3:As,SplineCurve:Ps});function Is(){hs.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Os(e){Is.call(this),this.type="Path",this.currentPoint=new Ft,e&&this.setFromPoints(e)}function Rs(e){Os.call(this,e),this.uuid=Bt.generateUUID(),this.type="Shape",this.holes=[]}function Ds(e,t){nn.call(this),this.type="Light",this.color=new cn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ns(e,t,n){Ds.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(nn.DefaultUp),this.updateMatrix(),this.groundColor=new cn(t)}function Us(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Ft(512,512),this.map=null,this.matrix=new Qt}function Bs(){Us.call(this,new Vn(50,1,.5,500))}function Fs(e,t,n,i,r,a){Ds.call(this,e,t),this.type="SpotLight",this.position.copy(nn.DefaultUp),this.updateMatrix(),this.target=new nn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Bs}function js(e,t,n,i){Ds.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Us(new Vn(90,1,.5,500))}function zs(e,t,n,i,r,a){Hn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Hs(){Us.call(this,new zs(-5,5,5,-5,.5,500))}function Vs(e,t){Ds.call(this,e,t),this.type="DirectionalLight",this.position.copy(nn.DefaultUp),this.updateMatrix(),this.target=new nn,this.shadow=new Hs}function Gs(e,t){Ds.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Ws(e,t,n,i){Ds.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Zs(e){this.manager=void 0!==e?e:as,this.textures={}}Is.prototype=Object.assign(Object.create(hs.prototype),{constructor:Is,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ks(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){hs.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=hs.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){hs.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new Ls[i.type]).fromJSON(i))}return this}}),Os.prototype=Object.assign(Object.create(Is.prototype),{constructor:Os,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new ks(this.currentPoint.clone(),new Ft(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new Ms(this.currentPoint.clone(),new Ft(e,t),new Ft(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,a){var o=new Ss(this.currentPoint.clone(),new Ft(e,t),new Ft(n,i),new Ft(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(e){var t=new Ps([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,i,r,a)},absarc:function(e,t,n,i,r,a){this.absellipse(e,t,n,n,i,r,a)},ellipse:function(e,t,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,i,r,a,o,s)},absellipse:function(e,t,n,i,r,a,o,s){var l=new ps(e,t,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return Is.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Is.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Is.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Rs.prototype=Object.assign(Object.create(Os.prototype),{constructor:Rs,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Os.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=Os.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Os.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new Os).fromJSON(i))}return this}}),Ds.prototype=Object.assign(Object.create(nn.prototype),{constructor:Ds,isLight:!0,copy:function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=nn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ns.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Ns,isHemisphereLight:!0,copy:function(e){return Ds.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Us.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Bs.prototype=Object.assign(Object.create(Us.prototype),{constructor:Bs,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Bt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),Fs.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Fs,isSpotLight:!0,copy:function(e){return Ds.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),js.prototype=Object.assign(Object.create(Ds.prototype),{constructor:js,isPointLight:!0,copy:function(e){return Ds.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),zs.prototype=Object.assign(Object.create(Hn.prototype),{constructor:zs,isOrthographicCamera:!0,copy:function(e,t){return Hn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;a=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(o-=d*(this.view.offsetY/u))-d*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=nn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Hs.prototype=Object.assign(Object.create(Us.prototype),{constructor:Hs}),Vs.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Vs,isDirectionalLight:!0,copy:function(e){return Ds.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Gs.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Gs,isAmbientLight:!0}),Ws.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Ws,isRectAreaLight:!0,copy:function(e){return Ds.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ds.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Zs.prototype,{load:function(e,t,n,i){var r=this,a=new ss(r.manager);a.setPath(r.path),a.load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new zo[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.uniforms)for(var r in e.uniforms){var a=e.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=(new cn).setHex(a.value);break;case"v2":i.uniforms[r].value=(new Ft).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new zt).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new Xt).fromArray(a.value);break;case"m3":i.uniforms[r].value=(new Ht).fromArray(a.value);case"m4":i.uniforms[r].value=(new Qt).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)i.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new Ft).fromArray(s)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var qs=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function Xs(){Ln.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ys(e,t,n,i){"number"===typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),yn.call(this,e,t,n),this.meshPerAttribute=i||1}function Ks(e){this.manager=void 0!==e?e:as}Xs.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Xs,isInstancedBufferGeometry:!0,copy:function(e){return Ln.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Ln.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),Ys.prototype=Object.assign(Object.create(yn.prototype),{constructor:Ys,isInstancedBufferAttribute:!0,copy:function(e){return yn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=yn.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Object.assign(Ks.prototype,{load:function(e,t,n,i){var r=this,a=new ss(r.manager);a.setPath(r.path),a.load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},parse:function(e){var t=e.isInstancedBufferGeometry?new Xs:new Ln,n=e.data.index;if(void 0!==n){var i=new Qs[n.type](n.array);t.setIndex(new yn(i,1))}var r=e.data.attributes;for(var a in r){var o=r[a],s=(i=new Qs[o.type](o.array),new(o.isInstancedBufferAttribute?Ys:yn)(i,o.itemSize,o.normalized));void 0!==o.name&&(s.name=o.name),t.addAttribute(a,s)}var l=e.data.morphAttributes;if(l)for(var a in l){for(var u=l[a],c=[],d=0,h=u.length;d<h;d++){o=u[d],s=new yn(i=new Qs[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),c.push(s)}t.morphAttributes[a]=c}var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){d=0;for(var f=p.length;d!==f;++d){var m=p[d];t.addGroup(m.start,m.count,m.materialIndex)}}var g=e.data.boundingSphere;if(void 0!==g){var v=new zt;void 0!==g.center&&v.fromArray(g.center),t.boundingSphere=new on(v,g.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var Qs={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function $s(e){this.manager=void 0!==e?e:as,this.resourcePath=""}Object.assign($s.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=this,a=void 0===this.path?qs(e):this.path;this.resourcePath=this.resourcePath||a;var o=new ss(r.manager);o.setPath(this.path),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new Rs).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Ks,r=0,a=e.length;r<a;r++){var o,s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Po[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Po[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Po[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Po[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Po[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Po[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Po[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Po[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Po[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Po[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new Po[s.type]((new Ls[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Po[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Po[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var d=t[s.shapes[u]];l.push(d)}o=new Po[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=s.shapes.length;u<c;u++){d=t[s.shapes[u]];l.push(d)}var h=s.options.extrudePath;void 0!==h&&(s.options.extrudePath=(new Ls[h.type]).fromJSON(h)),o=new Po[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(e,t){var n={},i={};if(void 0!==e){var r=new Zs;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),l.push(n[c.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=ts.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),a.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var a=new us(new rs(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var l=e[o],u=l.url;if(Array.isArray(u)){i[l.uuid]=[];for(var c=0,d=u.length;c<d;c++){var h=u[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;i[l.uuid].push(r(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;i[l.uuid]=r(p)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o,s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(t[s.image])?new mi(t[s.image]):new qt(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,el)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],tl),o.wrapT=n(s.wrap[1],tl)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,nl)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,nl)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),i[s.uuid]=o}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new rn,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new cn(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new $r(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Qr(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Vn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new zs(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Gs(e.color,e.intensity);break;case"DirectionalLight":i=new Vs(e.color,e.intensity);break;case"PointLight":i=new js(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Ws(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Fs(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Ns(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(e.geometry),s=a(e.material);i=o.bones&&o.bones.length>0?new ra(o,s):new In(o,s),void 0!==e.drawMode&&i.setDrawMode(e.drawMode);break;case"LOD":i=new ia;break;case"Line":i=new la(r(e.geometry),a(e.material),e.mode);break;case"LineLoop":i=new ca(r(e.geometry),a(e.material));break;case"LineSegments":i=new ua(r(e.geometry),a(e.material));break;case"PointCloud":case"Points":i=new ha(r(e.geometry),a(e.material));break;case"Sprite":i=new na(a(e.material));break;case"Group":i=new Hr;break;default:i=new nn}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,u=0;u<l.length;u++)i.add(this.parseObject(l[u],t,n));if("LOD"===e.type)for(var c=e.levels,d=0;d<c.length;d++){var h=c[d],p=i.getObjectByProperty("uuid",h.object);void 0!==p&&i.addLevel(p,h.distance)}return i}});var Js,el={UVMapping:300,CubeReflectionMapping:ce,CubeRefractionMapping:de,EquirectangularReflectionMapping:he,EquirectangularRefractionMapping:pe,SphericalReflectionMapping:fe,CubeUVReflectionMapping:me,CubeUVRefractionMapping:ge},tl={RepeatWrapping:ve,ClampToEdgeWrapping:ye,MirroredRepeatWrapping:be},nl={NearestFilter:_e,NearestMipmapNearestFilter:xe,NearestMipmapLinearFilter:we,LinearFilter:Te,LinearMipmapNearestFilter:Se,LinearMipmapLinearFilter:Ee};function il(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:as,this.options=void 0}function rl(){this.type="ShapePath",this.color=new cn,this.subPaths=[],this.currentPath=null}function al(e){this.type="Font",this.data=e}function ol(e,t,n,i,r){var a=r.glyphs[e]||r.glyphs["?"];if(a){var o,s,l,u,c,d,h,p,f=new rl;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":o=m[g++]*t+n,s=m[g++]*t+i,f.moveTo(o,s);break;case"l":o=m[g++]*t+n,s=m[g++]*t+i,f.lineTo(o,s);break;case"q":l=m[g++]*t+n,u=m[g++]*t+i,c=m[g++]*t+n,d=m[g++]*t+i,f.quadraticCurveTo(c,d,l,u);break;case"b":l=m[g++]*t+n,u=m[g++]*t+i,c=m[g++]*t+n,d=m[g++]*t+i,h=m[g++]*t+n,p=m[g++]*t+i,f.bezierCurveTo(c,d,h,p,l,u)}}return{offsetX:a.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".")}function sl(){}il.prototype={constructor:il,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=is.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===r.options?createImageBitmap(e):createImageBitmap(e,r.options)})).then((function(n){is.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(rl.prototype,{moveTo:function(e,t){this.currentPath=new Os,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,a){this.currentPath.bezierCurveTo(e,t,n,i,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new Rs;a.curves=r.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[r],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var r=ro.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,l,u=[];if(1===a.length)return s=a[0],(l=new Rs).curves=s.curves,u.push(l),u;var c=!r(a[0].getPoints());c=e?!c:c;var d,h,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=a.length;v<y;v++)o=r(d=(s=a[v]).getPoints()),(o=e?!o:o)?(!c&&f[g]&&g++,f[g]={s:new Rs,p:d},f[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:d[0]});if(!f[0])return n(a);if(f.length>1){for(var b=!1,_=[],x=0,w=f.length;x<w;x++)p[x]=[];for(x=0,w=f.length;x<w;x++)for(var T=m[x],S=0;S<T.length;S++){for(var E=T[S],k=!0,C=0;C<f.length;C++)i(E.p,f[C].p)&&(x!==C&&_.push({froms:x,tos:C,hole:S}),k?(k=!1,p[C].push(E)):b=!0);k&&p[x].push(E)}_.length>0&&(b||(m=p))}v=0;for(var M=f.length;v<M;v++){l=f[v].s,u.push(l);for(var A=0,P=(h=m[v]).length;A<P;A++)l.holes.push(h[A].h)}return u}}),Object.assign(al.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,l=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)s=0,l-=a;else{var d=ol(c,r,s,l,n);s+=d.offsetX,o.push(d.path)}}return o}(e,t,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Object.assign(function(e){this.manager=void 0!==e?e:as}.prototype,{load:function(e,t,n,i){var r=this,a=new ss(this.manager);a.setPath(this.path),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new al(e)},setPath:function(e){return this.path=e,this}}),sl.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],a=t[n+1];if(r.test(e))return a}return null}},Object.assign(sl.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:function(){var e={NoBlending:E,NormalBlending:k,AdditiveBlending:C,SubtractiveBlending:M,MultiplyBlending:A,CustomBlending:P},t=new cn,n=new ds,i=new Zs;return function(r,a,o){var s={};function l(e,t,i,r,l){var u,c=a+e,d=sl.Handlers.get(c);null!==d?u=d.load(c):(n.setCrossOrigin(o),u=n.load(c)),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=ve),1!==t[1]&&(u.wrapT=ve)),void 0!==i&&u.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(u.wrapS=ve),"mirror"===r[0]&&(u.wrapS=be),"repeat"===r[1]&&(u.wrapT=ve),"mirror"===r[1]&&(u.wrapT=be)),void 0!==l&&(u.anisotropy=l);var h=Bt.generateUUID();return s[h]=u,h}var u={uuid:Bt.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var d=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":u.name=d;break;case"blending":u.blending=e[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(d).getHex();break;case"colorSpecular":u.specular=t.fromArray(d).getHex();break;case"colorEmissive":u.emissive=t.fromArray(d).getHex();break;case"specularCoef":u.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=l(d,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapEmissive":u.emissiveMap=l(d,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapLight":u.lightMap=l(d,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapAO":u.aoMap=l(d,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapBump":u.bumpMap=l(d,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=d;break;case"mapNormal":u.normalMap=l(d,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=d;break;case"mapSpecular":u.specularMap=l(d,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapMetalness":u.metalnessMap=l(d,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapRoughness":u.roughnessMap=l(d,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapAlpha":u.alphaMap=l(d,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"flipSided":u.side=_;break;case"doubleSided":u.side=x;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[c]=d;break;case"vertexColors":!0===d&&(u.vertexColors=S),"face"===d&&(u.vertexColors=T);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,d)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),i.setTextures(s),i.parse(u)}}()});var ll={getContext:function(){return void 0===Js&&(Js=new(window.AudioContext||window.webkitAudioContext)),Js},setContext:function(e){Js=e}};function ul(e){this.manager=void 0!==e?e:as}function cl(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new zt)}function dl(e,t){Ds.call(this,void 0,t),this.sh=void 0!==e?e:new cl}function hl(e,t,n){dl.call(this,void 0,n);var i=(new cn).set(e),r=(new cn).set(t),a=new zt(i.r,i.g,i.b),o=new zt(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}function pl(e,t){dl.call(this,void 0,t);var n=(new cn).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function fl(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function ml(){nn.call(this),this.type="AudioListener",this.context=ll.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function gl(e){nn.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function vl(e){gl.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function yl(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function bl(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(ul.prototype,{load:function(e,t,n,i){var r=new ss(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,(function(e){var n=e.slice(0);ll.getContext().decodeAudioData(n,(function(e){t(e)}))}),n,i)},setPath:function(e){return this.path=e,this}}),Object.assign(cl.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScale(a[1],.488603*i),t.addScale(a[2],.488603*r),t.addScale(a[3],.488603*n),t.addScale(a[4],n*i*1.092548),t.addScale(a[5],i*r*1.092548),t.addScale(a[6],.315392*(3*r*r-1)),t.addScale(a[7],n*r*1.092548),t.addScale(a[8],.546274*(n*n-i*i)),t},getIrradianceAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScale(a[1],1.023328*i),t.addScale(a[2],1.023328*r),t.addScale(a[3],1.023328*n),t.addScale(a[4],.858086*n*i),t.addScale(a[5],.858086*i*r),t.addScale(a[6],.743125*r*r-.247708),t.addScale(a[7],.858086*n*r),t.addScale(a[8],.429043*(n*n-i*i)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e){for(var t=this.coefficients,n=0;n<9;n++)t[n].fromArray(e,3*n);return this},toArray:function(){for(var e=[],t=this.coefficients,n=0;n<9;n++)t[n].toArray(e,3*n);return e}}),Object.assign(cl,{getBasisAt:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),dl.prototype=Object.assign(Object.create(Ds.prototype),{constructor:dl,isLightProbe:!0,copy:function(e){return Ds.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Ds.prototype.toJSON.call(this,e)}}),hl.prototype=Object.assign(Object.create(dl.prototype),{constructor:hl,isHemisphereLightProbe:!0,copy:function(e){return dl.prototype.copy.call(this,e),this},toJSON:function(e){return dl.prototype.toJSON.call(this,e)}}),pl.prototype=Object.assign(Object.create(dl.prototype),{constructor:pl,isAmbientLightProbe:!0,copy:function(e){return dl.prototype.copy.call(this,e),this},toJSON:function(e){return dl.prototype.toJSON.call(this,e)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:function(){var e,t,n,i,r,a,o,s,l=new Qt,u=new Qt;return function(c){if(e!==this||t!==c.focus||n!==c.fov||i!==c.aspect*this.aspect||r!==c.near||a!==c.far||o!==c.zoom||s!==this.eyeSep){e=this,t=c.focus,n=c.fov,i=c.aspect*this.aspect,r=c.near,a=c.far,o=c.zoom;var d,h,p=c.projectionMatrix.clone(),f=(s=this.eyeSep/2)*r/t,m=r*Math.tan(Bt.DEG2RAD*n*.5)/o;u.elements[12]=-s,l.elements[12]=s,d=-m*i+f,h=m*i+f,p.elements[0]=2*r/(h-d),p.elements[8]=(h+d)/(h-d),this.cameraL.projectionMatrix.copy(p),d=-m*i-f,h=m*i-f,p.elements[0]=2*r/(h-d),p.elements[8]=(h+d)/(h-d),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(l)}}()}),Object.assign(fl.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),ml.prototype=Object.assign(Object.create(nn.prototype),{constructor:ml,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new zt,t=new jt,n=new zt,i=new zt,r=new fl;return function(a){nn.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,s=this.up;if(this.timeDelta=r.getDelta(),this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),o.positionX){var l=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(e.x,l),o.positionY.linearRampToValueAtTime(e.y,l),o.positionZ.linearRampToValueAtTime(e.z,l),o.forwardX.linearRampToValueAtTime(i.x,l),o.forwardY.linearRampToValueAtTime(i.y,l),o.forwardZ.linearRampToValueAtTime(i.z,l),o.upX.linearRampToValueAtTime(s.x,l),o.upY.linearRampToValueAtTime(s.y,l),o.upZ.linearRampToValueAtTime(s.z,l)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z)}}()}),gl.prototype=Object.assign(Object.create(nn.prototype),{constructor:gl,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),vl.prototype=Object.assign(Object.create(gl.prototype),{constructor:vl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new zt,t=new jt,n=new zt,i=new zt;return function(r){if(nn.prototype.updateMatrixWorld.call(this,r),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(e,t,n),i.set(0,0,1).applyQuaternion(t);var a=this.panner;if(a.positionX){var o=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(e.x,o),a.positionY.linearRampToValueAtTime(e.y,o),a.positionZ.linearRampToValueAtTime(e.z,o),a.orientationX.linearRampToValueAtTime(i.x,o),a.orientationY.linearRampToValueAtTime(i.y,o),a.orientationZ.linearRampToValueAtTime(i.z,o)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z)}}}()}),Object.assign(yl.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(bl.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*t;this._mixBufferRegion(n,i,o,1-r,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){jt.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}});var _l,xl,wl,Tl,Sl="\\[\\]\\.:\\/";function El(e,t,n){var i=n||kl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function kl(e,t,n){this.path=t,this.parsedPath=n||kl.parseTrackName(t),this.node=kl.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Cl(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,a=new Array(r),o={endingStart:bt,endingEnd:bt},s=0;s!==r;++s){var l=i[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=mt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ml(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Al(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Pl(e,t,n){Jr.call(this,e,t),this.meshPerAttribute=n||1}function Ll(e,t){return e.distance-t.distance}function Il(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,a=0,o=r.length;a<o;a++)Il(r[a],t,n,!0)}function Ol(e,t){this.min=void 0!==e?e:new Ft(1/0,1/0),this.max=void 0!==t?t:new Ft(-1/0,-1/0)}function Rl(e,t){this.start=void 0!==e?e:new zt,this.end=void 0!==t?t:new zt}function Dl(e){nn.call(this),this.material=e,this.render=function(){}}function Nl(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new Ln,u=new kn(2*o*3,3);l.addAttribute("position",u),ua.call(this,l,new sa({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Ul(e,t){nn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Ln,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new kn(i,3));var l=new sa({fog:!1});this.cone=new ua(n,l),this.add(this.cone),this.update()}function Bl(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Bl(e.children[n]));return t}function Fl(e){for(var t=Bl(e),n=new Ln,i=[],r=[],a=new cn(0,0,1),o=new cn(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new kn(i,3)),n.addAttribute("color",new kn(r,3));var u=new sa({vertexColors:S,depthTest:!1,depthWrite:!1,transparent:!0});ua.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function jl(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new mo(t,4,2),r=new vn({wireframe:!0,fog:!1});In.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function zl(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new Ln;n.addAttribute("position",new kn([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new sa({fog:!1});la.call(this,n,i);var r=new Ln;r.addAttribute("position",new kn([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new In(r,new vn({side:_,fog:!1}))),this.update()}function Hl(e,t,n){nn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Ea(t);i.rotateY(.5*Math.PI),this.material=new vn({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=S);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.addAttribute("color",new yn(a,3)),this.add(new In(i,this.material)),this.update()}function Vl(e,t){this.lightProbe=e,this.size=t;var n={GAMMA_OUTPUT:""},i=new zn({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new mo(1,32,16);In.call(this,r,i),this.onBeforeRender()}function Gl(e,t,n,i){e=e||10,t=t||10,n=new cn(void 0!==n?n:4473924),i=new cn(void 0!==i?i:8947848);for(var r=t/2,a=e/t,o=e/2,s=[],l=[],u=0,c=0,d=-o;u<=t;u++,d+=a){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);var h=u===r?n:i;h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3}var p=new Ln;p.addAttribute("position",new kn(s,3)),p.addAttribute("color",new kn(l,3));var f=new sa({vertexColors:S});ua.call(this,p,f)}function Wl(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new cn(void 0!==r?r:4473924),a=new cn(void 0!==a?a:8947848);var o,s,l,u,c,d,h,p=[],f=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),o=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(o,0,s),h=1&u?r:a,f.push(h.r,h.g,h.b),f.push(h.r,h.g,h.b);for(u=0;u<=n;u++)for(h=1&u?r:a,d=e-e/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),o=Math.sin(l)*d,s=Math.cos(l)*d,p.push(o,0,s),f.push(h.r,h.g,h.b),l=(c+1)/i*(2*Math.PI),o=Math.sin(l)*d,s=Math.cos(l)*d,p.push(o,0,s),f.push(h.r,h.g,h.b);var m=new Ln;m.addAttribute("position",new kn(p,3)),m.addAttribute("color",new kn(f,3));var g=new sa({vertexColors:S});ua.call(this,m,g)}function Zl(e,t,n,i){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new Ln,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));r.addAttribute("position",new yn(o,3));var s=new sa({color:65280}),l=new sa({color:16776960});la.call(this,r,[l,s]),this.update()}function ql(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Ln,u=new kn(2*o*3,3);l.addAttribute("position",u),ua.call(this,l,new sa({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Xl(e,t,n){nn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Ln;i.addAttribute("position",new kn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new sa({fog:!1});this.lightPlane=new la(i,r),this.add(this.lightPlane),(i=new Ln).addAttribute("position",new kn([0,0,0,0,0,1],3)),this.targetLine=new la(i,r),this.add(this.targetLine),this.update()}function Yl(e){var t=new Ln,n=new sa({color:16777215,vertexColors:T}),i=[],r=[],a={},o=new cn(16755200),s=new cn(16711680),l=new cn(43775),u=new cn(16777215),c=new cn(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}d("n1","n2",o),d("n2","n4",o),d("n4","n3",o),d("n3","n1",o),d("f1","f2",o),d("f2","f4",o),d("f4","f3",o),d("f3","f1",o),d("n1","f1",o),d("n2","f2",o),d("n3","f3",o),d("n4","f4",o),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",u),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.addAttribute("position",new kn(i,3)),t.addAttribute("color",new kn(r,3)),ua.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Kl(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Ln;r.setIndex(new yn(n,1)),r.addAttribute("position",new yn(i,3)),ua.call(this,r,new sa({color:t})),this.matrixAutoUpdate=!1,this.update()}function Ql(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Ln;i.setIndex(new yn(n,1)),i.addAttribute("position",new kn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ua.call(this,i,new sa({color:t})),this.geometry.computeBoundingSphere()}function $l(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Ln;r.addAttribute("position",new kn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),la.call(this,r,new sa({color:i}));var a=new Ln;a.addAttribute("position",new kn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new In(a,new vn({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function Jl(e,t,n,i,r,a){nn.call(this),void 0===e&&(e=new zt(0,0,1)),void 0===t&&(t=new zt(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===wl&&((wl=new Ln).addAttribute("position",new kn([0,0,0,0,1,0],3)),(Tl=new Eo(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new la(wl,new sa({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new In(Tl,new vn({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function eu(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Ln;n.addAttribute("position",new kn(t,3)),n.addAttribute("color",new kn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new sa({vertexColors:S});ua.call(this,n,i)}Object.assign(El.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(kl,{Composite:El,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new kl.Composite(e,t,n):new kl(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+Sl+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Sl+"]",t="[^"+Sl.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),i=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),a=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),o=new RegExp("^"+n+i+r+a+"$"),s=["material","materials","bones"];return function(e){var t=o.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==s.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null}(e.children);if(i)return i}return null}}),Object.assign(kl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=kl.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===r){r=o;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(kl.prototype,{_getValue_unbound:kl.prototype.getValue,_setValue_unbound:kl.prototype.setValue}),Object.assign(function(){this.uuid=Bt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var d=arguments[u],h=d.uuid,p=i[h];if(void 0===p){p=t++,i[h]=p,e.push(d);for(var f=0,m=s;f!==m;++f)o[f].push(new kl(d,r[f],a[f]))}else if(p<n){l=e[p];var g=--n,v=e[g];i[v.uuid]=p,e[p]=v,i[h]=g,e[g]=d;for(f=0,m=s;f!==m;++f){var y=o[f],b=y[g],_=y[p];y[p]=b,void 0===_&&(_=new kl(d,r[f],a[f])),y[g]=_}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,d=e[c];n[d.uuid]=u,e[u]=d,n[l]=c,e[c]=s;for(var h=0,p=r;h!==p;++h){var f=i[h],m=f[c],g=f[u];f[u]=m,f[c]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,u=i[l];if(void 0!==u)if(delete i[l],u<n){var c=--n,d=e[c],h=e[v=--t];i[d.uuid]=u,e[u]=d,i[h.uuid]=c,e[c]=h,e.pop();for(var p=0,f=a;p!==f;++p){var m=(y=r[p])[c],g=y[v];y[u]=m,y[c]=g,y.pop()}}else{var v;i[(h=e[v=--t]).uuid]=u,e[u]=h,e.pop();for(p=0,f=a;p!==f;++p){var y;(y=r[p])[u]=y[v],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(c);for(var d=u,h=s.length;d!==h;++d){var p=s[d];c[d]=new kl(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Cl.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulate(i,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,i=this.loop,r=this._loopCount,a=2202===i;if(0===e)return-1===r?t:a&&1===(1&r)?n-t:t;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=t;if(a&&1===(1&r))return n-t}return t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=_t,i.endingEnd=_t):(i.endingStart=e?this.zeroSlopeAtStart?_t:bt:xt,i.endingEnd=t?this.zeroSlopeAtEnd?_t:bt:xt)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}),Ml.prototype=Object.assign(Object.create(c.prototype),{constructor:Ml,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var d=i[c],h=d.name,p=u[h];if(void 0!==p)a[c]=p;else{if(void 0!==(p=a[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,h));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;++(p=new bl(kl.create(n,h,f),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,s,h),a[c]=p}o[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Wo(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?ts.findByName(n,e):e,a=null!==r?r.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var u=new Cl(this,r,t);return this._bindAction(u,s),this._addInactiveAction(u,a,i),u},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?ts.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(i,e,r,a)}var s=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Al.prototype.clone=function(){return new Al(void 0===this.value.clone?this.value:this.value.clone())},Pl.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Pl,isInstancedInterleavedBuffer:!0,copy:function(e){return Jr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(function(e,t,n,i){this.ray=new sn(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this._camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this._camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return Il(e,this,i,t),i.sort(Ll),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=e.length;r<a;r++)Il(e[r],this,i,t);return i.sort(Ll),i}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Bt.clamp(t/this.radius,-1,1))),this}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(Ol.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ft;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Ft),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Ft),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Ft),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Ft),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ft;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Rl.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new zt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new zt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new zt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){void 0===_l&&(_l=new zt,xl=new zt),_l.subVectors(e,this.start),xl.subVectors(this.end,this.start);var n=xl.dot(xl),i=xl.dot(_l)/n;return t&&(i=Bt.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new zt),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Dl.prototype=Object.create(nn.prototype),Dl.prototype.constructor=Dl,Dl.prototype.isImmediateRenderObject=!0,Nl.prototype=Object.create(ua.prototype),Nl.prototype.constructor=Nl,Nl.prototype.update=function(){var e=new zt,t=new zt,n=new Ht;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,u=0,c=0,d=l.length;c<d;c++)for(var h=l[c],p=0,f=h.vertexNormals.length;p<f;p++){var m=s[h[i[p]]],g=h.vertexNormals[p];e.copy(m).applyMatrix4(r),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(o&&o.isBufferGeometry){var v=o.attributes.position,y=o.attributes.normal;for(u=0,p=0,f=v.count;p<f;p++)e.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(r),t.set(y.getX(p),y.getY(p),y.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}a.needsUpdate=!0}}(),Ul.prototype=Object.create(nn.prototype),Ul.prototype.constructor=Ul,Ul.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ul.prototype.update=function(){var e=new zt;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Fl.prototype=Object.create(ua.prototype),Fl.prototype.constructor=Fl,Fl.prototype.updateMatrixWorld=function(){var e=new zt,t=new Qt,n=new Qt;return function(i){var r=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var u=r[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l+1,e.x,e.y,e.z),l+=2)}a.getAttribute("position").needsUpdate=!0,nn.prototype.updateMatrixWorld.call(this,i)}}(),jl.prototype=Object.create(In.prototype),jl.prototype.constructor=jl,jl.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},jl.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},zl.prototype=Object.create(la.prototype),zl.prototype.constructor=zl,zl.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},zl.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},Hl.prototype=Object.create(nn.prototype),Hl.prototype.constructor=Hl,Hl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Hl.prototype.update=function(){var e=new zt,t=new cn,n=new cn;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,o=r.count;a<o;a++){var s=a<o/2?t:n;r.setXYZ(a,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Vl.prototype=Object.create(In.prototype),Vl.prototype.constructor=Vl,Vl.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Vl.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},Gl.prototype=Object.assign(Object.create(ua.prototype),{constructor:Gl,copy:function(e){return ua.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),Wl.prototype=Object.create(ua.prototype),Wl.prototype.constructor=Wl,Zl.prototype=Object.create(la.prototype),Zl.prototype.constructor=Zl,Zl.prototype.update=function(){var e,t,n=this.audio,i=this.range,r=this.divisionsInnerAngle,a=this.divisionsOuterAngle,o=Bt.degToRad(n.panner.coneInnerAngle),s=Bt.degToRad(n.panner.coneOuterAngle),l=o/2,u=s/2,c=0,d=0,h=this.geometry,p=h.attributes.position;function f(n,r,a,o){var s=(r-n)/a;for(p.setXYZ(c,0,0,0),d++,e=n;e<r;e+=s)t=c+d,p.setXYZ(t,Math.sin(e)*i,0,Math.cos(e)*i),p.setXYZ(t+1,Math.sin(Math.min(e+s,r))*i,0,Math.cos(Math.min(e+s,r))*i),p.setXYZ(t+2,0,0,0),d+=3;h.addGroup(c,d,o),c+=d,d=0}h.clearGroups(),f(-u,-l,a,0),f(-l,l,r,1),f(l,u,a,0),p.needsUpdate=!0,o===s&&(this.material[0].visible=!1)},Zl.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},ql.prototype=Object.create(ua.prototype),ql.prototype.constructor=ql,ql.prototype.update=function(){var e=new zt,t=new zt,n=new Ht;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,l=0,u=0,c=s.length;u<c;u++){var d=s[u],h=d.normal;e.copy(o[d.a]).add(o[d.b]).add(o[d.c]).divideScalar(3).applyMatrix4(i),t.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),Xl.prototype=Object.create(nn.prototype),Xl.prototype.constructor=Xl,Xl.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Xl.prototype.update=function(){var e=new zt,t=new zt,n=new zt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=n.length()}}(),Yl.prototype=Object.create(ua.prototype),Yl.prototype.constructor=Yl,Yl.prototype.update=function(){var e,t,n=new zt,i=new Hn;function r(r,a,o,s){n.set(a,o,s).unproject(i);var l=t[r];if(void 0!==l)for(var u=e.getAttribute("position"),c=0,d=l.length;c<d;c++)u.setXYZ(l[c],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;i.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Kl.prototype=Object.create(ua.prototype),Kl.prototype.constructor=Kl,Kl.prototype.update=function(){var e=new an;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,a=r.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=n.x,a[4]=i.y,a[5]=i.z,a[6]=n.x,a[7]=n.y,a[8]=i.z,a[9]=i.x,a[10]=n.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=n.z,a[15]=n.x,a[16]=i.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=i.x,a[22]=n.y,a[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Kl.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Kl.prototype.copy=function(e){return ua.prototype.copy.call(this,e),this.object=e.object,this},Kl.prototype.clone=function(){return(new this.constructor).copy(this)},Ql.prototype=Object.create(ua.prototype),Ql.prototype.constructor=Ql,Ql.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),nn.prototype.updateMatrixWorld.call(this,e))},$l.prototype=Object.create(la.prototype),$l.prototype.constructor=$l,$l.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?_:b,this.lookAt(this.plane.normal),nn.prototype.updateMatrixWorld.call(this,e)},Jl.prototype=Object.create(nn.prototype),Jl.prototype.constructor=Jl,Jl.prototype.setDirection=function(){var e,t=new zt;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),Jl.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Jl.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Jl.prototype.copy=function(e){return nn.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Jl.prototype.clone=function(){return(new this.constructor).copy(this)},eu.prototype=Object.create(ua.prototype),eu.prototype.constructor=eu;function tu(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),_s.call(this,e),this.type="catmullrom"}hs.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(hs.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Is.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Rn,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new zt(r.x,r.y,r.z||0))}return t}}),Object.assign(Os.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(_s.prototype),Object.create(_s.prototype),tu.prototype=Object.create(_s.prototype),Object.assign(tu.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Gl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Fl.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(sl.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),qs(e)}}),Object.assign($s.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Ol.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(an.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Rl.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Bt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Bt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Bt.ceilPowerOfTwo(e)}}),Object.assign(Ht.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Qt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new zt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),Yn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},jt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(sn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ln.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ln,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ln.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ln.getNormal(e,t,n,i)}}),Object.assign(Rs.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new so(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _o(this,e)}}),Object.assign(Ft.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(zt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Rn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(nn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(nn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ia.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(aa.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ra.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(hs.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Vn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ds.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(yn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Ln.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ln.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(lo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Al.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(gn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new cn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Do.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(zn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Kr.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Kr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Br.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(qn.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Yt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Xr.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),gl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new ul).load(e,(function(e){t.setBuffer(e)})),this},yl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Zn.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};Wt.crossOrigin=void 0,Wt.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new ds;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Wt.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new cs;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Wt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Wt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var nu=function(){function e(t){(0,a.Z)(this,e),this.container=t,this.renderer=new Kr({antialias:!0}),this.renderer.setSize(t.offsetWidth,t.offsetHeight,!1),this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.append(this.renderer.domElement),this.camera=new Vn(45,t.offsetWidth/t.offsetHeight,.1,1e4),this.scene=new rn,this.clock=new fl,this.assets={},this.disposed=!1,this.tick=this.tick.bind(this),this.init=this.init.bind(this)}return(0,o.Z)(e,[{key:"loadAssets",value:function(){return new Promise((function(e,t){}))}},{key:"init",value:function(){this.tick()}},{key:"getViewSizeAtDepth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.camera.fov*Math.PI/180,n=Math.abs((this.camera.position.z-e)*Math.tan(t/2)*2);return{width:n*this.camera.aspect,height:n}}},{key:"dispose",value:function(){this.disposed=!0}},{key:"onResize",value:function(){}},{key:"update",value:function(){}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"tick",value:function(){if(!this.disposed){if(function(e){var t=e.domElement,n=t.clientWidth,i=t.clientHeight,r=t.width!==n||t.height!==i;r&&e.setSize(n,i,!1);return r}(this.renderer)){var e=this.renderer.domElement;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix(),this.onResize()}var t=this.clock.getDelta();this.render(t),this.update(t),requestAnimationFrame(this.tick)}}}]),e}();var iu=function(){function e(t,n){(0,a.Z)(this,e),this.webgl=t,this.options=n}return(0,o.Z)(e,[{key:"init",value:function(){var e=this.options,t=new ii(e.width,e.length,20,200),n=new zn({fragmentShader:ru,vertexShader:au,uniforms:Object.assign({uColor:new Al(new cn(1052690)),uTime:new Al(0),uTravelLength:new Al(e.length)},e.distortion.uniforms)});console.log(n.uniforms),n.onBeforeCompile=function(t){t.vertexShader=t.vertexShader.replace("#include <getDistortion_vertex>",e.distortion.getDistortion)};var i=new In(t,n);i.rotation.x=-Math.PI/2,i.position.z=-e.length/2,this.webgl.scene.add(i),this.mesh=i}},{key:"update",value:function(e){this.mesh.material.uniforms.uTime.value=e}}]),e}(),ru="\n    uniform vec3 uColor;\n\tvoid main(){\n        gl_FragColor = vec4(uColor,1.);\n    }\n",au="\nuniform float uTravelLength;\n#include <getDistortion_vertex>\n\tvoid main(){\n        vec3 transformed = position.xyz;\n        \n    float progress = (transformed.y + uTravelLength / 2.) / uTravelLength;\n    vec3 distortion  = getDistortion(progress);\n    transformed.x += distortion.x;\n    transformed.z += distortion.y;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed.xyz, 1.);\n\t}\n",ou=function(){function e(t,n,i,r){(0,a.Z)(this,e),this.webgl=t,this.options=n,this.color=i,this.speed=r}return(0,o.Z)(e,[{key:"init",value:function(){var e=this.options,t=new La(new Cs(new zt(0,0,0),new zt(0,0,-1)),40,1,8,!1),n=(new Xs).copy(t);n.maxInstancedCount=2*e.nPairs;for(var i=[],r=[],a=e.roadWidth/e.roadSections,o=0;o<e.nPairs;o++){var s=.1*Math.random()+.1,l=Math.random()*e.length*.08+.02*e.length,u=o%3*a-e.roadWidth/2+a/2,c=.5*a,d=.8*Math.random(),h=1.3*s,p=Math.random()*e.length;i.push(u-c/2+d),i.push(h),i.push(-p),i.push(u+c/2+d),i.push(h),i.push(-p),r.push(s),r.push(l),r.push(s),r.push(l)}n.addAttribute("aOffset",new Ys(new Float32Array(i),3,!1)),n.addAttribute("aMetrics",new Ys(new Float32Array(r),2,!1));var f=new zn({fragmentShader:su,vertexShader:lu,uniforms:Object.assign({uColor:new Al(new cn(this.color)),uTravelLength:new Al(e.length),uTime:new Al(0),uSpeed:new Al(this.speed)},e.distortion.uniforms)});f.onBeforeCompile=function(t){t.vertexShader=t.vertexShader.replace("#include <getDistortion_vertex>",e.distortion.getDistortion)};var m=new In(n,f);m.frustumCulled=!1,this.mesh=m,this.webgl.scene.add(m)}},{key:"update",value:function(e){this.mesh.material.uniforms.uTime.value=e}}]),e}(),su="\nuniform vec3 uColor;\n  void main() {\n      vec3 color = vec3(uColor);\n      gl_FragColor = vec4(color,1.);\n  }\n",lu="\nattribute vec3 aOffset;\nattribute vec2 aMetrics;\nuniform float uTime;\nuniform float uSpeed;\nuniform float uTravelLength;\n#include <getDistortion_vertex>\n  void main() {\n    vec3 transformed = position.xyz;\n    \n    float radius = aMetrics.r;\n    float len = aMetrics.g;\n    transformed.xy *= radius; \n    transformed.z *= len;\n\n    float zOffset = uTime * uSpeed + aOffset.z;\n    zOffset = len - mod(zOffset, uTravelLength);\n\n    // transformed.z +=uTime * uSpeed;\n\n\n\t\t// Keep them separated to make the next step easier!\n\t   transformed.z = transformed.z +zOffset ;\n        transformed.xy += aOffset.xy;\n\n        \n    float progress = abs(transformed.z / uTravelLength);\n    transformed.xyz += getDistortion(progress);\n\n\t\n        vec4 mvPosition = modelViewMatrix * vec4(transformed,1.);\n        gl_Position = projectionMatrix * mvPosition;\n\t}\n";function uu(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,i=(t-e)*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1);return Math.abs(i)<n&&(i=t-e),i}var cu,du=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e,i){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).options=i,r.camera.position.z=-4,r.camera.position.y=7,r.camera.position.x=0,r.road=new iu((0,s.Z)(r),i),r.leftLights=new ou((0,s.Z)(r),i,150930,60),r.rightLights=new ou((0,s.Z)(r),i,15580501,-60),r.speedUpTarget=0,r.speedUp=0,r.timeOffset=0,r.fovTarget=90,r.onMouseDown=r.onMouseDown.bind((0,s.Z)(r)),r.onMouseUp=r.onMouseUp.bind((0,s.Z)(r)),r}return(0,o.Z)(n,[{key:"loadAssets",value:function(){return new Promise((function(e,t){var n=new rs(e);n.itemStart("test"),n.itemEnd("test")}))}},{key:"onMouseDown",value:function(e){this.speedUpTarget=4,this.fovTarget=140}},{key:"onMouseUp",value:function(e){this.speedUpTarget=0,this.fovTarget=90}},{key:"init",value:function(){var e=this.options;this.road.init(),this.leftLights.init(),this.leftLights.mesh.position.setX(-e.roadWidth/2-e.islandWidth/2),this.rightLights.init(),this.rightLights.mesh.position.setX(e.roadWidth/2+e.islandWidth/2),this.container.addEventListener("mousedown",this.onMouseDown),this.container.addEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mouseout",this.onMouseUp),this.tick()}},{key:"update",value:function(e){var t=-60*Math.log2(.9),n=Math.exp(-t*e);this.speedUp+=uu(this.speedUp,this.speedUpTarget,n,1e-5),this.timeOffset+=this.speedUp*e;var i=this.clock.elapsedTime+this.timeOffset;this.leftLights.update(i),this.rightLights.update(i),this.road.update(i);var r=uu(this.camera.fov,this.fovTarget,n);0!==r&&(this.camera.fov+=r*e*6,this.camera.updateProjectionMatrix())}},{key:"dispose",value:function(){}}]),n}(nu),hu=n(2791),pu=n(184);e=n.hmd(e);var fu=r.ZP.div(cu||(cu=(0,i.Z)(["\n    width: 100vw;\n  height: 100vh;\n"])));function mu(){var t={length:400,width:20,roadWidth:10,islandWidth:2,nPairs:50,roadSections:3,distortion:{uniforms:{uDistortionX:new Al(new Ft(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?20:80,3)),uDistortionY:new Al(new Ft(-40,2.5))},getDistortion:"\n#define PI 3.14159265358979\n  uniform vec2 uDistortionX;\n  uniform vec2 uDistortionY;\n\n    float nsin(float val){\n    return sin(val) * 0.5+0.5;\n    }\n  vec3 getDistortion(float progress){\n        progress = clamp(progress, 0.,1.);\n        float xAmp = uDistortionX.r;\n        float xFreq = uDistortionX.g;\n        float yAmp = uDistortionY.r;\n        float yFreq = uDistortionY.g;\n        return vec3( \n            xAmp * nsin(progress* PI * xFreq   - PI / 2. ) ,\n            yAmp * nsin(progress * PI *yFreq - PI / 2.  ) ,\n            0.\n        );\n    }\n"}};return(0,hu.useEffect)((function(){var n=document.getElementById("appBox"),i=new du(n,t);i.loadAssets().then(i.init),e&&e.hot}),[]),(0,pu.jsx)(fu,{children:(0,pu.jsx)("div",{id:"appBox"})})}},3874:function(e,t,n){"use strict";var i=n(9851);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,r,a){if(n)e(n);else if(r.statusCode>=400&&r.statusCode<=599){var o=a;if(t)if(i.TextDecoder){var s=function(e){void 0===e&&(e="");return e.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():e}),"utf-8")}(r.headers&&r.headers["content-type"]);try{o=new TextDecoder(s).decode(a)}catch(l){}}else o=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:o})}else e(null,a)}}},6656:function(e,t,n){"use strict";var i=n(9851),r=n(434),a=n(8112);l.httpHandler=n(3874);var o=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();"undefined"===typeof t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t};function s(e,t,n){var i=e;return a(t)?(n=t,"string"===typeof e&&(i={uri:e})):i=r({},t,{uri:e}),i.callback=n,i}function l(e,t,n){return u(t=s(e,t,n))}function u(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}(c),v)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function a(){if(!u){var t;clearTimeout(d),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=y,a=null;return 0!==t?(r={body:i(),statusCode:t,method:p,headers:{},url:h,rawRequest:c},c.getAllResponseHeaders&&(r.headers=o(c.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,r,r.body)}}var s,u,c=e.xhr||null;c||(c=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var d,h=c.url=e.uri||e.url,p=c.method=e.method||"GET",f=e.body||e.data,m=c.headers=e.headers||{},g=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:p,url:h,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(a,0)},c.onload=a,c.onerror=r,c.onprogress=function(){},c.onabort=function(){u=!0},c.ontimeout=r,c.open(p,h,!g,e.username,e.password),g||(c.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(d=setTimeout((function(){if(!u){u=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),c.setRequestHeader)for(s in m)m.hasOwnProperty(s)&&c.setRequestHeader(s,m[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(c),c.send(f||null),c}e.exports=l,e.exports.default=l,l.XMLHttpRequest=i.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){l["delete"===e?"del":e]=function(t,n,i){return(n=s(t,n,i)).method=e.toUpperCase(),u(n)}}))},9145:function(e,t){"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"===typeof t.freeze?t.freeze(e):e}var i=n({HTML:"text/html",isHTML:function(e){return e===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!==typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"===typeof n.find)return n.find.call(e,t);for(var i=0;i<e.length;i++)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];if(t.call(void 0,r,i,e))return r}},t.freeze=n,t.MIME_TYPE=i,t.NAMESPACE=r},4708:function(e,t,n){var i=n(9145),r=n(9668),a=n(1775),o=n(9660),s=r.DOMImplementation,l=i.NAMESPACE,u=o.ParseError,c=o.XMLReader;function d(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function h(e){this.options=e||{locator:{}}}function p(){this.cdata=!1}function f(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function m(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function g(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function v(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}h.prototype.parseFromString=function(e,t){var n=this.options,i=new c,r=n.domBuilder||new p,o=n.errorHandler,s=n.locator,u=n.xmlns||{},h=/\/x?html?$/.test(t),f=h?a.HTML_ENTITIES:a.XML_ENTITIES;s&&r.setDocumentLocator(s),i.errorHandler=function(e,t,n){if(!e){if(t instanceof p)return t;e=t}var i={},r=e instanceof Function;function a(t){var a=e[t];!a&&r&&(a=2==e.length?function(n){e(t,n)}:e),i[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+m(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),i}(o,r,s),i.domBuilder=n.domBuilder||r,h&&(u[""]=l.HTML),u.xml=u.xml||l.XML;var g=n.normalizeLineEndings||d;return e&&"string"===typeof e?i.parse(g(e),u,f):i.errorHandler.error("invalid doc source"),r.doc},p.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,a=r.createElementNS(e,n||t),o=i.length;v(this,a),this.currentElement=a,this.locator&&f(this.locator,a);for(var s=0;s<o;s++){e=i.getURI(s);var l=i.getValue(s),u=(n=i.getQName(s),r.createAttributeNS(e,n));this.locator&&f(i.getLocator(s),u),u.value=u.nodeValue=l,a.setAttributeNode(u)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&f(this.locator,n),v(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=g.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&f(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=g.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&f(this.locator,i),v(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&f(this.locator,r),v(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,m(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,m(this.locator))},fatalError:function(e){throw new u(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){p.prototype[e]=function(){return null}})),t.DOMParser=h},9668:function(e,t,n){var i=n(9145),r=i.find,a=i.NAMESPACE;function o(e){return""!==e}function s(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function l(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(o):[]}(e);return Object.keys(t.reduce(s,{}))}function u(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function c(e,t){var n=e.prototype;if(!(n instanceof t)){var i=function(){};i.prototype=t.prototype,u(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var d={},h=d.ELEMENT_NODE=1,p=d.ATTRIBUTE_NODE=2,f=d.TEXT_NODE=3,m=d.CDATA_SECTION_NODE=4,g=d.ENTITY_REFERENCE_NODE=5,v=d.ENTITY_NODE=6,y=d.PROCESSING_INSTRUCTION_NODE=7,b=d.COMMENT_NODE=8,_=d.DOCUMENT_NODE=9,x=d.DOCUMENT_TYPE_NODE=10,w=d.DOCUMENT_FRAGMENT_NODE=11,T=d.NOTATION_NODE=12,S={},E={},k=(S.INDEX_SIZE_ERR=(E[1]="Index size error",1),S.DOMSTRING_SIZE_ERR=(E[2]="DOMString size error",2),S.HIERARCHY_REQUEST_ERR=(E[3]="Hierarchy request error",3)),C=(S.WRONG_DOCUMENT_ERR=(E[4]="Wrong document",4),S.INVALID_CHARACTER_ERR=(E[5]="Invalid character",5),S.NO_DATA_ALLOWED_ERR=(E[6]="No data allowed",6),S.NO_MODIFICATION_ALLOWED_ERR=(E[7]="No modification allowed",7),S.NOT_FOUND_ERR=(E[8]="Not found",8)),M=(S.NOT_SUPPORTED_ERR=(E[9]="Not supported",9),S.INUSE_ATTRIBUTE_ERR=(E[10]="Attribute in use",10));S.INVALID_STATE_ERR=(E[11]="Invalid state",11),S.SYNTAX_ERR=(E[12]="Syntax error",12),S.INVALID_MODIFICATION_ERR=(E[13]="Invalid modification",13),S.NAMESPACE_ERR=(E[14]="Invalid namespace",14),S.INVALID_ACCESS_ERR=(E[15]="Invalid access",15);function A(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,E[e]),this.message=E[e],Error.captureStackTrace&&Error.captureStackTrace(this,A);return n.code=e,t&&(this.message=this.message+": "+t),n}function P(){}function L(e,t){this._node=e,this._refresh=t,I(this)}function I(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);be(e,"length",n.length),u(n,e),e._inc=t}}function O(){}function R(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function D(e,t,n,i){if(i?t[R(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&H(r,e,i),function(e,t,n){e&&e._inc++;var i=n.namespaceURI;i===a.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function N(e,t,n){var i=R(t,n);if(!(i>=0))throw new A(C,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var a=e.ownerDocument;a&&(H(a,e,n),n.ownerElement=null)}}function U(){}function B(){}function F(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function j(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(j(e,t))return!0}while(e=e.nextSibling)}function z(){this.ownerDocument=this}function H(e,t,n,i){e&&e._inc++,n.namespaceURI===a.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function V(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,a=0;r;)i[a++]=r,r=r.nextSibling;i.length=a,delete i[i.length]}}}function G(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,V(e.ownerDocument,e),t}function W(e){return e&&e.nodeType===B.DOCUMENT_TYPE_NODE}function Z(e){return e&&e.nodeType===B.ELEMENT_NODE}function q(e){return e&&e.nodeType===B.TEXT_NODE}function X(e,t){var n=e.childNodes||[];if(r(n,Z)||W(t))return!1;var i=r(n,W);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function Y(e,t){var n=e.childNodes||[];if(r(n,(function(e){return Z(e)&&e!==t})))return!1;var i=r(n,W);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function K(e,t,n){if(!function(e){return e&&(e.nodeType===B.DOCUMENT_NODE||e.nodeType===B.DOCUMENT_FRAGMENT_NODE||e.nodeType===B.ELEMENT_NODE)}(e))throw new A(k,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new A(C,"child not in parent");if(!function(e){return e&&(Z(e)||q(e)||W(e)||e.nodeType===B.DOCUMENT_FRAGMENT_NODE||e.nodeType===B.COMMENT_NODE||e.nodeType===B.PROCESSING_INSTRUCTION_NODE)}(t)||W(t)&&e.nodeType!==B.DOCUMENT_NODE)throw new A(k,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function Q(e,t,n){var i=e.childNodes||[],a=t.childNodes||[];if(t.nodeType===B.DOCUMENT_FRAGMENT_NODE){var o=a.filter(Z);if(o.length>1||r(a,q))throw new A(k,"More than one element or text in fragment");if(1===o.length&&!X(e,n))throw new A(k,"Element in fragment can not be inserted before doctype")}if(Z(t)&&!X(e,n))throw new A(k,"Only one element can be added and only after doctype");if(W(t)){if(r(i,W))throw new A(k,"Only one doctype is allowed");var s=r(i,Z);if(n&&i.indexOf(s)<i.indexOf(n))throw new A(k,"Doctype can only be inserted before an element");if(!n&&s)throw new A(k,"Doctype can not be appended since element is present")}}function $(e,t,n){var i=e.childNodes||[],a=t.childNodes||[];if(t.nodeType===B.DOCUMENT_FRAGMENT_NODE){var o=a.filter(Z);if(o.length>1||r(a,q))throw new A(k,"More than one element or text in fragment");if(1===o.length&&!Y(e,n))throw new A(k,"Element in fragment can not be inserted before doctype")}if(Z(t)&&!Y(e,n))throw new A(k,"Only one element can be added and only after doctype");if(W(t)){if(r(i,(function(e){return W(e)&&e!==n})))throw new A(k,"Only one doctype is allowed");var s=r(i,Z);if(n&&i.indexOf(s)<i.indexOf(n))throw new A(k,"Doctype can only be inserted before an element")}}function J(e,t,n,i){K(e,t,n),e.nodeType===B.DOCUMENT_NODE&&(i||Q)(e,t,n);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===w){var a=t.firstChild;if(null==a)return t;var o=t.lastChild}else a=o=t;var s=n?n.previousSibling:e.lastChild;a.previousSibling=s,o.nextSibling=n,s?s.nextSibling=a:e.firstChild=a,null==n?e.lastChild=o:n.previousSibling=o;do{a.parentNode=e}while(a!==o&&(a=a.nextSibling));return V(e.ownerDocument||e,e),t.nodeType==w&&(t.firstChild=t.lastChild=null),t}function ee(){this._nsMap={}}function te(){}function ne(){}function ie(){}function re(){}function ae(){}function oe(){}function se(){}function le(){}function ue(){}function ce(){}function de(){}function he(){}function pe(e,t){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,a=i.namespaceURI;if(a&&null==r&&null==(r=i.lookupPrefix(a)))var o=[{namespace:a,prefix:null}];return ge(this,n,e,t,o),n.join("")}function fe(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===i&&r===a.XML||r===a.XMLNS)return!1;for(var o=n.length;o--;){var s=n[o];if(s.prefix===i)return s.namespace!==r}return!0}function me(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,F),'"')}function ge(e,t,n,i,r){if(r||(r=[]),i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case h:var o=e.attributes,s=o.length,l=e.firstChild,u=e.tagName,c=u;if(!(n=a.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var d,v=0;v<o.length;v++)if("xmlns"===o.item(v).name){d=o.item(v).value;break}if(!d)for(var T=r.length-1;T>=0;T--){if(""===(S=r[T]).prefix&&S.namespace===e.namespaceURI){d=S.namespace;break}}if(d!==e.namespaceURI)for(T=r.length-1;T>=0;T--){var S;if((S=r[T]).namespace===e.namespaceURI){S.prefix&&(c=S.prefix+":"+u);break}}}t.push("<",c);for(var E=0;E<s;E++){"xmlns"==(k=o.item(E)).prefix?r.push({prefix:k.localName,namespace:k.value}):"xmlns"==k.nodeName&&r.push({prefix:"",namespace:k.value})}for(E=0;E<s;E++){var k,C,M;if(fe(k=o.item(E),0,r))me(t,(C=k.prefix||"")?"xmlns:"+C:"xmlns",M=k.namespaceURI),r.push({prefix:C,namespace:M});ge(k,t,n,i,r)}if(u===c&&fe(e,0,r))me(t,(C=e.prefix||"")?"xmlns:"+C:"xmlns",M=e.namespaceURI),r.push({prefix:C,namespace:M});if(l||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))for(;l;)l.data?t.push(l.data):ge(l,t,n,i,r.slice()),l=l.nextSibling;else for(;l;)ge(l,t,n,i,r.slice()),l=l.nextSibling;t.push("</",c,">")}else t.push("/>");return;case _:case w:for(l=e.firstChild;l;)ge(l,t,n,i,r.slice()),l=l.nextSibling;return;case p:return me(t,e.name,e.value);case f:return t.push(e.data.replace(/[<&>]/g,F));case m:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case x:var A=e.publicId,P=e.systemId;if(t.push("<!DOCTYPE ",e.name),A)t.push(" PUBLIC ",A),P&&"."!=P&&t.push(" ",P),t.push(">");else if(P&&"."!=P)t.push(" SYSTEM ",P,">");else{var L=e.internalSubset;L&&t.push(" [",L,"]"),t.push(">")}return;case y:return t.push("<?",e.target," ",e.data,"?>");case g:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ve(e,t,n){var i;switch(t.nodeType){case h:(i=t.cloneNode(!1)).ownerDocument=e;case w:break;case p:n=!0}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n)for(var r=t.firstChild;r;)i.appendChild(ve(e,r,n)),r=r.nextSibling;return i}function ye(e,t,n){var i=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=t[r];"object"!=typeof a&&a!=i[r]&&(i[r]=a)}switch(t.childNodes&&(i.childNodes=new P),i.ownerDocument=e,i.nodeType){case h:var o=t.attributes,s=i.attributes=new O,l=o.length;s._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(ye(e,o.item(u),!0));break;case p:n=!0}if(n)for(var c=t.firstChild;c;)i.appendChild(ye(e,c,n)),c=c.nextSibling;return i}function be(e,t,n){e[t]=n}A.prototype=Error.prototype,u(S,A),P.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)ge(this[i],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},L.prototype.item=function(e){return I(this),this[e]},c(L,P),O.prototype={length:0,item:P.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new A(M);var n=this.getNamedItem(e.nodeName);return D(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new A(M);return t=this.getNamedItemNS(e.namespaceURI,e.localName),D(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return N(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return N(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},U.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new z;if(i.implementation=this,i.childNodes=new P,i.doctype=n||null,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new oe;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},B.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return J(this,e,t)},replaceChild:function(e,t){J(this,e,t,$),t&&this.removeChild(t)},removeChild:function(e){return G(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ye(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==f&&e.nodeType==f?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e)return i;t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},u(d,B),u(d,B.prototype),z.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==w){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return J(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===h&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),G(this,e)},replaceChild:function(e,t){J(this,e,t,$),e.ownerDocument=this,t&&this.removeChild(t),Z(e)&&(this.documentElement=e)},importNode:function(e,t){return ve(this,e,t)},getElementById:function(e){var t=null;return j(this.documentElement,(function(n){if(n.nodeType==h&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=l(e);return new L(this,(function(n){var i=[];return t.length>0&&j(n.documentElement,(function(r){if(r!==n&&r.nodeType===h){var a=r.getAttribute("class");if(a){var o=e===a;if(!o){var s=l(a);o=t.every((u=s,function(e){return u&&-1!==u.indexOf(e)}))}o&&i.push(r)}}var u})),i}))},createElement:function(e){var t=new ee;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new P,(t.attributes=new O)._ownerElement=t,t},createDocumentFragment:function(){var e=new ce;return e.ownerDocument=this,e.childNodes=new P,e},createTextNode:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ae;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new de;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new te;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ue;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new ee,i=t.split(":"),r=n.attributes=new O;return n.childNodes=new P,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new te,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},c(z,B),ee.prototype={nodeType:h,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===w?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,V(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new L(this,(function(t){var n=[];return j(t,(function(i){i===t||i.nodeType!=h||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new L(this,(function(n){var i=[];return j(n,(function(r){r===n||r.nodeType!==h||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},z.prototype.getElementsByTagName=ee.prototype.getElementsByTagName,z.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS,c(ee,B),te.prototype.nodeType=p,c(te,B),ne.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(E[k])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},c(ne,B),ie.prototype={nodeName:"#text",nodeType:f,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},c(ie,ne),re.prototype={nodeName:"#comment",nodeType:b},c(re,ne),ae.prototype={nodeName:"#cdata-section",nodeType:m},c(ae,ne),oe.prototype.nodeType=x,c(oe,B),se.prototype.nodeType=T,c(se,B),le.prototype.nodeType=v,c(le,B),ue.prototype.nodeType=g,c(ue,B),ce.prototype.nodeName="#document-fragment",ce.prototype.nodeType=w,c(ce,B),de.prototype.nodeType=y,c(de,B),he.prototype.serializeToString=function(e,t,n){return pe.call(e,t,n)},B.prototype.toString=pe;try{if(Object.defineProperty){var _e=function e(t){switch(t.nodeType){case h:case w:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(L.prototype,"length",{get:function(){return I(this),this.$$length}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return _e(this)},set:function(e){switch(this.nodeType){case h:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),be=function(e,t,n){e["$$"+t]=n}}}catch(xe){}t.DocumentType=oe,t.DOMException=A,t.DOMImplementation=U,t.Element=ee,t.Node=B,t.NodeList=P,t.XMLSerializer=he},1775:function(e,t,n){var i=n(9145).freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),t.entityMap=t.HTML_ENTITIES},7542:function(e,t,n){var i=n(9668);i.DOMImplementation,i.XMLSerializer,t.DOMParser=n(4708).DOMParser},9660:function(e,t,n){var i=n(9145).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,a=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+a.source+"*(?::"+r.source+a.source+"*)?$"),s=0,l=1,u=2,c=3,d=4,h=5,p=6,f=7;function m(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,m)}function g(){}function v(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function y(e,t,n,r,a,o){function m(e,t,i){n.attributeNames.hasOwnProperty(e)&&o.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,a),i)}for(var g,v=++t,y=s;;){var b=e.charAt(v);switch(b){case"=":if(y===l)g=e.slice(t,v),y=c;else{if(y!==u)throw new Error("attribute equal must after attrName");y=c}break;case"'":case'"':if(y===c||y===l){if(y===l&&(o.warning('attribute value must after "="'),g=e.slice(t,v)),t=v+1,!((v=e.indexOf(b,t))>0))throw new Error("attribute value no end '"+b+"' match");m(g,_=e.slice(t,v),t-1),y=h}else{if(y!=d)throw new Error('attribute value must after "="');m(g,_=e.slice(t,v),t),o.warning('attribute "'+g+'" missed start quot('+b+")!!"),t=v+1,y=h}break;case"/":switch(y){case s:n.setTagName(e.slice(t,v));case h:case p:case f:y=f,n.closed=!0;case d:case l:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),y==s&&n.setTagName(e.slice(t,v)),v;case">":switch(y){case s:n.setTagName(e.slice(t,v));case h:case p:case f:break;case d:case l:"/"===(_=e.slice(t,v)).slice(-1)&&(n.closed=!0,_=_.slice(0,-1));case u:y===u&&(_=g),y==d?(o.warning('attribute "'+_+'" missed quot(")!'),m(g,_,t)):(i.isHTML(r[""])&&_.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+_+'" missed value!! "'+_+'" instead!!'),m(_,_,t));break;case c:throw new Error("attribute value missed!!")}return v;case"\x80":b=" ";default:if(b<=" ")switch(y){case s:n.setTagName(e.slice(t,v)),y=p;break;case l:g=e.slice(t,v),y=u;break;case d:var _=e.slice(t,v);o.warning('attribute "'+_+'" missed quot(")!!'),m(g,_,t);case h:y=p}else switch(y){case u:n.tagName;i.isHTML(r[""])&&g.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!'),m(g,g,t),t=v,y=l;break;case h:o.warning('attribute space is required"'+g+'"!!');case p:y=l,t=v;break;case c:y=d,t=v;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}v++}}function b(e,t,n){for(var r=e.tagName,a=null,o=e.length;o--;){var s=e[o],l=s.qName,u=s.value;if((p=l.indexOf(":"))>0)var c=s.prefix=l.slice(0,p),d=l.slice(p+1),h="xmlns"===c&&d;else d=l,c=null,h="xmlns"===l&&"";s.localName=d,!1!==h&&(null==a&&(a={},w(n,n={})),n[h]=a[h]=u,s.uri=i.XMLNS,t.startPrefixMapping(h,u))}for(o=e.length;o--;){(c=(s=e[o]).prefix)&&("xml"===c&&(s.uri=i.XML),"xmlns"!==c&&(s.uri=n[c||""]))}var p;(p=r.indexOf(":"))>0?(c=e.prefix=r.slice(0,p),d=e.localName=r.slice(p+1)):(c=null,d=e.localName=r);var f=e.uri=n[c||""];if(t.startElement(f,d,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=a,!0;if(t.endElement(f,d,r),a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&t.endPrefixMapping(c)}function _(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(n)?(r.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,i),r.characters(o,0,o.length),a)}return t+1}function x(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function w(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function T(e,t,n,i){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var a=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var s=a[1][0],l=!1,u=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],u=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(u=a[3][0]));var c=a[o-1];return n.startDTD(s,l,u),n.endDTD(),c.index+c[0].length}return-1}function S(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function E(){this.attributeNames={}}m.prototype=new Error,m.prototype.name=m.name,g.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),w(t,t={}),function(e,t,n,r,a){function o(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function s(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?o(parseInt(t.substr(1).replace("x","0x"))):(a.error("entity not found:"+e),e)}function l(t){if(t>w){var n=e.substring(w,t).replace(/&#?\w+;/g,s);p&&u(w),r.characters(n,0,t-w),w=t}}function u(t,n){for(;t>=d&&(n=h.exec(e));)c=n.index,d=c+n[0].length,p.lineNumber++;p.columnNumber=t-c+1}var c=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,p=r.locator,f=[{currentNSMap:t}],g={},w=0;for(;;){try{var k=e.indexOf("<",w);if(k<0){if(!e.substr(w).match(/^\s*$/)){var C=r.doc,M=C.createTextNode(e.substr(w));C.appendChild(M),r.currentElement=M}return}switch(k>w&&l(k),e.charAt(k+1)){case"/":var A=e.indexOf(">",k+3),P=e.substring(k+2,A).replace(/[ \t\n\r]+$/g,""),L=f.pop();A<0?(P=e.substring(k+2).replace(/[\s<].*/,""),a.error("end tag name: "+P+" is not complete:"+L.tagName),A=k+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),a.error("end tag name: "+P+" maybe not complete"),A=k+1+P.length);var I=L.localNSMap,O=L.tagName==P;if(O||L.tagName&&L.tagName.toLowerCase()==P.toLowerCase()){if(r.endElement(L.uri,L.localName,P),I)for(var R in I)Object.prototype.hasOwnProperty.call(I,R)&&r.endPrefixMapping(R);O||a.fatalError("end tag name: "+P+" is not match the current start tagName:"+L.tagName)}else f.push(L);A++;break;case"?":p&&u(k),A=S(e,k,r);break;case"!":p&&u(k),A=T(e,k,r,a);break;default:p&&u(k);var D=new E,N=f[f.length-1].currentNSMap,U=(A=y(e,k,D,N,s,a),D.length);if(!D.closed&&x(e,A,D.tagName,g)&&(D.closed=!0,n.nbsp||a.warning("unclosed xml attribute")),p&&U){for(var B=v(p,{}),F=0;F<U;F++){var j=D[F];u(j.offset),j.locator=v(p,{})}r.locator=B,b(D,r,N)&&f.push(D),r.locator=p}else b(D,r,N)&&f.push(D);i.isHTML(D.uri)&&!D.closed?A=_(e,A,D.tagName,s,r):A++}}catch(z){if(z instanceof m)throw z;a.error("element parse error: "+z),A=-1}A>w?w=A:l(Math.max(k,w)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},E.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=g,t.ParseError=m},7203:function(e,t,n){var i,r="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:{},a=n(5893);"undefined"!==typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=i},9851:function(e,t,n){var i;i="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},e.exports=i},2110:function(e,t,n){"use strict";var i=n(7441),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return i.isMemo(e)?o:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var o=c(n);d&&(o=o.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<o.length;++g){var v=o[g];if(!a[v]&&(!i||!i[v])&&(!m||!m[v])&&(!s||!s[v])){var y=h(n,v);try{u(t,v,y)}catch(b){}}}}return t}},8112:function(e){e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"===typeof e&&"[object RegExp]"!==n||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},7943:function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return o[e];var n,a=String(e);return(n=i[a.toLowerCase()])?n:(n=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var a;if(a=i[t.toLowerCase()])return a===n;if(a=r[t.toLowerCase()])return a===n}else if("number"===typeof t)return t===n;return!1}};var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var o=t.names=t.title={};for(a in i)o[i[a]]=a;for(var s in r)i[s]=r[s]},1866:function(e,t,n){var i=9007199254740991,r="[object Arguments]",a="[object Function]",o="[object GeneratorFunction]",s="[object Map]",l="[object Promise]",u="[object Set]",c="[object String]",d="[object WeakMap]",h="[object DataView]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,m="\\ud800-\\udfff",g="\\u0300-\\u036f\\ufe20-\\ufe23",v="\\u20d0-\\u20f0",y="\\ufe0e\\ufe0f",b="["+m+"]",_="["+g+v+"]",x="\\ud83c[\\udffb-\\udfff]",w="[^"+m+"]",T="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",E="\\u200d",k="(?:"+_+"|"+x+")"+"?",C="["+y+"]?",M=C+k+("(?:"+E+"(?:"+[w,T,S].join("|")+")"+C+k+")*"),A="(?:"+[w+_+"?",_,T,S,b].join("|")+")",P=RegExp(x+"(?="+x+")|"+A+M,"g"),L=RegExp("["+E+m+g+v+y+"]"),I="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,O="object"==typeof self&&self&&self.Object===Object&&self,R=I||O||Function("return this")();function D(e,t){return function(e,t){for(var n=-1,i=e?e.length:0,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}(t,(function(t){return e[t]}))}function N(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function U(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function B(e){return function(e){return L.test(e)}(e)?function(e){return e.match(P)||[]}(e):function(e){return e.split("")}(e)}var F,j,z=Function.prototype,H=Object.prototype,V=R["__core-js_shared__"],G=function(){var e=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),W=z.toString,Z=H.hasOwnProperty,q=H.toString,X=RegExp("^"+W.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=R.Symbol,K=Y?Y.iterator:void 0,Q=H.propertyIsEnumerable,$=(F=Object.keys,j=Object,function(e){return F(j(e))}),J=he(R,"DataView"),ee=he(R,"Map"),te=he(R,"Promise"),ne=he(R,"Set"),ie=he(R,"WeakMap"),re=me(J),ae=me(ee),oe=me(te),se=me(ne),le=me(ie);function ue(e,t){var n=ge(e)||function(e){return function(e){return _e(e)&&ve(e)}(e)&&Z.call(e,"callee")&&(!Q.call(e,"callee")||q.call(e)==r)}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],i=n.length,a=!!i;for(var o in e)!t&&!Z.call(e,o)||a&&("length"==o||fe(o,i))||n.push(o);return n}function ce(e){if(!be(e)||function(e){return!!G&&G in e}(e))return!1;var t=ye(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?X:p;return t.test(me(e))}function de(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||H;return e===n}(e))return $(e);var t=[];for(var n in Object(e))Z.call(e,n)&&"constructor"!=n&&t.push(n);return t}function he(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ce(n)?n:void 0}var pe=function(e){return q.call(e)};function fe(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||f.test(e))&&e>-1&&e%1==0&&e<t}function me(e){if(null!=e){try{return W.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(J&&pe(new J(new ArrayBuffer(1)))!=h||ee&&pe(new ee)!=s||te&&pe(te.resolve())!=l||ne&&pe(new ne)!=u||ie&&pe(new ie)!=d)&&(pe=function(e){var t=q.call(e),n="[object Object]"==t?e.constructor:void 0,i=n?me(n):void 0;if(i)switch(i){case re:return h;case ae:return s;case oe:return l;case se:return u;case le:return d}return t});var ge=Array.isArray;function ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!ye(e)}function ye(e){var t=be(e)?q.call(e):"";return t==a||t==o}function be(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _e(e){return!!e&&"object"==typeof e}function xe(e){return e?D(e,function(e){return ve(e)?ue(e):de(e)}(e)):[]}e.exports=function(e){if(!e)return[];if(ve(e))return function(e){return"string"==typeof e||!ge(e)&&_e(e)&&q.call(e)==c}(e)?B(e):function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(e);if(K&&e[K])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[K]());var t=pe(e);return(t==s?N:t==u?U:xe)(e)}},8857:function(e,t,n){var i=n(7522).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=i(e.subarray(r)),n.firstOffset=i(e.subarray(r+8)),r+=16),r+=2;var a=t.getUint16(r);for(r+=2;a>0;r+=12,a--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n}},3474:function(e){var t,n,i,r,a,o,s,l=9e4;t=function(e){return e*l},n=function(e,t){return e*t},i=function(e){return e/l},r=function(e,t){return e/t},a=function(e,n){return t(r(e,n))},o=function(e,t){return n(i(e),t)},s=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:a,videoTsToAudioTs:o,metadataTsToSeconds:s}},7522:function(e){var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(n=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:i.getUint32(0)*t+i.getUint32(4)},MAX_UINT32:t}},888:function(e,t,n){"use strict";var i=n(9047);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var i=n(2791),r=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var N,U=Object.assign;function B(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var F=!1;function j(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function z(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case w:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=W(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=G(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),i=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Te=null,Se=null;function Ee(e){if(e=br(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=xr(t),we(e.stateNode,e.type,t))}}function ke(e){Te?Se?Se.push(e):Se=[e]:Te=e}function Ce(){if(Te){var e=Te,t=Se;if(Se=Te=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Me(e,t){return e(t)}function Ae(){}var Pe=!1;function Le(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Me(e,t,n)}finally{Pe=!1,(null!==Te||null!==Se)&&(Ae(),Ce())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Oe=!1}function De(e,t,n,i,r,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ne=!1,Ue=null,Be=!1,Fe=null,je={onError:function(e){Ne=!0,Ue=e}};function ze(e,t,n,i,r,a,o,s,l){Ne=!1,Ue=null,De.apply(je,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(He(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ge(r),e;if(o===i)return Ge(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ze(e):null}function Ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ze(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Qe=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=dt(s):0!==(a&=o)&&(i=dt(a))}else 0!==(o=n&~r)?i=dt(o):0!==a&&(i=dt(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,Tt,St,Et,kt=!1,Ct=[],Mt=null,At=null,Pt=null,Lt=new Map,It=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Nt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ut(e){var t=yr(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);_e=i,n.target.dispatchEvent(i),_e=null,t.shift()}return!0}function Ft(e,t,n){Bt(e)&&n.delete(t)}function jt(){kt=!1,null!==Mt&&Bt(Mt)&&(Mt=null),null!==At&&Bt(At)&&(At=null),null!==Pt&&Bt(Pt)&&(Pt=null),Lt.forEach(Ft),It.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jt)))}function Ht(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var i=Ct[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Mt&&zt(Mt,e),null!==At&&zt(At,e),null!==Pt&&zt(Pt,e),Lt.forEach(t),It.forEach(t),n=0;n<Ot.length;n++)(i=Ot[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var Vt=_.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,i){var r=bt,a=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,i)}finally{bt=r,Vt.transition=a}}function Zt(e,t,n,i){var r=bt,a=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,i)}finally{bt=r,Vt.transition=a}}function qt(e,t,n,i){if(Gt){var r=Yt(e,t,n,i);if(null===r)Gi(e,t,i,Xt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Mt=Nt(Mt,e,t,n,i,r),!0;case"dragenter":return At=Nt(At,e,t,n,i,r),!0;case"mouseover":return Pt=Nt(Pt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Lt.set(a,Nt(Lt.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,It.set(a,Nt(It.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Rt.indexOf(e)){for(;null!==r;){var a=br(r);if(null!==a&&xt(a),null===(a=Yt(e,t,n,i))&&Gi(e,t,i,Xt,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Gi(e,t,i,null,n)}}var Xt=null;function Yt(e,t,n,i){if(Xt=null,null!==(e=yr(e=xe(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,i=n.length,r="value"in Qt?Qt.value:Qt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=U({},un,{view:0,detail:0}),hn=an(dn),pn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(U({},pn,{dataTransfer:0})),gn=an(U({},dn,{relatedTarget:0})),vn=an(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),_n=an(U({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function En(){return Sn}var kn=U({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(kn),Mn=an(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=an(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(Ln),On=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Nn=c&&"TextEvent"in window&&!Dn,Un=c&&(!Rn||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),Fn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,i){ke(i),0<(t=Zi(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Zn=null,qn=null;function Xn(e){Bi(e,0)}function Yn(e){if(q(_r(e)))return e}function Kn(e,t){if("change"===e)return t}var Qn=!1;if(c){var $n;if(c){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function ti(){Zn&&(Zn.detachEvent("onpropertychange",ni),qn=Zn=null)}function ni(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Wn(t,qn,e,xe(e)),Le(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),qn=n,(Zn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function ai(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!si(e[r],t[r]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var n,i=ui(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ui(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=ci(n,a);var o=ci(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=c&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,bi=!1;function _i(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==X(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Zi(vi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},Ti={},Si={};function Ei(e){if(Ti[e])return Ti[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return Ti[e]=n[t];return e}c&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var ki=Ei("animationend"),Ci=Ei("animationiteration"),Mi=Ei("animationstart"),Ai=Ei("transitionend"),Pi=new Map,Li="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){Pi.set(e,t),l(t,[e])}for(var Oi=0;Oi<Li.length;Oi++){var Ri=Li[Oi];Ii(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Ii(ki,"onAnimationEnd"),Ii(Ci,"onAnimationIteration"),Ii(Mi,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Ai,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ni=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Ui(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,l,u){if(ze.apply(this,arguments),Ne){if(!Ne)throw Error(a(198));var c=Ue;Ne=!1,Ue=null,Be||(Be=!0,Fe=c)}}(i,t,void 0,e),e.currentTarget=null}function Bi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;Ui(r,s,u),a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;Ui(r,s,u),a=l}}}if(Be)throw e=Fe,Be=!1,Fe=null,e}function Fi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function ji(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[zi]){e[zi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ni.has(t)||ji(t,!1,e),ji(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zi]||(t[zi]=!0,ji("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Kt(t)){case 1:var r=Wt;break;case 4:r=Zt;break;default:r=qt}n=r.bind(null,t,n,e),r=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Gi(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=yr(s)))return;if(5===(l=o.tag)||6===l){i=a=o;continue e}s=s.parentNode}}i=i.return}Le((function(){var i=a,r=xe(n),o=[];e:{var s=Pi.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case ki:case Ci:case Mi:l=vn;break;case Ai:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ie(f,h))&&c.push(Wi(f,m,p)))),d)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,r),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(u=n.relatedTarget||n.fromElement)||!yr(u)&&!u[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?yr(u):null)&&(u!==(d=He(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:_r(l),p=null==u?s:_r(u),(s=new c(m,f+"leave",l,n,r)).target=d,s.relatedTarget=p,m=null,yr(r)===i&&((c=new c(h,f+"enter",u,n,r)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,f=0,p=c=l;p;p=qi(p))f++;for(p=0,m=h;m;m=qi(m))p++;for(;0<f-p;)c=qi(c),f--;for(;0<p-f;)h=qi(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=qi(c),h=qi(h)}c=null}else c=null;null!==l&&Xi(o,s,l,c,!1),null!==u&&null!==d&&Xi(o,d,u,c,!0)}if("select"===(l=(s=i?_r(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Gn(s))if(Qn)g=oi;else{g=ri;var v=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ai);switch(g&&(g=g(e,i))?Wn(o,g,n,r):(v&&v(e,s,i),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=i?_r(i):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":_i(o,n,r)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):($t="value"in(Qt=r)?Qt.value:Qt.textContent,Hn=!0)),0<(v=Zi(i,b)).length&&(b=new _n(b,e,null,n,r),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Nn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Rn&&jn(e,t)?(e=en(),Jt=$t=Qt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Zi(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}Bi(o,t)}))}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Ie(e,n))&&i.unshift(Wi(e,a,r)),null!=(a=Ie(e,t))&&i.push(Wi(e,a,r))),e=e.return}return i}function qi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==u&&(s=u,r?null!=(l=Ie(n,a))&&o.unshift(Wi(n,l,s)):r||null!=(l=Ie(n,a))&&o.push(Wi(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Ki,"")}function $i(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(a(425))}function Ji(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cr(e);null!==e;){if(n=e[hr])return n;e=cr(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xr(e){return e[pr]||null}var wr=[],Tr=-1;function Sr(e){return{current:e}}function Er(e){0>Tr||(e.current=wr[Tr],wr[Tr]=null,Tr--)}function kr(e,t){Tr++,wr[Tr]=e.current,e.current=t}var Cr={},Mr=Sr(Cr),Ar=Sr(!1),Pr=Cr;function Lr(e,t){var n=e.type.contextTypes;if(!n)return Cr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Or(){Er(Ar),Er(Mr)}function Rr(e,t,n){if(Mr.current!==Cr)throw Error(a(168));kr(Mr,t),kr(Ar,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,V(e)||"Unknown",r));return U({},n,i)}function Nr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Pr=Mr.current,kr(Mr,e),kr(Ar,Ar.current),!0}function Ur(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Dr(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Er(Ar),Er(Mr),kr(Mr,e)):Er(Ar),kr(Ar,n)}var Br=null,Fr=!1,jr=!1;function zr(e){null===Br?Br=[e]:Br.push(e)}function Hr(){if(!jr&&null!==Br){jr=!0;var e=0,t=bt;try{var n=Br;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Br=null,Fr=!1}catch(r){throw null!==Br&&(Br=Br.slice(e+1)),qe(Je,Hr),r}finally{bt=t,jr=!1}}return null}var Vr=[],Gr=0,Wr=null,Zr=0,qr=[],Xr=0,Yr=null,Kr=1,Qr="";function $r(e,t){Vr[Gr++]=Zr,Vr[Gr++]=Wr,Wr=e,Zr=t}function Jr(e,t,n){qr[Xr++]=Kr,qr[Xr++]=Qr,qr[Xr++]=Yr,Yr=e;var i=Kr;e=Qr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var a=32-ot(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Kr=1<<32-ot(t)+r|n<<r|i,Qr=a+e}else Kr=1<<a|n<<r|i,Qr=e}function ea(e){null!==e.return&&($r(e,1),Jr(e,1,0))}function ta(e){for(;e===Wr;)Wr=Vr[--Gr],Vr[Gr]=null,Zr=Vr[--Gr],Vr[Gr]=null;for(;e===Yr;)Yr=qr[--Xr],qr[Xr]=null,Qr=qr[--Xr],qr[Xr]=null,Kr=qr[--Xr],qr[Xr]=null}var na=null,ia=null,ra=!1,aa=null;function oa(e,t){var n=Iu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ia=ur(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Kr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Iu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ia=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ra){var t=ia;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ur(n.nextSibling);var i=na;t&&sa(e,t)?oa(i,n):(e.flags=-4097&e.flags|2,ra=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ra)return ca(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ia)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ur(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=na?ur(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ia;e;)e=ur(e.nextSibling)}function pa(){ia=na=null,ra=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=_.ReactCurrentBatchConfig;function ga(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var va=Sr(null),ya=null,ba=null,_a=null;function xa(){_a=ba=ya=null}function wa(e){var t=va.current;Er(va),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,_a=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var ka=null;function Ca(e){null===ka?ka=[e]:ka.push(e)}function Ma(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ca(t)):(n.next=r.next,r.next=n),t.interleaved=n,Aa(e,i)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Aa(e,n)}return null===(r=i.interleaved)?(t.next=t,Ca(i)):(t.next=r.next,r.next=t),i.interleaved=t,Aa(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Na(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,i){var r=e.updateQueue;Pa=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=r.baseState;for(o=0,c=u=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((i&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=U({},d,h);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=h;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(h=s).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===c&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Ul|=o,e.lanes=o,e.memoizedState=d}}function Ba(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Fa=(new i.Component).refs;function ja(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),a=Oa(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,r))&&(iu(t,e,r,i),Da(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),a=Oa(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,r))&&(iu(t,e,r,i),Da(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),i=nu(e),r=Oa(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ra(e,r,i))&&(iu(t,e,i,n),Da(t,e,i))}};function Ha(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,a))}function Va(e,t,n){var i=!1,r=Cr,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(r=Ir(t)?Pr:Mr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Lr(e,r):Cr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Fa,La(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Ea(a):(a=Ir(t)?Pr:Mr.current,r.context=Lr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&za.enqueueReplaceState(r,r.state,null),Ua(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Za(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Fa&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Bu(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){var a=n.type;return a===T?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&Xa(a)===t.type)?((i=r(t,n.props)).ref=Za(e,t,n),i.return=e,i):((i=Du(n.type,n.key,n.props,null,e.mode,i)).ref=Za(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=Nu(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=Za(e,null,t),n.return=e,n;case w:return(t=Fu(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Nu(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?u(e,t,n,i):null;case w:return n.key===r?c(e,t,n,i):null;case I:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:d(e,t,n,i,null);qa(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case I:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return d(t,e=e.get(n)||null,i,r,null);qa(t,i)}return null}function m(r,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(r,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(r,d),ra&&$r(r,m),u;if(null===d){for(;m<s.length;m++)null!==(d=h(r,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return ra&&$r(r,m),u}for(d=i(r,d);m<s.length;m++)null!==(g=f(d,r,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(r,e)})),ra&&$r(r,m),u}function g(r,s,l,u){var c=D(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(r,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(r,m),s=o(b,s,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(r,m),ra&&$r(r,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(r,y.value,u))&&(s=o(y,s,g),null===d?c=y:d.sibling=y,d=y);return ra&&$r(r,g),c}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=f(m,r,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(r,e)})),ra&&$r(r,g),c}return function e(i,a,o,l){if("object"===typeof o&&null!==o&&o.type===T&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===T){if(7===c.tag){n(i,c.sibling),(a=r(c,o.props.children)).return=i,i=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===I&&Xa(u)===c.type){n(i,c.sibling),(a=r(c,o.props)).ref=Za(i,c,o),a.return=i,i=a;break e}n(i,c);break}t(i,c),c=c.sibling}o.type===T?((a=Nu(o.props.children,i.mode,l,o.key)).return=i,i=a):((l=Du(o.type,o.key,o.props,null,i.mode,l)).ref=Za(i,a,o),l.return=i,i=l)}return s(i);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Fu(o,i.mode,l)).return=i,i=a}return s(i);case I:return e(i,a,(c=o._init)(o._payload),l)}if(te(o))return m(i,a,o,l);if(D(o))return g(i,a,o,l);qa(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=Bu(o,i.mode,l)).return=i,i=a),s(i)):n(i,a)}}var Ka=Ya(!0),Qa=Ya(!1),$a={},Ja=Sr($a),eo=Sr($a),to=Sr($a);function no(e){if(e===$a)throw Error(a(174));return e}function io(e,t){switch(kr(to,t),kr(eo,e),kr(Ja,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(Ja),kr(Ja,t)}function ro(){Er(Ja),Er(eo),Er(to)}function ao(e){no(to.current);var t=no(Ja.current),n=le(t,e.type);t!==n&&(kr(eo,e),kr(Ja,n))}function oo(e){eo.current===e&&(Er(Ja),Er(eo))}var so=Sr(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=_.ReactCurrentDispatcher,po=_.ReactCurrentBatchConfig,fo=0,mo=null,go=null,vo=null,yo=!1,bo=!1,_o=0,xo=0;function wo(){throw Error(a(321))}function To(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function So(e,t,n,i,r,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(i,r),bo){o=0;do{if(bo=!1,_o=0,25<=o)throw Error(a(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=us,e=n(i,r)}while(bo)}if(ho.current=os,t=null!==go&&null!==go.next,fo=0,vo=go=mo=null,yo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==_o;return _o=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Mo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=go,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((fo&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=i):u=u.next=h,mo.lanes|=d,Ul|=d}c=c.next}while(null!==c&&c!==o);null===u?s=i:u.next=l,si(i,t.memoizedState)||(_s=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=u,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,mo.lanes|=o,Ul|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);si(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Lo(){}function Io(e,t){var n=mo,i=Co(),r=t(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,_s=!0),i=i.queue,Go(Do.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Fo(9,Ro.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&fo)||Oo(n,t,r)}return r}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,i){t.value=n,t.getSnapshot=i,No(t)&&Uo(e)}function Do(e,t,n){return n((function(){No(t)&&Uo(e)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(i){return!0}}function Uo(e){var t=Aa(e,1);null!==t&&iu(t,e,1,-1)}function Bo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function jo(){return Co().memoizedState}function zo(e,t,n,i){var r=ko();mo.flags|=e,r.memoizedState=Fo(1|t,n,void 0,void 0===i?null:i)}function Ho(e,t,n,i){var r=Co();i=void 0===i?null:i;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==i&&To(i,o.deps))return void(r.memoizedState=Fo(t,n,a,i))}mo.flags|=e,r.memoizedState=Fo(1|t,n,a,i)}function Vo(e,t){return zo(8390656,8,e,t)}function Go(e,t){return Ho(2048,8,e,t)}function Wo(e,t){return Ho(4,2,e,t)}function Zo(e,t){return Ho(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,qo.bind(null,t,e),n)}function Yo(){}function Ko(e,t){var n=Co();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&To(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=Co();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&To(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(si(n,t)||(n=mt(),mo.lanes|=n,Ul|=n,e.baseState=!0),t)}function Jo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=po.transition;po.transition={};try{e(!1),t()}finally{bt=n,po.transition=i}}function es(){return Co().memoizedState}function ts(e,t,n){var i=nu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},is(e))rs(t,n);else if(null!==(n=Ma(e,t,n,i))){iu(n,e,i,tu()),as(n,t,i)}}function ns(e,t,n){var i=nu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))rs(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,o)){var l=t.interleaved;return null===l?(r.next=r,Ca(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(u){}null!==(n=Ma(e,t,r,i))&&(iu(n,e,i,r=tu()),as(n,t,i))}}function is(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function rs(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ea,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ko();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ts.bind(null,mo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Bo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Bo(!1),t=e[0];return e=Jo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=mo,r=ko();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&fo)||Oo(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Vo(Do.bind(null,i,o,e),[e]),i.flags|=2048,Fo(9,Ro.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Pl.identifierPrefix;if(ra){var n=Qr;t=":"+t+"R"+(n=(Kr&~(1<<32-ot(Kr)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ea,useCallback:Ko,useContext:Ea,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Wo,useLayoutEffect:Zo,useMemo:Qo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Mo)},useDebugValue:Yo,useDeferredValue:function(e){return $o(Co(),go.memoizedState,e)},useTransition:function(){return[Ao(Mo)[0],Co().memoizedState]},useMutableSource:Lo,useSyncExternalStore:Io,useId:es,unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Ko,useContext:Ea,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Wo,useLayoutEffect:Zo,useMemo:Qo,useReducer:Po,useRef:jo,useState:function(){return Po(Mo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:$o(t,go.memoizedState,e)},useTransition:function(){return[Po(Mo)[0],Co().memoizedState]},useMutableSource:Lo,useSyncExternalStore:Io,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Zl=i),hs(0,t)},n}function ms(e,t,n){(n=Oa(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ps;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bs=_.ReactCurrentOwner,_s=!1;function xs(e,t,n,i){t.child=null===e?Qa(t,null,n,i):Ka(t,e.child,n,i)}function ws(e,t,n,i,r){n=n.render;var a=t.ref;return Sa(t,r),i=So(e,t,n,i,a,r),n=Eo(),null===e||_s?(ra&&n&&ea(t),t.flags|=1,xs(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function Ts(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Ou(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ws(e,t,r)}return t.flags|=1,(e=Ru(a,i)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(li(a,i)&&e.ref===t.ref){if(_s=!1,t.pendingProps=i=a,0===(e.lanes&r))return t.lanes=e.lanes,Ws(e,t,r);0!==(131072&e.flags)&&(_s=!0)}}return Cs(e,t,n,i,r)}function Es(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(Rl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kr(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,kr(Rl,Ol),Ol|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,kr(Rl,Ol),Ol|=i;return xs(e,t,r,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,i,r){var a=Ir(n)?Pr:Mr.current;return a=Lr(t,a),Sa(t,r),n=So(e,t,n,i,a,r),i=Eo(),null===e||_s?(ra&&i&&ea(t),t.flags|=1,xs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function Ms(e,t,n,i,r){if(Ir(n)){var a=!0;Nr(t)}else a=!1;if(Sa(t,r),null===t.stateNode)Gs(e,t),Va(t,n,i),Wa(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ea(u):u=Lr(t,u=Ir(n)?Pr:Mr.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||l!==u)&&Ga(t,o,i,u),Pa=!1;var h=t.memoizedState;o.state=h,Ua(t,i,o,r),l=t.memoizedState,s!==i||h!==l||Ar.current||Pa?("function"===typeof c&&(ja(t,n,c,i),l=t.memoizedState),(s=Pa||Ha(t,n,s,i,h,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Ia(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ga(t.type,s),o.props=u,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ea(l):l=Lr(t,l=Ir(n)?Pr:Mr.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Ga(t,o,i,l),Pa=!1,h=t.memoizedState,o.state=h,Ua(t,i,o,r);var f=t.memoizedState;s!==d||h!==f||Ar.current||Pa?("function"===typeof p&&(ja(t,n,p,i),f=t.memoizedState),(u=Pa||Ha(t,n,u,i,h,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return As(e,t,n,i,a,r)}function As(e,t,n,i,r,a){ks(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Ur(t,n,!1),Ws(e,t,a);i=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Ka(t,e.child,null,a),t.child=Ka(t,null,s,a)):xs(e,t,s,a),t.memoizedState=i.state,r&&Ur(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Rr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rr(0,t.context,!1),io(e,t.containerInfo)}function Ls(e,t,n,i,r){return pa(),fa(r),t.flags|=256,xs(e,t,n,i),t.child}var Is,Os,Rs,Ds,Ns={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var i,r=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),kr(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Uu(l,r,0,null),e=Nu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Ns,e):Fs(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,i=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Uu({mode:"visible",children:i.children},r,0,null),(o=Nu(o,r,s,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Ka(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Ns,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,js(e,t,s,i=ds(o=Error(a(419)),i,void 0))}if(l=0!==(s&e.childLanes),_s||l){if(null!==(i=Pl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Aa(e,r),iu(i,e,r,-1))}return gu(),js(e,t,s,i=ds(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Mu.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,ia=ur(r.nextSibling),na=t,ra=!0,aa=null,null!==e&&(qr[Xr++]=Kr,qr[Xr++]=Qr,qr[Xr++]=Yr,Kr=e.id,Qr=e.overflow,Yr=t),t=Fs(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(s){s=r.fallback,l=t.mode,i=(o=e.child).sibling;var u={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ru(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==i?s=Ru(i,s):(s=Nu(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Us(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,r}return e=(s=e.child).sibling,r=Ru(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fs(e,t){return(t=Uu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,i){return null!==i&&fa(i),Ka(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ta(e.return,t,n)}function Hs(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Vs(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(xs(e,t,i.children,n),0!==(2&(i=so.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(kr(so,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Hs(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===lo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Hs(t,!0,n,null,a);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zs(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xs(e,t,n){var i=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ir(t.type)&&Or(),qs(t),null;case 3:return i=t.stateNode,ro(),Er(Ar),Er(Mr),co(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),Os(e,t),qs(t),null;case 5:oo(t);var r=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return qs(t),null}if(e=no(Ja.current),da(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[hr]=t,i[pr]=o,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)Fi(Di[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":K(i,o),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Fi("invalid",i);break;case"textarea":re(i,o),Fi("invalid",i)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?i.textContent!==u&&(!0!==o.suppressHydrationWarning&&$i(i.textContent,u,e),r=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&$i(i.textContent,u,e),r=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fi("scroll",i)}switch(n){case"input":Z(i),J(i,o,!0);break;case"textarea":Z(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Is(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),r=i;break;case"iframe":case"object":case"embed":Fi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)Fi(Di[r],e);r=i;break;case"source":Fi("error",e),r=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),r=i;break;case"details":Fi("toggle",e),r=i;break;case"input":K(e,i),r=Y(e,i),Fi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=U({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Fi("invalid",e)}for(o in ye(n,r),u=r)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fi("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":Z(e),J(e,i,!1);break;case"textarea":Z(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+G(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),da(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(o=i.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$i(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$i(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return qs(t),null;case 13:if(Er(so),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==ia&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hr]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==aa&&(su(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Dl&&(Dl=3):gu())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return ro(),Os(e,t),null===e&&Hi(t.stateNode.containerInfo),qs(t),null;case 10:return wa(t.type._context),qs(t),null;case 19:if(Er(so),null===(o=t.memoizedState))return qs(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Zs(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Zs(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return kr(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vl&&(t.flags|=128,i=!0,Zs(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Zs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ra)return qs(t),null}else 2*Qe()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,i=!0,Zs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,kr(so,i?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return hu(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ir(t.type)&&Or(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),Er(Ar),Er(Mr),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Er(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(so),null;case 4:return ro(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Rs=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),o=[];break;case"select":r=U({},r,{value:void 0}),i=U({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(c in ye(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fi("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ks=!1,Qs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Js=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Eu(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){Eu(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&tl(t,n,a)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Qs||el(n,t);case 6:var i=dl,r=hl;dl=null,pl(e,t,n),hl=r,null!==(dl=i)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(dl,n.stateNode));break;case 4:i=dl,r=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,t,o),r=r.next}while(r!==i)}pl(e,t,n);break;case 1:if(!Qs&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Eu(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Qs=(i=Qs)||null!==n.memoizedState,pl(e,t,n),Qs=i):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var i=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));fl(o,s,r),dl=null,hl=!1;var u=r.alternate;null!==u&&(u.return=null),r.return=null}catch(c){Eu(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(g){Eu(e,e.return,g)}try{il(5,e,e.return)}catch(g){Eu(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Eu(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(r,o),be(l,s);var c=be(l,o);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):b(r,d,h,c)}switch(l){case"input":$(r,o);break;case"textarea":ae(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[pr]=o}catch(g){Eu(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(g){Eu(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Eu(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Qe())),4&i&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,gl(t,e),Qs=c):gl(t,e),yl(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Eu(i,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Js=f):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,c?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Eu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Eu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&i&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,ll(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Eu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Js=e,_l(e,t,n)}function _l(e,t,n){for(var i=0!==(1&e.mode);null!==Js;){var r=Js,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ks;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Ks;var u=Qs;if(Ks=o,(Qs=l)&&!u)for(Js=r;null!==Js;)l=(o=Js).child,22===o.tag&&null!==o.memoizedState?Tl(r):null!==l?(l.return=o,Js=l):Tl(r);for(;null!==a;)Js=a,_l(a,t,n),a=a.sibling;Js=r,Ks=s,Qs=u}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Js=a):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qs)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ga(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ba(t,o,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ba(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&al(t)}catch(p){Eu(t,t.return,p)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Tl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Eu(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Eu(t,r,l)}}var a=t.return;try{al(t)}catch(l){Eu(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){Eu(t,o,l)}}}catch(l){Eu(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,El=Math.ceil,kl=_.ReactCurrentDispatcher,Cl=_.ReactCurrentOwner,Ml=_.ReactCurrentBatchConfig,Al=0,Pl=null,Ll=null,Il=0,Ol=0,Rl=Sr(0),Dl=0,Nl=null,Ul=0,Bl=0,Fl=0,jl=null,zl=null,Hl=0,Vl=1/0,Gl=null,Wl=!1,Zl=null,ql=null,Xl=!1,Yl=null,Kl=0,Ql=0,$l=null,Jl=-1,eu=0;function tu(){return 0!==(6&Al)?Qe():-1!==Jl?Jl:Jl=Qe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Il?Il&-Il:null!==ma.transition?(0===eu&&(eu=mt()),eu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function iu(e,t,n,i){if(50<Ql)throw Ql=0,$l=null,Error(a(185));vt(e,n,i),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Bl|=n),4===Dl&&lu(e,Il)),ru(e,i),1===n&&0===Al&&0===(1&t.mode)&&(Vl=Qe()+500,Fr&&Hr()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=ht(e,e===Pl?Il:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Fr=!0,zr(e)}(uu.bind(null,e)):zr(uu.bind(null,e)),or((function(){0===(6&Al)&&Hr()})),n=null;else{switch(_t(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Jl=-1,eu=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(Tu()&&e.callbackNode!==n)return null;var i=ht(e,e===Pl?Il:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=vu(e,i);else{t=i;var r=Al;Al|=2;var o=mu();for(Pl===e&&Il===t||(Gl=null,Vl=Qe()+500,pu(e,t));;)try{bu();break}catch(l){fu(e,l)}xa(),kl.current=o,Al=r,null!==Ll?t=0:(Pl=null,Il=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=ou(e,r))),1===t)throw n=Nl,pu(e,0),lu(e,i),ru(e,Qe()),n;if(6===t)lu(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!si(a(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=vu(e,i))&&(0!==(o=ft(e))&&(i=o,t=ou(e,o))),1===t))throw n=Nl,pu(e,0),lu(e,i),ru(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,zl,Gl);break;case 3:if(lu(e,i),(130023424&i)===i&&10<(t=Hl+500-Qe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tu(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wu.bind(null,e,zl,Gl),t);break}wu(e,zl,Gl);break;case 4:if(lu(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-ot(i);o=1<<s,(s=t[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){e.timeoutHandle=ir(wu.bind(null,e,zl,Gl),i);break}wu(e,zl,Gl);break;default:throw Error(a(329))}}}return ru(e,Qe()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=zl,zl=n,null!==t&&su(t)),e}function su(e){null===zl?zl=e:zl.push.apply(zl,e)}function lu(e,t){for(t&=~Fl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function uu(e){if(0!==(6&Al))throw Error(a(327));Tu();var t=ht(e,0);if(0===(1&t))return ru(e,Qe()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=ou(e,i))}if(1===n)throw n=Nl,pu(e,0),lu(e,t),ru(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,zl,Gl),ru(e,Qe()),null}function cu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=Qe()+500,Fr&&Hr())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Tu();var t=Al;Al|=1;var n=Ml.transition,i=bt;try{if(Ml.transition=null,bt=1,e)return e()}finally{bt=i,Ml.transition=n,0===(6&(Al=t))&&Hr()}}function hu(){Ol=Rl.current,Er(Rl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ll)for(n=Ll.return;null!==n;){var i=n;switch(ta(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:ro(),Er(Ar),Er(Mr),co();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:Er(so);break;case 10:wa(i.type._context);break;case 22:case 23:hu()}n=n.return}if(Pl=e,Ll=e=Ru(e.current,null),Il=Ol=t,Dl=0,Nl=null,Fl=Bl=Ul=0,zl=jl=null,null!==ka){for(t=0;t<ka.length;t++)if(null!==(i=(n=ka[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}ka=null}return e}function fu(e,t){for(;;){var n=Ll;try{if(xa(),ho.current=os,yo){for(var i=mo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}yo=!1}if(fo=0,vo=go=mo=null,bo=!1,_o=0,Cl.current=null,null===n||null===n.return){Dl=1,Nl=t,Ll=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Il,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=vs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&gs(o,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){gs(o,c,t),gu();break e}u=Error(a(426))}else if(ra&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,l,0,t),fa(cs(u,l));break e}}o=u=cs(u,l),4!==Dl&&(Dl=2),null===jl?jl=[o]:jl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Na(o,fs(0,u,t));break e;case 1:l=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Na(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(_){t=_,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function mu(){var e=kl.current;return kl.current=os,null===e?os:e}function gu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||0===(268435455&Ul)&&0===(268435455&Bl)||lu(Pl,Il)}function vu(e,t){var n=Al;Al|=2;var i=mu();for(Pl===e&&Il===t||(Gl=null,pu(e,t));;)try{yu();break}catch(r){fu(e,r)}if(xa(),Al=n,kl.current=i,null!==Ll)throw Error(a(261));return Pl=null,Il=0,Dl}function yu(){for(;null!==Ll;)_u(Ll)}function bu(){for(;null!==Ll&&!Ye();)_u(Ll)}function _u(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xu(e):Ll=t,Cl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Ol)))return void(Ll=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return Dl=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Dl&&(Dl=5)}function wu(e,t,n){var i=bt,r=Ml.transition;try{Ml.transition=null,bt=1,function(e,t,n,i){do{Tu()}while(null!==Yl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,o),e===Pl&&(Ll=Pl=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Pu(tt,(function(){return Tu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ml.transition,Ml.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(er=Gt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=s+r),h!==o||0!==i&&3!==h.nodeType||(u=s+i),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===r&&(l=s),p===o&&++d===i&&(u=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Gt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ga(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(x){Eu(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=nl,nl=!1}(e,n),vl(n,e),fi(tr),Gt=!!er,tr=er=null,e.current=n,bl(n,e,r),Ke(),Al=l,bt=s,Ml.transition=o}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Kl=r),o=e.pendingLanes,0===o&&(ql=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Zl,Zl=null,e;0!==(1&Kl)&&0!==e.tag&&Tu(),o=e.pendingLanes,0!==(1&o)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,Hr()}(e,t,n,i)}finally{Ml.transition=r,bt=i}return null}function Tu(){if(null!==Yl){var e=_t(Kl),t=Ml.transition,n=bt;try{if(Ml.transition=null,bt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&Al))throw Error(a(331));var r=Al;for(Al|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:il(8,d,o)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var p=(d=Js).sibling,f=d.return;if(ol(d),d===c){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var _=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Js=_;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Eu(l,l.return,w)}if(l===s){Js=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break e}Js=l.return}}if(Al=r,Hr(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{bt=n,Ml.transition=t}}return!1}function Su(e,t,n){e=Ra(e,t=fs(0,t=cs(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),ru(e,t))}function Eu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=Ra(t,e=ms(t,e=cs(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function ku(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Il&n)===n&&(4===Dl||3===Dl&&(130023424&Il)===Il&&500>Qe()-Hl?pu(e,0):Fl|=n),ru(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Aa(e,t))&&(vt(e,t,n),ru(e,n))}function Mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Cu(e,n)}function Pu(e,t){return qe(e,t)}function Lu(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Iu(e,t,n,i){return new Lu(e,t,n,i)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Iu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,i,r,o){var s=2;if(i=e,"function"===typeof e)Ou(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case T:return Nu(n.children,r,o,t);case S:s=8,r|=8;break;case E:return(e=Iu(12,n,t,2|r)).elementType=E,e.lanes=o,e;case A:return(e=Iu(13,n,t,r)).elementType=A,e.lanes=o,e;case P:return(e=Iu(19,n,t,r)).elementType=P,e.lanes=o,e;case O:return Uu(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case C:s=9;break e;case M:s=11;break e;case L:s=14;break e;case I:s=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Iu(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Nu(e,t,n,i){return(e=Iu(7,e,i,t)).lanes=n,e}function Uu(e,t,n,i){return(e=Iu(22,e,i,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return(e=Iu(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Iu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,i,r,a,o,s,l){return e=new ju(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Iu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Hu(e){if(!e)return Cr;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ir(n))return Dr(e,n,t)}return t}function Vu(e,t,n,i,r,a,o,s,l){return(e=zu(n,i,!0,e,0,a,0,s,l)).context=Hu(null),n=e.current,(a=Oa(i=tu(),r=nu(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,r),e.current.lanes=r,vt(e,r,i),ru(e,i),e}function Gu(e,t,n,i){var r=t.current,a=tu(),o=nu(r);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Ra(r,t,o))&&(iu(e,r,o,a),Da(e,r,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),pa();break;case 5:ao(t);break;case 1:Ir(t.type)&&Nr(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;kr(va,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(kr(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(kr(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);kr(so,1&so.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Vs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),kr(so,so.current),i)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ws(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ra&&0!==(1048576&t.flags)&&Jr(t,Zr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Gs(e,t),e=t.pendingProps;var r=Lr(t,Mr.current);Sa(t,n),r=So(null,t,i,e,r,n);var o=Eo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(i)?(o=!0,Nr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,La(t),r.updater=za,t.stateNode=r,r._reactInternals=t,Wa(t,i,e,n),t=As(null,t,i,!0,o,n)):(t.tag=0,ra&&o&&ea(t),xs(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===L)return 14}return 2}(i),e=ga(i,e),r){case 0:t=Cs(null,t,i,e,n);break e;case 1:t=Ms(null,t,i,e,n);break e;case 11:t=ws(null,t,i,e,n);break e;case 14:t=Ts(null,t,i,ga(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Cs(e,t,i,r=t.elementType===i?r:ga(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ms(e,t,i,r=t.elementType===i?r:ga(i,r),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));i=t.pendingProps,r=(o=t.memoizedState).element,Ia(e,t),Ua(t,i,null,n);var s=t.memoizedState;if(i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ls(e,t,i,n,r=cs(Error(a(423)),t));break e}if(i!==r){t=Ls(e,t,i,n,r=cs(Error(a(424)),t));break e}for(ia=ur(t.stateNode.containerInfo.firstChild),na=t,ra=!0,aa=null,n=Qa(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),i===r){t=Ws(e,t,n);break e}xs(e,t,i,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==o&&nr(i,o)&&(t.flags|=32),ks(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Bs(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ka(t,null,i,n):xs(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ws(e,t,i,r=t.elementType===i?r:ga(i,r),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,kr(va,i._currentValue),i._currentValue=s,null!==o)if(si(o.value,s)){if(o.children===r.children&&!Ar.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===o.tag){(u=Oa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ta(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ta(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Sa(t,n),i=i(r=Ea(r)),t.flags|=1,xs(e,t,i,n),t.child;case 14:return r=ga(i=t.type,t.pendingProps),Ts(e,t,i,r=ga(i.type,r),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ga(i,r),Gs(e,t),t.tag=1,Ir(i)?(e=!0,Nr(t)):e=!1,Sa(t,n),Va(t,i,r),Wa(t,i,r,n),As(null,t,i,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof r){var s=r;r=function(){var e=Wu(o);s.call(e)}}Gu(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var e=Wu(o);a.call(e)}}var o=Vu(t,i,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[fr]=o.current,Hi(8===e.nodeType?e.parentNode:e),du(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var s=i;i=function(){var e=Wu(l);s.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[fr]=l.current,Hi(8===e.nodeType?e.parentNode:e),du((function(){Gu(t,l,n,i)})),l}(n,t,e,r,i);return Wu(o)}Ku.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gu(e,t,null,null)},Ku.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Gu(null,e,null,null)})),t[fr]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Qe()),0===(6&Al)&&(Vl=Qe()+500,Hr()))}break;case 13:du((function(){var t=Aa(e,1);if(null!==t){var n=tu();iu(t,e,1,n)}})),qu(e,1)}},wt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)iu(t,e,134217728,tu());qu(e,134217728)}},Tt=function(e){if(13===e.tag){var t=nu(e),n=Aa(e,t);if(null!==n)iu(n,e,t,tu());qu(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xr(i);if(!r)throw Error(a(90));q(i),$(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cu,Ae=du;var tc={usingClientEntryPoint:!1,Events:[br,_r,xr,ke,Ce,cu]},nc={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{rt=rc.inject(ic),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(a(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(a(299));var n=!1,i="",r=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,r,0,o,s),e[fr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Ku(t)},t.render=function(e,t,n){if(!$u(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(a(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$u(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var i=n(4164);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case c:case d:case a:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case u:case h:case g:case m:case l:return e;default:return t}}case r:return t}}}function w(e){return x(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=i,t.ForwardRef=h,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||x(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===u},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===r},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v)},t.typeOf=x},7441:function(e,t,n){"use strict";e.exports=n(1372)},9511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=n(2791),o=n(2007),s=n(1866),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this.props,i=n.items,r=n.random;this.state={index:r?Math.floor(Math.random()*Math.floor(i.length)):0,output:"",substrLength:0},this.timeouts=[]}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this._animate.bind(this)()}},{key:"componentWillUnmount",value:function(){this.timeouts.map((function(e){return clearTimeout(e)}))}},{key:"_loop",value:function(e,t){var n=setTimeout(e,t);this.timeouts.push(n);this.timeouts.length>100&&(clearTimeout(this.timeouts[0]),this.timeouts.shift())}},{key:"_type",value:function(e,t){var n=this.state.output,i=this.props.typingInterval,r=this._type.bind(this,e,t),a=s(e);this.setState({output:a.slice(0,s(n).length+1).join("")}),n.length<a.length?this._loop(r,i):("function"==typeof this.props.onTypingEnd&&this.props.onTypingEnd(),t())}},{key:"_erase",value:function(e){var t=this.state.output,n=this.props.deletingInterval,i=this._erase.bind(this,e),r=s(t);"function"==typeof this.props.onDeletingStart&&this.props.onDeletingStart(),this.setState({output:r.slice(0,r.length-1).join("")}),0!==r.length?this._loop(i,n):("function"==typeof this.props.onDeletingEnd&&this.props.onDeletingEnd(),e())}},{key:"_overwrite",value:function(e,t){var n=this.state,i=n.output,r=n.substrLength,a=this.props.deletingInterval,o=this._overwrite.bind(this,e,t),l=s(e),u=s(i);this.setState({output:l.slice(0,r).concat(u.slice(r)),substrLength:r+1}),l.length!==r?this._loop(o,a):(this.setState({output:e,substrLength:0}),t())}},{key:"_animate",value:function(){var e=this,t=this.state.index,n=this.props,i=n.items,r=n.pause,a=n.emptyPause,o=n.eraseMode,s=n.random,l=this._type,u=this._erase,c=this._overwrite,d=this._animate.bind(this),h=void 0;h=s?Math.floor(Math.random()*Math.floor(i.length)):t===i.length-1?0:t+1;var p=function(){e.setState({index:h}),e._loop(d,a)};"function"==typeof this.props.onTypingStart&&this.props.onTypingStart(),l.bind(this)(i[t],(function(){"overwrite"===o?e._loop(c.bind(e,i[h],p),r):e._loop(u.bind(e,p),r)}))}},{key:"render",value:function(){var e=this.props,t=e.color,n=e.cursor,r=(e.deletingInterval,e.emptyPause,e.items,e.pause,e.eraseMode,e.typingInterval,e.random,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["color","cursor","deletingInterval","emptyPause","items","pause","eraseMode","typingInterval","random"]));return a.createElement("span",i({style:{color:t}},r),this.state.output,n?a.createElement("span",{className:"react-rotating-text-cursor"},"|"):null)}}]),t}(a.Component);l.propTypes={color:o.string,cursor:o.bool,deletingInterval:o.number,emptyPause:o.number,eraseMode:o.string,items:o.array,pause:o.number,typingInterval:o.number,random:o.bool,onTypingStart:o.func,onTypingEnd:o.func,onDeletingStart:o.func,onDeletingEnd:o.func},l.defaultProps={color:"inherit",cursor:!0,deletingInterval:50,emptyPause:1e3,eraseMode:"erase",items:["first","second","third","fourth","fifth"],pause:1500,typingInterval:50,random:!1},t.default=l,e.exports=t.default},6374:function(e,t,n){"use strict";var i=n(2791),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,a={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:a,_owner:s.current}}t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,T={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:T.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,r,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===a?"."+M(l,0):a,x(o)?(r="",null!=e&&(r=e.replace(C,"$&/")+"/"),A(o,t,r,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",x(e))for(var u=0;u<e.length;u++){var c=a+M(s=e[u],u);l+=A(s,t,r,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=A(s=s.value,t,r,c=a+M(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return A(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},O={transition:null},R={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:O,ReactCurrentOwner:T};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=T.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!S.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=i;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},4947:function(e){e.exports=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(r){i=r}return[i,n]}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<r&&0>a(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[s]=n,i=s);else{if(!(u<r&&0>a(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(u,t)}t=i(c)}}function x(e){if(g=!1,_(e),!m)if(null!==i(u))m=!0,O(w);else{var t=i(c);null!==t&&R(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(k),k=-1),f=!0;var a=p;try{for(_(n),h=i(u);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===i(u)&&r(u),_(n)}else r(u);h=i(u)}if(null!==h)var l=!0;else{var d=i(c);null!==d&&R(x,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,S=!1,E=null,k=-1,C=5,M=-1;function A(){return!(t.unstable_now()-M<C)}function P(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?T():(S=!1,E=null)}}else S=!1}if("function"===typeof b)T=function(){b(P)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,I=L.port2;L.port1.onmessage=P,T=function(){I.postMessage(null)}}else T=function(){v(P,0)};function O(e){E=e,S||(S=!0,T())}function R(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===i(u)&&e===i(c)&&(g?(y(k),k=-1):g=!0,R(x,a-o))):(e.sortIndex=s,n(u,e),m||f||(m=!0,O(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var u=a[l];if(!s(u))return!1;var c=e[u],d=t[u];if(!1===(r=n?n.call(i,c,d,u):void 0)||void 0===r&&c!==d)return!1}return!0}},6444:function(e,t,n){"use strict";n.d(t,{vJ:function(){return Re},ZP:function(){return De}});var i=n(7441),r=n(2791),a=n(9613),o=n.n(a);var s=function(e){function t(e,i,l,u,h){for(var p,f,m,g,_,w=0,T=0,S=0,E=0,k=0,I=0,R=m=p=0,N=0,U=0,B=0,F=0,j=l.length,z=j-1,H="",V="",G="",W="";N<j;){if(f=l.charCodeAt(N),N===z&&0!==T+E+S+w&&(0!==T&&(f=47===T?10:47),E=S=w=0,j++,z++),0===T+E+S+w){if(N===z&&(0<U&&(H=H.replace(d,"")),0<H.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(N)}f=59}switch(f){case 123:for(p=(H=H.trim()).charCodeAt(0),m=1,F=++N;N<j;){switch(f=l.charCodeAt(N)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(N+1)){case 42:case 47:e:{for(R=N+1;R<z;++R)switch(l.charCodeAt(R)){case 47:if(42===f&&42===l.charCodeAt(R-1)&&N+2!==R){N=R+1;break e}break;case 10:if(47===f){N=R+1;break e}}N=R}}break;case 91:f++;case 40:f++;case 34:case 39:for(;N++<z&&l.charCodeAt(N)!==f;);}if(0===m)break;N++}if(m=l.substring(F,N),0===p&&(p=(H=H.replace(c,"").trim()).charCodeAt(0)),64===p){switch(0<U&&(H=H.replace(d,"")),f=H.charCodeAt(1)){case 100:case 109:case 115:case 45:U=i;break;default:U=L}if(F=(m=t(i,U,m,f,h+1)).length,0<O&&(_=s(3,m,U=n(L,H,B),i,M,C,F,f,h,u),H=U.join(""),void 0!==_&&0===(F=(m=_.trim()).length)&&(f=0,m="")),0<F)switch(f){case 115:H=H.replace(x,o);case 100:case 109:case 45:m=H+"{"+m+"}";break;case 107:m=(H=H.replace(v,"$1 $2"))+"{"+m+"}",m=1===P||2===P&&a("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=H+m,112===u&&(V+=m,m="")}else m=""}else m=t(i,n(i,H,B),m,u,h+1);G+=m,m=B=U=R=p=0,H="",f=l.charCodeAt(++N);break;case 125:case 59:if(1<(F=(H=(0<U?H.replace(d,""):H).trim()).length))switch(0===R&&(p=H.charCodeAt(0),45===p||96<p&&123>p)&&(F=(H=H.replace(" ",":")).length),0<O&&void 0!==(_=s(1,H,i,e,M,C,V.length,u,h,u))&&0===(F=(H=_.trim()).length)&&(H="\0\0"),p=H.charCodeAt(0),f=H.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){W+=H+l.charAt(N);break}default:58!==H.charCodeAt(F-1)&&(V+=r(H,p,f,H.charCodeAt(2)))}B=U=R=p=0,H="",f=l.charCodeAt(++N)}}switch(f){case 13:case 10:47===T?T=0:0===1+p&&107!==u&&0<H.length&&(U=1,H+="\0"),0<O*D&&s(0,H,i,e,M,C,V.length,u,h,u),C=1,M++;break;case 59:case 125:if(0===T+E+S+w){C++;break}default:switch(C++,g=l.charAt(N),f){case 9:case 32:if(0===E+w+T)switch(k){case 44:case 58:case 9:case 32:g="";break;default:32!==f&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===E+T+w&&(U=B=1,g="\f"+g);break;case 108:if(0===E+T+w+A&&0<R)switch(N-R){case 2:112===k&&58===l.charCodeAt(N-3)&&(A=k);case 8:111===I&&(A=I)}break;case 58:0===E+T+w&&(R=N);break;case 44:0===T+S+E+w&&(U=1,g+="\r");break;case 34:case 39:0===T&&(E=E===f?0:0===E?f:E);break;case 91:0===E+T+S&&w++;break;case 93:0===E+T+S&&w--;break;case 41:0===E+T+w&&S--;break;case 40:if(0===E+T+w){if(0===p)if(2*k+3*I===533);else p=1;S++}break;case 64:0===T+S+E+w+R+m&&(m=1);break;case 42:case 47:if(!(0<E+w+S))switch(T){case 0:switch(2*f+3*l.charCodeAt(N+1)){case 235:T=47;break;case 220:F=N,T=42}break;case 42:47===f&&42===k&&F+2!==N&&(33===l.charCodeAt(F+2)&&(V+=l.substring(F,N+1)),g="",T=0)}}0===T&&(H+=g)}I=k,k=f,N++}if(0<(F=V.length)){if(U=i,0<O&&(void 0!==(_=s(2,V,U,e,M,C,F,u,h,u))&&0===(V=_).length))return W+V+G;if(V=U.join(",")+"{"+V+"}",0!==P*A){switch(2!==P||a(V,2)||(A=0),A){case 111:V=V.replace(b,":-moz-$1")+V;break;case 112:V=V.replace(y,"::-webkit-input-$1")+V.replace(y,"::-moz-$1")+V.replace(y,":-ms-input-$1")+V}A=0}}return W+V+G}function n(e,t,n){var r=t.trim().split(m);t=r;var a=r.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=i(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<a;++s)for(var u=0;u<o;++u)t[l++]=i(e[u]+" ",r[s],n).trim()}return t}function i(e,t,n){var i=t.charCodeAt(0);switch(33>i&&(i=(t=t.trim()).charCodeAt(0)),i){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,i){var o=e+";",s=2*t+3*n+4*i;if(944===s){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===P||2===P&&a(l,1)?"-webkit-"+l+l:l}if(0===P||2===P&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(k,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return p.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=o.replace(_,"tb");break;case 232:l=o.replace(_,"tb-rl");break;case 220:l=o.replace(_,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(l=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(T,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(T,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+i&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),i=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),R(2!==t?i:i.replace(S,"$1"),n,t)}function o(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,i,r,a,o,s,l,c){for(var d,h=0,p=t;h<O;++h)switch(d=I[h].call(u,e,p,n,i,r,a,o,s,l,c)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(R=null,e?"function"!==typeof e?P=1:(P=2,R=e):P=0),l}function u(e,n){var i=e;if(33>i.charCodeAt(0)&&(i=i.trim()),i=[i],0<O){var r=s(-1,n,i,i,M,C,0,0,0,0);void 0!==r&&"string"===typeof r&&(n=r)}var a=t(L,i,n,0,0);return 0<O&&(void 0!==(r=s(-2,a,i,i,M,C,a.length,0,0,0))&&(a=r)),"",A=0,C=M=1,a}var c=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,T=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,k=/([^-])(image-set\()/,C=1,M=1,A=0,P=1,L=[],I=[],O=0,R=null,D=0;return u.use=function e(t){switch(t){case void 0:case null:O=I.length=0;break;default:if("function"===typeof t)I[O++]=t;else if("object"===typeof t)for(var n=0,i=t.length;n<i;++n)e(t[n]);else D=0|!!t}return e},u.set=l,void 0!==e&&l(e),u},l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,c=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),d=n(2110),h=n.n(d);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var f=function(e,t){for(var n=[e[0]],i=0,r=t.length;i<r;i+=1)n.push(t[i],e[i+1]);return n},m=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,i.typeOf)(e)},g=Object.freeze([]),v=Object.freeze({});function y(e){return"function"==typeof e}function b(e){return e.displayName||e.name||"Component"}function _(e){return e&&"string"==typeof e.styledComponentId}var x="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",w="undefined"!=typeof window&&"HTMLElement"in window,T=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),S={};function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var k=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;e>=r;)(r<<=1)<0&&E(16,""+e);this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=i;a<r;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),r=i+n,a=i;a<r;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),C=new Map,M=new Map,A=1,P=function(e){if(C.has(e))return C.get(e);for(;M.has(A);)A++;var t=A++;return C.set(e,t),M.set(t,e),t},L=function(e){return M.get(e)},I=function(e,t){t>=A&&(A=t+1),C.set(e,t),M.set(t,e)},O="style["+x+'][data-styled-version="5.3.9"]',R=new RegExp("^"+x+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),D=function(e,t,n){for(var i,r=n.split(","),a=0,o=r.length;a<o;a++)(i=r[a])&&e.registerName(t,i)},N=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),i=[],r=0,a=n.length;r<a;r++){var o=n[r].trim();if(o){var s=o.match(R);if(s){var l=0|parseInt(s[1],10),u=s[2];0!==l&&(I(u,l),D(e,u,s[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(o)}}},U=function(){return n.nc},B=function(e){var t=document.head,n=e||t,i=document.createElement("style"),r=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var i=t[n];if(i&&1===i.nodeType&&i.hasAttribute(x))return i}}(n),a=void 0!==r?r.nextSibling:null;i.setAttribute(x,"active"),i.setAttribute("data-styled-version","5.3.9");var o=U();return o&&i.setAttribute("nonce",o),n.insertBefore(i,a),i},F=function(){function e(e){var t=this.element=B(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var r=t[n];if(r.ownerNode===e)return r}E(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),j=function(){function e(e){var t=this.element=B(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),i=this.nodes[e];return this.element.insertBefore(n,i||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),z=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),H=w,V={isServer:!w,useCSSOMInjection:!T},G=function(){function e(e,t,n){void 0===e&&(e=v),void 0===t&&(t={}),this.options=p({},V,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&w&&H&&(H=!1,function(e){for(var t=document.querySelectorAll(O),n=0,i=t.length;n<i;n++){var r=t[n];r&&"active"!==r.getAttribute(x)&&(N(e,r),r.parentNode&&r.parentNode.removeChild(r))}}(this))}e.registerId=function(e){return P(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(p({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,i=t.useCSSOMInjection,r=t.target,e=n?new z(r):i?new F(r):new j(r),new k(e)));var e,t,n,i,r},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(P(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(P(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(P(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,i="",r=0;r<n;r++){var a=L(r);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(r);if(o&&s&&o.size){var l=x+".g"+r+'[id="'+a+'"]',u="";void 0!==o&&o.forEach((function(e){e.length>0&&(u+=e+",")})),i+=""+s+l+'{content:"'+u+'"}/*!sc*/\n'}}}return i}(this)},e}(),W=/(a)(d)/gi,Z=function(e){return String.fromCharCode(e+(e>25?39:97))};function q(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Z(t%52)+n;return(Z(t%52)+n).replace(W,"$1-$2")}var X=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Y=function(e){return X(5381,e)};function K(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(y(n)&&!_(n))return!1}return!0}var Q=Y("5.3.9"),$=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&K(e),this.componentId=t,this.baseHash=X(Q,t),this.baseStyle=n,G.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.componentId,r=[];if(this.baseStyle&&r.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(i,this.staticRulesId))r.push(this.staticRulesId);else{var a=ge(this.rules,e,t,n).join(""),o=q(X(this.baseHash,a)>>>0);if(!t.hasNameForId(i,o)){var s=n(a,"."+o,void 0,i);t.insertRules(i,o,s)}r.push(o),this.staticRulesId=o}else{for(var l=this.rules.length,u=X(this.baseHash,n.hash),c="",d=0;d<l;d++){var h=this.rules[d];if("string"==typeof h)c+=h;else if(h){var p=ge(h,e,t,n),f=Array.isArray(p)?p.join(""):p;u=X(u,f+d),c+=f}}if(c){var m=q(u>>>0);if(!t.hasNameForId(i,m)){var g=n(c,"."+m,void 0,i);t.insertRules(i,m,g)}r.push(m)}}return r.join(" ")},e}(),J=/^\s*\/\/.*$/gm,ee=[":","[",".","#"];function te(e){var t,n,i,r,a=void 0===e?v:e,o=a.options,l=void 0===o?v:o,u=a.plugins,c=void 0===u?g:u,d=new s(l),h=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,i,r,a,o,s,l,u,c,d){switch(n){case 1:if(0===c&&64===i.charCodeAt(0))return e(i+";"),"";break;case 2:if(0===u)return i+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(r[0]+i),"";default:return i+(0===d?"/*|*/":"")}case-2:i.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),f=function(e,i,a){return 0===i&&-1!==ee.indexOf(a[n.length])||a.match(r)?e:"."+t};function m(e,a,o,s){void 0===s&&(s="&");var l=e.replace(J,""),u=a&&o?o+" "+a+" { "+l+" }":l;return t=s,n=a,i=new RegExp("\\"+n+"\\b","g"),r=new RegExp("(\\"+n+"\\b){2,}"),d(o||!a?"":a,u)}return d.use([].concat(c,[function(e,t,r){2===e&&r.length&&r[0].lastIndexOf(n)>0&&(r[0]=r[0].replace(i,f))},p,function(e){if(-2===e){var t=h;return h=[],t}}])),m.hash=c.length?c.reduce((function(e,t){return t.name||E(15),X(e,t.name)}),5381).toString():"",m}var ne=r.createContext(),ie=(ne.Consumer,r.createContext()),re=(ie.Consumer,new G),ae=te();function oe(){return(0,r.useContext)(ne)||re}function se(){return(0,r.useContext)(ie)||ae}function le(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],a=oe(),s=(0,r.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,r.useMemo)((function(){return te({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,r.useEffect)((function(){o()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),r.createElement(ne.Provider,{value:s},r.createElement(ie.Provider,{value:l},e.children))}var ue=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ae);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.toString=function(){return E(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ae),this.name+e.hash},e}(),ce=/([A-Z])/,de=/([A-Z])/g,he=/^ms-/,pe=function(e){return"-"+e.toLowerCase()};function fe(e){return ce.test(e)?e.replace(de,pe).replace(he,"-ms-"):e}var me=function(e){return null==e||!1===e||""===e};function ge(e,t,n,i){if(Array.isArray(e)){for(var r,a=[],o=0,s=e.length;o<s;o+=1)""!==(r=ge(e[o],t,n,i))&&(Array.isArray(r)?a.push.apply(a,r):a.push(r));return a}return me(e)?"":_(e)?"."+e.styledComponentId:y(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:ge(e(t),t,n,i):e instanceof ue?n?(e.inject(n,i),e.getName(i)):e:m(e)?function e(t,n){var i,r,a=[];for(var o in t)t.hasOwnProperty(o)&&!me(t[o])&&(Array.isArray(t[o])&&t[o].isCss||y(t[o])?a.push(fe(o)+":",t[o],";"):m(t[o])?a.push.apply(a,e(t[o],o)):a.push(fe(o)+": "+(i=o,(null==(r=t[o])||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||i in l?String(r).trim():r+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var u}var ve=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return y(e)||m(e)?ve(ge(f(g,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:ve(ge(f(e,n)))}new Set;var be=function(e,t,n){return void 0===n&&(n=v),e.theme!==n.theme&&e.theme||t||n.theme},_e=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xe=/(^-|-$)/g;function we(e){return e.replace(_e,"-").replace(xe,"")}var Te=function(e){return q(Y(e)>>>0)};function Se(e){return"string"==typeof e&&!0}var Ee=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},ke=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ce(e,t,n){var i=e[n];Ee(t)&&Ee(i)?Me(i,t):e[n]=t}function Me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];if(Ee(o))for(var s in o)ke(s)&&Ce(e,o[s],s)}return e}var Ae=r.createContext();Ae.Consumer;var Pe={};function Le(e,t,n){var i=_(e),a=!Se(e),o=t.attrs,s=void 0===o?g:o,l=t.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":we(e);Pe[n]=(Pe[n]||0)+1;var i=n+"-"+Te("5.3.9"+n+Pe[n]);return t?t+"-"+i:i}(t.displayName,t.parentComponentId):l,d=t.displayName,f=void 0===d?function(e){return Se(e)?"styled."+e:"Styled("+b(e)+")"}(e):d,m=t.displayName&&t.componentId?we(t.displayName)+"-"+t.componentId:t.componentId||u,x=i&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,w=t.shouldForwardProp;i&&e.shouldForwardProp&&(w=t.shouldForwardProp?function(n,i,r){return e.shouldForwardProp(n,i,r)&&t.shouldForwardProp(n,i,r)}:e.shouldForwardProp);var T,S=new $(n,m,i?e.componentStyle:void 0),E=S.isStatic&&0===s.length,k=function(e,t){return function(e,t,n,i){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,l=e.foldedComponentIds,u=e.shouldForwardProp,d=e.styledComponentId,h=e.target,f=function(e,t,n){void 0===e&&(e=v);var i=p({},t,{theme:e}),r={};return n.forEach((function(e){var t,n,a,o=e;for(t in y(o)&&(o=o(i)),o)i[t]=r[t]="className"===t?(n=r[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[i,r]}(be(t,(0,r.useContext)(Ae),s)||v,t,a),m=f[0],g=f[1],b=function(e,t,n,i){var r=oe(),a=se();return t?e.generateAndInjectStyles(v,r,a):e.generateAndInjectStyles(n,r,a)}(o,i,m),_=n,x=g.$as||t.$as||g.as||t.as||h,w=Se(x),T=g!==t?p({},t,{},g):t,S={};for(var E in T)"$"!==E[0]&&"as"!==E&&("forwardedAs"===E?S.as=T[E]:(u?u(E,c,x):!w||c(E))&&(S[E]=T[E]));return t.style&&g.style!==t.style&&(S.style=p({},t.style,{},g.style)),S.className=Array.prototype.concat(l,d,b!==d?b:null,t.className,g.className).filter(Boolean).join(" "),S.ref=_,(0,r.createElement)(x,S)}(T,e,t,E)};return k.displayName=f,(T=r.forwardRef(k)).attrs=x,T.componentStyle=S,T.displayName=f,T.shouldForwardProp=w,T.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):g,T.styledComponentId=m,T.target=i?e.target:e,T.withComponent=function(e){var i=t.componentId,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,["componentId"]),a=i&&i+"-"+(Se(e)?e:we(b(e)));return Le(e,p({},r,{attrs:x,componentId:a}),n)},Object.defineProperty(T,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?Me({},e.defaultProps,t):t}}),Object.defineProperty(T,"toString",{value:function(){return"."+T.styledComponentId}}),a&&h()(T,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),T}var Ie=function(e){return function e(t,n,r){if(void 0===r&&(r=v),!(0,i.isValidElementType)(n))return E(1,String(n));var a=function(){return t(n,r,ye.apply(void 0,arguments))};return a.withConfig=function(i){return e(t,n,p({},r,{},i))},a.attrs=function(i){return e(t,n,p({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},a}(Le,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Ie[e]=Ie(e)}));var Oe=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=K(e),G.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,i){var r=i(ge(this.rules,t,n,i).join(""),""),a=this.componentId+e;n.insertRules(a,a,r)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,i){e>2&&G.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)},e}();function Re(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=ye.apply(void 0,[e].concat(n)),o="sc-global-"+Te(JSON.stringify(a)),s=new Oe(a,o);function l(e){var t=oe(),n=se(),i=(0,r.useContext)(Ae),a=(0,r.useRef)(t.allocateGSInstance(o)).current;return t.server&&u(a,e,t,i,n),(0,r.useLayoutEffect)((function(){if(!t.server)return u(a,e,t,i,n),function(){return s.removeStyles(a,t)}}),[a,e,t,i,n]),null}function u(e,t,n,i,r){if(s.isStatic)s.renderStyles(e,S,n,r);else{var a=p({},t,{theme:be(t,i,l.defaultProps)});s.renderStyles(e,a,n,r)}}return r.memo(l)}!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=U();return"<style "+[n&&'nonce="'+n+'"',x+'="true"','data-styled-version="5.3.9"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?E(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return E(2);var n=((t={})[x]="",t["data-styled-version"]="5.3.9",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=U();return i&&(n.nonce=i),[r.createElement("style",p({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new G({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?E(2):r.createElement(le,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return E(3)}}();var De=Ie},4556:function(e){!function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=o.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=i.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&&(u.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},2755:function(e,t,n){var i=n(9851),r=e.exports={WebVTT:n(6772),VTTCue:n(7688),VTTRegion:n(5024)};i.vttjs=r,i.WebVTT=r.WebVTT;var a=r.VTTCue,o=r.VTTRegion,s=i.VTTCue,l=i.VTTRegion;r.shim=function(){i.VTTCue=a,i.VTTRegion=o},r.restore=function(){i.VTTCue=s,i.VTTRegion=l},i.VTTCue||r.shim()},6772:function(e,t,n){var i=n(7203),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function a(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function s(){this.values=r(null)}function l(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"===typeof r[a]){var o=r[a].split(n);if(2===o.length)t(o[0].trim(),o[1].trim())}}function u(e,t,n){var i=e;function r(){var t=o(e);if(null===t)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(){e=e.replace(/^\s+/,"")}if(u(),t.startTime=r(),u(),"--\x3e"!==e.substr(0,3))throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),u(),t.endTime=r(),u(),function(e,t){var i=new s;l(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(r){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(r){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(r){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}a.prototype=r(Error.prototype),a.prototype.constructor=a,a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var c=i.createElement&&i.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function m(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e){return c.innerHTML=e,e=c.textContent,c.textContent="",e}function r(e,t){return!f[t.localName]||f[t.localName]===e.localName}function a(t,n){var i=d[t];if(!i)return null;var r=e.document.createElement(i),a=p[t];return a&&n&&(r[a]=n.trim()),r}for(var s,l=e.document.createElement("div"),u=l,m=[];null!==(s=n());)if("<"!==s[0])u.appendChild(e.document.createTextNode(i(s)));else{if("/"===s[1]){m.length&&m[m.length-1]===s.substr(2).replace(">","")&&(m.pop(),u=u.parentNode);continue}var g,v=o(s.substr(1,s.length-2));if(v){g=e.document.createProcessingInstruction("timestamp",v),u.appendChild(g);continue}var y=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(g=a(y[1],y[3])))continue;if(!r(u,g))continue;if(y[2]){var b=y[2].split(".");b.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(h.hasOwnProperty(n)){var i=t?"background-color":"color",r=h[n];g.style[i]=r}})),g.className=b.join(" ")}m.push(y[1]),u.appendChild(g),u=g}return l}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<g.length;t++){var n=g[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function y(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function r(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?r(e):t.childNodes?(i(e,t),r(e)):void 0}for(i(t,e);n=r(t);)for(var a=0;a<n.length;a++)if(v(n.charCodeAt(a)))return"rtl";return"ltr"}function b(){}function _(e,t,n){b.call(this),this.cue=t,this.cueDiv=m(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function x(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function w(e,t,n,i){var r=new x(t),a=t.cue,o=function(e){if("number"===typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(a),s=[];if(a.snapToLines){var l;switch(a.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(o),d=n[l]+u,h=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),r.move(h,c)}else{var p=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":o-=p/2;break;case"end":o-=p}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],r=new x(t)}var f=function(e,t){for(var r,a=new x(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);o>l&&(r=new x(e),o=l),e=new x(a)}return r||a}(r,s);t.move(f.toCSSCompatValues(n))}function T(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=r(b.prototype),_.prototype.constructor=_,x.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},x.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},x.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},x.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},x.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},x.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},x.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},x.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},T.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},T.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null};T.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],a=x.getSimpleBoxPosition(i),o={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,s,l=0;l<t.length;l++)s=t[l],n=new _(e,s,o),i.appendChild(n.div),w(0,n,a,r),s.displayState=n.div,r.push(x.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)i.appendChild(t[s].displayState)},T.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},T.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof a))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?l(e,(function(e,n){if("X-TIMESTAMP-MAP"===e)!function(e){var n=new s;l(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",o(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}),/=/):l(e,(function(e,n){if("Region"===e)!function(e){var n=new s;if(l(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new s;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var c=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new a(a.Errors.BadSignature);t.state="HEADER"}for(var d=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(d?d=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(p){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{u(r,t.cue,t.regionList)}catch(p){t.reportOrThrowError(p),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var h=-1!==r.indexOf("--\x3e");if(!r||h&&(d=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(p){t.reportOrThrowError(p),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new a(a.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=T},7688:function(e){var t="auto",n={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){return"string"===typeof e&&(!!i[e.toLowerCase()]&&e.toLowerCase())}function a(e,i,a){this.hasBeenReset=!1;var o="",s=!1,l=e,u=i,c=a,d=null,h="",p=!0,f="auto",m="start",g="auto",v="auto",y=100,b="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(e){s=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var t=function(e){return"string"===typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!==typeof e&&e!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=r(e);t?(m=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(e){var t=r(e);t?(v=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");b=t,this.hasBeenReset=!0}}}),this.displayState=void 0}a.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=a},5024:function(e){var t={"":!0,up:!0};function n(e){return"number"===typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,i=3,r=0,a=100,o=0,s=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var n=function(e){return"string"===typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):l=n}}})}},8417:function(){(function(){var e,t,n,i,r,a=function(e,t){return function(){return e.apply(t,arguments)}},o=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};t=function(){function e(){}return e.prototype.extend=function(e,t){var n,i;for(n in t)i=t[n],null==e[n]&&(e[n]=i);return e},e.prototype.isMobile=function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},e.prototype.createEvent=function(e,t,n,i){var r;return null==t&&(t=!1),null==n&&(n=!1),null==i&&(i=null),null!=document.createEvent?(r=document.createEvent("CustomEvent")).initCustomEvent(e,t,n,i):null!=document.createEventObject?(r=document.createEventObject()).eventType=e:r.eventName=e,r},e.prototype.emitEvent=function(e,t){return null!=e.dispatchEvent?e.dispatchEvent(t):t in(null!=e)?e[t]():"on"+t in(null!=e)?e["on"+t]():void 0},e.prototype.addEvent=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},e.prototype.removeEvent=function(e,t,n){return null!=e.removeEventListener?e.removeEventListener(t,n,!1):null!=e.detachEvent?e.detachEvent("on"+t,n):delete e[t]},e.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},e}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function e(){this.keys=[],this.values=[]}return e.prototype.get=function(e){var t,n,i,r;for(t=n=0,i=(r=this.keys).length;n<i;t=++n)if(r[t]===e)return this.values[t]},e.prototype.set=function(e,t){var n,i,r,a;for(n=i=0,r=(a=this.keys).length;i<r;n=++i)if(a[n]===e)return void(this.values[n]=t);return this.keys.push(e),this.values.push(t)},e}()),e=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(e=function(){function e(){"undefined"!==typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!==typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return e.notSupported=!0,e.prototype.observe=function(){},e}()),i=this.getComputedStyle||function(e,t){return this.getPropertyValue=function(t){var n;return"float"===t&&(t="styleFloat"),r.test(t)&&t.replace(r,(function(e,t){return t.toUpperCase()})),(null!=(n=e.currentStyle)?n[t]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(e){null==e&&(e={}),this.scrollCallback=a(this.scrollCallback,this),this.scrollHandler=a(this.scrollHandler,this),this.resetAnimation=a(this.resetAnimation,this),this.start=a(this.start,this),this.scrolled=!0,this.config=this.util().extend(e,this.defaults),null!=e.scrollContainer&&(this.config.scrollContainer=document.querySelector(e.scrollContainer)),this.animationNameCache=new n,this.wowEvent=this.util().createEvent(this.config.boxClass)}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},r.prototype.init=function(){var e;return this.element=window.document.documentElement,"interactive"===(e=document.readyState)||"complete"===e?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var t,n,i,r,a;if(this.stopped=!1,this.boxes=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.element.querySelectorAll("."+this.config.boxClass)).length;e<n;e++)t=i[e],r.push(t);return r}.call(this),this.all=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.boxes).length;e<n;e++)t=i[e],r.push(t);return r}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(n=0,i=(r=this.boxes).length;n<i;n++)t=r[n],this.applyStyle(t,!0);if(this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new e((a=this,function(e){var t,n,i,r,o;for(o=[],t=0,n=e.length;t<n;t++)r=e[t],o.push(function(){var e,t,n,a;for(a=[],e=0,t=(n=r.addedNodes||[]).length;e<t;e++)i=n[e],a.push(this.doSync(i));return a}.call(a));return o})).observe(document.body,{childList:!0,subtree:!0})},r.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},r.prototype.sync=function(t){if(e.notSupported)return this.doSync(this.element)},r.prototype.doSync=function(e){var t,n,i,r,a;if(null==e&&(e=this.element),1===e.nodeType){for(a=[],n=0,i=(r=(e=e.parentNode||e).querySelectorAll("."+this.config.boxClass)).length;n<i;n++)t=r[n],o.call(this.all,t)<0?(this.boxes.push(t),this.all.push(t),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(t,!0),a.push(this.scrolled=!0)):a.push(void 0);return a}},r.prototype.show=function(e){return this.applyStyle(e),e.className=e.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(e),this.util().emitEvent(e,this.wowEvent),this.util().addEvent(e,"animationend",this.resetAnimation),this.util().addEvent(e,"oanimationend",this.resetAnimation),this.util().addEvent(e,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(e,"MSAnimationEnd",this.resetAnimation),e},r.prototype.applyStyle=function(e,t){var n,i,r,a;return i=e.getAttribute("data-wow-duration"),n=e.getAttribute("data-wow-delay"),r=e.getAttribute("data-wow-iteration"),this.animate((a=this,function(){return a.customStyle(e,t,i,n,r)}))},r.prototype.animate="requestAnimationFrame"in window?function(e){return window.requestAnimationFrame(e)}:function(e){return e()},r.prototype.resetStyle=function(){var e,t,n,i,r;for(r=[],t=0,n=(i=this.boxes).length;t<n;t++)e=i[t],r.push(e.style.visibility="visible");return r},r.prototype.resetAnimation=function(e){var t;if(e.type.toLowerCase().indexOf("animationend")>=0)return(t=e.target||e.srcElement).className=t.className.replace(this.config.animateClass,"").trim()},r.prototype.customStyle=function(e,t,n,i,r){return t&&this.cacheAnimationName(e),e.style.visibility=t?"hidden":"visible",n&&this.vendorSet(e.style,{animationDuration:n}),i&&this.vendorSet(e.style,{animationDelay:i}),r&&this.vendorSet(e.style,{animationIterationCount:r}),this.vendorSet(e.style,{animationName:t?"none":this.cachedAnimationName(e)}),e},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(e,t){var n,i,r,a;for(n in i=[],t)r=t[n],e[""+n]=r,i.push(function(){var t,i,o,s;for(s=[],t=0,i=(o=this.vendors).length;t<i;t++)a=o[t],s.push(e[""+a+n.charAt(0).toUpperCase()+n.substr(1)]=r);return s}.call(this));return i},r.prototype.vendorCSS=function(e,t){var n,r,a,o,s,l;for(o=(s=i(e)).getPropertyCSSValue(t),n=0,r=(a=this.vendors).length;n<r;n++)l=a[n],o=o||s.getPropertyCSSValue("-"+l+"-"+t);return o},r.prototype.animationName=function(e){var t;try{t=this.vendorCSS(e,"animation-name").cssText}catch(n){t=i(e).getPropertyValue("animation-name")}return"none"===t?"":t},r.prototype.cacheAnimationName=function(e){return this.animationNameCache.set(e,this.animationName(e))},r.prototype.cachedAnimationName=function(e){return this.animationNameCache.get(e)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var e;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.boxes).length;t<n;t++)(e=i[t])&&(this.isVisible(e)?this.show(e):r.push(e));return r}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},r.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t},r.prototype.isVisible=function(e){var t,n,i,r,a;return n=e.getAttribute("data-wow-offset")||this.config.offset,r=(a=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset)+Math.min(this.element.clientHeight,this.util().innerHeight())-n,t=(i=this.offsetTop(e))+e.clientHeight,i<=r&&t>=a},r.prototype.util=function(){return null!=this._util?this._util:this._util=new t},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}).call(this)},5893:function(){},434:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7326:function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return i}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(9142);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,i.Z)(r.key),r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(1120),r=n(8814),a=n(2963);function o(e){var t=(0,r.Z)();return function(){var n,r=(0,i.Z)(e);if(t){var o=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}},1120:function(e,t,n){"use strict";function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}n.d(t,{Z:function(){return i}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(9611);function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,i.Z)(e,t)}},8814:function(e,t,n){"use strict";function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return i}})},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(1002),r=n(7326);function a(e,t){if(t&&("object"===(0,i.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,r.Z)(e)}},9611:function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}n.d(t,{Z:function(){return i}})},168:function(e,t,n){"use strict";function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return i}})},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(1002);function r(e){var t=function(e,t){if("object"!==(0,i.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==(0,i.Z)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,i.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{Z:function(){return i}})}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n.nc=void 0,function(){"use strict";var e,t=n(2791),i=n(1250),r=n(168),a=n(6444),o=(0,a.vJ)(e||(e=(0,r.Z)(['\n    body,html{\n      min-height: 100%;\n      padding: 0;\n      margin: 0;\n      background: rgb(20, 20, 23);\n      color: rgba(255, 255, 255, 0.55);\n    }\n    *{\n      font-family: "Lato-Regular";\n      -ms-overflow-style: none;\n      overflow: -moz-scrollbars-none;\n      &::-webkit-scrollbar { width: 0 !important }\n    }\n    a {\n      text-decoration: none;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n    }\n   ul,li,dl,dt,dd{\n     padding: 0;\n     margin: 0;\n     list-style: none;\n   }\n  \n'])));function s(e){if(Array.isArray(e))return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return s(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||u(e,t)||c()}var h=n.p+"static/media/logo.55f0f0a26aedd0074902.png",p=n(9511),f=n.n(p);var m=n.p+"static/media/topNav.66c0047ea40b8765d1a0df78904d710d.svg";var g=n.p+"static/media/close.975e2148daedd32dcb9d4128a931b52b.svg";var v=n.p+"static/media/twitter16.e005bee8ebfcad6f6912c2d589a58863.svg";var y,b,_,x,w,T,S,E,k,C,M,A,P=n.p+"static/media/github-mark-white.97ed8e7eef60d61ca469881dd6f34511.svg",L=n(184),I=a.ZP.div(y||(y=(0,r.Z)(["\n  position: fixed;\n    width: 100vw;\n  left: 0;\n  top: 0;\n  height: 100vh;\n  z-index: 9999;\n  background: rgba(0,0,0,0.5);\n"]))),O=a.ZP.div(b||(b=(0,r.Z)(["\n  position:relative;\n  height: 100%;\n  width: 40vw;\n\n  background: #2d2d2d;\n  box-sizing: border-box;\n  padding: 56px 80px;\n  display: flex;\n  flex-direction: column;\n  @media (max-width: 1279px) {\n    width: 100vw;\n  }\n"]))),R=a.ZP.div(_||(_=(0,r.Z)(["\n  position: absolute;\n  top: 30px;\n  right: 15px;\n  cursor: pointer;\n  img{\n    width: 24px;\n  }\n"]))),D=a.ZP.ul(x||(x=(0,r.Z)(['\n  flex-grow: 1;\n    li{\n      padding: 15px 0;\n      font-family: "Lato-Light";\n      line-height: 38px;\n      font-size: 30px;\n      cursor: pointer;\n      span{\n        font-family: "Lato-Light";\n        color: #ffffff;\n        padding-left: 10px;\n      }\n    }\n  @media (max-width: 1279px) {\n   li{\n     font-size: 24px;\n   }\n  }\n']))),N=a.ZP.div(w||(w=(0,r.Z)(["\n"]))),U=a.ZP.div(T||(T=(0,r.Z)(["\n    display: flex;\n  align-items: center;\n  justify-content: center;\n  li{\n    margin: 0 20px;\n    a{\n      color: #ffffff;\n      padding-right: 10px;\n    }\n    img{\n      width: 35px;\n      opacity: 0.6;\n    }\n    &:hover{\n      img{\n        opacity: 1;\n      }\n    }\n  }\n"])));function B(e){var t=e.handleCLose,n=function(e){e?(document.querySelector(e).scrollIntoView({behavior:"smooth"}),setTimeout((function(){t()}),1e3)):t()};return(0,L.jsx)(I,{children:(0,L.jsxs)(O,{className:"animate__animated animate__fadeInLeft",children:[(0,L.jsx)(R,{children:(0,L.jsx)("img",{src:g,alt:"",onClick:function(){return t()}})}),(0,L.jsxs)(D,{children:[(0,L.jsxs)("li",{onClick:function(){return n()},children:["01.",(0,L.jsx)("span",{children:"Home"})]}),(0,L.jsxs)("li",{onClick:function(){return n("#videoInner")},children:["02.",(0,L.jsx)("span",{children:"video"})]}),(0,L.jsxs)("li",{onClick:function(){return n("#overview")},children:["03.",(0,L.jsx)("span",{children:"Overview"})]}),(0,L.jsxs)("li",{onClick:function(){return n("#Technology")},children:["04.",(0,L.jsx)("span",{children:"Technology"})]}),(0,L.jsxs)("li",{onClick:function(){return n("#Team")},children:["05.",(0,L.jsx)("span",{children:"Team"})]}),(0,L.jsxs)("li",{onClick:function(){return n("#Roadmap")},children:["06.",(0,L.jsx)("span",{children:"Roadmap"})]})]}),(0,L.jsx)(N,{children:(0,L.jsxs)(U,{children:[(0,L.jsxs)("li",{children:[" ",(0,L.jsx)("a",{href:"https://twitter.com/Designer__team",target:"_blank",rel:"noreferrer",children:(0,L.jsx)("img",{src:v,alt:""})})]}),(0,L.jsx)("li",{children:(0,L.jsx)("a",{href:"https://github.com/TeamTaoist/Designer",target:"_blank",rel:"noreferrer",children:(0,L.jsx)("img",{src:P,alt:""})})})]})})]})})}var F=a.ZP.div(S||(S=(0,r.Z)(["\n    display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  padding-top: 20px;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n"]))),j=a.ZP.div(E||(E=(0,r.Z)(['\n    border: 2px solid #fff;\n  border-radius: 50px;\n  padding: 10px 20px;\n  font-size: 16px;\n  font-family: "bold";\n  text-align: center;\n  color: #fff;\n  text-transform: uppercase;\n  white-space: nowrap;\n  box-sizing: border-box;\n  cursor: pointer;\n\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  @media (max-width: 1279px) {\n    font-size:12px;\n    padding: 10px;\n  }\n']))),z=a.ZP.div(k||(k=(0,r.Z)(["\n  position: absolute;\n  left: 20px;\n  top: 20px;\n  img{\n    cursor: pointer;\n  }\n"]))),H=a.ZP.div(C||(C=(0,r.Z)(["\n    text-align: center;\n    .logo{\n      height: 80px;\n    }\n  @media (max-width: 1279px) {\n    .logo{\n      height: 40px;\n    }\n  }\n  \n"]))),V=a.ZP.div(M||(M=(0,r.Z)(['\n    margin-top: 40px;\n  color: #Fff;\n  font-family: "Lato-Regular";\n  \n']))),G=a.ZP.div(A||(A=(0,r.Z)(['\n  font-family: "Lato-Regular";\n  font-size: 50px;\n  //text-transform: uppercase;\n  margin-top: 20px;\n  color: #Fff;\n  @media (max-width: 1279px) {\n    font-size: 36px;\n  }\n'])));function W(){var e=d((0,t.useState)(!1),2),n=e[0],i=e[1];return(0,L.jsxs)(F,{children:[n&&(0,L.jsx)(B,{handleCLose:function(){i(!1)}}),(0,L.jsx)(z,{children:(0,L.jsx)("img",{src:m,alt:"",onClick:function(){i(!0)}})}),(0,L.jsxs)(H,{children:[(0,L.jsx)("div",{children:(0,L.jsx)("img",{src:h,alt:"",className:"logo"})}),(0,L.jsx)(V,{children:"Designer is a decentralized coordinate tool for DAO."}),(0,L.jsx)(G,{children:(0,L.jsx)(f(),{items:["Based on blockchain","Smart contract","Decentralized storage"]})})]}),(0,L.jsx)(j,{children:"Launch App"})]})}var Z,q=n(9387),X=n.p+"static/media/banner-bg.a949ea34f2decddce960.jpg",Y=a.ZP.ul(Z||(Z=(0,r.Z)(['\n    display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  width: 80%;\n  margin: 50px auto 100px;\n  flex-wrap: wrap;\n  li{\n    width: calc( (100% - 75px) / 4);\n    margin-right: 25px;\n    cursor: pointer;\n    border-radius: 15px;\n    box-sizing: border-box;\n    padding: 45px 25px;\n    &:last-child{\n      margin-right: 0;\n    }\n    &:hover{\n      background: #2d2d2d;\n    }\n  }\n \n  .num{\n    font-size: 48px;\n    padding-bottom: 8px;\n    display: inline-block;\n  }\n  .top:hover{\n    .num{\n      transform: rotateY(360deg);\n      transition: all 1.2s;\n    }\n\n  }\n  .title{\n    color: #fff;\n    font-family: "Lato-Light";\n    font-size: 26px;\n  }\n  .tips{\n    font-size: 12px;\n    margin-top: 20px;\n  }\n  @media (max-width: 1279px) {\n    width: 100%;\n    margin: 0;\n    li{\n      width: 90%;\n      margin: 40px auto;\n      &:last-child{\n        margin-right: auto;\n      }\n    }\n  }\n'])));function K(){return(0,L.jsxs)(Y,{children:[(0,L.jsx)("li",{className:"wow animate__animated animate__fadeInLeft","data-wow-offset":"250",children:(0,L.jsxs)("div",{className:"top",children:[(0,L.jsx)("div",{className:"num",children:"01."}),(0,L.jsx)("div",{className:"title",children:"Upload Contract"}),(0,L.jsx)("div",{className:"tips",children:"Upload all the contract in .pdf format"})]})}),(0,L.jsx)("li",{className:"wow animate__animated animate__fadeInUp","data-wow-offset":"250",children:(0,L.jsxs)("div",{className:"top",children:[(0,L.jsx)("div",{className:"num",children:"02."}),(0,L.jsx)("div",{className:"title",children:"Manage recipients"}),(0,L.jsx)("div",{className:"tips",children:"Enter details of all the recipients"})]})}),(0,L.jsx)("li",{className:"wow animate__animated animate__fadeInDown","data-wow-offset":"250",children:(0,L.jsxs)("div",{className:"top",children:[(0,L.jsx)("div",{className:"num",children:"03."}),(0,L.jsx)("div",{className:"title",children:"Prepare documents"}),(0,L.jsx)("div",{className:"tips",children:"Assign the signatures and files in the document"})]})}),(0,L.jsx)("li",{className:"wow animate__animated animate__fadeInRight","data-wow-offset":"250",children:(0,L.jsxs)("div",{className:"top",children:[(0,L.jsx)("div",{className:"num",children:"04."}),(0,L.jsx)("div",{className:"title",children:"Review and send"}),(0,L.jsx)("div",{className:"tips",children:"Do the final review and send the documents"})]})})]})}var Q=n(9142);function $(e,t,n){return(t=(0,Q.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ne(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ie(e){return function(e){if(Array.isArray(e))return l(e)}(e)||ne(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var re=n(5671),ae=n(3144);function oe(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:oe(t[n])&&oe(e[n])&&Object.keys(t[n]).length>0&&se(e[n],t[n])}))}var le={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ue(){var e="undefined"!==typeof document?document:{};return se(e,le),e}var ce,de,he,pe={document:le,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function fe(){var e="undefined"!==typeof window?window:{};return se(e,pe),e}function me(e){return setTimeout(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}function ge(){return Date.now()}function ve(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=fe(),o=function(e){var t,n=fe();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return a.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),i=new a.WebKitCSSMatrix("none"===n?"":n)):t=(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===r&&(n=a.WebKitCSSMatrix?i.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===r&&(n=a.WebKitCSSMatrix?i.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),n||0}function ye(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function be(){for(var e,t=Object(arguments.length<=0?void 0:arguments[0]),n=["__proto__","constructor","prototype"],i=1;i<arguments.length;i+=1){var r=i<0||arguments.length<=i?void 0:arguments[i];if(void 0!==r&&null!==r&&(e=r,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType))))for(var a=Object.keys(Object(r)).filter((function(e){return n.indexOf(e)<0})),o=0,s=a.length;o<s;o+=1){var l=a[o],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(ye(t[l])&&ye(r[l])?r[l].__swiper__?t[l]=r[l]:be(t[l],r[l]):!ye(t[l])&&ye(r[l])?(t[l]={},r[l].__swiper__?t[l]=r[l]:be(t[l],r[l])):t[l]=r[l])}}return t}function _e(e,t,n){e.style.setProperty(t,n)}function xe(e){var t,n=e.swiper,i=e.targetPosition,r=e.side,a=fe(),o=-n.translate,s=null,l=n.params.speed;n.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(n.cssModeFrameID);var u=i>o?"next":"prev",c=function(e,t){return"next"===u&&e>=t||"prev"===u&&e<=t};!function e(){t=(new Date).getTime(),null===s&&(s=t);var u=Math.max(Math.min((t-s)/l,1),0),d=.5-Math.cos(u*Math.PI)/2,h=o+d*(i-o);if(c(h,i)&&(h=i),n.wrapperEl.scrollTo($({},r,h)),c(h,i))return n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout((function(){n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo($({},r,h))})),void a.cancelAnimationFrame(n.cssModeFrameID);n.cssModeFrameID=a.requestAnimationFrame(e)}()}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ie(e.children).filter((function(e){return e.matches(t)}))}function Te(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=document.createElement(e);return(t=i.classList).add.apply(t,ie(Array.isArray(n)?n:[n])),i}function Se(e,t){return fe().getComputedStyle(e,null).getPropertyValue(t)}function Ee(e){var t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function ke(e,t){for(var n=[],i=e.parentElement;i;)t?i.matches(t)&&n.push(i):n.push(i),i=i.parentElement;return n}function Ce(e,t,n){var i=fe();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function Me(){return ce||(ce=function(){var e=fe(),t=ue();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),ce}function Ae(){return de||(de=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent,t=Me(),n=fe(),i=n.navigator.platform,r=e||n.navigator.userAgent,a={ios:!1,android:!1},o=n.screen.width,s=n.screen.height,l=r.match(/(Android);?[\s\/]+([\d.]+)?/),u=r.match(/(iPad).*OS\s([\d_]+)/),c=r.match(/(iPod)(.*OS\s([\d_]+))?/),d=!u&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="Win32"===i,p="MacIntel"===i;return!u&&p&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(o,"x").concat(s))>=0&&((u=r.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),p=!1),l&&!h&&(a.os="android",a.android=!0),(u||d||c)&&(a.os="ios",a.ios=!0),a}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),de}function Pe(){return he||(he=function(){var e=fe(),t=!1;function n(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(n()){var i=String(e.navigator.userAgent);if(i.includes("Version/")){var r=d(i.split("Version/")[1].split(" ")[0].split(".").map((function(e){return Number(e)})),2),a=r[0],o=r[1];t=a<16||16===a&&o<2}}return{isSafari:t||n(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),he}var Le={on:function(e,t,n){var i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;var r=n?"unshift":"push";return e.split(" ").forEach((function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][r](t)})),i},once:function(e,t,n){var i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(i,a)}return r.__emitterProxy=t,i.on(e,r,n)},onAny:function(e,t){var n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;var i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny:function(e){var t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((function(e){"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(i,r){(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)}))})),n):n},emit:function(){var e,t,n,i=this;if(!i.eventsListeners||i.destroyed)return i;if(!i.eventsListeners)return i;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return"string"===typeof a[0]||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),n=i):(e=a[0].events,t=a[0].data,n=a[0].context||i),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach((function(e){i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach((function(i){i.apply(n,[e].concat(ie(t)))})),i.eventsListeners&&i.eventsListeners[e]&&i.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),i}};var Ie={updateSize:function(){var e,t,n=this,i=n.el;e="undefined"!==typeof n.params.width&&null!==n.params.width?n.params.width:i.clientWidth,t="undefined"!==typeof n.params.height&&null!==n.params.height?n.params.height:i.clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(Se(i,"padding-left")||0,10)-parseInt(Se(i,"padding-right")||0,10),t=t-parseInt(Se(i,"padding-top")||0,10)-parseInt(Se(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var i=e.params,r=e.wrapperEl,a=e.slidesEl,o=e.size,s=e.rtlTranslate,l=e.wrongRTL,u=e.virtual&&i.virtual.enabled,c=u?e.virtual.slides.length:e.slides.length,d=we(a,".".concat(e.params.slideClass,", swiper-slide")),h=u?e.virtual.slides.length:d.length,p=[],f=[],m=[],g=i.slidesOffsetBefore;"function"===typeof g&&(g=i.slidesOffsetBefore.call(e));var v=i.slidesOffsetAfter;"function"===typeof v&&(v=i.slidesOffsetAfter.call(e));var y=e.snapGrid.length,b=e.slidesGrid.length,_=i.spaceBetween,x=-g,w=0,T=0;if("undefined"!==typeof o){"string"===typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*o),e.virtualSize=-_,d.forEach((function(e){s?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),i.centeredSlides&&i.cssMode&&(_e(r,"--swiper-centered-offset-before",""),_e(r,"--swiper-centered-offset-after",""));var S,E=i.grid&&i.grid.rows>1&&e.grid;E&&e.grid.initSlides(h);for(var k="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter((function(e){return"undefined"!==typeof i.breakpoints[e].slidesPerView})).length>0,C=0;C<h;C+=1){S=0;var M=void 0;if(d[C]&&(M=d[C]),E&&e.grid.updateSlide(C,M,h,t),!d[C]||"none"!==Se(M,"display")){if("auto"===i.slidesPerView){k&&(d[C].style[t("width")]="");var A=getComputedStyle(M),P=M.style.transform,L=M.style.webkitTransform;if(P&&(M.style.transform="none"),L&&(M.style.webkitTransform="none"),i.roundLengths)S=e.isHorizontal()?Ce(M,"width",!0):Ce(M,"height",!0);else{var I=n(A,"width"),O=n(A,"padding-left"),R=n(A,"padding-right"),D=n(A,"margin-left"),N=n(A,"margin-right"),U=A.getPropertyValue("box-sizing");if(U&&"border-box"===U)S=I+D+N;else{var B=M,F=B.clientWidth;S=I+O+R+D+N+(B.offsetWidth-F)}}P&&(M.style.transform=P),L&&(M.style.webkitTransform=L),i.roundLengths&&(S=Math.floor(S))}else S=(o-(i.slidesPerView-1)*_)/i.slidesPerView,i.roundLengths&&(S=Math.floor(S)),d[C]&&(d[C].style[t("width")]="".concat(S,"px"));d[C]&&(d[C].swiperSlideSize=S),m.push(S),i.centeredSlides?(x=x+S/2+w/2+_,0===w&&0!==C&&(x=x-o/2-_),0===C&&(x=x-o/2-_),Math.abs(x)<.001&&(x=0),i.roundLengths&&(x=Math.floor(x)),T%i.slidesPerGroup===0&&p.push(x),f.push(x)):(i.roundLengths&&(x=Math.floor(x)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup===0&&p.push(x),f.push(x),x=x+S+_),e.virtualSize+=S+_,w=S,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+v,s&&l&&("slide"===i.effect||"coverflow"===i.effect)&&(r.style.width="".concat(e.virtualSize+i.spaceBetween,"px")),i.setWrapperSize&&(r.style[t("width")]="".concat(e.virtualSize+i.spaceBetween,"px")),E&&e.grid.updateWrapperSize(S,p,t),!i.centeredSlides){for(var j=[],z=0;z<p.length;z+=1){var H=p[z];i.roundLengths&&(H=Math.floor(H)),p[z]<=e.virtualSize-o&&j.push(H)}p=j,Math.floor(e.virtualSize-o)-Math.floor(p[p.length-1])>1&&p.push(e.virtualSize-o)}if(u&&i.loop){var V=m[0]+_;if(i.slidesPerGroup>1)for(var G=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/i.slidesPerGroup),W=V*i.slidesPerGroup,Z=0;Z<G;Z+=1)p.push(p[p.length-1]+W);for(var q=0;q<e.virtual.slidesBefore+e.virtual.slidesAfter;q+=1)1===i.slidesPerGroup&&p.push(p[p.length-1]+V),f.push(f[f.length-1]+V),e.virtualSize+=V}if(0===p.length&&(p=[0]),0!==i.spaceBetween){var X=e.isHorizontal()&&s?"marginLeft":t("marginRight");d.filter((function(e,t){return!(i.cssMode&&!i.loop)||t!==d.length-1})).forEach((function(e){e.style[X]="".concat(_,"px")}))}if(i.centeredSlides&&i.centeredSlidesBounds){var Y=0;m.forEach((function(e){Y+=e+(i.spaceBetween?i.spaceBetween:0)}));var K=(Y-=i.spaceBetween)-o;p=p.map((function(e){return e<0?-g:e>K?K+v:e}))}if(i.centerInsufficientSlides){var Q=0;if(m.forEach((function(e){Q+=e+(i.spaceBetween?i.spaceBetween:0)})),(Q-=i.spaceBetween)<o){var $=(o-Q)/2;p.forEach((function(e,t){p[t]=e-$})),f.forEach((function(e,t){f[t]=e+$}))}}if(Object.assign(e,{slides:d,snapGrid:p,slidesGrid:f,slidesSizesGrid:m}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){_e(r,"--swiper-centered-offset-before","".concat(-p[0],"px")),_e(r,"--swiper-centered-offset-after","".concat(e.size/2-m[m.length-1]/2,"px"));var J=-e.snapGrid[0],ee=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((function(e){return e+J})),e.slidesGrid=e.slidesGrid.map((function(e){return e+ee}))}if(h!==c&&e.emit("slidesLengthChange"),p.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==b&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),!u&&!i.cssMode&&("slide"===i.effect||"fade"===i.effect)){var te="".concat(i.containerModifierClass,"backface-hidden"),ne=e.el.classList.contains(te);h<=i.maxBackfaceHiddenSlides?ne||e.el.classList.add(te):ne&&e.el.classList.remove(te)}}},updateAutoHeight:function(e){var t,n=this,i=[],r=n.virtual&&n.params.virtual.enabled,a=0;"number"===typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return r?n.getSlideIndexByData(e):n.slides[e]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)(n.visibleSlides||[]).forEach((function(e){i.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!r)break;i.push(o(s))}else i.push(o(n.activeIndex));for(t=0;t<i.length;t+=1)if("undefined"!==typeof i[t]){var l=i[t].offsetHeight;a=l>a?l:a}(a||0===a)&&(n.wrapperEl.style.height="".concat(a,"px"))},updateSlidesOffset:function(){for(var e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0,i=0;i<t.length;i+=1)t[i].swiperSlideOffset=(e.isHorizontal()?t[i].offsetLeft:t[i].offsetTop)-n},updateSlidesProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this&&this.translate||0,t=this,n=t.params,i=t.slides,r=t.rtlTranslate,a=t.snapGrid;if(0!==i.length){"undefined"===typeof i[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;r&&(o=e),i.forEach((function(e){e.classList.remove(n.slideVisibleClass)})),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<i.length;s+=1){var l=i[s],u=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(u-=i[0].swiperSlideOffset);var c=(o+(n.centeredSlides?t.minTranslate():0)-u)/(l.swiperSlideSize+n.spaceBetween),d=(o-a[0]+(n.centeredSlides?t.minTranslate():0)-u)/(l.swiperSlideSize+n.spaceBetween),h=-(o-u),p=h+t.slidesSizesGrid[s];(h>=0&&h<t.size-1||p>1&&p<=t.size||h<=0&&p>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(s),i[s].classList.add(n.slideVisibleClass)),l.progress=r?-c:c,l.originalProgress=r?-d:d}}},updateProgress:function(e){var t=this;if("undefined"===typeof e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var i=t.params,r=t.maxTranslate()-t.minTranslate(),a=t.progress,o=t.isBeginning,s=t.isEnd,l=t.progressLoop,u=o,c=s;if(0===r)a=0,o=!0,s=!0;else{a=(e-t.minTranslate())/r;var d=Math.abs(e-t.minTranslate())<1,h=Math.abs(e-t.maxTranslate())<1;o=d||a<=0,s=h||a>=1,d&&(a=0),h&&(a=1)}if(i.loop){var p=t.getSlideIndexByData(0),f=t.getSlideIndexByData(t.slides.length-1),m=t.slidesGrid[p],g=t.slidesGrid[f],v=t.slidesGrid[t.slidesGrid.length-1],y=Math.abs(e);(l=y>=m?(y-m)/v:(y+v-g)/v)>1&&(l-=1)}Object.assign(t,{progress:a,progressLoop:l,isBeginning:o,isEnd:s}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),o&&!u&&t.emit("reachBeginning toEdge"),s&&!c&&t.emit("reachEnd toEdge"),(u&&!o||c&&!s)&&t.emit("fromEdge"),t.emit("progress",a)},updateSlidesClasses:function(){var e,t=this,n=t.slides,i=t.params,r=t.slidesEl,a=t.activeIndex,o=t.virtual&&i.virtual.enabled,s=function(e){return we(r,".".concat(i.slideClass).concat(e,", swiper-slide").concat(e))[0]};if(n.forEach((function(e){e.classList.remove(i.slideActiveClass,i.slideNextClass,i.slidePrevClass)})),o)if(i.loop){var l=a-t.virtual.slidesBefore;l<0&&(l=t.virtual.slides.length+l),l>=t.virtual.slides.length&&(l-=t.virtual.slides.length),e=s('[data-swiper-slide-index="'.concat(l,'"]'))}else e=s('[data-swiper-slide-index="'.concat(a,'"]'));else e=n[a];if(e){e.classList.add(i.slideActiveClass);var u=function(e,t){for(var n=[];e.nextElementSibling;){var i=e.nextElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}(e,".".concat(i.slideClass,", swiper-slide"))[0];i.loop&&!u&&(u=n[0]),u&&u.classList.add(i.slideNextClass);var c=function(e,t){for(var n=[];e.previousElementSibling;){var i=e.previousElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}(e,".".concat(i.slideClass,", swiper-slide"))[0];i.loop&&0===!c&&(c=n[n.length-1]),c&&c.classList.add(i.slidePrevClass)}t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n,i=this,r=i.rtlTranslate?i.translate:-i.translate,a=i.snapGrid,o=i.params,s=i.activeIndex,l=i.realIndex,u=i.snapIndex,c=e,d=function(e){var t=e-i.virtual.slidesBefore;return t<0&&(t=i.virtual.slides.length+t),t>=i.virtual.slides.length&&(t-=i.virtual.slides.length),t};if("undefined"===typeof c&&(c=function(e){for(var t,n=e.slidesGrid,i=e.params,r=e.rtlTranslate?e.translate:-e.translate,a=0;a<n.length;a+=1)"undefined"!==typeof n[a+1]?r>=n[a]&&r<n[a+1]-(n[a+1]-n[a])/2?t=a:r>=n[a]&&r<n[a+1]&&(t=a+1):r>=n[a]&&(t=a);return i.normalizeSlideIndex&&(t<0||"undefined"===typeof t)&&(t=0),t}(i)),a.indexOf(r)>=0)t=a.indexOf(r);else{var h=Math.min(o.slidesPerGroupSkip,c);t=h+Math.floor((c-h)/o.slidesPerGroup)}if(t>=a.length&&(t=a.length-1),c===s)return t!==u&&(i.snapIndex=t,i.emit("snapIndexChange")),void(i.params.loop&&i.virtual&&i.params.virtual.enabled&&(i.realIndex=d(c)));n=i.virtual&&o.virtual.enabled&&o.loop?d(c):i.slides[c]?parseInt(i.slides[c].getAttribute("data-swiper-slide-index")||c,10):c,Object.assign(i,{snapIndex:t,realIndex:n,previousIndex:s,activeIndex:c}),i.emit("activeIndexChange"),i.emit("snapIndexChange"),l!==n&&i.emit("realIndexChange"),(i.initialized||i.params.runCallbacksOnInit)&&i.emit("slideChange")},updateClickedSlide:function(e){var t,n=this,i=n.params,r=e.closest(".".concat(i.slideClass,", swiper-slide")),a=!1;if(r)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===r){a=!0,t=o;break}if(!r||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=t,i.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var Oe={getTranslate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isHorizontal()?"x":"y",t=this,n=t.params,i=t.rtlTranslate,r=t.translate,a=t.wrapperEl;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;var o=ve(a,e);return i&&(o=-o),o||0},setTranslate:function(e,t){var n=this,i=n.rtlTranslate,r=n.params,a=n.wrapperEl,o=n.progress,s=0,l=0;n.isHorizontal()?s=i?-e:e:l=e,r.roundLengths&&(s=Math.floor(s),l=Math.floor(l)),r.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-s:-l:r.virtualTranslate||(a.style.transform="translate3d(".concat(s,"px, ").concat(l,"px, ").concat(0,"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?s:l;var u=n.maxTranslate()-n.minTranslate();(0===u?0:(e-n.minTranslate())/u)!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0,a=this,o=a.params,s=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var l,u=a.minTranslate(),c=a.maxTranslate();if(l=i&&e>u?u:i&&e<c?c:e,a.updateProgress(l),o.cssMode){var d=a.isHorizontal();if(0===t)s[d?"scrollLeft":"scrollTop"]=-l;else{var h;if(!a.support.smoothScroll)return xe({swiper:a,targetPosition:-l,side:d?"left":"top"}),!0;s.scrollTo(($(h={},d?"left":"top",-l),$(h,"behavior","smooth"),h))}return!0}return 0===t?(a.setTransition(0),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,n&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}};function Re(e){var t=e.swiper,n=e.runCallbacks,i=e.direction,r=e.step,a=t.activeIndex,o=t.previousIndex,s=i;if(s||(s=a>o?"next":a<o?"prev":"reset"),t.emit("transition".concat(r)),n&&a!==o){if("reset"===s)return void t.emit("slideResetTransition".concat(r));t.emit("slideChangeTransition".concat(r)),"next"===s?t.emit("slideNextTransition".concat(r)):t.emit("slidePrevTransition".concat(r))}}var De={setTransition:function(e,t){var n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration="".concat(e,"ms")),n.emit("setTransition",e,t)},transitionStart:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,i=n.params;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),Re({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,i=n.params;n.animating=!1,i.cssMode||(n.setTransition(0),Re({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var Ne={slideTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;"string"===typeof e&&(e=parseInt(e,10));var a=this,o=e;o<0&&(o=0);var s=a.params,l=a.snapGrid,u=a.slidesGrid,c=a.previousIndex,d=a.activeIndex,h=a.rtlTranslate,p=a.wrapperEl,f=a.enabled;if(a.animating&&s.preventInteractionOnTransition||!f&&!i&&!r)return!1;var m=Math.min(a.params.slidesPerGroupSkip,o),g=m+Math.floor((o-m)/a.params.slidesPerGroup);g>=l.length&&(g=l.length-1);var v,y=-l[g];if(s.normalizeSlideIndex)for(var b=0;b<u.length;b+=1){var _=-Math.floor(100*y),x=Math.floor(100*u[b]),w=Math.floor(100*u[b+1]);"undefined"!==typeof u[b+1]?_>=x&&_<w-(w-x)/2?o=b:_>=x&&_<w&&(o=b+1):_>=x&&(o=b)}if(a.initialized&&o!==d){if(!a.allowSlideNext&&y<a.translate&&y<a.minTranslate())return!1;if(!a.allowSlidePrev&&y>a.translate&&y>a.maxTranslate()&&(d||0)!==o)return!1}if(o!==(c||0)&&n&&a.emit("beforeSlideChangeStart"),a.updateProgress(y),v=o>d?"next":o<d?"prev":"reset",h&&-y===a.translate||!h&&y===a.translate)return a.updateActiveIndex(o),s.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==s.effect&&a.setTranslate(y),"reset"!==v&&(a.transitionStart(n,v),a.transitionEnd(n,v)),!1;if(s.cssMode){var T=a.isHorizontal(),S=h?y:-y;if(0===t){var E=a.virtual&&a.params.virtual.enabled;E&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),E&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame((function(){p[T?"scrollLeft":"scrollTop"]=S}))):p[T?"scrollLeft":"scrollTop"]=S,E&&requestAnimationFrame((function(){a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1}))}else{var k;if(!a.support.smoothScroll)return xe({swiper:a,targetPosition:S,side:T?"left":"top"}),!0;p.scrollTo(($(k={},T?"left":"top",S),$(k,"behavior","smooth"),k))}return!0}return a.setTransition(t),a.setTranslate(y),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,i),a.transitionStart(n,v),0===t?a.transitionEnd(n,v):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,v))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;"string"===typeof e&&(e=parseInt(e,10));var r=this,a=e;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?a+=r.virtual.slidesBefore:a=r.getSlideIndexByData(a)),r.slideTo(a,t,n,i)},slideNext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this,r=i.enabled,a=i.params,o=i.animating;if(!r)return i;var s=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(s=Math.max(i.slidesPerViewDynamic("current",!0),1));var l=i.activeIndex<a.slidesPerGroupSkip?1:s,u=i.virtual&&a.virtual.enabled;if(a.loop){if(o&&!u&&a.loopPreventsSliding)return!1;i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft}return a.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+l,e,t,n)},slidePrev:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this,r=i.params,a=i.snapGrid,o=i.slidesGrid,s=i.rtlTranslate,l=i.enabled,u=i.animating;if(!l)return i;var c=i.virtual&&r.virtual.enabled;if(r.loop){if(u&&!c&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var h,p=d(s?i.translate:-i.translate),f=a.map((function(e){return d(e)})),m=a[f.indexOf(p)-1];"undefined"===typeof m&&r.cssMode&&(a.forEach((function(e,t){p>=e&&(h=t)})),"undefined"!==typeof h&&(m=a[h>0?h-1:h]));var g=0;if("undefined"!==typeof m&&((g=o.indexOf(m))<0&&(g=i.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&i.isBeginning){var v=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(v,e,t,n)}return i.slideTo(g,e,t,n)},slideReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=this,a=r.activeIndex,o=Math.min(r.params.slidesPerGroupSkip,a),s=o+Math.floor((a-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[s]){var u=r.snapGrid[s];l-u>(r.snapGrid[s+1]-u)*i&&(a+=r.params.slidesPerGroup)}else{var c=r.snapGrid[s-1];l-c<=(r.snapGrid[s]-c)*i&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,i=t.slidesEl,r="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,a=t.clickedIndex,o=t.isElement?"swiper-slide":".".concat(n.slideClass);if(n.loop){if(t.animating)return;e=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),n.centeredSlides?a<t.loopedSlides-r/2||a>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),a=t.getSlideIndex(we(i,"".concat(o,'[data-swiper-slide-index="').concat(e,'"]'))[0]),me((function(){t.slideTo(a)}))):t.slideTo(a):a>t.slides.length-r?(t.loopFix(),a=t.getSlideIndex(we(i,"".concat(o,'[data-swiper-slide-index="').concat(e,'"]'))[0]),me((function(){t.slideTo(a)}))):t.slideTo(a)}else t.slideTo(a)}};var Ue,Be={loopCreate:function(e){var t=this,n=t.params,i=t.slidesEl;!n.loop||t.virtual&&t.params.virtual.enabled||(we(i,".".concat(n.slideClass,", swiper-slide")).forEach((function(e,t){e.setAttribute("data-swiper-slide-index",t)})),t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"}))},loopFix:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.slideRealIndex,n=e.slideTo,i=void 0===n||n,r=e.direction,a=e.setTranslate,o=e.activeSlideIndex,s=e.byController,l=e.byMousewheel,u=this;if(u.params.loop){u.emit("beforeLoopFix");var c=u.slides,d=u.allowSlidePrev,h=u.allowSlideNext,p=u.slidesEl,f=u.params;if(u.allowSlidePrev=!0,u.allowSlideNext=!0,u.virtual&&f.virtual.enabled)return i&&(f.centeredSlides||0!==u.snapIndex?f.centeredSlides&&u.snapIndex<f.slidesPerView?u.slideTo(u.virtual.slides.length+u.snapIndex,0,!1,!0):u.snapIndex===u.snapGrid.length-1&&u.slideTo(u.virtual.slidesBefore,0,!1,!0):u.slideTo(u.virtual.slides.length,0,!1,!0)),u.allowSlidePrev=d,u.allowSlideNext=h,void u.emit("loopFix");var m="auto"===f.slidesPerView?u.slidesPerViewDynamic():Math.ceil(parseFloat(f.slidesPerView,10)),g=f.loopedSlides||m;g%f.slidesPerGroup!==0&&(g+=f.slidesPerGroup-g%f.slidesPerGroup),u.loopedSlides=g;var v=[],y=[],b=u.activeIndex;"undefined"===typeof o?o=u.getSlideIndex(u.slides.filter((function(e){return e.classList.contains(f.slideActiveClass)}))[0]):b=o;var _="next"===r||!r,x="prev"===r||!r,w=0,T=0;if(o<g){w=Math.max(g-o,f.slidesPerGroup);for(var S=0;S<g-o;S+=1){var E=S-Math.floor(S/c.length)*c.length;v.push(c.length-E-1)}}else if(o>u.slides.length-2*g){T=Math.max(o-(u.slides.length-2*g),f.slidesPerGroup);for(var k=0;k<T;k+=1){var C=k-Math.floor(k/c.length)*c.length;y.push(C)}}if(x&&v.forEach((function(e){p.prepend(u.slides[e])})),_&&y.forEach((function(e){p.append(u.slides[e])})),u.recalcSlides(),f.watchSlidesProgress&&u.updateSlidesOffset(),i)if(v.length>0&&x)if("undefined"===typeof t){var M=u.slidesGrid[b],A=u.slidesGrid[b+w]-M;l?u.setTranslate(u.translate-A):(u.slideTo(b+w,0,!1,!0),a&&(u.touches[u.isHorizontal()?"startX":"startY"]+=A))}else a&&u.slideToLoop(t,0,!1,!0);else if(y.length>0&&_)if("undefined"===typeof t){var P=u.slidesGrid[b],L=u.slidesGrid[b-T]-P;l?u.setTranslate(u.translate-L):(u.slideTo(b-T,0,!1,!0),a&&(u.touches[u.isHorizontal()?"startX":"startY"]+=L))}else u.slideToLoop(t,0,!1,!0);if(u.allowSlidePrev=d,u.allowSlideNext=h,u.controller&&u.controller.control&&!s){var I={slideRealIndex:t,slideTo:!1,direction:r,setTranslate:a,activeSlideIndex:o,byController:!0};Array.isArray(u.controller.control)?u.controller.control.forEach((function(e){!e.destroyed&&e.params.loop&&e.loopFix(I)})):u.controller.control instanceof u.constructor&&u.controller.control.params.loop&&u.controller.control.loopFix(I)}u.emit("loopFix")}},loopDestroy:function(){var e=this,t=e.params,n=e.slidesEl;if(!(!t.loop||e.virtual&&e.params.virtual.enabled)){e.recalcSlides();var i=[];e.slides.forEach((function(e){var t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;i[t]=e})),e.slides.forEach((function(e){e.removeAttribute("data-swiper-slide-index")})),i.forEach((function(e){n.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}}};function Fe(e){var t=this,n=ue(),i=fe(),r=t.touchEventsData;r.evCache.push(e);var a=t.params,o=t.touches;if(t.enabled&&(a.simulateTouch||"mouse"!==e.pointerType)&&(!t.animating||!a.preventInteractionOnTransition)){!t.animating&&a.cssMode&&a.loop&&t.loopFix();var s=e;s.originalEvent&&(s=s.originalEvent);var l=s.target;if(("wrapper"!==a.touchEventsTarget||t.wrapperEl.contains(l))&&(!("which"in s)||3!==s.which)&&!("button"in s&&s.button>0)&&(!r.isTouched||!r.isMoved)){var u=!!a.noSwipingClass&&""!==a.noSwipingClass,c=e.composedPath?e.composedPath():e.path;u&&s.target&&s.target.shadowRoot&&c&&(l=c[0]);var d=a.noSwipingSelector?a.noSwipingSelector:".".concat(a.noSwipingClass),h=!(!s.target||!s.target.shadowRoot);if(a.noSwiping&&(h?function(e){return function t(n){if(!n||n===ue()||n===fe())return null;n.assignedSlot&&(n=n.assignedSlot);var i=n.closest(e);return i||n.getRootNode?i||t(n.getRootNode().host):null}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this)}(d,l):l.closest(d)))t.allowClick=!0;else if(!a.swipeHandler||l.closest(a.swipeHandler)){o.currentX=s.pageX,o.currentY=s.pageY;var p=o.currentX,f=o.currentY,m=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,g=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(m&&(p<=g||p>=i.innerWidth-g)){if("prevent"!==m)return;e.preventDefault()}Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=f,r.touchStartTime=ge(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(r.allowThresholdMove=!1);var v=!0;l.matches(r.focusableElements)&&(v=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==l&&n.activeElement.blur();var y=v&&t.allowTouchMove&&a.touchStartPreventDefault;!a.touchStartForcePreventDefault&&!y||l.isContentEditable||s.preventDefault(),t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}}}}function je(e){var t=ue(),n=this,i=n.touchEventsData,r=n.params,a=n.touches,o=n.rtlTranslate;if(n.enabled&&(r.simulateTouch||"mouse"!==e.pointerType)){var s=e;if(s.originalEvent&&(s=s.originalEvent),i.isTouched){var l=i.evCache.findIndex((function(e){return e.pointerId===s.pointerId}));l>=0&&(i.evCache[l]=s);var u=i.evCache.length>1?i.evCache[0]:s,c=u.pageX,d=u.pageY;if(s.preventedByNestedSwiper)return a.startX=c,void(a.startY=d);if(!n.allowTouchMove)return s.target.matches(i.focusableElements)||(n.allowClick=!1),void(i.isTouched&&(Object.assign(a,{startX:c,startY:d,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:c,currentY:d}),i.touchStartTime=ge()));if(r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(d<a.startY&&n.translate<=n.maxTranslate()||d>a.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(c<a.startX&&n.translate<=n.maxTranslate()||c>a.startX&&n.translate>=n.minTranslate())return;if(t.activeElement&&s.target===t.activeElement&&s.target.matches(i.focusableElements))return i.isMoved=!0,void(n.allowClick=!1);if(i.allowTouchCallbacks&&n.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){a.currentX=c,a.currentY=d;var h=a.currentX-a.startX,p=a.currentY-a.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(p,2))<n.params.threshold)){var f;if("undefined"===typeof i.isScrolling)n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?i.isScrolling=!1:h*h+p*p>=25&&(f=180*Math.atan2(Math.abs(p),Math.abs(h))/Math.PI,i.isScrolling=n.isHorizontal()?f>r.touchAngle:90-f>r.touchAngle);if(i.isScrolling&&n.emit("touchMoveOpposite",s),"undefined"===typeof i.startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(i.startMoving=!0)),i.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&i.evCache.length>1)i.isTouched=!1;else if(i.startMoving){n.allowClick=!1,!r.cssMode&&s.cancelable&&s.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&s.stopPropagation();var m=n.isHorizontal()?h:p,g=n.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;r.oneWayMovement&&(m=Math.abs(m)*(o?1:-1),g=Math.abs(g)*(o?1:-1)),a.diff=m,m*=r.touchRatio,o&&(m=-m,g=-g);var v=n.touchesDirection;n.swipeDirection=m>0?"prev":"next",n.touchesDirection=g>0?"prev":"next";var y,b=n.params.loop&&!r.cssMode;if(!i.isMoved){if(b&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){var _=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(_)}i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",s)}i.isMoved&&v!==n.touchesDirection&&b&&Math.abs(m)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),y=!0),n.emit("sliderMove",s),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;var x=!0,w=r.resistanceRatio;if(r.touchReleaseOnEdges&&(w=0),m>0?(b&&!y&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(x=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+i.startTranslate+m,w)))):m<0&&(b&&!y&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===r.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(x=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-i.startTranslate-m,w)))),x&&(s.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.allowSlidePrev||n.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(m)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,i.currentTranslate=i.startTranslate,void(a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}}}}else i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",s)}}function ze(e){var t=this,n=t.touchEventsData,i=n.evCache.findIndex((function(t){return t.pointerId===e.pointerId}));if((i>=0&&n.evCache.splice(i,1),["pointercancel","pointerout","pointerleave"].includes(e.type))&&!("pointercancel"===e.type&&(t.browser.isSafari||t.browser.isWebView)))return;var r=t.params,a=t.touches,o=t.rtlTranslate,s=t.slidesGrid;if(t.enabled&&(r.simulateTouch||"mouse"!==e.pointerType)){var l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var u,c=ge(),d=c-n.touchStartTime;if(t.allowClick){var h=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(h&&h[0]||l.target),t.emit("tap click",l),d<300&&c-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=ge(),me((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===a.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,u=r.followFinger?o?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(t.params.freeMode&&r.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:u});else{for(var p=0,f=t.slidesSizesGrid[0],m=0;m<s.length;m+=m<r.slidesPerGroupSkip?1:r.slidesPerGroup){var g=m<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;"undefined"!==typeof s[m+g]?u>=s[m]&&u<s[m+g]&&(p=m,f=s[m+g]-s[m]):u>=s[m]&&(p=m,f=s[s.length-1]-s[s.length-2])}var v=null,y=null;r.rewind&&(t.isBeginning?y=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(v=0));var b=(u-s[p])/f,_=p<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(d>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(b>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?v:p+_):t.slideTo(p)),"prev"===t.swipeDirection&&(b>1-r.longSwipesRatio?t.slideTo(p+_):null!==y&&b<0&&Math.abs(b)>r.longSwipesRatio?t.slideTo(y):t.slideTo(p))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(p+_):t.slideTo(p):("next"===t.swipeDirection&&t.slideTo(null!==v?v:p+_),"prev"===t.swipeDirection&&t.slideTo(null!==y?y:p))}}}}function He(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var i=e.allowSlideNext,r=e.allowSlidePrev,a=e.snapGrid,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();var s=o&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||s?e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(Ue),Ue=setTimeout((function(){e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}}function Ve(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Ge(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var i=e.maxTranslate()-e.minTranslate();(0===i?0:(e.translate-e.minTranslate())/i)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var We=function(e,t){if(e&&!e.destroyed&&e.params){var n=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass));if(n){var i=n.querySelector(".".concat(e.params.lazyPreloaderClass));i&&i.remove()}}};function Ze(e){We(this,e.target),this.update()}var qe=!1;function Xe(){}var Ye=function(e,t){var n=ue(),i=e.params,r=e.el,a=e.wrapperEl,o=e.device,s=!!i.nested,l="on"===t?"addEventListener":"removeEventListener",u=t;r[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:s}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",e.onClick,!0),i.cssMode&&a[l]("scroll",e.onScroll),i.updateOnWindowResize?e[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",He,!0):e[u]("observerUpdate",He,!0),r[l]("load",e.onLoad,{capture:!0})};var Ke=function(e,t){return e.grid&&t.grid&&t.grid.rows>1};var Qe={setBreakpoint:function(){var e=this,t=e.realIndex,n=e.initialized,i=e.params,r=e.el,a=i.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var o=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(o&&e.currentBreakpoint!==o){var s=(o in a?a[o]:void 0)||e.originalParams,l=Ke(e,i),u=Ke(e,s),c=i.enabled;l&&!u?(r.classList.remove("".concat(i.containerModifierClass,"grid"),"".concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses()):!l&&u&&(r.classList.add("".concat(i.containerModifierClass,"grid")),(s.grid.fill&&"column"===s.grid.fill||!s.grid.fill&&"column"===i.grid.fill)&&r.classList.add("".concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((function(t){var n=i[t]&&i[t].enabled,r=s[t]&&s[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));var d=s.direction&&s.direction!==i.direction,h=i.loop&&(s.slidesPerView!==i.slidesPerView||d);d&&n&&e.changeDirection(),be(e.params,s);var p=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),c&&!p?e.disable():!c&&p&&e.enable(),e.currentBreakpoint=o,e.emit("_beforeBreakpoint",s),h&&n&&(e.loopDestroy(),e.loopCreate(t),e.updateSlides()),e.emit("breakpoint",s)}}},getBreakpoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"window",n=arguments.length>2?arguments[2]:void 0;if(e&&("container"!==t||n)){var i=!1,r=fe(),a="window"===t?r.innerHeight:n.clientHeight,o=Object.keys(e).map((function(e){if("string"===typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:a*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<o.length;s+=1){var l=o[s],u=l.point,c=l.value;"window"===t?r.matchMedia("(min-width: ".concat(c,"px)")).matches&&(i=u):c<=n.clientWidth&&(i=u)}return i||"max"}}};var $e={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};function Je(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.keys(n)[0],r=n[i];"object"===typeof r&&null!==r?(["navigation","pagination","scrollbar"].indexOf(i)>=0&&!0===e[i]&&(e[i]={auto:!0}),i in e&&"enabled"in r?(!0===e[i]&&(e[i]={enabled:!0}),"object"!==typeof e[i]||"enabled"in e[i]||(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),be(t,n)):be(t,n)):be(t,n)}}var et={eventsEmitter:Le,update:Ie,translate:Oe,transition:De,slide:Ne,loop:Be,grabCursor:{setGrabCursor:function(e){var t=this;if(!(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((function(){t.__preventObserver__=!1}))}},unsetGrabCursor:function(){var e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((function(){e.__preventObserver__=!1})))}},events:{attachEvents:function(){var e=this,t=ue(),n=e.params;e.onTouchStart=Fe.bind(e),e.onTouchMove=je.bind(e),e.onTouchEnd=ze.bind(e),n.cssMode&&(e.onScroll=Ge.bind(e)),e.onClick=Ve.bind(e),e.onLoad=Ze.bind(e),qe||(t.addEventListener("touchstart",Xe),qe=!0),Ye(e,"on")},detachEvents:function(){Ye(this,"off")}},breakpoints:Qe,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked,n=e.params,i=n.slidesOffsetBefore;if(i){var r=e.slides.length-1,a=e.slidesGrid[r]+e.slidesSizesGrid[r]+2*i;e.isLocked=e.size>a}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:{addClasses:function(){var e,t=this,n=t.classNames,i=t.params,r=t.rtl,a=t.el,o=t.device,s=function(e,t){var n=[];return e.forEach((function(e){"object"===typeof e?Object.keys(e).forEach((function(i){e[i]&&n.push(t+i)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",i.direction,{"free-mode":t.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:r},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&"column"===i.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);n.push.apply(n,ie(s)),(e=a.classList).add.apply(e,ie(n)),t.emitContainerClasses()},removeClasses:function(){var e,t=this,n=t.el,i=t.classNames;(e=n.classList).remove.apply(e,ie(i)),t.emitContainerClasses()}}},tt={},nt=function(){function e(){var t,n;(0,re.Z)(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?n=r[0]:(t=r[0],n=r[1]),n||(n={}),n=be({},n),t&&!n.el&&(n.el=t);var o=ue();if(n.el&&"string"===typeof n.el&&o.querySelectorAll(n.el).length>1){var s=[];return o.querySelectorAll(n.el).forEach((function(t){var i=be({},n,{el:t});s.push(new e(i))})),s}var l,u=this;(u.__swiper__=!0,u.support=Me(),u.device=Ae({userAgent:n.userAgent}),u.browser=Pe(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=ie(u.__modules__),n.modules&&Array.isArray(n.modules))&&(l=u.modules).push.apply(l,ie(n.modules));var c={};u.modules.forEach((function(e){e({params:n,swiper:u,extendParams:Je(n,c),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})}));var d=be({},$e,c);return u.params=be({},d,tt,n),u.originalParams=be({},u.params),u.passedParams=be({},n),u.params&&u.params.on&&Object.keys(u.params.on).forEach((function(e){u.on(e,u.params.on[e])})),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===u.params.direction},isVertical:function(){return"vertical"===u.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:ge(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}return(0,ae.Z)(e,[{key:"getSlideIndex",value:function(e){var t=this.slidesEl,n=this.params,i=Ee(we(t,".".concat(n.slideClass,", swiper-slide"))[0]);return Ee(e)-i}},{key:"getSlideIndexByData",value:function(e){return this.getSlideIndex(this.slides.filter((function(t){return 1*t.getAttribute("data-swiper-slide-index")===e}))[0])}},{key:"recalcSlides",value:function(){var e=this,t=e.slidesEl,n=e.params;e.slides=we(t,".".concat(n.slideClass,", swiper-slide"))}},{key:"enable",value:function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}},{key:"disable",value:function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}},{key:"setProgress",value:function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var i=n.minTranslate(),r=(n.maxTranslate()-i)*e+i;n.translateTo(r,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")}},{key:"emitSlidesClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.forEach((function(n){var i=e.getSlideClasses(n);t.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)})),e.emit("_slideClasses",t)}}},{key:"slidesPerViewDynamic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,i=n.params,r=n.slides,a=n.slidesGrid,o=n.slidesSizesGrid,s=n.size,l=n.activeIndex,u=1;if(i.centeredSlides){for(var c,d=r[l].swiperSlideSize,h=l+1;h<r.length;h+=1)r[h]&&!c&&(u+=1,(d+=r[h].swiperSlideSize)>s&&(c=!0));for(var p=l-1;p>=0;p-=1)r[p]&&!c&&(u+=1,(d+=r[p].swiperSlideSize)>s&&(c=!0))}else if("current"===e)for(var f=l+1;f<r.length;f+=1){(t?a[f]+o[f]-a[l]<s:a[f]-a[l]<s)&&(u+=1)}else for(var m=l-1;m>=0;m-=1){a[l]-a[m]<s&&(u+=1)}return u}},{key:"update",value:function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),ie(e.el.querySelectorAll('[loading="lazy"]')).forEach((function(t){t.complete&&We(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||i(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function i(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}}},{key:"changeDirection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove("".concat(n.params.containerModifierClass).concat(i)),n.el.classList.add("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}},{key:"changeLanguageDirection",value:function(e){var t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}},{key:"mount",value:function(e){var t=this;if(t.mounted)return!0;var n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.shadowEl&&(t.isElement=!0);var i=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},r=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(i()):we(n,i())[0];return!r&&t.params.createElements&&(r=Te("div",t.params.wrapperClass),n.append(r),we(n,".".concat(t.params.slideClass)).forEach((function(e){r.append(e)}))),Object.assign(t,{el:n,wrapperEl:r,slidesEl:t.isElement?n:r,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===Se(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===Se(n,"direction")),wrongRTL:"-webkit-box"===Se(r,"display")}),!0}},{key:"init",value:function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents(),ie(t.el.querySelectorAll('[loading="lazy"]')).forEach((function(e){e.complete?We(t,e):e.addEventListener("load",(function(e){We(t,e.target)}))})),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.params,r=n.el,a=n.wrapperEl,o=n.slides;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),t&&(n.removeClasses(),r.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach((function(e){e.classList.remove(i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.el.swiper=null,function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}}))}(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){be(tt,e)}},{key:"extendedDefaults",get:function(){return tt}},{key:"defaults",get:function(){return $e}},{key:"installModule",value:function(t){e.prototype.__modules__||(e.prototype.__modules__=[]);var n=e.prototype.__modules__;"function"===typeof t&&n.indexOf(t)<0&&n.push(t)}},{key:"use",value:function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)}}]),e}();Object.keys(et).forEach((function(e){Object.keys(et[e]).forEach((function(t){nt.prototype[t]=et[e][t]}))})),nt.use([function(e){var t=e.swiper,n=e.on,i=e.emit,r=fe(),a=null,o=null,s=function(){t&&!t.destroyed&&t.initialized&&(i("beforeResize"),i("resize"))},l=function(){t&&!t.destroyed&&t.initialized&&i("orientationchange")};n("init",(function(){t.params.resizeObserver&&"undefined"!==typeof r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(a=new ResizeObserver((function(e){o=r.requestAnimationFrame((function(){var n=t.width,i=t.height,r=n,a=i;e.forEach((function(e){var n=e.contentBoxSize,i=e.contentRect,o=e.target;o&&o!==t.el||(r=i?i.width:(n[0]||n).inlineSize,a=i?i.height:(n[0]||n).blockSize)})),r===n&&a===i||s()}))}))).observe(t.el):(r.addEventListener("resize",s),r.addEventListener("orientationchange",l))})),n("destroy",(function(){o&&r.cancelAnimationFrame(o),a&&a.unobserve&&t.el&&(a.unobserve(t.el),a=null),r.removeEventListener("resize",s),r.removeEventListener("orientationchange",l)}))},function(e){var t=e.swiper,n=e.extendParams,i=e.on,r=e.emit,a=[],o=fe(),s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new(o.MutationObserver||o.WebkitMutationObserver)((function(e){if(!t.__preventObserver__)if(1!==e.length){var n=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(n):o.setTimeout(n,0)}else r("observerUpdate",e[0])}));i.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:"undefined"===typeof n.childList||n.childList,characterData:"undefined"===typeof n.characterData||n.characterData}),a.push(i)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",(function(){if(t.params.observer){if(t.params.observeParents)for(var e=ke(t.el),n=0;n<e.length;n+=1)s(e[n]);s(t.el,{childList:t.params.observeSlideChildren}),s(t.wrapperEl,{attributes:!1})}})),i("destroy",(function(){a.forEach((function(e){e.disconnect()})),a.splice(0,a.length)}))}]);var it=nt;function rt(e){var t,n=e.swiper,i=e.extendParams,r=e.on,a=e.emit,o=fe();i({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),n.mousewheel={enabled:!1};var s,l=ge(),u=[];function c(){n.enabled&&(n.mouseEntered=!0)}function d(){n.enabled&&(n.mouseEntered=!1)}function h(e){return!(n.params.mousewheel.thresholdDelta&&e.delta<n.params.mousewheel.thresholdDelta)&&(!(n.params.mousewheel.thresholdTime&&ge()-l<n.params.mousewheel.thresholdTime)&&(e.delta>=6&&ge()-l<60||(e.direction<0?n.isEnd&&!n.params.loop||n.animating||(n.slideNext(),a("scroll",e.raw)):n.isBeginning&&!n.params.loop||n.animating||(n.slidePrev(),a("scroll",e.raw)),l=(new o.Date).getTime(),!1)))}function p(e){var i=e;if(n.enabled){var r=n.params.mousewheel;n.params.cssMode&&i.preventDefault();var o=n.el;"container"!==n.params.mousewheel.eventsTarget&&(o=document.querySelector(n.params.mousewheel.eventsTarget));var l=o&&o.contains(i.target);if(!n.mouseEntered&&!l&&!r.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);var c=0,d=n.rtlTranslate?-1:1,p=function(e){var t=0,n=0,i=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),i=10*t,r=10*n,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),e.shiftKey&&!i&&(i=r,r=0),(i||r)&&e.deltaMode&&(1===e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!t&&(t=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:i,pixelY:r}}(i);if(r.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(p.pixelX)>Math.abs(p.pixelY)))return!0;c=-p.pixelX*d}else{if(!(Math.abs(p.pixelY)>Math.abs(p.pixelX)))return!0;c=-p.pixelY}else c=Math.abs(p.pixelX)>Math.abs(p.pixelY)?-p.pixelX*d:-p.pixelY;if(0===c)return!0;r.invert&&(c=-c);var f=n.getTranslate()+c*r.sensitivity;if(f>=n.minTranslate()&&(f=n.minTranslate()),f<=n.maxTranslate()&&(f=n.maxTranslate()),(!!n.params.loop||!(f===n.minTranslate()||f===n.maxTranslate()))&&n.params.nested&&i.stopPropagation(),n.params.freeMode&&n.params.freeMode.enabled){var m={time:ge(),delta:Math.abs(c),direction:Math.sign(c)},g=s&&m.time<s.time+500&&m.delta<=s.delta&&m.direction===s.direction;if(!g){s=void 0;var v=n.getTranslate()+c*r.sensitivity,y=n.isBeginning,b=n.isEnd;if(v>=n.minTranslate()&&(v=n.minTranslate()),v<=n.maxTranslate()&&(v=n.maxTranslate()),n.setTransition(0),n.setTranslate(v),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!y&&n.isBeginning||!b&&n.isEnd)&&n.updateSlidesClasses(),n.params.loop&&n.loopFix({direction:m.direction<0?"next":"prev",byMousewheel:!0}),n.params.freeMode.sticky){clearTimeout(t),t=void 0,u.length>=15&&u.shift();var _=u.length?u[u.length-1]:void 0,x=u[0];if(u.push(m),_&&(m.delta>_.delta||m.direction!==_.direction))u.splice(0);else if(u.length>=15&&m.time-x.time<500&&x.delta-m.delta>=1&&m.delta<=6){var w=c>0?.8:.2;s=m,u.splice(0),t=me((function(){n.slideToClosest(n.params.speed,!0,void 0,w)}),0)}t||(t=me((function(){s=m,u.splice(0),n.slideToClosest(n.params.speed,!0,void 0,.5)}),500))}if(g||a("scroll",i),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),v===n.minTranslate()||v===n.maxTranslate())return!0}}else{var T={time:ge(),delta:Math.abs(c),direction:Math.sign(c),raw:e};u.length>=2&&u.shift();var S=u.length?u[u.length-1]:void 0;if(u.push(T),S?(T.direction!==S.direction||T.delta>S.delta||T.time>S.time+150)&&h(T):h(T),function(e){var t=n.params.mousewheel;if(e.direction<0){if(n.isEnd&&!n.params.loop&&t.releaseOnEdges)return!0}else if(n.isBeginning&&!n.params.loop&&t.releaseOnEdges)return!0;return!1}(T))return!0}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1}}function f(e){var t=n.el;"container"!==n.params.mousewheel.eventsTarget&&(t=document.querySelector(n.params.mousewheel.eventsTarget)),t[e]("mouseenter",c),t[e]("mouseleave",d),t[e]("wheel",p)}function m(){return n.params.cssMode?(n.wrapperEl.removeEventListener("wheel",p),!0):!n.mousewheel.enabled&&(f("addEventListener"),n.mousewheel.enabled=!0,!0)}function g(){return n.params.cssMode?(n.wrapperEl.addEventListener(event,p),!0):!!n.mousewheel.enabled&&(f("removeEventListener"),n.mousewheel.enabled=!1,!0)}r("init",(function(){!n.params.mousewheel.enabled&&n.params.cssMode&&g(),n.params.mousewheel.enabled&&m()})),r("destroy",(function(){n.params.cssMode&&m(),n.mousewheel.enabled&&g()})),Object.assign(n.mousewheel,{enable:m,disable:g})}function at(){return".".concat((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,"."))}function ot(e){var t,n=e.swiper,i=e.extendParams,r=e.on,a=e.emit,o="swiper-pagination";i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"".concat(o,"-bullet"),bulletActiveClass:"".concat(o,"-bullet-active"),modifierClass:"".concat(o,"-"),currentClass:"".concat(o,"-current"),totalClass:"".concat(o,"-total"),hiddenClass:"".concat(o,"-hidden"),progressbarFillClass:"".concat(o,"-progressbar-fill"),progressbarOppositeClass:"".concat(o,"-progressbar-opposite"),clickableClass:"".concat(o,"-clickable"),lockClass:"".concat(o,"-lock"),horizontalClass:"".concat(o,"-horizontal"),verticalClass:"".concat(o,"-vertical"),paginationDisabledClass:"".concat(o,"-disabled")}}),n.pagination={el:null,bullets:[]};var s=0,l=function(e){return Array.isArray(e)||(e=[e].filter((function(e){return!!e}))),e};function u(){return!n.params.pagination.el||!n.pagination.el||Array.isArray(n.pagination.el)&&0===n.pagination.el.length}function c(e,t){var i=n.params.pagination.bulletActiveClass;e&&(e=e["".concat("prev"===t?"previous":"next","ElementSibling")])&&(e.classList.add("".concat(i,"-").concat(t)),(e=e["".concat("prev"===t?"previous":"next","ElementSibling")])&&e.classList.add("".concat(i,"-").concat(t,"-").concat(t)))}function d(e){var t=e.target.closest(at(n.params.pagination.bulletClass));if(t){e.preventDefault();var i=Ee(t)*n.params.slidesPerGroup;if(n.params.loop){if(n.realIndex===i)return;(i<n.loopedSlides||i>n.slides.length-n.loopedSlides)&&n.loopFix({direction:i<n.loopedSlides?"prev":"next",activeSlideIndex:i,slideTo:!1}),n.slideToLoop(i)}else n.slideTo(i)}}function h(){var e=n.rtl,i=n.params.pagination;if(!u()){var r,o=n.pagination.el;o=l(o);var d=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,h=n.params.loop?Math.ceil(d/n.params.slidesPerGroup):n.snapGrid.length;if(r=n.params.loop?n.params.slidesPerGroup>1?Math.floor(n.realIndex/n.params.slidesPerGroup):n.realIndex:"undefined"!==typeof n.snapIndex?n.snapIndex:n.activeIndex||0,"bullets"===i.type&&n.pagination.bullets&&n.pagination.bullets.length>0){var p,f,m,g=n.pagination.bullets;if(i.dynamicBullets&&(t=Ce(g[0],n.isHorizontal()?"width":"height",!0),o.forEach((function(e){e.style[n.isHorizontal()?"width":"height"]="".concat(t*(i.dynamicMainBullets+4),"px")})),i.dynamicMainBullets>1&&void 0!==n.previousIndex&&((s+=r-(n.previousIndex||0))>i.dynamicMainBullets-1?s=i.dynamicMainBullets-1:s<0&&(s=0)),p=Math.max(r-s,0),m=((f=p+(Math.min(g.length,i.dynamicMainBullets)-1))+p)/2),g.forEach((function(e){var t,n=ie(["","-next","-next-next","-prev","-prev-prev","-main"].map((function(e){return"".concat(i.bulletActiveClass).concat(e)}))).map((function(e){return"string"===typeof e&&e.includes(" ")?e.split(" "):e})).flat();(t=e.classList).remove.apply(t,ie(n))})),o.length>1)g.forEach((function(e){var t,n=Ee(e);n===r&&(t=e.classList).add.apply(t,ie(i.bulletActiveClass.split(" ")));if(i.dynamicBullets){var a;if(n>=p&&n<=f)(a=e.classList).add.apply(a,ie("".concat(i.bulletActiveClass,"-main").split(" ")));n===p&&c(e,"prev"),n===f&&c(e,"next")}}));else{var v,y=g[r];if(y)(v=y.classList).add.apply(v,ie(i.bulletActiveClass.split(" ")));if(i.dynamicBullets){for(var b=g[p],_=g[f],x=p;x<=f;x+=1){var w;if(g[x])(w=g[x].classList).add.apply(w,ie("".concat(i.bulletActiveClass,"-main").split(" ")))}c(b,"prev"),c(_,"next")}}if(i.dynamicBullets){var T=Math.min(g.length,i.dynamicMainBullets+4),S=(t*T-t)/2-m*t,E=e?"right":"left";g.forEach((function(e){e.style[n.isHorizontal()?E:"top"]="".concat(S,"px")}))}}o.forEach((function(e,t){if("fraction"===i.type&&(e.querySelectorAll(at(i.currentClass)).forEach((function(e){e.textContent=i.formatFractionCurrent(r+1)})),e.querySelectorAll(at(i.totalClass)).forEach((function(e){e.textContent=i.formatFractionTotal(h)}))),"progressbar"===i.type){var o;o=i.progressbarOpposite?n.isHorizontal()?"vertical":"horizontal":n.isHorizontal()?"horizontal":"vertical";var s=(r+1)/h,l=1,u=1;"horizontal"===o?l=s:u=s,e.querySelectorAll(at(i.progressbarFillClass)).forEach((function(e){e.style.transform="translate3d(0,0,0) scaleX(".concat(l,") scaleY(").concat(u,")"),e.style.transitionDuration="".concat(n.params.speed,"ms")}))}"custom"===i.type&&i.renderCustom?(e.innerHTML=i.renderCustom(n,r+1,h),0===t&&a("paginationRender",e)):(0===t&&a("paginationRender",e),a("paginationUpdate",e)),n.params.watchOverflow&&n.enabled&&e.classList[n.isLocked?"add":"remove"](i.lockClass)}))}}function p(){var e=n.params.pagination;if(!u()){var t=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,i=n.pagination.el;i=l(i);var r="";if("bullets"===e.type){var o=n.params.loop?Math.ceil(t/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&o>t&&(o=t);for(var s=0;s<o;s+=1)e.renderBullet?r+=e.renderBullet.call(n,s,e.bulletClass):r+="<".concat(e.bulletElement,' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">")}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(n,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>')),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(n,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>')),n.pagination.bullets=[],i.forEach((function(t){var i;("custom"!==e.type&&(t.innerHTML=r||""),"bullets"===e.type)&&(i=n.pagination.bullets).push.apply(i,ie(t.querySelectorAll(at(e.bulletClass))))})),"custom"!==e.type&&a("paginationRender",i[0])}}function f(){n.params.pagination=function(e,t,n,i){return e.params.createElements&&Object.keys(i).forEach((function(r){if(!n[r]&&!0===n.auto){var a=we(e.el,".".concat(i[r]))[0];a||((a=Te("div",i[r])).className=i[r],e.el.append(a)),n[r]=a,t[r]=a}})),n}(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});var e,t=n.params.pagination;t.el&&("string"===typeof t.el&&n.isElement&&(e=n.el.shadowRoot.querySelector(t.el)),e||"string"!==typeof t.el||(e=ie(document.querySelectorAll(t.el))),e||(e=t.el),e&&0!==e.length&&(n.params.uniqueNavElements&&"string"===typeof t.el&&Array.isArray(e)&&e.length>1&&(e=ie(n.el.querySelectorAll(t.el))).length>1&&(e=e.filter((function(e){return ke(e,".swiper")[0]===n.el}))[0]),Array.isArray(e)&&1===e.length&&(e=e[0]),Object.assign(n.pagination,{el:e}),(e=l(e)).forEach((function(e){"bullets"===t.type&&t.clickable&&e.classList.add(t.clickableClass),e.classList.add(t.modifierClass+t.type),e.classList.add(n.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(e.classList.add("".concat(t.modifierClass).concat(t.type,"-dynamic")),s=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&e.classList.add(t.progressbarOppositeClass),t.clickable&&e.addEventListener("click",d),n.enabled||e.classList.add(t.lockClass)}))))}function m(){var e=n.params.pagination;if(!u()){var t=n.pagination.el;t&&(t=l(t)).forEach((function(t){t.classList.remove(e.hiddenClass),t.classList.remove(e.modifierClass+e.type),t.classList.remove(n.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&t.removeEventListener("click",d)})),n.pagination.bullets&&n.pagination.bullets.forEach((function(t){var n;return(n=t.classList).remove.apply(n,ie(e.bulletActiveClass.split(" ")))}))}}r("init",(function(){!1===n.params.pagination.enabled?g():(f(),p(),h())})),r("activeIndexChange",(function(){"undefined"===typeof n.snapIndex&&h()})),r("snapIndexChange",(function(){h()})),r("snapGridLengthChange",(function(){p(),h()})),r("destroy",(function(){m()})),r("enable disable",(function(){var e=n.pagination.el;e&&(e=l(e)).forEach((function(e){return e.classList[n.enabled?"remove":"add"](n.params.pagination.lockClass)}))})),r("lock unlock",(function(){h()})),r("click",(function(e,t){var i=t.target,r=n.pagination.el;if(Array.isArray(r)||(r=[r].filter((function(e){return!!e}))),n.params.pagination.el&&n.params.pagination.hideOnClick&&r&&r.length>0&&!i.classList.contains(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&i===n.navigation.nextEl||n.navigation.prevEl&&i===n.navigation.prevEl))return;var o=r[0].classList.contains(n.params.pagination.hiddenClass);a(!0===o?"paginationShow":"paginationHide"),r.forEach((function(e){return e.classList.toggle(n.params.pagination.hiddenClass)}))}}));var g=function(){n.el.classList.add(n.params.pagination.paginationDisabledClass);var e=n.pagination.el;e&&(e=l(e)).forEach((function(e){return e.classList.add(n.params.pagination.paginationDisabledClass)})),m()};Object.assign(n.pagination,{enable:function(){n.el.classList.remove(n.params.pagination.paginationDisabledClass);var e=n.pagination.el;e&&(e=l(e)).forEach((function(e){return e.classList.remove(n.params.pagination.paginationDisabledClass)})),f(),p(),h()},disable:g,render:p,update:h,init:f,destroy:m})}function st(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function lt(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:st(t[n])&&st(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:lt(e[n],t[n]):e[n]=t[n]}))}function ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.pagination&&"undefined"===typeof e.pagination.el}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scrollbar&&"undefined"===typeof e.scrollbar.el}function ht(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),t=[];return e.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t.join(" ")}function pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.includes("swiper-wrapper")?e:"swiper-wrapper ".concat(e):"swiper-wrapper"}var ft=["eventsPrefix","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control","injectStyles","injectStylesUrls"];function mt(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function gt(e){var n=[];return t.Children.toArray(e).forEach((function(e){mt(e)?n.push(e):e.props&&e.props.children&&gt(e.props.children).forEach((function(e){return n.push(e)}))})),n}function vt(e){var n=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return t.Children.toArray(e).forEach((function(e){if(mt(e))n.push(e);else if(e.props&&e.props.slot&&i[e.props.slot])i[e.props.slot].push(e);else if(e.props&&e.props.children){var t=gt(e.props.children);t.length>0?t.forEach((function(e){return n.push(e)})):i["container-end"].push(e)}else i["container-end"].push(e)})),{slides:n,slots:i}}function yt(e){var t,n,i,r,a,o,s,l,u=e.swiper,c=e.slides,d=e.passedParams,h=e.changedParams,p=e.nextEl,f=e.prevEl,m=e.scrollbarEl,g=e.paginationEl,v=h.filter((function(e){return"children"!==e&&"direction"!==e&&"wrapperClass"!==e})),y=u.params,b=u.pagination,_=u.navigation,x=u.scrollbar,w=u.virtual,T=u.thumbs;h.includes("thumbs")&&d.thumbs&&d.thumbs.swiper&&y.thumbs&&!y.thumbs.swiper&&(t=!0),h.includes("controller")&&d.controller&&d.controller.control&&y.controller&&!y.controller.control&&(n=!0),h.includes("pagination")&&d.pagination&&(d.pagination.el||g)&&(y.pagination||!1===y.pagination)&&b&&!b.el&&(i=!0),h.includes("scrollbar")&&d.scrollbar&&(d.scrollbar.el||m)&&(y.scrollbar||!1===y.scrollbar)&&x&&!x.el&&(r=!0),h.includes("navigation")&&d.navigation&&(d.navigation.prevEl||f)&&(d.navigation.nextEl||p)&&(y.navigation||!1===y.navigation)&&_&&!_.prevEl&&!_.nextEl&&(a=!0);(h.includes("loop")&&u.isElement&&(y.loop&&!d.loop?o=!0:!y.loop&&d.loop?s=!0:l=!0),v.forEach((function(e){if(st(y[e])&&st(d[e]))lt(y[e],d[e]);else{var t=d[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?y[e]=d[e]:!1===t&&u[n=e]&&(u[n].destroy(),"navigation"===n?(u.isElement&&(u[n].prevEl.remove(),u[n].nextEl.remove()),y[n].prevEl=void 0,y[n].nextEl=void 0,u[n].prevEl=void 0,u[n].nextEl=void 0):(u.isElement&&u[n].el.remove(),y[n].el=void 0,u[n].el=void 0))}var n})),v.includes("controller")&&!n&&u.controller&&u.controller.control&&y.controller&&y.controller.control&&(u.controller.control=y.controller.control),h.includes("children")&&c&&w&&y.virtual.enabled&&(w.slides=c,w.update(!0)),h.includes("children")&&c&&y.loop&&(l=!0),t)&&(T.init()&&T.update(!0));n&&(u.controller.control=y.controller.control),i&&(!u.isElement||g&&"string"!==typeof g||((g=document.createElement("div")).classList.add("swiper-pagination"),u.el.shadowEl.appendChild(g)),g&&(y.pagination.el=g),b.init(),b.render(),b.update()),r&&(!u.isElement||m&&"string"!==typeof m||((m=document.createElement("div")).classList.add("swiper-scrollbar"),u.el.shadowEl.appendChild(m)),m&&(y.scrollbar.el=m),x.init(),x.updateSize(),x.setTranslate()),a&&(u.isElement&&(p&&"string"!==typeof p||((p=document.createElement("div")).classList.add("swiper-button-next"),u.el.shadowEl.appendChild(p)),f&&"string"!==typeof f||((f=document.createElement("div")).classList.add("swiper-button-prev"),u.el.shadowEl.appendChild(f))),p&&(y.navigation.nextEl=p),f&&(y.navigation.prevEl=f),_.init(),_.update()),h.includes("allowSlideNext")&&(u.allowSlideNext=d.allowSlideNext),h.includes("allowSlidePrev")&&(u.allowSlidePrev=d.allowSlidePrev),h.includes("direction")&&u.changeDirection(d.direction,!1),(o||l)&&u.loopDestroy(),(s||l)&&u.loopCreate(),u.update()}function bt(e,n){return"undefined"===typeof window?(0,t.useEffect)(e,n):(0,t.useLayoutEffect)(e,n)}var _t=(0,t.createContext)(null),xt=(0,t.createContext)(null),wt=["className","tag","wrapperTag","children","onSwiper"];function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tt.apply(this,arguments)}var St=(0,t.forwardRef)((function(e,n){var i=void 0===e?{}:e,r=i.className,a=i.tag,o=void 0===a?"div":a,s=i.wrapperTag,l=void 0===s?"div":s,u=i.children,c=i.onSwiper,h=te(i,wt),p=!1,f=d((0,t.useState)("swiper"),2),m=f[0],g=f[1],v=d((0,t.useState)(null),2),y=v[0],b=v[1],_=d((0,t.useState)(!1),2),x=_[0],w=_[1],T=(0,t.useRef)(!1),S=(0,t.useRef)(null),E=(0,t.useRef)(null),k=(0,t.useRef)(null),C=(0,t.useRef)(null),M=(0,t.useRef)(null),A=(0,t.useRef)(null),P=(0,t.useRef)(null),L=(0,t.useRef)(null),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={on:{}},i={},r={};lt(n,it.defaults),lt(n,it.extendedDefaults),n._emitClasses=!0,n.init=!1;var a={},o=ft.map((function(e){return e.replace(/_/,"")})),s=Object.assign({},e);return Object.keys(s).forEach((function(s){"undefined"!==typeof e[s]&&(o.indexOf(s)>=0?st(e[s])?(n[s]={},r[s]={},lt(n[s],e[s]),lt(r[s],e[s])):(n[s]=e[s],r[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"===typeof e[s]?t?i["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:n.on["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:a[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((function(e){!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:r,rest:a,events:i}}(h),O=I.params,R=I.passedParams,D=I.rest,N=I.events,U=vt(u),B=U.slides,F=U.slots,j=function(){w(!x)};Object.assign(O.on,{_containerClasses:function(e,t){g(t)}});var z=function(){Object.assign(O.on,N),p=!0;var e=ee({},O);if(delete e.wrapperClass,E.current=new it(e),E.current.virtual&&E.current.params.virtual.enabled){E.current.virtual.slides=B;var t={cache:!1,slides:B,renderExternal:b,renderExternalUpdate:!1};lt(E.current.params.virtual,t),lt(E.current.originalParams.virtual,t)}};S.current||z(),E.current&&E.current.on("_beforeBreakpoint",j);return(0,t.useEffect)((function(){return function(){E.current&&E.current.off("_beforeBreakpoint",j)}})),(0,t.useEffect)((function(){!T.current&&E.current&&(E.current.emitSlidesClasses(),T.current=!0)})),bt((function(){if(n&&(n.current=S.current),S.current)return E.current.destroyed&&z(),function(e,t){var n=e.el,i=e.nextEl,r=e.prevEl,a=e.paginationEl,o=e.scrollbarEl,s=e.swiper;ut(t)&&i&&r&&(s.params.navigation.nextEl=i,s.originalParams.navigation.nextEl=i,s.params.navigation.prevEl=r,s.originalParams.navigation.prevEl=r),ct(t)&&a&&(s.params.pagination.el=a,s.originalParams.pagination.el=a),dt(t)&&o&&(s.params.scrollbar.el=o,s.originalParams.scrollbar.el=o),s.init(n)}({el:S.current,nextEl:M.current,prevEl:A.current,paginationEl:P.current,scrollbarEl:L.current,swiper:E.current},O),c&&c(E.current),function(){E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}}),[]),bt((function(){!p&&N&&E.current&&Object.keys(N).forEach((function(e){E.current.on(e,N[e])}));var e=function(e,t,n,i,r){var a=[];if(!t)return a;var o=function(e){a.indexOf(e)<0&&a.push(e)};if(n&&i){var s=i.map(r),l=n.map(r);s.join("")!==l.join("")&&o("children"),i.length!==n.length&&o("children")}return ft.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(st(e[n])&&st(t[n])){var i=Object.keys(e[n]),r=Object.keys(t[n]);i.length!==r.length?o(n):(i.forEach((function(i){e[n][i]!==t[n][i]&&o(n)})),r.forEach((function(i){e[n][i]!==t[n][i]&&o(n)})))}else e[n]!==t[n]&&o(n)})),a}(R,k.current,B,C.current,(function(e){return e.key}));return k.current=R,C.current=B,e.length&&E.current&&!E.current.destroyed&&yt({swiper:E.current,slides:B,passedParams:R,changedParams:e,nextEl:M.current,prevEl:A.current,scrollbarEl:L.current,paginationEl:P.current}),function(){N&&E.current&&Object.keys(N).forEach((function(e){E.current.off(e,N[e])}))}})),bt((function(){var e;!(e=E.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[y]),t.createElement(o,Tt({ref:S,className:ht("".concat(m).concat(r?" ".concat(r):""))},D),t.createElement(xt.Provider,{value:E.current},F["container-start"],t.createElement(l,{className:pt(O.wrapperClass)},F["wrapper-start"],O.virtual?function(e,n,i){if(!i)return null;for(var r=function(e){var t=e;return e<0?t=n.length+e:t>=n.length&&(t-=n.length),t},a=e.isHorizontal()?$({},e.rtlTranslate?"right":"left","".concat(i.offset,"px")):{top:"".concat(i.offset,"px")},o=i.from,s=i.to,l=e.params.loop?-n.length:0,u=e.params.loop?2*n.length:n.length,c=[],d=l;d<u;d+=1)d>=o&&d<=s&&c.push(n[r(d)]);return c.map((function(n,i){return t.cloneElement(n,{swiper:e,style:a,key:"slide-".concat(i)})}))}(E.current,B,y):B.map((function(e,n){return t.cloneElement(e,{swiper:E.current,swiperSlideIndex:n})})),F["wrapper-end"]),ut(O)&&t.createElement(t.Fragment,null,t.createElement("div",{ref:A,className:"swiper-button-prev"}),t.createElement("div",{ref:M,className:"swiper-button-next"})),dt(O)&&t.createElement("div",{ref:L,className:"swiper-scrollbar"}),ct(O)&&t.createElement("div",{ref:P,className:"swiper-pagination"}),F["container-end"]))}));St.displayName="Swiper";var Et=["tag","children","className","swiper","zoom","lazy","virtualIndex","swiperSlideIndex"];function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kt.apply(this,arguments)}var Ct=(0,t.forwardRef)((function(e,n){var i=void 0===e?{}:e,r=i.tag,a=void 0===r?"div":r,o=i.children,s=i.className,l=void 0===s?"":s,u=i.swiper,c=i.zoom,h=i.lazy,p=i.virtualIndex,f=i.swiperSlideIndex,m=te(i,Et),g=(0,t.useRef)(null),v=d((0,t.useState)("swiper-slide"),2),y=v[0],b=v[1],_=d((0,t.useState)(!1),2),x=_[0],w=_[1];function T(e,t,n){t===g.current&&b(n)}bt((function(){if("undefined"!==typeof f&&(g.current.swiperSlideIndex=f),n&&(n.current=g.current),g.current&&u){if(!u.destroyed)return u.on("_slideClass",T),function(){u&&u.off("_slideClass",T)};"swiper-slide"!==y&&b("swiper-slide")}})),bt((function(){u&&g.current&&!u.destroyed&&b(u.getSlideClasses(g.current))}),[u]);var S={isActive:y.indexOf("swiper-slide-active")>=0,isVisible:y.indexOf("swiper-slide-visible")>=0,isPrev:y.indexOf("swiper-slide-prev")>=0,isNext:y.indexOf("swiper-slide-next")>=0},E=function(){return"function"===typeof o?o(S):o};return t.createElement(a,kt({ref:g,className:ht("".concat(y).concat(l?" ".concat(l):"")),"data-swiper-slide-index":p,onLoad:function(){w(!0)}},m),c&&t.createElement(_t.Provider,{value:S},t.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof c?c:void 0},E(),h&&!x&&t.createElement("div",{className:"swiper-lazy-preloader"}))),!c&&t.createElement(_t.Provider,{value:S},E(),h&&!x&&t.createElement("div",{className:"swiper-lazy-preloader"})))}));Ct.displayName="SwiperSlide";var Mt,At,Pt,Lt,It=n.p+"static/media/quote.39adef6977279e4a412c.png",Ot=n.p+"static/media/itemBg.13d1cd3b6f92d5e9303f.png",Rt=a.ZP.div(Mt||(Mt=(0,r.Z)(["\n  width: 80%;\n  margin: 100px auto;\n  \n"]))),Dt=a.ZP.div(At||(At=(0,r.Z)(['\n    color: #edbd55;\n  font-size: 20px;\n  text-align: center;\n  .tips{\n    color: #ffffff;\n    font-size: 40px;\n    margin-top: 20px;\n    font-family: "Lato-Light";\n    text-transform: uppercase;\n  }\n\n  @media (max-width: 1279px) {\n    font-size: 16px;\n    .tips{\n      font-size: 20px;\n    }\n  }\n']))),Nt=a.ZP.div(Pt||(Pt=(0,r.Z)(["\n  width: 100%;\n  margin: 60px auto 0;\n  .swiper {\n    width: 100%;\n    height: 250px;\n\n    padding-bottom: 100px;\n  }\n  .swiper-wrapper{\n    height: 100%;\n  }\n  .swiper-slide {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    -webkit-justify-content: center;\n    justify-content: center;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    -webkit-align-items: center;\n    align-items: center;\n\n  }\n  \n  .normal{\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n    border-radius: 10px;\n    margin: 0 5px;\n    cursor: pointer;\n    background: transparent;\n    border: 2px solid #797979;\n  }\n  .active{\n    background: #797979;\n    border: 2px solid #797979;\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n    border-radius: 10px;\n    margin: 0 5px;\n    cursor: pointer;\n  }\n  .symbol{\n    position: absolute;\n    top: -30px;\n    left: calc( 50% - 30px);\n    z-index: 99;\n    width: 60px;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #edbd55 url(",");\n    background-size: 100% 100%;\n    border-radius: 60px;\n    img{\n      width: 30px;\n    }\n  }\n  .item,.itemActive{\n    padding: 65px 20px 45px;\n    box-sizing: border-box;\n    border-radius: 20px;\n    position: relative;\n    height: 100%;\n    margin-top:60px;\n    box-shadow: 0 0 20px #000;\n  }\n  .item{\n    background: #202020;\n    backdrop-filter: blur(200px);\n  }\n  .itemActive{\n    background: #edbd55 url(",");\n    background-size: 100% 100%;\n    color: #000;\n    .symbol{\n      background: #202020;\n    }\n  }\n \n"])),Ot,Ot),Ut=a.ZP.div(Lt||(Lt=(0,r.Z)(["\n    line-height: 1.5em;\n\n"])));function Bt(){var e=d((0,t.useState)([{content:"Firstly, just create agreement with the help of Designer Web App, currently only PDF file supported, later we will have more file formats."},{content:"Secondly, add the co-signers' wallet addresses to the agreement, and submit the agreement to Designer smart contract which is deployed on Gear Network, currently we use the workshop nodes provided by Gear Technologies."},{content:"Thirdly, notify the co-signers through any communitcation tools as you wish. Or when they open the Designer Web App, they will see the agreements waiting for their signatures."},{content:"Fourthly, the co-signers sign the agreement using the Designer smart contract."},{content:"After all, the co-signers can view the agreements at anytime."}]),1)[0],n=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return(0,L.jsxs)(Rt,{children:[(0,L.jsxs)(Dt,{children:["Introduction",(0,L.jsx)("div",{className:"tips",children:"It's quite simple to use Designer."})]}),(0,L.jsx)(Nt,{children:(0,L.jsx)(St,{spaceBetween:20,slidesPerView:n?1:3,pagination:{bulletClass:"normal",bulletActiveClass:"active",clickable:!0},centeredSlides:2,initialSlide:0,loop:!0,modules:[rt,ot],onSlideChange:function(){return console.log("slide change")},onSwiper:function(e){return console.log(e)},children:e.map((function(e,t){return(0,L.jsx)(Ct,{children:function(t){var n=t.isActive;return(0,L.jsxs)("div",{className:n?"itemActive":"item",children:[(0,L.jsx)("div",{className:"symbol",children:(0,L.jsx)("img",{src:It,alt:""})}),(0,L.jsx)(Ut,{children:e.content})]})}},t)}))})})]})}var Ft=n.p+"static/media/about-img.8f9d992ff264dbe82859.png",jt=n(9611),zt=n(8814);function Ht(e,t,n){return Ht=(0,zt.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&(0,jt.Z)(r,n.prototype),r},Ht.apply(null,arguments)}var Vt=n(2963);var Gt=n(7326),Wt=n(1120);function Zt(){return Zt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,Wt.Z)(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Zt.apply(this,arguments)}var qt=n(136),Xt=n(9388),Yt=n(9851),Kt=n.n(Yt),Qt=n(7203),$t=n.n(Qt),Jt=n(7943),en=n.n(Jt),tn=n(4947),nn=n.n(tn),rn=n(6656),an=n.n(rn),on=n(2755),sn=n.n(on),ln=n(4556),un=n.n(ln),cn="http://example.com",dn=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Kt().location&&Kt().location.href||"");var n="function"===typeof Kt().URL,i=/^\/\//.test(e),r=!Kt().location&&!/\/\//i.test(e);if(n?e=new(Kt().URL)(e,Kt().location||cn):/\/\//i.test(e)||(e=un().buildAbsoluteURL(Kt().location&&Kt().location.href||"",e)),n){var a=new URL(t,e);return r?a.href.slice(cn.length):i?a.href.slice(a.protocol.length):a.href}return un().buildAbsoluteURL(e,t)};function hn(){return hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hn.apply(this,arguments)}var pn=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),fn=function(e){return Kt().atob?Kt().atob(e):Buffer.from(e,"base64").toString("binary")};function mn(e){for(var t=fn(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}var gn,vn=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e;return(0,re.Z)(this,n),(e=t.call(this)).buffer="",e}return(0,ae.Z)(n,[{key:"push",value:function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}]),n}(pn),yn=String.fromCharCode(9),bn=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},_n=function(e){var t={};if(!e)return t;for(var n,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r=i.length;r--;)""!==i[r]&&((n=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),t[n[0]]=n[1]);return t},xn=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e;return(0,re.Z)(this,n),(e=t.call(this)).customParsers=[],e.tagMappers=[],e}return(0,ae.Z)(n,[{key:"push",value:function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((function(e){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e))return n=hn(bn(t[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=_n(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=bn(a.BYTERANGE))}i.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=_n(t[1]),n.attributes.RESOLUTION){var o=n.attributes.RESOLUTION.split("x"),s={};o[0]&&(s.width=parseInt(o[0],10)),o[1]&&(s.height=parseInt(o[1],10)),n.attributes.RESOLUTION=s}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=_n(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=_n(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=_n(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"skip"}).attributes=_n(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(yn)),void i.trigger("data",n);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part"}).attributes=_n(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=bn(n.attributes.BYTERANGE)),void i.trigger("data",n);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"server-control"}).attributes=_n(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part-inf"}).attributes=_n(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=_n(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void i.trigger("data",n);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=_n(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void i.trigger("data",n);i.trigger("data",{type:"tag",data:e.slice(4)})}}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))}},{key:"addParser",value:function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!==typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0}))}},{key:"addTagMapper",value:function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))}}]),n}(pn),wn=function(e){var t={};return Object.keys(e).forEach((function(n){var i;t[(i=n,i.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[n]})),t},Tn=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var r="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",s=n&&3*n,l=i&&2*i;n&&!t.hasOwnProperty(a)&&(t[a]=s,this.trigger("info",{message:"".concat(r," defaulting HOLD-BACK to targetDuration * 3 (").concat(s,").")})),s&&t[a]<s&&(this.trigger("warn",{message:"".concat(r," clamping HOLD-BACK (").concat(t[a],") to targetDuration * 3 (").concat(s,")")}),t[a]=s),i&&!t.hasOwnProperty(o)&&(t[o]=3*i,this.trigger("info",{message:"".concat(r," defaulting PART-HOLD-BACK to partTargetDuration * 3 (").concat(t[o],").")})),i&&t[o]<l&&(this.trigger("warn",{message:"".concat(r," clamping PART-HOLD-BACK (").concat(t[o],") to partTargetDuration * 2 (").concat(l,").")}),t[o]=l)}},Sn=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e;(0,re.Z)(this,n),(e=t.call(this)).lineStream=new vn,e.parseStream=new xn,e.lineStream.pipe(e.parseStream);var i,r,a=(0,Gt.Z)(e),o=[],s={},l=!1,u=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var h=0,p=0;return e.on("end",(function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&i&&(s.map=i),!s.key&&r&&(s.key=r),s.timeline||"number"!==typeof d||(s.timeline=d),e.manifest.preloadSegment=s)})),e.parseStream.on("data",(function(e){var t,n;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=h)),"offset"in e&&(s.byterange=t,t.offset=e.offset),h=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:mn(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!==typeof e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,d=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange),r&&(i.key=r)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes?(s.attributes||(s.attributes={}),hn(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{},t=i[e.attributes["GROUP-ID"]],(n={default:/yes/i.test(e.attributes.DEFAULT)}).default?n.autoselect=!0:n.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(n.language=e.attributes.LANGUAGE),e.attributes.URI&&(n.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(n.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(n.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(n.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){d+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,Tn.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data},skip:function(){this.manifest.skip=wn(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;l=!0;var n=this.manifest.segments.length,i=wn(e.attributes);s.parts=s.parts||[],s.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=p),p=i.byterange.offset+i.byterange.length);var r=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #".concat(r," for segment #").concat(n),e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #".concat(n," lacks required attribute(s): LAST-PART")})}))},"server-control":function(){var t=this.manifest.serverControl=wn(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Tn.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=wn(e.attributes),i=n.type&&"PART"===n.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?p:0,i&&(p=n.byterange.offset+n.byterange.length)));var r=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #".concat(r," for segment #").concat(t),e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<s.preloadHints.length-1;a++){var o=s.preloadHints[a];o.type&&(o.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #".concat(r," for segment #").concat(t," has the same TYPE ").concat(n.type," as preload hint #").concat(a)}))}},"rendition-report":function(){var t=wn(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];l&&i.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #".concat(n),e.attributes,i)},"part-inf":function(){this.manifest.partInf=wn(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Tn.call(this,this.manifest)}}[e.tagType]||u).call(a)},uri:function(){s.uri=e.uri,o.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),r&&(s.key=r),s.timeline=d,i&&(s.map=i),p=0,s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(a)})),e}return(0,ae.Z)(n,[{key:"warnOnMissingAttributes_",value:function(e,t,n){var i=[];n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:"".concat(e," lacks required attribute(s): ").concat(i.join(", "))})}},{key:"push",value:function(e){this.lineStream.push(e)}},{key:"end",value:function(){this.lineStream.push("\n"),this.trigger("end")}},{key:"addParser",value:function(e){this.parseStream.addParser(e)}},{key:"addTagMapper",value:function(e){this.parseStream.addTagMapper(e)}}]),n}(pn),En={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},kn=["video","audio","text"],Cn=["Video","Audio","Text"],Mn=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},An=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),kn.forEach((function(i){var r=En[i].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=i;var a=e.substring(0,r[1].length),o=e.replace(a,"");n.push({type:a,details:o,mediaType:i})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},Pn=function(e){return void 0===e&&(e=""),En.audio.test(e.trim().toLowerCase())},Ln=function(e){if(e&&"string"===typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return Mn(e.trim())})),i="video";1===n.length&&Pn(n[0])?i="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),En.text.test(t.trim().toLowerCase()))&&(i="application");var r="mp4";return n.every((function(e){return En.mp4.test(e)}))?r="mp4":n.every((function(e){return En.webm.test(e)}))?r="webm":n.every((function(e){return En.ogg.test(e)}))&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},In=function(e){return void 0===e&&(e=""),Kt().MediaSource&&Kt().MediaSource.isTypeSupported&&Kt().MediaSource.isTypeSupported(Ln(e))||!1},On=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<Cn.length;t++){if(En["muxer"+Cn[t]].test(e))return!0}return!1}))},Rn="mp4a.40.2",Dn=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Nn=/^application\/dash\+xml/i,Un=function(e){return Dn.test(e)?"hls":Nn.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},Bn=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Fn=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||Bn(e)||e instanceof ArrayBuffer||(e="number"!==typeof e||"number"===typeof e&&e!==e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},jn=Kt().BigInt||Number,zn=[jn("0x1"),jn("0x100"),jn("0x10000"),jn("0x1000000"),jn("0x100000000"),jn("0x10000000000"),jn("0x1000000000000"),jn("0x100000000000000"),jn("0x10000000000000000")],Hn=(function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}(),function(e,t){var n=void 0===t?{}:t,i=n.signed,r=void 0!==i&&i,a=n.le,o=void 0!==a&&a;e=Fn(e);var s=o?"reduce":"reduceRight",l=(e[s]?e[s]:Array.prototype[s]).call(e,(function(t,n,i){var r=o?i:Math.abs(i+1-e.length);return t+jn(n)*zn[r]}),jn(0));if(r){var u=zn[e.length]/jn(2)-jn(1);(l=jn(l))>u&&(l-=u,l-=u,l-=jn(2))}return Number(l)}),Vn=function(e,t){var n=(void 0===t?{}:t).le,i=void 0!==n&&n;("bigint"!==typeof e&&"number"!==typeof e||"number"===typeof e&&e!==e)&&(e=0),e=jn(e);for(var r,a=(r=e,Math.ceil(function(e){return e.toString(2).length}(r)/8)),o=new Uint8Array(new ArrayBuffer(a)),s=0;s<a;s++){var l=i?s:Math.abs(s+1-o.length);o[l]=Number(e/zn[s]&jn(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=0===s?1:2)}return o},Gn=function(e,t){if("string"!==typeof e&&e&&"function"===typeof e.toString&&(e=e.toString()),"string"!==typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},Wn=function(e,t,n){var i=void 0===n?{}:n,r=i.offset,a=void 0===r?0:r,o=i.mask,s=void 0===o?[]:o;e=Fn(e);var l=(t=Fn(t)).every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&l.call(t,(function(t,n){return t===(s[n]?s[n]&e[a+n]:e[a+n])}))},Zn="http://example.com",qn=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Kt().location&&Kt().location.href||"");var n="function"===typeof Kt().URL,i=/^\/\//.test(e),r=!Kt().location&&!/\/\//i.test(e);if(n?e=new(Kt().URL)(e,Kt().location||Zn):/\/\//i.test(e)||(e=un().buildAbsoluteURL(Kt().location&&Kt().location.href||"",e)),n){var a=new URL(t,e);return r?a.href.slice(Zn.length):i?a.href.slice(a.protocol.length):a.href}return un().buildAbsoluteURL(e,t)},Xn=n(7542),Yn=function(e){return!!e&&"object"===typeof e},Kn=function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce((function(t,n){return"object"!==typeof n||Object.keys(n).forEach((function(i){Array.isArray(t[i])&&Array.isArray(n[i])?t[i]=t[i].concat(n[i]):Yn(t[i])&&Yn(n[i])?t[i]=e(t[i],n[i]):t[i]=n[i]})),t}),{})},Qn=function(e){return Object.keys(e).map((function(t){return e[t]}))},$n=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},Jn=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},ei="INVALID_NUMBER_OF_PERIOD",ti="DASH_EMPTY_MANIFEST",ni="DASH_INVALID_XML",ii="NO_BASE_URL",ri="SEGMENT_TIME_UNSPECIFIED",ai="UNSUPPORTED_UTC_TIMING_SCHEME",oi=function(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.source,r=void 0===i?"":i,a=e.range,o=void 0===a?"":a,s=e.indexRange,l=void 0===s?"":s,u={uri:r,resolvedUri:qn(n||"",r)};if(o||l){var c,d=(o||l).split("-"),h=Kt().BigInt?Kt().BigInt(d[0]):parseInt(d[0],10),p=Kt().BigInt?Kt().BigInt(d[1]):parseInt(d[1],10);h<Number.MAX_SAFE_INTEGER&&"bigint"===typeof h&&(h=Number(h)),p<Number.MAX_SAFE_INTEGER&&"bigint"===typeof p&&(p=Number(p)),"bigint"===typeof(c="bigint"===typeof p||"bigint"===typeof h?Kt().BigInt(p)-Kt().BigInt(h)+Kt().BigInt(1):p-h+1)&&c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),u.byterange={length:c,offset:h}}return u},si=function(e){return e&&"number"!==typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},li={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration,a=e.periodDuration,o=si(e.endNumber),s=t/i;return"number"===typeof o?{start:0,end:o}:"number"===typeof a?{start:0,end:a/s}:{start:0,end:r/s}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,o=e.duration,s=e.periodStart,l=void 0===s?0:s,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=si(e.endNumber),f=(t+n)/1e3,m=i+l,g=f+c-m,v=Math.ceil(g*a/o),y=Math.floor((f-m-h)*a/o),b=Math.floor((f-m)*a/o);return{start:Math.max(0,y),end:"number"===typeof p?p:Math.min(v,b)}}},ui=function(e){var t=e.type,n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodDuration,o=e.sourceDuration,s=li[t](e),l=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(s.start,s.end).map(function(e){return function(t){var n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodStart,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:n/r,timeline:a,time:t*n}}}(e));if("static"===t){var u=l.length-1,c="number"===typeof a?a:o;l[u].duration=c-n/r*u}return l},ci=function(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,a=e.indexRange,o=void 0===a?"":a,s=e.periodStart,l=e.presentationTime,u=e.number,c=void 0===u?0:u,d=e.duration;if(!t)throw new Error(ii);var h=oi({baseUrl:t,source:i.sourceURL,range:i.range}),p=oi({baseUrl:t,source:t,indexRange:o});if(p.map=h,d){var f=ui(e);f.length&&(p.duration=f[0].duration,p.timeline=f[0].timeline)}else r&&(p.duration=r,p.timeline=s);return p.presentationTime=l||s,p.number=c,[p]},di=function(e,t,n){var i,r=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,o=e.timeline||0,s=e.sidx.byterange,l=s.offset+s.length,u=t.timescale,c=t.references.filter((function(e){return 1!==e.referenceType})),d=[],h=e.endList?"static":"dynamic",p=e.sidx.timeline,f=p,m=e.mediaSequence||0;i="bigint"===typeof t.firstOffset?Kt().BigInt(l)+t.firstOffset:l+t.firstOffset;for(var g=0;g<c.length;g++){var v=t.references[g],y=v.referencedSize,b=v.subsegmentDuration,_=void 0;_="bigint"===typeof i?i+Kt().BigInt(y)-Kt().BigInt(1):i+y-1;var x="".concat(i,"-").concat(_),w=ci({baseUrl:n,timescale:u,timeline:o,periodStart:p,presentationTime:f,number:m,duration:b,sourceDuration:a,indexRange:x,type:h})[0];r&&(w.map=r),d.push(w),i+="bigint"===typeof i?Kt().BigInt(y):y,f+=b/u,m++}return e.segments=d,e},hi=["AUDIO","SUBTITLES"],pi=function(e){return(t=e,n=function(e){return e.timeline},Qn(t.reduce((function(e,t){return t.forEach((function(t){e[n(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,n},fi=function(e){var t,n,i=[];return t=e,n=function(e,t,n,r){i=i.concat(e.playlists||[])},hi.forEach((function(e){for(var i in t.mediaGroups[e])for(var r in t.mediaGroups[e][i]){var a=t.mediaGroups[e][i][r];n(a,e,i,r)}})),i},mi=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))},gi=function(e){var t=e.oldManifest,n=e.newManifest,i=t.playlists.concat(fi(t)),r=n.playlists.concat(fi(n));return n.timelineStarts=pi([t.timelineStarts,n.timelineStarts]),function(e){var t=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach((function(e){e.discontinuitySequence=i.findIndex((function(t){return t.timeline===e.timeline}));var n=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(n&&!e.sidx){var r=e.segments[0],a=n.segments.findIndex((function(e){return Math.abs(e.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===a)return mi({playlist:e,mediaSequence:n.mediaSequence+n.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!n.segments.length&&e.timeline>n.timeline||n.segments.length&&e.timeline>n.segments[n.segments.length-1].timeline)&&e.discontinuitySequence--);n.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),mi({playlist:e,mediaSequence:n.segments[a].number})}}))}({oldPlaylists:i,newPlaylists:r,timelineStarts:n.timelineStarts}),n},vi=function(e){return e&&e.uri+"-"+function(e){var t;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?Kt().BigInt(e.offset)+Kt().BigInt(e.length)-Kt().BigInt(1):e.offset+e.length-1,"".concat(e.offset,"-").concat(t)}(e.byterange)},yi=function(e){return Qn(e.reduce((function(e,t){var n=t.attributes.id+(t.attributes.lang||"");if(e[n]){var i;if(t.segments)t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,ie(t.segments));t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)}else e[n]=t,e[n].attributes.timelineStarts=[];return e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){var t,n;return e.discontinuityStarts=(t=e.segments||[],n="discontinuity",t.reduce((function(e,t,i){return t[n]&&e.push(i),e}),[])),e}))},bi=function(e,t){var n=vi(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&di(e,i,e.sidx.resolvedUri),e},_i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object.keys(t).length)return e;for(var n in e)e[n]=bi(e[n],t);return e},xi=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.reduce((function(e,r){var a=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"",s=r.attributes.label||"main";if(o&&!r.attributes.label){var l=a?" (".concat(a,")"):"";s="".concat(r.attributes.lang).concat(l)}e[s]||(e[s]={language:o,autoselect:!0,default:"main"===a,playlists:[],uri:""});var u=bi(function(e,t){var n=e.attributes,i=e.segments,r=e.sidx,a=e.mediaSequence,o=e.discontinuitySequence,s=e.discontinuityStarts,l={attributes:$({NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},"PROGRAM-ID",1),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:o,discontinuityStarts:s,timelineStarts:n.timelineStarts,mediaSequence:a,segments:i};return n.contentProtection&&(l.contentProtection=n.contentProtection),r&&(l.sidx=r),t&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l}(r,i),n);return e[s].playlists.push(u),"undefined"===typeof t&&"main"===a&&((t=r).default=!0),e}),{});t||(r[Object.keys(r)[0]].default=!0);return r},wi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,n){var i=n.attributes.label||n.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(bi(function(e){var t=e.attributes,n=e.segments,i=e.mediaSequence,r=e.discontinuityStarts,a=e.discontinuitySequence;"undefined"===typeof n&&(n=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);var o=$({NAME:t.id,BANDWIDTH:t.bandwidth},"PROGRAM-ID",1);return t.codecs&&(o.CODECS=t.codecs),{attributes:o,uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:r,discontinuitySequence:a,mediaSequence:i,segments:n}}(n),t)),e}),{})},Ti=function(e){var t=e.attributes,n=e.segments,i=e.sidx,r=e.discontinuityStarts,a={attributes:$({NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth},"PROGRAM-ID",1),uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuityStarts:r,timelineStarts:t.timelineStarts,segments:n};return t.frameRate&&(a.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(a.contentProtection=t.contentProtection),i&&(a.sidx=i),a},Si=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},Ei=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},ki=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},Ci=function(e){return e?Object.keys(e).reduce((function(t,n){var i=e[n];return t.concat(i.playlists)}),[]):[]},Mi=function(e,t,n){var i=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,s=void 0===o?1:o,l=e.periodStart,u=void 0===l?0:l,c=e.minimumUpdatePeriod,d=(i+r)/1e3+(void 0===c?0:c)-(a+u);return Math.ceil((d*s-t)/n)},Ai=function(e,t){for(var n=e.type,i=e.minimumUpdatePeriod,r=void 0===i?0:i,a=e.media,o=void 0===a?"":a,s=e.sourceDuration,l=e.timescale,u=void 0===l?1:l,c=e.startNumber,d=void 0===c?1:c,h=e.periodStart,p=[],f=-1,m=0;m<t.length;m++){var g=t[m],v=g.d,y=g.r||0,b=g.t||0;f<0&&(f=b),b&&b>f&&(f=b);var _=void 0;if(y<0){var x=m+1;_=x===t.length?"dynamic"===n&&r>0&&o.indexOf("$Number$")>0?Mi(e,f,v):(s*u-f)/v:(t[x].t-f)/v}else _=y+1;for(var w=d+p.length+_,T=d+p.length;T<w;)p.push({number:T,duration:v/u,time:f,timeline:h}),f+=v,T++}return p},Pi=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Li=function(e,t){return e.replace(Pi,function(e){return function(t,n,i,r){if("$$"===t)return"$";if("undefined"===typeof e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(r=i?parseInt(r,10):1,a.length>=r?a:"".concat(new Array(r-a.length+1).join("0")).concat(a))}}(t))},Ii=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,r=void 0===i?{sourceURL:"",range:""}:i,a=oi({baseUrl:e.baseUrl,source:Li(r.sourceURL,n),range:r.range}),o=function(e,t){return e.duration||t?e.duration?ui(e):Ai(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return o.map((function(t){n.Number=t.number,n.Time=t.time;var i=Li(e.media||"",n),r=e.timescale||1,o=e.presentationTimeOffset||0,s=e.periodStart+(t.time-o)/r;return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:qn(e.baseUrl||"",i),map:a,number:t.number,presentationTime:s}}))},Oi=function(e,t){var n=e.duration,i=e.segmentUrls,r=void 0===i?[]:i,a=e.periodStart;if(!n&&!t||n&&t)throw new Error(ri);var o,s=r.map((function(t){return function(e,t){var n=e.baseUrl,i=e.initialization,r=void 0===i?{}:i,a=oi({baseUrl:n,source:r.sourceURL,range:r.range}),o=oi({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=a,o}(e,t)}));return n&&(o=ui(e)),t&&(o=Ai(e,t)),o.map((function(t,n){if(s[n]){var i=s[n],r=e.timescale||1,o=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=a+(t.time-o)/r,i}})).filter((function(e){return e}))},Ri=function(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=Ii,t=Kn(i,r.template)):r.base?(n=ci,t=Kn(i,r.base)):r.list&&(n=Oi,t=Kn(i,r.list));var a={attributes:i};if(!n)return a;var o=n(t,r.segmentTimeline);if(t.duration){var s=t,l=s.duration,u=s.timescale,c=void 0===u?1:u;t.duration=l/c}else o.length?t.duration=o.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=o,r.base&&t.indexRange&&(a.sidx=o[0],a.segments=[]),a},Di=function(e,t){return Jn(e.childNodes).filter((function(e){return e.tagName===t}))},Ni=function(e){return e.textContent.trim()},Ui=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=d(t.slice(1),6),i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(o||0)+60*parseFloat(s||0)+parseFloat(l||0)},Bi={mediaPresentationDuration:function(e){return Ui(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Ui(e)},suggestedPresentationDelay:function(e){return Ui(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Ui(e)},start:function(e){return Ui(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return function(e){return parseFloat(e.split("/").reduce((function(e,t){return e/t})))}(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Ui(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},presentationTime:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Fi=function(e){return e&&e.attributes?Jn(e.attributes).reduce((function(e,t){var n=Bi[t.name]||Bi.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},ji={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},zi=function(e,t){return t.length?$n(e.map((function(e){return t.map((function(t){return qn(e,Ni(t))}))}))):e},Hi=function(e){var t=Di(e,"SegmentTemplate")[0],n=Di(e,"SegmentList")[0],i=n&&Di(n,"SegmentURL").map((function(e){return Kn({tag:"SegmentURL"},Fi(e))})),r=Di(e,"SegmentBase")[0],a=n||t,o=a&&Di(a,"SegmentTimeline")[0],s=n||r||t,l=s&&Di(s,"Initialization")[0],u=t&&Fi(t);u&&l?u.initialization=l&&Fi(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,segmentTimeline:o&&Di(o,"S").map((function(e){return Fi(e)})),list:n&&Kn(Fi(n),{segmentUrls:i,initialization:Fi(l)}),base:r&&Kn(Fi(r),{initialization:Fi(l)})};return Object.keys(c).forEach((function(e){c[e]||delete c[e]})),c},Vi=function(e){return $n(Di(e.node,"EventStream").map((function(t){var n=Fi(t),i=n.schemeIdUri;return Di(t,"Event").map((function(t){var r=Fi(t),a=r.presentationTime||0,o=n.timescale||1,s=r.duration||0,l=a/o+e.attributes.start;return{schemeIdUri:i,value:n.value,id:r.id,start:l,end:l+s/o,messageData:r.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}}))})))},Gi=function(e,t,n){return function(i){var r,a=Fi(i),o=zi(t,Di(i,"BaseURL")),s=Di(i,"Role")[0],l={role:Fi(s)},u=Kn(e,a,l),c=Di(i,"Accessibility")[0],h="urn:scte:dash:cc:cea-608:2015"===(r=Fi(c)).schemeIdUri?("string"!==typeof r.value?[]:r.value.split(";")).map((function(e){var t,n;if(n=e,/^CC\d=/.test(e)){var i=d(e.split("="),2);t=i[0],n=i[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!==typeof r.value?[]:r.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var n=d(e.split("="),2),i=n[0],r=n[1],a=void 0===r?"":r;t.channel=i,t.language=e,a.split(",").forEach((function(e){var n=d(e.split(":"),2),i=n[0],r=n[1];"lang"===i?t.language=r:"er"===i?t.easyReader=Number(r):"war"===i?t.aspectRatio=Number(r):"3D"===i&&(t["3D"]=Number(r))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;h&&(u=Kn(u,{captionServices:h}));var p=Di(i,"Label")[0];if(p&&p.childNodes.length){var f=p.childNodes[0].nodeValue.trim();u=Kn(u,{label:f})}var m=Di(i,"ContentProtection").reduce((function(e,t){var n=Fi(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var i=ji[n.schemeIdUri];if(i){e[i]={attributes:n};var r=Di(t,"cenc:pssh")[0];if(r){var a=Ni(r);e[i].pssh=a&&mn(a)}}return e}),{});Object.keys(m).length&&(u=Kn(u,{contentProtection:m}));var g=Hi(i),v=Di(i,"Representation"),y=Kn(n,g);return $n(v.map(function(e,t,n){return function(i){var r=Di(i,"BaseURL"),a=zi(t,r),o=Kn(e,Fi(i)),s=Hi(i);return a.map((function(e){return{segmentInfo:Kn(n,s),attributes:Kn(o,{baseUrl:e})}}))}}(u,o,y)))}},Wi=function(e,t){return function(n,i){var r=zi(t,Di(n.node,"BaseURL")),a=Kn(e,{periodStart:n.attributes.start});"number"===typeof n.attributes.duration&&(a.periodDuration=n.attributes.duration);var o=Di(n.node,"AdaptationSet"),s=Hi(n.node);return $n(o.map(Gi(a,r,s)))}},Zi=function(e){if(""===e)throw new Error(ti);var t,n,i=new Xn.DOMParser;try{n=(t=i.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(r){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(ni);return n},qi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.manifestUri,i=void 0===n?"":n,r=t.NOW,a=void 0===r?Date.now():r,o=t.clientOffset,s=void 0===o?0:o,l=Di(e,"Period");if(!l.length)throw new Error(ei);var u=Di(e,"Location"),c=Fi(e),d=zi([i],Di(e,"BaseURL"));c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=a,c.clientOffset=s,u.length&&(c.locations=u.map(Ni));var h=[];return l.forEach((function(e,t){var n=Fi(e),i=h[t-1];n.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return"number"===typeof t.start?t.start:n&&"number"===typeof n.start&&"number"===typeof n.duration?n.start+n.duration:n||"static"!==i?null:0}({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:c.type}),h.push({node:e,attributes:n})})),{locations:c.locations,representationInfo:$n(h.map(Wi(c,d))),eventStream:$n(h.map(Vi))}}(Zi(e),t);return function(e){var t,n=e.dashPlaylists,i=e.locations,r=e.sidxMapping,a=void 0===r?{}:r,o=e.previousManifest,s=e.eventStream;if(!n.length)return{};var l=n[0].attributes,u=l.sourceDuration,c=l.type,d=l.suggestedPresentationDelay,h=l.minimumUpdatePeriod,p=yi(n.filter(Si)).map(Ti),f=yi(n.filter(Ei)),m=yi(n.filter(ki)),g=n.map((function(e){return e.attributes.captionServices})).filter(Boolean),v={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},$(t,"CLOSED-CAPTIONS",{}),$(t,"SUBTITLES",{}),t),uri:"",duration:u,playlists:_i(p,a)};h>=0&&(v.minimumUpdatePeriod=1e3*h),i&&(v.locations=i),"dynamic"===c&&(v.suggestedPresentationDelay=d),s&&s.length>0&&(v.eventStream=s);var y,b,_=0===v.playlists.length,x=f.length?xi(f,a,_):null,w=m.length?wi(m,a):null,T=p.concat(Ci(x),Ci(w)),S=T.map((function(e){return e.timelineStarts}));return v.timelineStarts=pi(S),y=T,b=v.timelineStarts,y.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=b.findIndex((function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),x&&(v.mediaGroups.AUDIO.audio=x),w&&(v.mediaGroups.SUBTITLES.subs=w),g.length&&(v.mediaGroups["CLOSED-CAPTIONS"].cc=g.reduce((function(e,t){return t?(t.forEach((function(t){var n=t.channel,i=t.language;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e}),{})),o?gi({oldManifest:o,newManifest:v}):v}({dashPlaylists:n.representationInfo.map(Ri),locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:n.eventStream})},Xi=function(e){return function(e){var t=Di(e,"UTCTiming")[0];if(!t)return null;var n=Fi(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error(ai)}return n}(Zi(e))},Yi=n(8857),Ki=n.n(Yi),Qi=Fn([73,68,51]),$i=function e(t,n){return void 0===n&&(n=0),(t=Fn(t)).length-n<10||!Wn(t,Qi,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=Fn(e))[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?i+20:i+10}(t,n),e(t,n))},Ji=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"===typeof e?Gn(e):e}),er=function(e){e=Fn(e);for(var t=[],n=0;e.length>n;){var i=e[n],r=0,a=0,o=e[++a];for(a++;128&o;)r=(127&o)<<7,o=e[a],a++;r+=127&o;for(var s=0;s<gn.length;s++){var l=gn[s],u=l.id,c=l.parser;if(i===u){t.push(c(e.subarray(a,a+r)));break}}n+=r+a}return t};gn=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Fn(e));try{return decodeURIComponent(escape(t))}catch(n){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=er(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:er(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var tr=function e(t,n,i){void 0===i&&(i=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return Ji(e)})):[Ji(e)]}(n),t=Fn(t);var r=[];if(!n.length)return r;for(var a=0;a<t.length;){var o=(t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3])>>>0,s=t.subarray(a+4,a+8);if(0===o)break;var l=a+o;if(l>t.length){if(i)break;l=t.length}var u=t.subarray(a+8,l);Wn(s,n[0])&&(1===n.length?r.push(u):r.push.apply(r,e(u,n.slice(1),i))),a=l}return r},nr={EBML:Fn([26,69,223,163]),DocType:Fn([66,130]),Segment:Fn([24,83,128,103]),SegmentInfo:Fn([21,73,169,102]),Tracks:Fn([22,84,174,107]),Track:Fn([174]),TrackNumber:Fn([215]),DefaultDuration:Fn([35,227,131]),TrackEntry:Fn([174]),TrackType:Fn([131]),FlagDefault:Fn([136]),CodecID:Fn([134]),CodecPrivate:Fn([99,162]),VideoTrack:Fn([224]),AudioTrack:Fn([225]),Cluster:Fn([31,67,182,117]),Timestamp:Fn([231]),TimestampScale:Fn([42,215,177]),BlockGroup:Fn([160]),BlockDuration:Fn([155]),Block:Fn([161]),SimpleBlock:Fn([163])},ir=[128,64,32,16,8,4,2,1],rr=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<ir.length&&!(e&ir[n]);n++)t++;return t}(e[t]),a=e.subarray(t,t+r);return n&&((a=Array.prototype.slice.call(e,t,t+r))[0]^=ir[r-1]),{length:r,value:Hn(a,{signed:i}),bytes:a}},ar=function e(t){return"string"===typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"===typeof t?Vn(t):t},or=function e(t,n,i){if(i>=n.length)return n.length;var r=rr(n,i,!1);if(Wn(t.bytes,r.bytes))return i;var a=rr(n,i+r.length);return e(t,n,i+a.length+a.value+r.length)},sr=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return ar(e)})):[ar(e)]}(n),t=Fn(t);var i=[];if(!n.length)return i;for(var r=0;r<t.length;){var a=rr(t,r,!1),o=rr(t,r+a.length),s=r+a.length+o.length;127===o.value&&(o.value=or(a,t,s),o.value!==t.length&&(o.value-=s));var l=s+o.value>t.length?t.length:s+o.value,u=t.subarray(s,l);Wn(n[0],a.bytes)&&(1===n.length?i.push(u):i=i.concat(e(u,n.slice(1)))),r+=a.length+o.length+u.length}return i},lr=Fn([0,0,0,1]),ur=Fn([0,0,1]),cr=Fn([0,0,3]),dr=function(e){for(var t=[],n=1;n<e.length-2;)Wn(e.subarray(n,n+3),cr)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),r[n]=e[a];return r},hr=function(e,t,n,i){void 0===i&&(i=1/0),e=Fn(e),n=[].concat(n);for(var r,a=0,o=0;a<e.length&&(o<i||r);){var s=void 0;if(Wn(e.subarray(a),lr)?s=4:Wn(e.subarray(a),ur)&&(s=3),s){if(o++,r)return dr(e.subarray(r,a));var l=void 0;"h264"===t?l=31&e[a+s]:"h265"===t&&(l=e[a+s]>>1&63),-1!==n.indexOf(l)&&(r=a+s),a+=s+("h264"===t?1:2)}else a++}return e.subarray(0,0)},pr={webm:Fn([119,101,98,109]),matroska:Fn([109,97,116,114,111,115,107,97]),flac:Fn([102,76,97,67]),ogg:Fn([79,103,103,83]),ac3:Fn([11,119]),riff:Fn([82,73,70,70]),avi:Fn([65,86,73]),wav:Fn([87,65,86,69]),"3gp":Fn([102,116,121,112,51,103]),mp4:Fn([102,116,121,112]),fmp4:Fn([115,116,121,112]),mov:Fn([102,116,121,112,113,116]),moov:Fn([109,111,111,118]),moof:Fn([109,111,111,102])},fr={aac:function(e){var t=$i(e);return Wn(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=$i(e);return Wn(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=sr(e,[nr.EBML,nr.DocType])[0];return Wn(t,pr.webm)},mkv:function(e){var t=sr(e,[nr.EBML,nr.DocType])[0];return Wn(t,pr.matroska)},mp4:function(e){return!fr["3gp"](e)&&!fr.mov(e)&&(!(!Wn(e,pr.mp4,{offset:4})&&!Wn(e,pr.fmp4,{offset:4}))||(!(!Wn(e,pr.moof,{offset:4})&&!Wn(e,pr.moov,{offset:4}))||void 0))},mov:function(e){return Wn(e,pr.mov,{offset:4})},"3gp":function(e){return Wn(e,pr["3gp"],{offset:4})},ac3:function(e){var t=$i(e);return Wn(e,pr.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=$i(e);return Wn(e,pr.flac,{offset:t})},ogg:function(e){return Wn(e,pr.ogg)},avi:function(e){return Wn(e,pr.riff)&&Wn(e,pr.avi,{offset:8})},wav:function(e){return Wn(e,pr.riff)&&Wn(e,pr.wav,{offset:8})},h264:function(e){return function(e,t,n){return hr(e,"h264",t,n)}(e,7,3).length},h265:function(e){return function(e,t,n){return hr(e,"h265",t,n)}(e,[32,33],3).length}},mr=Object.keys(fr).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);mr.forEach((function(e){var t=fr[e];fr[e]=function(e){return t(Fn(e))}}));for(var gr,vr=fr,yr=function(e){e=Fn(e);for(var t=0;t<mr.length;t++){var n=mr[t];if(vr[n](e))return n}return""},br=n(3474),_r="8.0.4",xr={},wr=function(e,t){return xr[e]=xr[e]||[],t&&(xr[e]=xr[e].concat(t)),xr[e]},Tr=function(e,t){var n=wr(e).indexOf(t);return!(n<=-1)&&(xr[e]=xr[e].slice(),xr[e].splice(n,1),!0)},Sr={prefixed:!0},Er=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],kr=Er[0],Cr=0;Cr<Er.length;Cr++)if(Er[Cr][1]in $t()){gr=Er[Cr];break}if(gr){for(var Mr=0;Mr<gr.length;Mr++)Sr[kr[Mr]]=gr[Mr];Sr.prefixed=gr[0]!==kr[0]}var Ar=[],Pr=function(e,t){return function(n,i,r){var a=t.levels[i],o=new RegExp("^(".concat(a,")$"));if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),Ar){Ar.push([].concat(r));var s=Ar.length-1e3;Ar.splice(0,s>0?s:0)}if(Kt().console){var l=Kt().console[n];l||"debug"!==n||(l=Kt().console.info||Kt().console.log),l&&a&&o.test(n)&&l[Array.isArray(r)?"apply":"call"](Kt().console,r)}}};var Lr=function e(t){var n,i="info",r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n("log",i,t)};return n=Pr(t,r),r.createLogger=function(n){return e(t+": "+n)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(e){if("string"===typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'.concat(e,'" in not a valid log level'));i=e}return i},(r.history=function(){return Ar?[].concat(Ar):[]}).filter=function(e){return(Ar||[]).filter((function(t){return new RegExp(".*".concat(e,".*")).test(t[0])}))},r.history.clear=function(){Ar&&(Ar.length=0)},r.history.disable=function(){null!==Ar&&(Ar.length=0,Ar=null)},r.history.enable=function(){null===Ar&&(Ar=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("error",i,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("warn",i,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("debug",i,t)},r}("VIDEOJS"),Ir=Lr.createLogger,Or=Object.prototype.toString,Rr=function(e){return Ur(e)?Object.keys(e):[]};function Dr(e,t){Rr(e).forEach((function(n){return t(e[n],n)}))}function Nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rr(e).reduce((function(n,i){return t(n,e[i],i)}),n)}function Ur(e){return!!e&&"object"===typeof e}function Br(e){return Ur(e)&&"[object Object]"===Or.call(e)&&e.constructor===Object}function Fr(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){t&&Dr(t,(function(t,n){Br(t)?(Br(e[n])||(e[n]={}),e[n]=Fr(e[n],t)):e[n]=t}))})),e}function jr(e,t,n){var i=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},r={configurable:!0,enumerable:!0,get:function(){var e=n();return i(e),e}};return(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(r.set=i),Object.defineProperty(e,t,r)}var zr,Hr=Object.freeze({__proto__:null,each:Dr,reduce:Nr,isObject:Ur,isPlain:Br,merge:Fr,defineLazyProperty:jr}),Vr=!1,Gr=null,Wr=!1,Zr=!1,qr=!1,Xr=!1,Yr=!1,Kr=null,Qr=null,$r=null,Jr=!1,ea=!1,ta=!1,na=!1,ia=Boolean(ca()&&("ontouchstart"in Kt()||Kt().navigator.maxTouchPoints||Kt().DocumentTouch&&Kt().document instanceof Kt().DocumentTouch)),ra=Kt().navigator&&Kt().navigator.userAgentData;if(ra&&(Wr="Android"===ra.platform,qr=Boolean(ra.brands.find((function(e){return"Microsoft Edge"===e.brand}))),Xr=Boolean(ra.brands.find((function(e){return"Chromium"===e.brand}))),Yr=!qr&&Xr,Kr=Qr=(ra.brands.find((function(e){return"Chromium"===e.brand}))||{}).version||null,ea="Windows"===ra.platform),!Xr){var aa=Kt().navigator&&Kt().navigator.userAgent||"";Vr=/iPod/i.test(aa),Gr=function(){var e=aa.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Wr=/Android/i.test(aa),zr=function(){var e=aa.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Zr=/Firefox/i.test(aa),qr=/Edg/i.test(aa),Xr=/Chrome/i.test(aa)||/CriOS/i.test(aa),Yr=!qr&&Xr,Kr=Qr=function(){var e=aa.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),$r=function(){var e=/MSIE\s(\d+)\.\d/.exec(aa),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(aa)&&/rv:11.0/.test(aa)&&(t=11),t}(),Jr=/Safari/i.test(aa)&&!Yr&&!Wr&&!qr,ea=/Windows/i.test(aa),ta=/iPad/i.test(aa)||Jr&&ia&&!/iPhone/i.test(aa),na=/iPhone/i.test(aa)&&!ta}var oa=na||ta||Vr,sa=(Jr||oa)&&!Yr,la=Object.freeze({__proto__:null,get IS_IPOD(){return Vr},get IOS_VERSION(){return Gr},get IS_ANDROID(){return Wr},get ANDROID_VERSION(){return zr},get IS_FIREFOX(){return Zr},get IS_EDGE(){return qr},get IS_CHROMIUM(){return Xr},get IS_CHROME(){return Yr},get CHROMIUM_VERSION(){return Kr},get CHROME_VERSION(){return Qr},get IE_VERSION(){return $r},get IS_SAFARI(){return Jr},get IS_WINDOWS(){return ea},get IS_IPAD(){return ta},get IS_IPHONE(){return na},TOUCH_ENABLED:ia,IS_IOS:oa,IS_ANY_SAFARI:sa});function ua(e){return"string"===typeof e&&Boolean(e.trim())}function ca(){return $t()===Kt().document}function da(e){return Ur(e)&&1===e.nodeType}function ha(){try{return Kt().parent!==Kt().self}catch(e){return!0}}function pa(e){return function(t,n){if(!ua(t))return $t()[e](null);ua(n)&&(n=$t().querySelector(n));var i=da(n)?n:$t();return i[e]&&i[e](t)}}function fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,r=$t().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];"textContent"===e?ma(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&Ra(r,i),r}function ma(e,t){return"undefined"===typeof e.textContent?e.innerText=t:e.textContent=t,e}function ga(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function va(e,t){return function(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),e.classList.contains(t)}function ya(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=e.classList).add.apply(t,ie(i.reduce((function(e,t){return e.concat(t.split(/\s+/))}),[]))),e}function ba(e){var t;if(!e)return Lr.warn("removeClass was called with an element that doesn't exist"),null;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=e.classList).remove.apply(t,ie(i.reduce((function(e,t){return e.concat(t.split(/\s+/))}),[]))),e}function _a(e,t,n){return"function"===typeof n&&(n=n(e,t)),"boolean"!==typeof n&&(n=void 0),t.split(/\s+/).forEach((function(t){return e.classList.toggle(t,n)})),e}function xa(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var i=t[n];null===i||"undefined"===typeof i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function wa(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var i=e.attributes,r=i.length-1;r>=0;r--){var a=i[r].name,o=i[r].value;"boolean"!==typeof e[a]&&-1===n.indexOf(","+a+",")||(o=null!==o),t[a]=o}return t}function Ta(e,t){return e.getAttribute(t)}function Sa(e,t,n){e.setAttribute(t,n)}function Ea(e,t){e.removeAttribute(t)}function ka(){$t().body.focus(),$t().onselectstart=function(){return!1}}function Ca(){$t().onselectstart=function(){return!0}}function Ma(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(Fa(e,"height"))),n.width||(n.width=parseFloat(Fa(e,"width"))),n}}function Aa(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;e.offsetParent&&e!==$t()[Sr.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function Pa(e,t){var n={x:0,y:0};if(oa)for(var i=e;i&&"html"!==i.nodeName.toLowerCase();){var r=Fa(i,"transform");if(/^matrix/.test(r)){var a=r.slice(7,-1).split(/,\s/).map(Number);n.x+=a[4],n.y+=a[5]}else if(/^matrix3d/.test(r)){var o=r.slice(9,-1).split(/,\s/).map(Number);n.x+=o[12],n.y+=o[13]}i=i.parentNode}var s={},l=Aa(t.target),u=Aa(e),c=u.width,d=u.height,h=t.offsetY-(u.top-l.top),p=t.offsetX-(u.left-l.left);return t.changedTouches&&(p=t.changedTouches[0].pageX-u.left,h=t.changedTouches[0].pageY+u.top,oa&&(p-=n.x,h-=n.y)),s.y=1-Math.max(0,Math.min(1,h/d)),s.x=Math.max(0,Math.min(1,p/c)),s}function La(e){return Ur(e)&&3===e.nodeType}function Ia(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Oa(e){return"function"===typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"===typeof e&&(e=e()),da(e)||La(e)?e:"string"===typeof e&&/\S/.test(e)?$t().createTextNode(e):void 0})).filter((function(e){return e}))}function Ra(e,t){return Oa(t).forEach((function(t){return e.appendChild(t)})),e}function Da(e,t){return Ra(Ia(e),t)}function Na(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var Ua=pa("querySelector"),Ba=pa("querySelectorAll");function Fa(e,t){if(!e||!t)return"";if("function"===typeof Kt().getComputedStyle){var n;try{n=Kt().getComputedStyle(e)}catch(i){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var ja,za=Object.freeze({__proto__:null,isReal:ca,isEl:da,isInFrame:ha,createEl:fa,textContent:ma,prependTo:ga,hasClass:va,addClass:ya,removeClass:ba,toggleClass:_a,setAttributes:xa,getAttributes:wa,getAttribute:Ta,setAttribute:Sa,removeAttribute:Ea,blockTextSelection:ka,unblockTextSelection:Ca,getBoundingClientRect:Ma,findPosition:Aa,getPointerPosition:Pa,isTextNode:La,emptyEl:Ia,normalizeContent:Oa,appendContent:Ra,insertContent:Da,isSingleLeftClick:Na,$:Ua,$$:Ba,computedStyle:Fa}),Ha=!1,Va=function(){if(!1!==ja.options.autoSetup){var e=Array.prototype.slice.call($t().getElementsByTagName("video")),t=Array.prototype.slice.call($t().getElementsByTagName("audio")),n=Array.prototype.slice.call($t().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var r=0,a=i.length;r<a;r++){var o=i[r];if(!o||!o.getAttribute){Ga(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&ja(o)}else Ha||Ga(1)}};function Ga(e,t){ca()&&(t&&(ja=t),Kt().setTimeout(Va,e))}function Wa(){Ha=!0,Kt().removeEventListener("load",Wa)}ca()&&("complete"===$t().readyState?Wa():Kt().addEventListener("load",Wa));var Za,qa=function(e){var t=$t().createElement("style");return t.className=e,t},Xa=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Ya=new WeakMap,Ka=3;function Qa(){return Ka++}function $a(e,t){if(Ya.has(e)){var n=Ya.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Ya.delete(e)}}function Ja(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function eo(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var i=e||Kt().event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&"path"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||$t()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=$t().documentElement,o=$t().body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var to=function(){if("boolean"!==typeof Za){Za=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Za=!0}});Kt().addEventListener("test",null,e),Kt().removeEventListener("test",null,e)}catch(t){}}return Za},no=["touchstart","touchmove"];function io(e,t,n){if(Array.isArray(t))return Ja(io,e,t,n);Ya.has(e)||Ya.set(e,{});var i=Ya.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=Qa()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(!i.disabled){t=eo(t);var r=i.handlers[t.type];if(r)for(var a=r.slice(0),o=0,s=a.length;o<s&&!t.isImmediatePropagationStopped();o++)try{a[o].call(e,t,n)}catch(l){Lr.error(l)}}}),1===i.handlers[t].length)if(e.addEventListener){var r=!1;to()&&no.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,i.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function ro(e,t,n){if(Ya.has(e)){var i=Ya.get(e);if(i.handlers){if(Array.isArray(t))return Ja(ro,e,t,n);var r=function(e,t){i.handlers[t]=[],$a(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);$a(e,t)}else r(e,t)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(e,s)}}}function ao(e,t,n){var i=Ya.has(e)?Ya.get(e):{},r=e.parentNode||e.ownerDocument;if("string"===typeof t?t={type:t,target:e}:t.target||(t.target=e),t=eo(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)ao.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){Ya.has(t.target)||Ya.set(t.target,{});var a=Ya.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"===typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function oo(e,t,n){if(Array.isArray(t))return Ja(oo,e,t,n);var i=function i(){ro(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Qa(),io(e,t,i)}function so(e,t,n){var i=function i(){ro(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Qa(),io(e,t,i)}var lo,uo=Object.freeze({__proto__:null,fixEvent:eo,on:io,off:ro,trigger:ao,one:oo,any:so}),co=30,ho=function(e,t,n){t.guid||(t.guid=Qa());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},po=function(e,t){var n=Kt().performance.now();return function(){var i=Kt().performance.now();i-n>=t&&(e.apply(void 0,arguments),n=i)}},fo=function(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kt(),a=function(){var a=this,o=arguments,s=function(){i=null,s=null,n||e.apply(a,o)};!i&&n&&e.apply(a,o),r.clearTimeout(i),i=r.setTimeout(s,t)};return a.cancel=function(){r.clearTimeout(i),i=null},a},mo=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:co,bind_:ho,throttle:po,debounce:fo}),go=function(){function e(){(0,re.Z)(this,e)}return(0,ae.Z)(e,[{key:"on",value:function(e,t){var n=this.addEventListener;this.addEventListener=function(){},io(this,e,t),this.addEventListener=n}},{key:"off",value:function(e,t){ro(this,e,t)}},{key:"one",value:function(e,t){var n=this.addEventListener;this.addEventListener=function(){},oo(this,e,t),this.addEventListener=n}},{key:"any",value:function(e,t){var n=this.addEventListener;this.addEventListener=function(){},so(this,e,t),this.addEventListener=n}},{key:"trigger",value:function(e){var t=e.type||e;"string"===typeof e&&(e={type:t}),e=eo(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),ao(this,e)}},{key:"queueTrigger",value:function(e){var t=this;lo||(lo=new Map);var n=e.type||e,i=lo.get(this);i||(i=new Map,lo.set(this,i));var r=i.get(n);i.delete(n),Kt().clearTimeout(r);var a=Kt().setTimeout((function(){i.delete(n),0===i.size&&(i=null,lo.delete(t)),t.trigger(e)}),0);i.set(n,a)}}]),e}();go.prototype.allowedEvents_={},go.prototype.addEventListener=go.prototype.on,go.prototype.removeEventListener=go.prototype.off,go.prototype.dispatchEvent=go.prototype.trigger;var vo=function(e){return"function"===typeof e.name?e.name():"string"===typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},yo=function(e){return e instanceof go||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"===typeof e[t]}))},bo=function(e){return"string"===typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},_o=function(e,t,n){if(!e||!e.nodeName&&!yo(e))throw new Error("Invalid target for ".concat(vo(t),"#").concat(n,"; must be a DOM node or evented object."))},xo=function(e,t,n){if(!bo(e))throw new Error("Invalid event type for ".concat(vo(t),"#").concat(n,"; must be a non-empty string or array."))},wo=function(e,t,n){if("function"!==typeof e)throw new Error("Invalid listener for ".concat(vo(t),"#").concat(n,"; must be a function."))},To=function(e,t,n){var i,r,a,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_;if(o){i=e.eventBusEl_,t.length>=3&&t.shift();var s=d(t,2);r=s[0],a=s[1]}else{var l=d(t,3);i=l[0],r=l[1],a=l[2]}return _o(i,e,n),xo(r,e,n),wo(a,e,n),{isTargetingSelf:o,target:i,type:r,listener:a=ho(e,a)}},So=function(e,t,n,i){_o(e,e,t),e.nodeName?uo[t](e,n,i):e[t](n,i)},Eo={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=To(this,n,"on"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(So(o,"on",s,l),!a){var u=function(){return e.off(o,s,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,So(this,"on","dispose",u),So(o,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=To(this,n,"one"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(a)So(o,"one",s,l);else{var u=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,So(o,"one",s,u)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=To(this,n,"any"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(a)So(o,"any",s,l);else{var u=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,So(o,"any",s,u)}},off:function(e,t,n){if(!e||bo(e))ro(this.eventBusEl_,e,t);else{var i=e,r=t;_o(i,this,"off"),xo(r,this,"off"),wo(n,this,"off"),n=ho(this,n),this.off("dispose",n),i.nodeName?(ro(i,r,n),ro(i,"dispose",n)):yo(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){_o(this.eventBusEl_,this,"trigger");var n=e&&"string"!==typeof e?e.type:e;if(!bo(n))throw new Error("Invalid event type for ".concat(vo(this),"#trigger; ")+"must be a non-empty string or object with a type key that has a non-empty value.");return ao(this.eventBusEl_,e,t)}};function ko(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'.concat(t,'" does not refer to an element.'));e.eventBusEl_=e[t]}else e.eventBusEl_=fa("span",{className:"vjs-event-bus"});return Object.assign(e,Eo),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&Ya.has(e)&&Ya.delete(e)})),Kt().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Co={state:{},setState:function(e){var t,n=this;return"function"===typeof e&&(e=e()),Dr(e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&yo(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Mo(e,t){return Object.assign(e,Co),e.state=Object.assign({},e.state,t),"function"===typeof e.handleStateChanged&&yo(e)&&e.on("statechanged",e.handleStateChanged),e}var Ao=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},Po=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},Lo=function(e,t){return Po(e)===Po(t)},Io=Object.freeze({__proto__:null,toLowerCase:Ao,toTitleCase:Po,titleCaseEquals:Lo}),Oo=function(){function e(t,n,i){var r=this;if((0,re.Z)(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Fr({},this.options_),n=this.options_=Fr(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var a=t&&t.id&&t.id()||"no_player";this.id_="".concat(a,"_component_").concat(Qa())}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach((function(e){return r.addClass(e)})),!1!==n.evented&&(ko(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Mo(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==n.initChildren&&this.initChildren(),this.ready(i),!1!==n.reportTouchActivity&&this.enableTouchActivity()}return(0,ae.Z)(e,[{key:"dispose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}},{key:"isDisposed",value:function(){return Boolean(this.isDisposed_)}},{key:"player",value:function(){return this.player_}},{key:"options",value:function(e){return e?(this.options_=Fr(this.options_,e),this.options_):this.options_}},{key:"el",value:function(){return this.el_}},{key:"createEl",value:function(e,t,n){return fa(e,t,n)}},{key:"localize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[i],o=i&&i.split("-")[0],s=r&&r[o],l=n;return a&&a[e]?l=a[e]:s&&s[e]&&(l=s[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,n){var i=t[n-1],r=i;return"undefined"===typeof i&&(r=e),r}))),l}},{key:"handleLanguagechange",value:function(){}},{key:"contentEl",value:function(){return this.contentEl_||this.el_}},{key:"id",value:function(){return this.id_}},{key:"name",value:function(){return this.name_}},{key:"children",value:function(){return this.children_}},{key:"getChildById",value:function(e){return this.childIndex_[e]}},{key:"getChild",value:function(e){if(e)return this.childNameIndex_[e]}},{key:"getDescendant",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i}},{key:"addChild",value:function(t){var n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length;if("string"===typeof t){i=Po(t);var o=r.componentClass||i;r.name=i;var s=e.getComponent(o);if(!s)throw new Error("Component ".concat(o," does not exist"));if("function"!==typeof s)return null;n=new s(this.player_||this,r)}else n=t;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(a,0,n),n.parentComponent_=this,"function"===typeof n.id&&(this.childIndex_[n.id()]=n),(i=i||n.name&&Po(n.name()))&&(this.childNameIndex_[i]=n,this.childNameIndex_[Ao(i)]=n),"function"===typeof n.el&&n.el()){var l=null;this.children_[a+1]&&(this.children_[a+1].el_?l=this.children_[a+1].el_:da(this.children_[a+1])&&(l=this.children_[a+1])),this.contentEl().insertBefore(n.el(),l)}return n}},{key:"removeChild",value:function(e){if("string"===typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Po(e.name())]=null,this.childNameIndex_[Ao(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}}},{key:"initChildren",value:function(){var t=this,n=this.options_.children;if(n){var i,r=this.options_,a=e.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"===typeof t?e===t:e===t.name}))}))).map((function(e){var i,r;return"string"===typeof e?r=n[i=e]||t.options_[i]||{}:(i=e.name,r=e),{name:i,opts:r}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||Po(t.name));return n&&!a.isTech(n)})).forEach((function(e){var n=e.name,i=e.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var a=t.addChild(n,i);a&&(t[n]=a)}}))}}},{key:"buildCSSClass",value:function(){return""}},{key:"ready",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}},{key:"triggerReady",value:function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)}},{key:"$",value:function(e,t){return Ua(e,t||this.contentEl())}},{key:"$$",value:function(e,t){return Ba(e,t||this.contentEl())}},{key:"hasClass",value:function(e){return va(this.el_,e)}},{key:"addClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ya.apply(void 0,[this.el_].concat(t))}},{key:"removeClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ba.apply(void 0,[this.el_].concat(t))}},{key:"toggleClass",value:function(e,t){_a(this.el_,e,t)}},{key:"show",value:function(){this.removeClass("vjs-hidden")}},{key:"hide",value:function(){this.addClass("vjs-hidden")}},{key:"lockShowing",value:function(){this.addClass("vjs-lock-showing")}},{key:"unlockShowing",value:function(){this.removeClass("vjs-lock-showing")}},{key:"getAttribute",value:function(e){return Ta(this.el_,e)}},{key:"setAttribute",value:function(e,t){Sa(this.el_,e,t)}},{key:"removeAttribute",value:function(e){Ea(this.el_,e)}},{key:"width",value:function(e,t){return this.dimension("width",e,t)}},{key:"height",value:function(e,t){return this.dimension("height",e,t)}},{key:"dimensions",value:function(e,t){this.width(e,!0),this.height(t)}},{key:"dimension",value:function(e,t,n){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Po(e)],10)}},{key:"currentDimension",value:function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=Fa(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset".concat(Po(e));t=this.el_[n]}return t}},{key:"currentDimensions",value:function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}},{key:"currentWidth",value:function(){return this.currentDimension("width")}},{key:"currentHeight",value:function(){return this.currentDimension("height")}},{key:"focus",value:function(){this.el_.focus()}},{key:"blur",value:function(){this.el_.blur()}},{key:"handleKeyDown",value:function(e){this.player_&&(en().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}},{key:"handleKeyPress",value:function(e){this.handleKeyDown(e)}},{key:"emitTapEvents",value:function(){var e,t=0,n=null;this.on("touchstart",(function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=Kt().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var i=t.touches[0].pageX-n.pageX,r=t.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(e=!1)}}));var i=function(){e=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){(n=null,!0===e)&&(Kt().performance.now()-t<200&&(i.preventDefault(),this.trigger("tap")))}))}},{key:"enableTouchActivity",value:function(){if(this.player()&&this.player().reportUserActivity){var e,t=ho(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}}},{key:"setTimeout",value:function(e,t){var n,i=this;return e=ho(this,e),this.clearTimersOnDispose_(),n=Kt().setTimeout((function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n}},{key:"clearTimeout",value:function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Kt().clearTimeout(e)),e}},{key:"setInterval",value:function(e,t){e=ho(this,e),this.clearTimersOnDispose_();var n=Kt().setInterval(e,t);return this.setIntervalIds_.add(n),n}},{key:"clearInterval",value:function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Kt().clearInterval(e)),e}},{key:"requestAnimationFrame",value:function(e){var t,n=this;return this.clearTimersOnDispose_(),e=ho(this,e),t=Kt().requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t}},{key:"requestNamedAnimationFrame",value:function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=ho(this,t);var i=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,i),e}}},{key:"cancelNamedAnimationFrame",value:function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}},{key:"cancelAnimationFrame",value:function(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),Kt().cancelAnimationFrame(e)),e}},{key:"clearTimersOnDispose_",value:function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=d(t,2),i=n[0],r=n[1];e[i].forEach((function(t,n){return e[r](n)}))})),e.clearingTimersOnDispose_=!1})))}}],[{key:"registerComponent",value:function(t,n){if("string"!==typeof t||!t)throw new Error('Illegal component name, "'.concat(t,'"; must be a non-empty string.'));var i,r=e.getComponent("Tech"),a=r&&r.isTech(n),o=e===n||e.prototype.isPrototypeOf(n.prototype);if(a||!o)throw i=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'.concat(t,'"; ').concat(i,"."));t=Po(t),e.components_||(e.components_={});var s=e.getComponent("Player");if("Player"===t&&s&&s.players){var l=s.players,u=Object.keys(l);if(l&&u.length>0&&u.map((function(e){return l[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Ao(t)]=n,n}},{key:"getComponent",value:function(t){if(t&&e.components_)return e.components_[t]}}]),e}();function Ro(e,t,n,i){return function(e,t,n){if("number"!==typeof t||t<0||t>n)throw new Error("Failed to execute '".concat(e,"' on 'TimeRanges': The index provided (").concat(t,") is non-numeric or out of bounds (0-").concat(n,")."))}(e,i,n.length-1),n[i][t]}function Do(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Ro.bind(null,"start",0,e),end:Ro.bind(null,"end",1,e)},Kt().Symbol&&Kt().Symbol.iterator&&(t[Kt().Symbol.iterator]=function(){return(e||[]).values()}),t}function No(e,t){return Array.isArray(e)?Do(e):void 0===e||void 0===t?Do():Do([[e,t]])}Oo.registerComponent("Component",Oo);var Uo=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=r>0||o>0?r+":":"")+(i=((r||a>=10)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)},Bo=Uo;function Fo(e){Bo=e}function jo(){Bo=Uo}function zo(e){return Bo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e)}var Ho=Object.freeze({__proto__:null,createTimeRanges:No,createTimeRange:No,setFormatTime:Fo,resetFormatTime:jo,formatTime:zo});function Vo(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=No(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(i=e.end(a))>t&&(i=t),r+=i-n;return r/t}function Go(e){if(e instanceof Go)return e;"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:Ur(e)&&("number"===typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=Go.defaultMessages[this.code]||"")}Go.prototype.code=0,Go.prototype.message="",Go.prototype.status=null,Go.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Go.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Wo=0;Wo<Go.errorTypes.length;Wo++)Go[Go.errorTypes[Wo]]=Wo,Go.prototype[Go.errorTypes[Wo]]=Wo;function Zo(e){return void 0!==e&&null!==e&&"function"===typeof e.then}function qo(e){Zo(e)&&e.then(null,(function(e){}))}var Xo=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,i){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},Yo=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=Xo(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(Xo))},Ko=function(e,t){return e.forEach((function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return n.addCue(e)}))})),t.textTracks()},Qo="vjs-modal-dialog",$o=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).handleKeyDown_=function(e){return r.handleKeyDown(e)},r.close_=function(e){return r.close(e)},r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=fa("div",{className:"".concat(Qo,"-content")},{role:"document"}),r.descEl_=fa("p",{className:"".concat(Qo,"-description vjs-control-text"),id:r.el().getAttribute("aria-describedby")}),ma(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":"".concat(this.id(),"_description"),"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}},{key:"dispose",value:function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"buildCSSClass",value:function(){return"".concat(Qo," vjs-hidden ").concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"label",value:function(){return this.localize(this.options_.label||"Modal Window")}},{key:"description",value:function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}},{key:"open",value:function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}},{key:"opened",value:function(e){return"boolean"===typeof e&&this[e?"open":"close"](),this.opened_}},{key:"close",value:function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}}},{key:"closeable",value:function(e){if("boolean"===typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}},{key:"fill",value:function(){this.fillWith(this.content())}},{key:"fillWith",value:function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Da(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)}},{key:"empty",value:function(){this.trigger("beforemodalempty"),Ia(this.contentEl()),this.trigger("modalempty")}},{key:"content",value:function(e){return"undefined"!==typeof e&&(this.content_=e),this.content_}},{key:"conditionalFocus_",value:function(){var e=$t().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}},{key:"conditionalBlur_",value:function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}},{key:"handleKeyDown",value:function(e){if(e.stopPropagation(),en().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(en().isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}$t().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}}},{key:"focusableEls_",value:function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof Kt().HTMLAnchorElement||e instanceof Kt().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Kt().HTMLInputElement||e instanceof Kt().HTMLSelectElement||e instanceof Kt().HTMLTextAreaElement||e instanceof Kt().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Kt().HTMLIFrameElement||e instanceof Kt().HTMLObjectElement||e instanceof Kt().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))}}]),n}(Oo);$o.prototype.options_={pauseOnOpen:!0,temporary:!0},Oo.registerComponent("ModalDialog",$o);var Jo=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,re.Z)(this,n),(e=t.call(this)).tracks_=[],Object.defineProperty((0,Gt.Z)(e),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<i.length;r++)e.addTrack(i[r]);return e}return(0,ae.Z)(n,[{key:"addTrack",value:function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},yo(e)&&e.addEventListener("labelchange",e.labelchange_)}},{key:"removeTrack",value:function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}},{key:"getTrackById",value:function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t}}]),n}(go);for(var es in Jo.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Jo.prototype.allowedEvents_)Jo.prototype["on"+es]=null;var ts=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},ns=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,re.Z)(this,n);for(var r=i.length-1;r>=0;r--)if(i[r].enabled){ts(i,i[r]);break}return(e=t.call(this,i)).changing_=!1,e}return(0,ae.Z)(n,[{key:"addTrack",value:function(e){var t=this;e.enabled&&ts(this,e),Zt((0,Wt.Z)(n.prototype),"addTrack",this).call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,ts(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}},{key:"removeTrack",value:function(e){Zt((0,Wt.Z)(n.prototype),"removeTrack",this).call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}]),n}(Jo),is=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},rs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,re.Z)(this,n);for(var r=i.length-1;r>=0;r--)if(i[r].selected){is(i,i[r]);break}return(e=t.call(this,i)).changing_=!1,Object.defineProperty((0,Gt.Z)(e),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),e}return(0,ae.Z)(n,[{key:"addTrack",value:function(e){var t=this;e.selected&&is(this,e),Zt((0,Wt.Z)(n.prototype),"addTrack",this).call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,is(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}},{key:"removeTrack",value:function(e){Zt((0,Wt.Z)(n.prototype),"removeTrack",this).call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}]),n}(Jo),as=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"addTrack",value:function(e){var t=this;Zt((0,Wt.Z)(n.prototype),"addTrack",this).call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}},{key:"removeTrack",value:function(e){Zt((0,Wt.Z)(n.prototype),"removeTrack",this).call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}]),n}(Jo),os=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,re.Z)(this,e),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)this.addTrackElement_(t[n])}return(0,ae.Z)(e,[{key:"addTrackElement_",value:function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}},{key:"getTrackElementByTrack_",value:function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}},{key:"removeTrackElement_",value:function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"===typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"===typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}]),e}(),ss=function(){function e(t){(0,re.Z)(this,e),e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return(0,ae.Z)(e,[{key:"setCues_",value:function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)}},{key:"getCueById",value:function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t}}]),e}(),ls={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},us={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},cs={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ds={disabled:"disabled",hidden:"hidden",showing:"showing"},hs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,re.Z)(this,n),e=t.call(this);var r={id:i.id||"vjs_track_"+Qa(),kind:i.kind||"",language:i.language||""},a=i.label||"",o=function(t){Object.defineProperty((0,Gt.Z)(e),t,{get:function(){return r[t]},set:function(){}})};for(var s in r)o(s);return Object.defineProperty((0,Gt.Z)(e),"label",{get:function(){return a},set:function(e){e!==a&&(a=e,this.trigger("labelchange"))}}),e}return(0,ae.Z)(n)}(go),ps=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=$t().createElement("a");n.href=e;for(var i={},r=0;r<t.length;r++)i[t[r]]=n[t[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=Kt().location.protocol),i.host||(i.host=Kt().location.host),i},fs=function(e){if(!e.match(/^https?:\/\//)){var t=$t().createElement("a");t.href=e,e=t.href}return e},ms=function(e){if("string"===typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},gs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kt().location,n=ps(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},vs=Object.freeze({__proto__:null,parseUrl:ps,getAbsoluteURL:fs,getFileExtension:ms,isCrossOrigin:gs}),ys=function(e,t){var n=new(Kt().WebVTT.Parser)(Kt(),Kt().vttjs,Kt().WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(Kt().console&&Kt().console.groupCollapsed&&Kt().console.groupCollapsed("Text Track parsing errors for ".concat(t.src)),i.forEach((function(e){return Lr.error(e)})),Kt().console&&Kt().console.groupEnd&&Kt().console.groupEnd()),n.flush()},bs=function(e,t){var n={uri:e},i=gs(e);i&&(n.cors=i);var r="use-credentials"===t.tech_.crossOrigin();r&&(n.withCredentials=r),an()(n,ho(this,(function(e,n,i){if(e)return Lr.error(e,n);t.loaded_=!0,"function"!==typeof Kt().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return ys(i,t);Lr.error("vttjs failed to load, stopping trying to process ".concat(t.src))})):ys(i,t)})))},_s=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,re.Z)(this,n),!i.tech)throw new Error("A tech was not provided.");var r=Fr(i,{kind:cs[i.kind]||"subtitles",language:i.language||i.srclang||""}),a=ds[r.mode]||"disabled",o=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(a="hidden"),(e=t.call(this,r)).tech_=r.tech,e.cues_=[],e.activeCues_=[],e.preload_=!1!==e.tech_.preloadTextTracks;var s=new ss(e.cues_),l=new ss(e.activeCues_),u=!1;e.timeupdateHandler=ho((0,Gt.Z)(e),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}));return e.tech_.one("dispose",(function(){e.stopTracking()})),"disabled"!==a&&e.startTracking(),Object.defineProperties((0,Gt.Z)(e),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(e){ds[e]&&a!==e&&(a=e,this.preload_||"disabled"===a||0!==this.cues.length||bs(this.src,this),this.stopTracking(),"disabled"!==a&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return l;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];r.startTime<=e&&r.endTime>=e&&t.push(r)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(u=!0);return this.activeCues_=t,l.setCues_(this.activeCues_),l},set:function(){}}}),r.src?(e.src=r.src,e.preload_||(e.loaded_=!0),(e.preload_||"subtitles"!==r.kind&&"captions"!==r.kind)&&bs(e.src,(0,Gt.Z)(e))):e.loaded_=!0,e}return(0,ae.Z)(n,[{key:"startTracking",value:function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}},{key:"stopTracking",value:function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}},{key:"addCue",value:function(e){var t=e;if(Kt().vttjs&&!(e instanceof Kt().vttjs.VTTCue)){for(var n in t=new(Kt().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}},{key:"removeCue",value:function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}]),n}(hs);_s.prototype.allowedEvents_={cuechange:"cuechange"};var xs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,re.Z)(this,n);var r=Fr(i,{kind:us[i.kind]||""});e=t.call(this,r);var a=!1;return Object.defineProperty((0,Gt.Z)(e),"enabled",{get:function(){return a},set:function(e){"boolean"===typeof e&&e!==a&&(a=e,this.trigger("enabledchange"))}}),r.enabled&&(e.enabled=r.enabled),e.loaded_=!0,e}return(0,ae.Z)(n)}(hs),ws=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,re.Z)(this,n);var r=Fr(i,{kind:ls[i.kind]||""});e=t.call(this,r);var a=!1;return Object.defineProperty((0,Gt.Z)(e),"selected",{get:function(){return a},set:function(e){"boolean"===typeof e&&e!==a&&(a=e,this.trigger("selectedchange"))}}),r.selected&&(e.selected=r.selected),e}return(0,ae.Z)(n)}(hs),Ts=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,re.Z)(this,n),e=t.call(this);var a=new _s(r);return e.kind=a.kind,e.src=a.src,e.srclang=a.language,e.label=a.label,e.default=a.default,Object.defineProperties((0,Gt.Z)(e),{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=n.NONE,a.addEventListener("loadeddata",(function(){i=n.LOADED,e.trigger({type:"load",target:(0,Gt.Z)(e)})})),e}return(0,ae.Z)(n)}(go);Ts.prototype.allowedEvents_={load:"load"},Ts.NONE=0,Ts.LOADING=1,Ts.LOADED=2,Ts.ERROR=3;var Ss={audio:{ListClass:ns,TrackClass:xs,capitalName:"Audio"},video:{ListClass:rs,TrackClass:ws,capitalName:"Video"},text:{ListClass:as,TrackClass:_s,capitalName:"Text"}};Object.keys(Ss).forEach((function(e){Ss[e].getterName="".concat(e,"Tracks"),Ss[e].privateName="".concat(e,"Tracks_")}));var Es={remoteText:{ListClass:as,TrackClass:_s,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:os,TrackClass:Ts,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ks=Object.assign({},Ss,Es);Es.names=Object.keys(Es),Ss.names=Object.keys(Ss),ks.names=[].concat(Es.names).concat(Ss.names);var Cs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,re.Z)(this,n),i.reportTouchActivity=!1,(e=t.call(this,null,i,r)).onDurationChange_=function(t){return e.onDurationChange(t)},e.trackProgress_=function(t){return e.trackProgress(t)},e.trackCurrentTime_=function(t){return e.trackCurrentTime(t)},e.stopTrackingCurrentTime_=function(t){return e.stopTrackingCurrentTime(t)},e.disposeSourceHandler_=function(t){return e.disposeSourceHandler(t)},e.queuedHanders_=new Set,e.hasStarted_=!1,e.on("playing",(function(){this.hasStarted_=!0})),e.on("loadstart",(function(){this.hasStarted_=!1})),ks.names.forEach((function(t){var n=ks[t];i&&i[n.getterName]&&(e[n.privateName]=i[n.getterName])})),e.featuresProgressEvents||e.manualProgressOn(),e.featuresTimeupdateEvents||e.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(t){!1===i["native".concat(t,"Tracks")]&&(e["featuresNative".concat(t,"Tracks")]=!1)})),!1===i.nativeCaptions||!1===i.nativeTextTracks?e.featuresNativeTextTracks=!1:!0!==i.nativeCaptions&&!0!==i.nativeTextTracks||(e.featuresNativeTextTracks=!0),e.featuresNativeTextTracks||e.emulateTextTracks(),e.preloadTextTracks=!1!==i.preloadTextTracks,e.autoRemoteTextTracks_=new ks.text.ListClass,e.initTrackListeners(),i.nativeControlsForTouch||e.emitTapEvents(),e.constructor&&(e.name_=e.constructor.name||"Unknown Tech"),e}return(0,ae.Z)(n,[{key:"triggerSourceset",value:function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})}},{key:"manualProgressOn",value:function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}},{key:"manualProgressOff",value:function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}},{key:"trackProgress",value:function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ho(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)}},{key:"onDurationChange",value:function(e){this.duration_=this.duration()}},{key:"buffered",value:function(){return No(0,0)}},{key:"bufferedPercent",value:function(){return Vo(this.buffered(),this.duration_)}},{key:"stopTrackingProgress",value:function(){this.clearInterval(this.progressInterval)}},{key:"manualTimeUpdatesOn",value:function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}},{key:"manualTimeUpdatesOff",value:function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}},{key:"trackCurrentTime",value:function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)}},{key:"stopTrackingCurrentTime",value:function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}},{key:"dispose",value:function(){this.clearTracks(Ss.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"clearTracks",value:function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t["".concat(e,"Tracks")]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))}},{key:"cleanupAutoTextTracks",value:function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}}},{key:"reset",value:function(){}},{key:"crossOrigin",value:function(){}},{key:"setCrossOrigin",value:function(){}},{key:"error",value:function(e){return void 0!==e&&(this.error_=new Go(e),this.trigger("error")),this.error_}},{key:"played",value:function(){return this.hasStarted_?No(0,0):No()}},{key:"play",value:function(){}},{key:"setScrubbing",value:function(){}},{key:"scrubbing",value:function(){}},{key:"setCurrentTime",value:function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}},{key:"initTrackListeners",value:function(){var e=this;Ss.names.forEach((function(t){var n=Ss[t],i=function(){e.trigger("".concat(t,"trackchange"))},r=e[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",(function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}))}))}},{key:"addWebVttScript_",value:function(){var e=this;if(!Kt().WebVTT)if($t().body.contains(this.el())){if(!this.options_["vtt.js"]&&Br(sn())&&Object.keys(sn()).length>0)return void this.trigger("vttjsloaded");var t=$t().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),Kt().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}},{key:"emulateTextTracks",value:function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),i=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};n.on("addtrack",i),n.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},o=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",(function(){n.off("addtrack",i),n.off("removetrack",r),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",a)}}))}},{key:"addTextTrack",value:function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var o=new ks.text.TrackClass(r);return a.addTrack(o),o}(this,e,t,n)}},{key:"createRemoteTextTrack",value:function(e){var t=Fr(e,{tech:this});return new Es.remoteTextEl.TrackClass(t)}},{key:"addRemoteTextTrack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=this.createRemoteTextTrack(t);return"boolean"!==typeof n&&(n=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!1===n&&this.ready((function(){return e.autoRemoteTextTracks_.addTrack(i.track)})),i}},{key:"removeRemoteTextTrack",value:function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}},{key:"getVideoPlaybackQuality",value:function(){return{}}},{key:"requestPictureInPicture",value:function(){return Promise.reject()}},{key:"disablePictureInPicture",value:function(){return!0}},{key:"setDisablePictureInPicture",value:function(){}},{key:"requestVideoFrameCallback",value:function(e){var t=this,n=Qa();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n}},{key:"cancelVideoFrameCallback",value:function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}},{key:"setPoster",value:function(){}},{key:"playsinline",value:function(){}},{key:"setPlaysinline",value:function(){}},{key:"overrideNativeAudioTracks",value:function(){}},{key:"overrideNativeVideoTracks",value:function(){}},{key:"canPlayType",value:function(){return""}}],[{key:"canPlayType",value:function(){return""}},{key:"canPlaySource",value:function(e,t){return n.canPlayType(e.type)}},{key:"isTech",value:function(e){return e.prototype instanceof n||e instanceof n||e===n}},{key:"registerTech",value:function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech ".concat(e," must be a Tech"));if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Po(e),n.techs_[e]=t,n.techs_[Ao(e)]=t,"Tech"!==e&&n.defaultTechOrder_.push(e),t}},{key:"getTech",value:function(e){if(e)return n.techs_&&n.techs_[e]?n.techs_[e]:(e=Po(e),Kt()&&Kt().videojs&&Kt().videojs[e]?(Lr.warn("The ".concat(e," tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)")),Kt().videojs[e]):void 0)}}]),n}(Oo);ks.names.forEach((function(e){var t=ks[e];Cs.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Cs.prototype.featuresVolumeControl=!0,Cs.prototype.featuresMuteControl=!0,Cs.prototype.featuresFullscreenResize=!1,Cs.prototype.featuresPlaybackRate=!1,Cs.prototype.featuresProgressEvents=!1,Cs.prototype.featuresSourceset=!1,Cs.prototype.featuresTimeupdateEvents=!1,Cs.prototype.featuresNativeTextTracks=!1,Cs.prototype.featuresVideoFrameCallback=!1,Cs.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"===typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:Lr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Oo.registerComponent("Tech",Cs),Cs.registerTech("Tech",Cs),Cs.defaultTechOrder_=[];var Ms={},As={},Ps={};function Ls(e,t,n){e.setTimeout((function(){return Us(t,Ms[t.type],n,e)}),1)}function Is(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r="call"+Po(n),a=e.reduce(Ns(r),i),o=a===Ps,s=o?null:t[n](a);return function(e,t,n,i){for(var r=e.length-1;r>=0;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,s,o),s}var Os={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Rs={setCurrentTime:1,setMuted:1,setVolume:1},Ds={play:1,pause:1};function Ns(e){return function(t,n){return t===Ps?Ps:n[e]?n[e](t):t}}function Us(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=s(e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||ne(e)||u(e)||c(),l=o[0],h=o.slice(1);if("string"===typeof l)Us(t,Ms[l],n,i,r,a);else if(l){var p=function(e,t){var n=As[e.id()],i=null;if(void 0===n||null===n)return i=t(e),As[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=d(n[r],2),o=a[0],s=a[1];o===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}(i,l);if(!p.setSource)return r.push(p),Us(t,h,n,i,r,a);p.setSource(Object.assign({},t),(function(e,o){if(e)return Us(t,h,n,i,r,a);r.push(p),Us(o,t.type===o.type?h:Ms[o.type],n,i,r,a)}))}else h.length?Us(t,h,n,i,r,a):a?n(t,r):Us(t,Ms["*"],n,i,r,!0)}var Bs={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Fs=function(){var e=ms(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return Bs[e.toLowerCase()]||""},js=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):Ur(t)&&n.push(t)})),t=n}else t="string"===typeof t&&t.trim()?[zs({src:t})]:Ur(t)&&"string"===typeof t.src&&t.src&&t.src.trim()?[zs(t)]:[];return t};function zs(e){if(!e.type){var t=Fs(e.src);t&&(e.type=t)}return e}var Hs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){var a;(0,re.Z)(this,n);var o=Fr({createEl:!1},i);if(a=t.call(this,e,o,r),i.playerOptions.sources&&0!==i.playerOptions.sources.length)e.src(i.playerOptions.sources);else for(var s=0,l=i.playerOptions.techOrder;s<l.length;s++){var u=Po(l[s]),c=Cs.getTech(u);if(u||(c=Oo.getComponent(u)),c&&c.isSupported()){e.loadTech_(u);break}}return a}return(0,ae.Z)(n)}(Oo);Oo.registerComponent("MediaLoader",Hs);var Vs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).options_.controlText&&r.controlText(r.options_.controlText),r.handleMouseOver_=function(e){return r.handleMouseOver(e)},r.handleMouseOut_=function(e){return r.handleMouseOut(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.emitTapEvents(),r.enable(),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&Lr.error("Creating a ClickableComponent with an HTML element of ".concat(e," is not supported; use a Button instead.")),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;var i=fa(e,t,n);return i.appendChild(fa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}},{key:"dispose",value:function(){this.controlTextEl_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"createControlTextEl",value:function(e){return this.controlTextEl_=fa("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}},{key:"controlText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,ma(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}},{key:"buildCSSClass",value:function(){return"vjs-control vjs-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"enable",value:function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}},{key:"disable",value:function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}},{key:"handleLanguagechange",value:function(){this.controlText(this.controlText_)}},{key:"handleClick",value:function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}},{key:"handleKeyDown",value:function(e){en().isEventKey(e,"Space")||en().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):Zt((0,Wt.Z)(n.prototype),"handleKeyDown",this).call(this,e)}}]),n}(Oo);Oo.registerComponent("ClickableComponent",Vs);var Gs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).update(),r.update_=function(e){return r.update(e)},e.on("posterchange",r.update_),r}return(0,ae.Z)(n,[{key:"dispose",value:function(){this.player().off("posterchange",this.update_),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"createEl",value:function(){return fa("picture",{className:"vjs-poster",tabIndex:-1},{},fa("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))}},{key:"crossOrigin",value:function(e){if("undefined"===typeof e)return this.el_?this.el_.querySelector("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.el_.querySelector("img").crossOrigin=e:this.player_.log.warn('crossOrigin must be null,  "anonymous" or "use-credentials", given "'.concat(e,'"'))}},{key:"update",value:function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}},{key:"setSrc",value:function(e){this.el_.querySelector("img").src=e}},{key:"handleClick",value:function(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?qo(this.player_.play()):this.player_.pause())}}]),n}(Vs);Gs.prototype.crossorigin=Gs.prototype.crossOrigin,Oo.registerComponent("PosterImage",Gs);var Ws="#222",Zs="#ccc",qs={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Xs(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ys(e,t,n){try{e.style[t]=n}catch(i){return}}var Ks=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){var a;(0,re.Z)(this,n),a=t.call(this,e,i,r);var o=function(e){return a.updateDisplay(e)};return e.on("loadstart",(function(e){return a.toggleDisplay(e)})),e.on("texttrackchange",o),e.on("loadedmetadata",(function(e){return a.preselectTrack(e)})),e.ready(ho((0,Gt.Z)(a),(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",o),e.on("playerresize",o);var t=Kt().screen.orientation||Kt(),n=Kt().screen.orientation?"change":"orientationchange";t.addEventListener(n,o),e.on("dispose",(function(){return t.removeEventListener(n,o)}));for(var i=this.options_.playerOptions.tracks||[],r=0;r<i.length;r++)this.player_.addRemoteTextTrack(i[r],!0);this.preselectTrack()}}))),a}return(0,ae.Z)(n,[{key:"preselectTrack",value:function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var s=r[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in i?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in i&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")}},{key:"toggleDisplay",value:function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}},{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}},{key:"clearDisplay",value:function(){"function"===typeof Kt().WebVTT&&Kt().WebVTT.processCues(Kt(),[],this.el_)}},{key:"updateDisplay",value:function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,o=null,s=e.length;s--;){var l=e[s];"showing"===l.mode&&("descriptions"===l.kind?a=l:o=l)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}}},{key:"updateDisplayState",value:function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r=n[i];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&Ys(a.firstChild,"color",Xs(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ys(a.firstChild,"backgroundColor",Xs(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ys(a,"backgroundColor",Xs(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px ".concat(Ws,", 2px 2px 4px ").concat(Ws,", 2px 2px 5px ").concat(Ws):"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px ".concat(Ws,", 2px 2px ").concat(Ws,", 3px 3px ").concat(Ws):"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px ".concat(Zs,", 0 1px ").concat(Zs,", -1px -1px ").concat(Ws,", 0 -1px ").concat(Ws):"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px ".concat(Ws,", 0 0 4px ").concat(Ws,", 0 0 4px ").concat(Ws,", 0 0 4px ").concat(Ws))),t.fontPercent&&1!==t.fontPercent){var o=Kt().parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=qs[t.fontFamily])}}}},{key:"updateForTrack",value:function(e){if(Array.isArray(e)||(e=[e]),"function"===typeof Kt().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);Kt().WebVTT.processCues(Kt(),t,this.el_);for(var a=0;a<e.length;++a){for(var o=e[a],s=0;s<o.activeCues.length;++s){var l=o.activeCues[s].displayState;ya(l,"vjs-text-track-cue","vjs-text-track-cue-"+(o.language?o.language:a)),o.language&&Sa(l,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}}}]),n}(Oo);Oo.registerComponent("TextTrackDisplay",Ks);var Qs=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=fa("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),r=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r}}]),n}(Oo);Oo.registerComponent("LoadingSpinner",Qs);var $s=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"createEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=fa(e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n));return i.appendChild(fa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}},{key:"addChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return Lr.warn("Adding an actionable (user controllable) child to a Button (".concat(n,") is not supported; use a ClickableComponent instead.")),Oo.prototype.addChild.call(this,e,t)}},{key:"enable",value:function(){Zt((0,Wt.Z)(n.prototype),"enable",this).call(this),this.el_.removeAttribute("disabled")}},{key:"disable",value:function(){Zt((0,Wt.Z)(n.prototype),"disable",this).call(this),this.el_.setAttribute("disabled","disabled")}},{key:"handleKeyDown",value:function(e){en().isEventKey(e,"Space")||en().isEventKey(e,"Enter")?e.stopPropagation():Zt((0,Wt.Z)(n.prototype),"handleKeyDown",this).call(this,e)}}]),n}(Vs);Oo.registerComponent("Button",$s);var Js=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).mouseused_=!1,r.on("mousedown",(function(e){return r.handleMouseDown(e)})),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-big-play-button"}},{key:"handleClick",value:function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return qo(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(i){var r=function(){return i.focus()};Zo(t)?t.then(r,(function(){})):this.setTimeout(r,1)}else this.player_.tech(!0).focus()}},{key:"handleKeyDown",value:function(e){this.mouseused_=!1,Zt((0,Wt.Z)(n.prototype),"handleKeyDown",this).call(this,e)}},{key:"handleMouseDown",value:function(e){this.mouseused_=!0}}]),n}($s);Js.prototype.controlText_="Play Video",Oo.registerComponent("BigPlayButton",Js);var el=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).controlText(i&&i.controlText||r.localize("Close")),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-close-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(e){this.trigger({type:"close",bubbles:!1})}},{key:"handleKeyDown",value:function(e){en().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):Zt((0,Wt.Z)(n.prototype),"handleKeyDown",this).call(this,e)}}]),n}($s);Oo.registerComponent("CloseButton",el);var tl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,re.Z)(this,n),i=t.call(this,e,r),r.replay=void 0===r.replay||r.replay,i.on(e,"play",(function(e){return i.handlePlay(e)})),i.on(e,"pause",(function(e){return i.handlePause(e)})),r.replay&&i.on(e,"ended",(function(e){return i.handleEnded(e)})),i}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-play-control ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(e){this.player_.paused()?qo(this.player_.play()):this.player_.pause()}},{key:"handleSeeked",value:function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}},{key:"handlePlay",value:function(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}},{key:"handlePause",value:function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}},{key:"handleEnded",value:function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))}}]),n}($s);tl.prototype.controlText_="Play",Oo.registerComponent("PlayToggle",tl);var nl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).on(e,["timeupdate","ended"],(function(e){return r.updateContent(e)})),r.updateTextNode_(),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=this.buildCSSClass(),t=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"".concat(e," vjs-time-control vjs-control")}),i=fa("span",{className:"vjs-control-text",textContent:"".concat(this.localize(this.labelText_),"\xa0")},{role:"presentation"});return t.appendChild(i),this.contentEl_=fa("span",{className:"".concat(e,"-display")},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t}},{key:"dispose",value:function(){this.contentEl_=null,this.textNode_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"updateTextNode_",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t=zo(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(e.contentEl_){var t=e.textNode_;t&&e.contentEl_.firstChild!==t&&(t=null,Lr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),e.textNode_=$t().createTextNode(e.formattedTime_),e.textNode_&&(t?e.contentEl_.replaceChild(e.textNode_,t):e.contentEl_.appendChild(e.textNode_))}})))}},{key:"updateContent",value:function(e){}}]),n}(Oo);nl.prototype.labelText_="Time",nl.prototype.controlText_="Time",Oo.registerComponent("TimeDisplay",nl);var il=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-current-time"}},{key:"updateContent",value:function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}]),n}(nl);il.prototype.labelText_="Current Time",il.prototype.controlText_="Current Time",Oo.registerComponent("CurrentTimeDisplay",il);var rl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=function(e){return r.updateContent(e)};return(r=t.call(this,e,i)).on(e,"durationchange",a),r.on(e,"loadstart",a),r.on(e,"loadedmetadata",a),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-duration"}},{key:"updateContent",value:function(e){var t=this.player_.duration();this.updateTextNode_(t)}}]),n}(nl);rl.prototype.labelText_="Duration",rl.prototype.controlText_="Duration",Oo.registerComponent("DurationDisplay",rl);var al=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div"),i=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}]),n}(Oo);Oo.registerComponent("TimeDivider",al);var ol=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).on(e,"durationchange",(function(e){return r.updateContent(e)})),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-remaining-time"}},{key:"createEl",value:function(){var e=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this);return!1!==this.options_.displayNegative&&e.insertBefore(fa("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}},{key:"updateContent",value:function(e){var t;"number"===typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))}}]),n}(nl);ol.prototype.labelText_="Remaining Time",ol.prototype.controlText_="Remaining Time",Oo.registerComponent("RemainingTimeDisplay",ol);var sl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).updateShowing(),r.on(r.player(),"durationchange",(function(e){return r.updateShowing(e)})),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=fa("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(fa("span",{className:"vjs-control-text",textContent:"".concat(this.localize("Stream Type"),"\xa0")})),this.contentEl_.appendChild($t().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}},{key:"dispose",value:function(){this.contentEl_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"updateShowing",value:function(e){this.player().duration()===1/0?this.show():this.hide()}}]),n}(Oo);Oo.registerComponent("LiveDisplay",sl);var ll=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).updateLiveEdgeStatus(),r.player_.liveTracker&&(r.updateLiveEdgeStatusHandler_=function(e){return r.updateLiveEdgeStatus(e)},r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatusHandler_)),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=fa("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}},{key:"updateLiveEdgeStatus",value:function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}},{key:"handleClick",value:function(){this.player_.liveTracker.seekToLiveEdge()}},{key:"dispose",value:function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}}]),n}($s);function ul(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}ll.prototype.controlText_="Seek to live, currently playing live",Oo.registerComponent("SeekToLive",ll);var cl=Object.freeze({__proto__:null,clamp:ul}),dl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).handleMouseDown_=function(e){return r.handleMouseDown(e)},r.handleMouseUp_=function(e){return r.handleMouseUp(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleMouseMove_=function(e){return r.handleMouseMove(e)},r.update_=function(e){return r.update(e)},r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}return(0,ae.Z)(n,[{key:"enabled",value:function(){return this.enabled_}},{key:"enable",value:function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}},{key:"disable",value:function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}}},{key:"createEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,e,t,i)}},{key:"handleMouseDown",value:function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Yr||e.preventDefault(),ka(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}},{key:"handleMouseMove",value:function(e){}},{key:"handleMouseUp",value:function(){var e=this.bar.el_.ownerDocument;Ca(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}},{key:"update",value:function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}}},{key:"getProgress",value:function(){return Number(ul(this.getPercent(),0,1).toFixed(4))}},{key:"calculateDistance",value:function(e){var t=Pa(this.el_,e);return this.vertical()?t.y:t.x}},{key:"handleKeyDown",value:function(e){en().isEventKey(e,"Left")||en().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):en().isEventKey(e,"Right")||en().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):Zt((0,Wt.Z)(n.prototype),"handleKeyDown",this).call(this,e)}},{key:"handleClick",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"vertical",value:function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}]),n}(Oo);Oo.registerComponent("Slider",dl);var hl=function(e,t){return ul(e/t*100,0,100).toFixed(2)+"%"},pl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).partEls_=[],r.on(e,"progress",(function(e){return r.update(e)})),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-load-progress"}),t=fa("span",{className:"vjs-control-text"}),i=fa("span",{textContent:this.localize("Loaded")}),r=$t().createTextNode(": ");return this.percentageEl_=fa("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(r),t.appendChild(this.percentageEl_),e}},{key:"dispose",value:function(){this.partEls_=null,this.percentageEl_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"update",value:function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),i=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,o=hl(r,i);t.percent_!==o&&(t.el_.style.width=o,ma(t.percentageEl_,o),t.percent_=o);for(var s=0;s<n.length;s++){var l=n.start(s),u=n.end(s),c=a[s];c||(c=t.el_.appendChild(fa()),a[s]=c),c.dataset.start===l&&c.dataset.end===u||(c.dataset.start=l,c.dataset.end=u,c.style.left=hl(l,r),c.style.width=hl(u-l,r))}for(var d=a.length;d>n.length;d--)t.el_.removeChild(a[d-1]);a.length=n.length}))}}]),n}(Oo);Oo.registerComponent("LoadProgressBar",pl);var fl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).update=po(ho((0,Gt.Z)(r),r.update),co),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}},{key:"update",value:function(e,t,n){var i=Aa(this.el_),r=Ma(this.player_.el()),a=e.width*t;if(r&&i){var o=e.left-r.left+a,s=e.width-a+(r.right-e.right),l=i.width/2;o<l?l+=l-o:s<l&&(l=s),l<0?l=0:l>i.width&&(l=i.width),l=Math.round(l),this.el_.style.right="-".concat(l,"px"),this.write(n)}}},{key:"write",value:function(e){ma(this.el_,e)}},{key:"updateTime",value:function(e,t,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,o=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var s=r.player_.liveTracker.liveWindow(),l=s-t*s;a=(l<1?"":"-")+zo(l,s)}else a=zo(n,o);r.update(e,t,a),i&&i()}))}}]),n}(Oo);Oo.registerComponent("TimeTooltip",fl);var ml=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).update=po(ho((0,Gt.Z)(r),r.update),co),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}},{key:"update",value:function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}}}]),n}(Oo);ml.prototype.options_={children:[]},oa||Wr||ml.prototype.options_.children.push("timeTooltip"),Oo.registerComponent("PlayProgressBar",ml);var gl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).update=po(ho((0,Gt.Z)(r),r.update),co),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-mouse-display"})}},{key:"update",value:function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left="".concat(e.width*t,"px")}))}}]),n}(Oo);gl.prototype.options_={children:["timeTooltip"]},Oo.registerComponent("MouseTimeDisplay",gl);var vl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).setEventHandlers_(),r}return(0,ae.Z)(n,[{key:"setEventHandlers_",value:function(){var e=this;this.update_=ho(this,this.update),this.update=po(this.update_,co),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in $t()&&"visibilityState"in $t()&&this.on($t(),"visibilitychange",this.toggleVisibility_)}},{key:"toggleVisibility_",value:function(e){"hidden"===$t().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}},{key:"enableInterval_",value:function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,co))}},{key:"disableInterval_",value:function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}},{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}},{key:"update",value:function(e){var t=this;if("hidden"!==$t().visibilityState){var i=Zt((0,Wt.Z)(n.prototype),"update",this).call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=t.player_.ended()?t.player_.duration():t.getCurrentTime_(),n=t.player_.liveTracker,r=t.player_.duration();n&&n.isLive()&&(r=t.player_.liveTracker.liveCurrentTime()),t.percent_!==i&&(t.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),t.percent_=i),t.currentTime_===e&&t.duration_===r||(t.el_.setAttribute("aria-valuetext",t.localize("progress bar timing: currentTime={1} duration={2}",[zo(e,r),zo(r,r)],"{1} of {2}")),t.currentTime_=e,t.duration_=r),t.bar&&t.bar.update(Ma(t.el()),t.getProgress())})),i}}},{key:"userSeek_",value:function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}},{key:"getCurrentTime_",value:function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}},{key:"getPercent",value:function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e}},{key:"handleMouseDown",value:function(e){Na(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),Zt((0,Wt.Z)(n.prototype),"handleMouseDown",this).call(this,e))}},{key:"handleMouseMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Na(e)){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();var a=r.seekableStart(),o=r.liveCurrentTime();if((n=a+i*r.liveWindow())>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}else(n=i*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}}},{key:"enable",value:function(){Zt((0,Wt.Z)(n.prototype),"enable",this).call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()}},{key:"disable",value:function(){Zt((0,Wt.Z)(n.prototype),"disable",this).call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()}},{key:"handleMouseUp",value:function(e){Zt((0,Wt.Z)(n.prototype),"handleMouseUp",this).call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?qo(this.player_.play()):this.update_()}},{key:"stepForward",value:function(){this.userSeek_(this.player_.currentTime()+5)}},{key:"stepBack",value:function(){this.userSeek_(this.player_.currentTime()-5)}},{key:"handleAction",value:function(e){this.player_.paused()?this.player_.play():this.player_.pause()}},{key:"handleKeyDown",value:function(e){var t=this.player_.liveTracker;if(en().isEventKey(e,"Space")||en().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(en().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(en().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(en()(e))){e.preventDefault(),e.stopPropagation();var i=10*(en().codes[en()(e)]-en().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else en().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):en().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):Zt((0,Wt.Z)(n.prototype),"handleKeyDown",this).call(this,e)}},{key:"dispose",value:function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in $t()&&"visibilityState"in $t()&&this.off($t(),"visibilitychange",this.toggleVisibility_),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}}]),n}(dl);vl.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},oa||Wr||vl.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Oo.registerComponent("SeekBar",vl);var yl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).handleMouseMove=po(ho((0,Gt.Z)(r),r.handleMouseMove),co),r.throttledHandleMouseSeek=po(ho((0,Gt.Z)(r),r.handleMouseSeek),co),r.handleMouseUpHandler_=function(e){return r.handleMouseUp(e)},r.handleMouseDownHandler_=function(e){return r.handleMouseDown(e)},r.enable(),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-progress-control vjs-control"})}},{key:"handleMouseMove",value:function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(n||i){var r=t.el(),a=Aa(r),o=Pa(r,e).x;o=ul(o,0,1),i&&i.update(a,o),n&&n.update(a,t.getProgress())}}}},{key:"handleMouseSeek",value:function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)}},{key:"enabled",value:function(){return this.enabled_}},{key:"disable",value:function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&qo(this.player_.play())}}},{key:"enable",value:function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}},{key:"removeListenersAddedOnMousedownAndTouchstart",value:function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}},{key:"handleMouseDown",value:function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}},{key:"handleMouseUp",value:function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}]),n}(Oo);yl.prototype.options_={children:["seekBar"]},Oo.registerComponent("ProgressControl",yl);var bl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).on(e,["enterpictureinpicture","leavepictureinpicture"],(function(e){return r.handlePictureInPictureChange(e)})),r.on(e,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return r.handlePictureInPictureEnabledChange(e)})),r.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===e.currentType().substring(0,5)||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),r.hide()):r.show()})),r.disable(),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-picture-in-picture-control ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"handlePictureInPictureEnabledChange",value:function(){$t().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()}},{key:"handlePictureInPictureChange",value:function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}},{key:"handleClick",value:function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}]),n}($s);bl.prototype.controlText_="Picture-in-Picture",Oo.registerComponent("PictureInPictureToggle",bl);var _l=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).on(e,"fullscreenchange",(function(e){return r.handleFullscreenChange(e)})),!1===$t()[e.fsApi_.fullscreenEnabled]&&r.disable(),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-fullscreen-control ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleFullscreenChange",value:function(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}},{key:"handleClick",value:function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}]),n}($s);_l.prototype.controlText_="Fullscreen",Oo.registerComponent("FullscreenToggle",_l);var xl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-level"});return e.appendChild(Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"span",{className:"vjs-control-text"})),e}}]),n}(Oo);Oo.registerComponent("VolumeLevel",xl);var wl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).update=po(ho((0,Gt.Z)(r),r.update),co),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}},{key:"update",value:function(e,t,n,i){if(!n){var r=Ma(this.el_),a=Ma(this.player_.el()),o=e.width*t;if(!a||!r)return;var s=e.left-a.left+o,l=e.width-o+(a.right-e.right),u=r.width/2;s<u?u+=u-s:l<u&&(u=l),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-".concat(u,"px")}this.write("".concat(i,"%"))}},{key:"write",value:function(e){ma(this.el_,e)}},{key:"updateVolume",value:function(e,t,n,i,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,n,i.toFixed(0)),r&&r()}))}}]),n}(Oo);Oo.registerComponent("VolumeLevelTooltip",wl);var Tl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).update=po(ho((0,Gt.Z)(r),r.update),co),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-mouse-display"})}},{key:"update",value:function(e,t,n){var i=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,(function(){n?i.el_.style.bottom="".concat(e.height*t,"px"):i.el_.style.left="".concat(e.width*t,"px")}))}}]),n}(Oo);Tl.prototype.options_={children:["volumeLevelTooltip"]},Oo.registerComponent("MouseVolumeLevelDisplay",Tl);var Sl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).on("slideractive",(function(e){return r.updateLastVolume_(e)})),r.on(e,"volumechange",(function(e){return r.updateARIAAttributes(e)})),e.ready((function(){return r.updateARIAAttributes()})),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}},{key:"handleMouseDown",value:function(e){Na(e)&&Zt((0,Wt.Z)(n.prototype),"handleMouseDown",this).call(this,e)}},{key:"handleMouseMove",value:function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var n=this.el(),i=Ma(n),r=this.vertical(),a=Pa(n,e);a=ul(a=r?a.y:a.x,0,1),t.update(i,a,r)}Na(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}},{key:"checkMuted",value:function(){this.player_.muted()&&this.player_.muted(!1)}},{key:"getPercent",value:function(){return this.player_.muted()?0:this.player_.volume()}},{key:"stepForward",value:function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}},{key:"stepBack",value:function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}},{key:"updateARIAAttributes",value:function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}},{key:"volumeAsPercentage_",value:function(){return Math.round(100*this.player_.volume())}},{key:"updateLastVolume_",value:function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))}}]),n}(dl);Sl.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},oa||Wr||Sl.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Sl.prototype.playerEvent="volumechange",Oo.registerComponent("VolumeBar",Sl);var El=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,re.Z)(this,n),r.vertical=r.vertical||!1,("undefined"===typeof r.volumeBar||Br(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical),i=t.call(this,e,r),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}((0,Gt.Z)(i),e),i.throttledHandleMouseMove=po(ho((0,Gt.Z)(i),i.handleMouseMove),co),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i.on("touchstart",(function(e){return i.handleMouseDown(e)})),i.on("mousemove",(function(e){return i.handleMouseMove(e)})),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-control vjs-control ".concat(e)})}},{key:"handleMouseDown",value:function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}},{key:"handleMouseUp",value:function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}},{key:"handleMouseMove",value:function(e){this.volumeBar.handleMouseMove(e)}}]),n}(Oo);El.prototype.options_={children:["volumeBar"]},Oo.registerComponent("VolumeControl",El);var kl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),r=t.call(this,e,i),function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}((0,Gt.Z)(r),e),r.on(e,["loadstart","volumechange"],(function(e){return r.update(e)})),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-mute-control ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}},{key:"update",value:function(e){this.updateIcon_(),this.updateControlText_()}},{key:"updateIcon_",value:function(){var e=this.player_.volume(),t=3;oa&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),ba(this.el_,[0,1,2,3].reduce((function(e,t){return e+"".concat(t?" ":"","vjs-vol-").concat(t)}),"")),ya(this.el_,"vjs-vol-".concat(t))}},{key:"updateControlText_",value:function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)}}]),n}($s);kl.prototype.controlText_="Mute",Oo.registerComponent("MuteToggle",kl);var Cl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,re.Z)(this,n),"undefined"!==typeof r.inline?r.inline=r.inline:r.inline=!0,("undefined"===typeof r.volumeControl||Br(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline),(i=t.call(this,e,r)).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(e,["loadstart"],(function(e){return i.volumePanelState_(e)})),i.on(i.muteToggle,"keyup",(function(e){return i.handleKeyPress(e)})),i.on(i.volumeControl,"keyup",(function(e){return i.handleVolumeControlKeyUp(e)})),i.on("keydown",(function(e){return i.handleKeyPress(e)})),i.on("mouseover",(function(e){return i.handleMouseOver(e)})),i.on("mouseout",(function(e){return i.handleMouseOut(e)})),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}return(0,ae.Z)(n,[{key:"sliderActive_",value:function(){this.addClass("vjs-slider-active")}},{key:"sliderInactive_",value:function(){this.removeClass("vjs-slider-active")}},{key:"volumePanelState_",value:function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}},{key:"createEl",value:function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-panel vjs-control ".concat(e)})}},{key:"dispose",value:function(){this.handleMouseOut(),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"handleVolumeControlKeyUp",value:function(e){en().isEventKey(e,"Esc")&&this.muteToggle.focus()}},{key:"handleMouseOver",value:function(e){this.addClass("vjs-hover"),io($t(),"keyup",this.handleKeyPressHandler_)}},{key:"handleMouseOut",value:function(e){this.removeClass("vjs-hover"),ro($t(),"keyup",this.handleKeyPressHandler_)}},{key:"handleKeyPress",value:function(e){en().isEventKey(e,"Esc")&&this.handleMouseOut()}}]),n}(Oo);Cl.prototype.options_={children:["muteToggle","volumeControl"]},Oo.registerComponent("VolumePanel",Cl);var Ml=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),r=t.call(this,e,i),i&&(r.menuButton_=i.menuButton),r.focusedChild_=-1,r.on("keydown",(function(e){return r.handleKeyDown(e)})),r.boundHandleBlur_=function(e){return r.handleBlur(e)},r.boundHandleTapClick_=function(e){return r.handleTapClick(e)},r}return(0,ae.Z)(n,[{key:"addEventListenerForItem",value:function(e){e instanceof Oo&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}},{key:"removeEventListenerForItem",value:function(e){e instanceof Oo&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}},{key:"removeChild",value:function(e){"string"===typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),Zt((0,Wt.Z)(n.prototype),"removeChild",this).call(this,e)}},{key:"addItem",value:function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)}},{key:"createEl",value:function(){var e=this.options_.contentElType||"ul";this.contentEl_=fa(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),io(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t}},{key:"dispose",value:function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"handleBlur",value:function(e){var t=e.relatedTarget||$t().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}}},{key:"handleTapClick",value:function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}}},{key:"handleKeyDown",value:function(e){en().isEventKey(e,"Left")||en().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(en().isEventKey(e,"Right")||en().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}},{key:"stepForward",value:function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}},{key:"stepBack",value:function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}]),n}(Oo);Oo.registerComponent("Menu",Ml);var Al=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,re.Z)(this,n),(i=t.call(this,e,r)).menuButton_=new $s(e,r),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var a=$s.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+a,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;var o=function(e){return i.handleClick(e)};return i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",o),i.on(i.menuButton_,"click",o),i.on(i.menuButton_,"keydown",(function(e){return i.handleKeyDown(e)})),i.on(i.menuButton_,"mouseenter",(function(){i.addClass("vjs-hover"),i.menu.show(),io($t(),"keyup",i.handleMenuKeyUp_)})),i.on("mouseleave",(function(e){return i.handleMouseLeave(e)})),i.on("keydown",(function(e){return i.handleSubmenuKeyDown(e)})),i}return(0,ae.Z)(n,[{key:"update",value:function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}},{key:"createMenu",value:function(){var e=new Ml(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=fa("li",{className:"vjs-menu-title",textContent:Po(this.options_.title),tabIndex:-1}),n=new Oo(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e}},{key:"createItems",value:function(){}},{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:this.buildWrapperCSSClass()},{})}},{key:"buildWrapperCSSClass",value:function(){var e="vjs-menu-button";!0===this.options_.inline?e+="-inline":e+="-popup";var t=$s.prototype.buildCSSClass();return"vjs-menu-button ".concat(e," ").concat(t," ").concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildCSSClass",value:function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button ".concat(e," ").concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"controlText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)}},{key:"dispose",value:function(){this.handleMouseLeave(),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"handleClick",value:function(e){this.buttonPressed_?this.unpressButton():this.pressButton()}},{key:"handleMouseLeave",value:function(e){this.removeClass("vjs-hover"),ro($t(),"keyup",this.handleMenuKeyUp_)}},{key:"focus",value:function(){this.menuButton_.focus()}},{key:"blur",value:function(){this.menuButton_.blur()}},{key:"handleKeyDown",value:function(e){en().isEventKey(e,"Esc")||en().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),en().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(en().isEventKey(e,"Up")||en().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}},{key:"handleMenuKeyUp",value:function(e){(en().isEventKey(e,"Esc")||en().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}},{key:"handleSubmenuKeyPress",value:function(e){this.handleSubmenuKeyDown(e)}},{key:"handleSubmenuKeyDown",value:function(e){(en().isEventKey(e,"Esc")||en().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),en().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}},{key:"pressButton",value:function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),oa&&ha())return;this.menu.focus()}}},{key:"unpressButton",value:function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}},{key:"disable",value:function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}},{key:"enable",value:function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}]),n}(Oo);Oo.registerComponent("MenuButton",Al);var Pl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=i.tracks;if((r=t.call(this,e,i)).items.length<=1&&r.hide(),!a)return(0,Vt.Z)(r);var o=ho((0,Gt.Z)(r),r.update);return a.addEventListener("removetrack",o),a.addEventListener("addtrack",o),a.addEventListener("labelchange",o),r.player_.on("ready",o),r.player_.on("dispose",(function(){a.removeEventListener("removetrack",o),a.removeEventListener("addtrack",o),a.removeEventListener("labelchange",o)})),r}return(0,ae.Z)(n)}(Al);Oo.registerComponent("TrackButton",Pl);var Ll=["Tab","Esc","Up","Down","Right","Left"],Il=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).selectable=i.selectable,r.isSelected_=i.selected||!1,r.multiSelectable=i.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}return(0,ae.Z)(n,[{key:"createEl",value:function(e,t,i){this.nonIconControl=!0;var r=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i);return r.replaceChild(fa("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r}},{key:"handleKeyDown",value:function(e){Ll.some((function(t){return en().isEventKey(e,t)}))||Zt((0,Wt.Z)(n.prototype),"handleKeyDown",this).call(this,e)}},{key:"handleClick",value:function(e){this.selected(!0)}},{key:"selected",value:function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}]),n}(Vs);Oo.registerComponent("MenuItem",Il);var Ol=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=i.track,o=e.textTracks();i.label=a.label||a.language||"Unknown",i.selected="showing"===a.mode,(r=t.call(this,e,i)).track=a,r.kinds=(i.kinds||[i.kind||r.track.kind]).filter(Boolean);var s,l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply((0,Gt.Z)(r),t)},u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleSelectedLanguageChange.apply((0,Gt.Z)(r),t)};(e.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",u),r.on("dispose",(function(){e.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",u)})),void 0===o.onchange)&&r.on(["tap","click"],(function(){if("object"!==typeof Kt().Event)try{s=new(Kt().Event)("change")}catch(e){}s||(s=$t().createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(s)}));return r.handleTracksChange(),r}return(0,ae.Z)(n,[{key:"handleClick",value:function(e){var t=this.track,i=this.player_.textTracks();if(Zt((0,Wt.Z)(n.prototype),"handleClick",this).call(this,e),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===t?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}}},{key:"handleTracksChange",value:function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}},{key:"handleSelectedLanguageChange",value:function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}},{key:"dispose",value:function(){this.track=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}}]),n}(Il);Oo.registerComponent("TextTrackMenuItem",Ol);var Rl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){return(0,re.Z)(this,n),i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,e,i)}return(0,ae.Z)(n,[{key:"handleTracksChange",value:function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)}},{key:"handleSelectedLanguageChange",value:function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}}]),n}(Ol);Oo.registerComponent("OffTextTrackMenuItem",Rl);var Dl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,re.Z)(this,n),i.tracks=e.textTracks(),t.call(this,e,i)}return(0,ae.Z)(n,[{key:"createItems",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ol;this.label_&&(e="".concat(this.label_," off")),t.push(new Rl(this.player_,{kinds:this.kinds_,kind:this.kind_,label:e})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(this.kinds_.indexOf(a.kind)>-1){var o=new n(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-".concat(a.kind,"-menu-item")),t.push(o)}}return t}}]),n}(Pl);Oo.registerComponent("TextTrackButton",Dl);var Nl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=i.track,o=i.cue,s=e.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=s&&s<o.endTime,(r=t.call(this,e,i)).track=a,r.cue=o,r}return(0,ae.Z)(n,[{key:"handleClick",value:function(e){Zt((0,Wt.Z)(n.prototype),"handleClick",this).call(this),this.player_.currentTime(this.cue.startTime)}}]),n}(Il);Oo.registerComponent("ChaptersTrackMenuItem",Nl);var Ul=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){var a;return(0,re.Z)(this,n),(a=t.call(this,e,i,r)).selectCurrentItem_=function(){a.items.forEach((function(e){e.selected(a.track_.activeCues[0]===e.cue)}))},a}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-chapters-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-chapters-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"update",value:function(e){if(!e||!e.track||"chapters"===e.track.kind){var t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),Zt((0,Wt.Z)(n.prototype),"update",this).call(this)):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&Zt((0,Wt.Z)(n.prototype),"update",this).call(this)}}},{key:"setTrack",value:function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}},{key:"findChaptersTrack",value:function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}}},{key:"getMenuCaption",value:function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Po(this.kind_))}},{key:"createMenu",value:function(){return this.options_.title=this.getMenuCaption(),Zt((0,Wt.Z)(n.prototype),"createMenu",this).call(this)}},{key:"createItems",value:function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new Nl(this.player_,{track:this.track_,cue:r});e.push(a)}return e}}]),n}(Dl);Ul.prototype.kind_="chapters",Ul.prototype.controlText_="Chapters",Oo.registerComponent("ChaptersButton",Ul);var Bl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){var a;(0,re.Z)(this,n),a=t.call(this,e,i,r);var o=e.textTracks(),s=ho((0,Gt.Z)(a),a.handleTracksChange);return o.addEventListener("change",s),a.on("dispose",(function(){o.removeEventListener("change",s)})),a}return(0,ae.Z)(n,[{key:"handleTracksChange",value:function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()}},{key:"buildCSSClass",value:function(){return"vjs-descriptions-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-descriptions-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildWrapperCSSClass",this).call(this))}}]),n}(Dl);Bl.prototype.kind_="descriptions",Bl.prototype.controlText_="Descriptions",Oo.registerComponent("DescriptionsButton",Bl);var Fl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){return(0,re.Z)(this,n),t.call(this,e,i,r)}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-subtitles-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-subtitles-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildWrapperCSSClass",this).call(this))}}]),n}(Dl);Fl.prototype.kind_="subtitles",Fl.prototype.controlText_="Subtitles",Oo.registerComponent("SubtitlesButton",Fl);var jl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(r=t.call(this,e,i)).addClass("vjs-texttrack-settings"),r.controlText(", opens "+i.kind+" settings dialog"),r}return(0,ae.Z)(n,[{key:"handleClick",value:function(e){this.player().getChild("textTrackSettings").open()}}]),n}(Ol);Oo.registerComponent("CaptionSettingsMenuItem",jl);var zl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){return(0,re.Z)(this,n),t.call(this,e,i,r)}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-captions-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-captions-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItems",value:function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new jl(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),Zt((0,Wt.Z)(n.prototype),"createItems",this).call(this,e)}}]),n}(Dl);zl.prototype.kind_="captions",zl.prototype.controlText_="Captions",Oo.registerComponent("CaptionsButton",zl);var Hl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"createEl",value:function(e,t,i){var r=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,e,t,i),a=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(a.appendChild(fa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(fa("span",{className:"vjs-control-text",textContent:" ".concat(this.localize("Captions"))}))),r}}]),n}(Ol);Oo.registerComponent("SubsCapsMenuItem",Hl);var Vl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,re.Z)(this,n),(i=t.call(this,e,r)).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Po(i.label_)),i}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-subs-caps-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-subs-caps-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItems",value:function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new jl(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=Zt((0,Wt.Z)(n.prototype),"createItems",this).call(this,e,Hl)}}]),n}(Dl);Vl.prototype.kinds_=["captions","subtitles"],Vl.prototype.controlText_="Subtitles",Oo.registerComponent("SubsCapsButton",Vl);var Gl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=i.track,o=e.audioTracks();i.label=a.label||a.language||"Unknown",i.selected=a.enabled,(r=t.call(this,e,i)).track=a,r.addClass("vjs-".concat(a.kind,"-menu-item"));var s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply((0,Gt.Z)(r),t)};return o.addEventListener("change",s),r.on("dispose",(function(){o.removeEventListener("change",s)})),r}return(0,ae.Z)(n,[{key:"createEl",value:function(e,t,i){var r=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,e,t,i),a=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(a.appendChild(fa("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(fa("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}},{key:"handleClick",value:function(e){if(Zt((0,Wt.Z)(n.prototype),"handleClick",this).call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var r=t[i];r!==this.track&&(r.enabled=r===this.track)}}},{key:"handleTracksChange",value:function(e){this.selected(this.track.enabled)}}]),n}(Il);Oo.registerComponent("AudioTrackMenuItem",Gl);var Wl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,re.Z)(this,n),i.tracks=e.audioTracks(),t.call(this,e,i)}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-audio-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-audio-button ".concat(Zt((0,Wt.Z)(n.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new Gl(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}}]),n}(Pl);Wl.prototype.controlText_="Audio Track",Oo.registerComponent("AudioTrackButton",Wl);var Zl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=i.rate,o=parseFloat(a,10);return i.label=a,i.selected=o===e.playbackRate(),i.selectable=!0,i.multiSelectable=!1,(r=t.call(this,e,i)).label=a,r.rate=o,r.on(e,"ratechange",(function(e){return r.update(e)})),r}return(0,ae.Z)(n,[{key:"handleClick",value:function(e){Zt((0,Wt.Z)(n.prototype),"handleClick",this).call(this),this.player().playbackRate(this.rate)}},{key:"update",value:function(e){this.selected(this.player().playbackRate()===this.rate)}}]),n}(Il);Zl.prototype.contentElType="button",Oo.registerComponent("PlaybackRateMenuItem",Zl);var ql=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).menuButton_.el_.setAttribute("aria-describedby",r.labelElId_),r.updateVisibility(),r.updateLabel(),r.on(e,"loadstart",(function(e){return r.updateVisibility(e)})),r.on(e,"ratechange",(function(e){return r.updateLabel(e)})),r.on(e,"playbackrateschange",(function(e){return r.handlePlaybackRateschange(e)})),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){var e=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=fa("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}},{key:"dispose",value:function(){this.labelEl_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"buildCSSClass",value:function(){return"vjs-playback-rate ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-playback-rate ".concat(Zt((0,Wt.Z)(n.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItems",value:function(){for(var e=this.playbackRates(),t=[],n=e.length-1;n>=0;n--)t.push(new Zl(this.player(),{rate:e[n]+"x"}));return t}},{key:"handlePlaybackRateschange",value:function(e){this.update()}},{key:"playbackRates",value:function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]}},{key:"playbackRateSupported",value:function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}},{key:"updateVisibility",value:function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}},{key:"updateLabel",value:function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}]),n}(Al);ql.prototype.controlText_="Playback Rate",Oo.registerComponent("PlaybackRateMenuButton",ql);var Xl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-spacer ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.className||(t.className=this.buildCSSClass()),Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,e,t,i)}}]),n}(Oo);Oo.registerComponent("Spacer",Xl);var Yl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-custom-control-spacer ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})}}]),n}(Xl);Oo.registerComponent("CustomControlSpacer",Yl);var Kl=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){return(0,re.Z)(this,n),t.apply(this,arguments)}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-control-bar",dir:"ltr"})}}]),n}(Oo);Kl.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in $t()&&Kl.prototype.options_.children.splice(Kl.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Oo.registerComponent("ControlBar",Kl);var Ql=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).on(e,"error",(function(e){return r.open(e)})),r}return(0,ae.Z)(n,[{key:"buildCSSClass",value:function(){return"vjs-error-display ".concat(Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this))}},{key:"content",value:function(){var e=this.player().error();return e?this.localize(e.message):""}}]),n}($o);Ql.prototype.options_=Object.assign({},$o.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Oo.registerComponent("ErrorDisplay",Ql);var $l="vjs-text-track-settings",Jl=["#000","Black"],eu=["#00F","Blue"],tu=["#0FF","Cyan"],nu=["#0F0","Green"],iu=["#F0F","Magenta"],ru=["#F00","Red"],au=["#FFF","White"],ou=["#FF0","Yellow"],su=["1","Opaque"],lu=["0.5","Semi-Transparent"],uu=["0","Transparent"],cu={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Jl,au,ru,nu,eu,ou,iu,tu]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[su,lu,uu]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[au,Jl,ru,nu,eu,ou,iu,tu]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[su,lu]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[uu,lu,su]}};function du(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}cu.windowColor.options=cu.backgroundColor.options;var hu=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),i.temporary=!1,(r=t.call(this,e,i)).updateDisplay=r.updateDisplay.bind((0,Gt.Z)(r)),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=fa("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===i.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",(function(){r.saveSettings(),r.close()})),r.on(r.$(".vjs-default-button"),"click",(function(){r.setDefaults(),r.updateDisplay()})),Dr(cu,(function(e){r.on(r.$(e.selector),"change",r.updateDisplay)})),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}return(0,ae.Z)(n,[{key:"dispose",value:function(){this.endDialog=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"createElSelect_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=cu[e],a=r.id.replace("%s",this.id_),o=[n,a].join(" ").trim();return["<".concat(i,' id="').concat(a,'" class="').concat("label"===i?"vjs-label":"",'">'),this.localize(r.label),"</".concat(i,">"),'<select aria-labelledby="'.concat(o,'">')].concat(r.options.map((function(e){var n=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'.concat(n,'" value="').concat(e[0],'" '),'aria-labelledby="'.concat(o," ").concat(n,'">'),t.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")}},{key:"createElFgColor_",value:function(){var e="captions-text-legend-".concat(this.id_);return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}},{key:"createElBgColor_",value:function(){var e="captions-background-".concat(this.id_);return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}},{key:"createElWinColor_",value:function(){var e="captions-window-".concat(this.id_);return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}},{key:"createElColors_",value:function(){return fa("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}},{key:"createElFont_",value:function(){return fa("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}},{key:"createElControls_",value:function(){var e=this.localize("restore all settings to the default values");return fa("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'.concat(e,'">'),this.localize("Reset"),'<span class="vjs-control-text"> '.concat(e,"</span>"),"</button>",'<button type="button" class="vjs-done-button">'.concat(this.localize("Done"),"</button>")].join("")})}},{key:"content",value:function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}},{key:"label",value:function(){return this.localize("Caption Settings Dialog")}},{key:"description",value:function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}},{key:"buildCSSClass",value:function(){return Zt((0,Wt.Z)(n.prototype),"buildCSSClass",this).call(this)+" vjs-text-track-settings"}},{key:"getValues",value:function(){var e=this;return Nr(cu,(function(t,n,i){var r,a,o=(r=e.$(n.selector),a=n.parser,du(r.options[r.options.selectedIndex].value,a));return void 0!==o&&(t[i]=o),t}),{})}},{key:"setValues",value:function(e){var t=this;Dr(cu,(function(n,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(du(e.options[i].value,n)===t){e.selectedIndex=i;break}}(t.$(n.selector),e[i],n.parser)}))}},{key:"setDefaults",value:function(){var e=this;Dr(cu,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))}},{key:"restoreSettings",value:function(){var e;try{e=JSON.parse(Kt().localStorage.getItem($l))}catch(t){Lr.warn(t)}e&&this.setValues(e)}},{key:"saveSettings",value:function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Kt().localStorage.setItem($l,JSON.stringify(e)):Kt().localStorage.removeItem($l)}catch(t){Lr.warn(t)}}}},{key:"updateDisplay",value:function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}},{key:"conditionalBlur_",value:function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()}}]),n}($o);Oo.registerComponent("TextTrackSettings",hu);var pu=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=i.ResizeObserver||Kt().ResizeObserver;null===i.ResizeObserver&&(a=!1);var o=Fr({createEl:!a,reportTouchActivity:!1},i);return(r=t.call(this,e,o)).ResizeObserver=i.ResizeObserver||Kt().ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=fo((function(){r.resizeHandler()}),100,!1,(0,Gt.Z)(r)),a?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(e.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){ro(this,"resize",e),ro(this,"unload",t),t=null};io(r.el_.contentWindow,"unload",t),io(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}},{key:"resizeHandler",value:function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}},{key:"dispose",value:function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}}]),n}(Oo);Oo.registerComponent("ResizeManager",pu);var fu={trackingThreshold:20,liveTolerance:15},mu=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n);var a=Fr(fu,i,{createEl:!1});return(r=t.call(this,e,a)).trackLiveHandler_=function(){return r.trackLive_()},r.handlePlay_=function(e){return r.handlePlay(e)},r.handleFirstTimeupdate_=function(e){return r.handleFirstTimeupdate(e)},r.handleSeeked_=function(e){return r.handleSeeked(e)},r.seekToLiveEdge_=function(e){return r.seekToLiveEdge(e)},r.reset_(),r.on(r.player_,"durationchange",(function(e){return r.handleDurationchange(e)})),r.on(r.player_,"canplay",(function(){return r.toggleTracking()})),r}return(0,ae.Z)(n,[{key:"trackLive_",value:function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(Kt().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;var i=this.liveCurrentTime(),r=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}}},{key:"handleDurationchange",value:function(){this.toggleTracking()}},{key:"toggleTracking",value:function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}},{key:"startTracking",value:function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,co),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}},{key:"handleFirstTimeupdate",value:function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}},{key:"handleSeeked",value:function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}},{key:"handlePlay",value:function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}},{key:"reset_",value:function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}},{key:"nextSeekedFromUser",value:function(){this.nextSeekedFromUser_=!0}},{key:"stopTracking",value:function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}},{key:"seekableEnd",value:function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}},{key:"seekableStart",value:function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}},{key:"liveWindow",value:function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}},{key:"isLive",value:function(){return this.isTracking()}},{key:"atLiveEdge",value:function(){return!this.behindLiveEdge()}},{key:"liveCurrentTime",value:function(){return this.pastSeekEnd()+this.seekableEnd()}},{key:"pastSeekEnd",value:function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}},{key:"behindLiveEdge",value:function(){return this.behindLiveEdge_}},{key:"isTracking",value:function(){return"number"===typeof this.trackingInterval_}},{key:"seekToLiveEdge",value:function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}},{key:"dispose",value:function(){this.stopTracking(),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}}]),n}(Oo);Oo.registerComponent("LiveTracker",mu);var gu=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;return(0,re.Z)(this,n),(r=t.call(this,e,i)).on("statechanged",(function(e){return r.updateDom_()})),r.updateDom_(),r}return(0,ae.Z)(n,[{key:"createEl",value:function(){return this.els={title:fa("div",{className:"vjs-title-bar-title",id:"vjs-title-bar-title-".concat(Qa())}),description:fa("div",{className:"vjs-title-bar-description",id:"vjs-title-bar-description-".concat(Qa())})},fa("div",{className:"vjs-title-bar"},{},Object.values(this.els))}},{key:"updateDom_",value:function(){var e=this,t=this.player_.tech_,n=t&&t.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((function(t){var r=e.state[t],a=e.els[t],o=i[t];Ia(a),r&&ma(a,r),n&&(n.removeAttribute(o),r&&n.setAttribute(o,a.id))})),this.state.title||this.state.description?this.show():this.hide()}},{key:"update",value:function(e){this.setState(e)}},{key:"dispose",value:function(){var e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this),this.els=null}}]),n}(Oo);Oo.registerComponent("TitleBar",gu);var vu=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===i.indexOf(o)&&i.push(o)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},yu=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=$t().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=$t().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Kt().Element.prototype.appendChild.call(this,n),this.innerHTML}}),bu=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},_u=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=function(e){return bu([e.el(),Kt().HTMLMediaElement.prototype,Kt().Element.prototype,yu],"innerHTML")}(e),r=function(n){return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=n.apply(t,r);return vu(e),o}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=r(n[e]))})),Object.defineProperty(t,"innerHTML",Fr(i,{set:r(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},xu=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?fs(Kt().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Kt().Element.prototype.setAttribute.call(this,"src",e),e}}),wu=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return bu([e.el(),Kt().HTMLMediaElement.prototype,xu],"src")}(e),i=t.setAttribute,r=t.load;Object.defineProperty(t,"src",Fr(n,{set:function(i){var r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(n,r){var a=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=r.call(t);return vu(e)||(e.triggerSourceset(""),_u(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):vu(e)||_u(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},Tu=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r;(0,re.Z)(this,n),r=t.call(this,e,i);var a=e.source,o=!1;if(r.featuresVideoFrameCallback=r.featuresVideoFrameCallback&&"VIDEO"===r.el_.tagName,a&&(r.el_.currentSrc!==a.src||e.tag&&3===e.tag.initNetworkState_)?r.setSource(a):r.handleLateInit_(r.el_),e.enableSourceset&&r.setupSourcesetHandling_(),r.isScrubbing_=!1,r.el_.hasChildNodes()){for(var s=r.el_.childNodes,l=s.length,u=[];l--;){var c=s[l];"track"===c.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(c),r.remoteTextTracks().addTrack(c.track),r.textTracks().addTrack(c.track),o||r.el_.hasAttribute("crossorigin")||!gs(c.src)||(o=!0)):u.push(c))}for(var d=0;d<u.length;d++)r.el_.removeChild(u[d])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&o&&Lr.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(ia||na)&&!0===e.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}return(0,ae.Z)(n,[{key:"dispose",value:function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),n.disposeMediaElement(this.el_),this.options_=null,Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"setupSourcesetHandling_",value:function(){wu(this)}},{key:"restoreMetadataTracksInIOSNativePlayer_",value:function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var i=t[n];"metadata"===i.kind&&e.push({track:i,storedMode:i.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var i=function n(){for(var i=0;i<e.length;i++){var r=e[i];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",i),t.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",i)}))}},{key:"overrideNative_",value:function(e,t){var n=this;if(t===this["featuresNative".concat(e,"Tracks")]){var i=e.toLowerCase();this["".concat(i,"TracksListeners_")]&&Object.keys(this["".concat(i,"TracksListeners_")]).forEach((function(e){n.el()["".concat(i,"Tracks")].removeEventListener(e,n["".concat(i,"TracksListeners_")][e])})),this["featuresNative".concat(e,"Tracks")]=!t,this["".concat(i,"TracksListeners_")]=null,this.proxyNativeTracksForType_(i)}}},{key:"overrideNativeAudioTracks",value:function(e){this.overrideNative_("Audio",e)}},{key:"overrideNativeVideoTracks",value:function(e){this.overrideNative_("Video",e)}},{key:"proxyNativeTracksForType_",value:function(e){var t=this,n=Ss[e],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative".concat(n.capitalName,"Tracks")]&&i&&i.addEventListener){var a={change:function(n){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===e&&t[Es.remoteText.getterName]().trigger(i)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<r.length;t++){for(var n=!1,a=0;a<i.length;a++)if(i[a]===r[t]){n=!0;break}n||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];i.addEventListener(e,n),t.on("dispose",(function(t){return i.removeEventListener(e,n)}))})),this.on("loadstart",o),this.on("dispose",(function(e){return t.off("loadstart",o)}))}}},{key:"proxyNativeTracks_",value:function(){var e=this;Ss.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))}},{key:"createEl",value:function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),n.disposeMediaElement(e),e=t}else{e=$t().createElement("video");var i=Fr({},this.options_.tag&&wa(this.options_.tag));ia&&!0===this.options_.nativeControlsForTouch||delete i.controls,xa(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&Sa(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],a=0;a<r.length;a++){var o=r[a],s=this.options_[o];"undefined"!==typeof s&&(s?Sa(e,o,o):Ea(e,o),e[o]=s)}return e}},{key:"handleLateInit_",value:function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}}},{key:"setScrubbing",value:function(e){this.isScrubbing_=e}},{key:"scrubbing",value:function(){return this.isScrubbing_}},{key:"setCurrentTime",value:function(e){try{this.isScrubbing_&&this.el_.fastSeek&&sa?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Lr(t,"Video is not ready. (Video.js)")}}},{key:"duration",value:function(){var e=this;if(this.el_.duration===1/0&&Wr&&Yr&&0===this.el_.currentTime){return this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN}return this.el_.duration||NaN}},{key:"width",value:function(){return this.el_.offsetWidth}},{key:"height",value:function(){return this.el_.offsetHeight}},{key:"proxyWebkitFullscreen_",value:function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}}},{key:"supportsFullScreen",value:function(){return"function"===typeof this.el_.webkitEnterFullScreen}},{key:"enterFullScreen",value:function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)qo(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}),0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}},{key:"exitFullScreen",value:function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}},{key:"requestPictureInPicture",value:function(){return this.el_.requestPictureInPicture()}},{key:"requestVideoFrameCallback",value:function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):Zt((0,Wt.Z)(n.prototype),"requestVideoFrameCallback",this).call(this,e)}},{key:"cancelVideoFrameCallback",value:function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):Zt((0,Wt.Z)(n.prototype),"cancelVideoFrameCallback",this).call(this,e)}},{key:"src",value:function(e){if(void 0===e)return this.el_.src;this.setSrc(e)}},{key:"reset",value:function(){n.resetMediaElement(this.el_)}},{key:"currentSrc",value:function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}},{key:"setControls",value:function(e){this.el_.controls=!!e}},{key:"addTextTrack",value:function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):Zt((0,Wt.Z)(n.prototype),"addTextTrack",this).call(this,e,t,i)}},{key:"createRemoteTextTrack",value:function(e){if(!this.featuresNativeTextTracks)return Zt((0,Wt.Z)(n.prototype),"createRemoteTextTrack",this).call(this,e);var t=$t().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}},{key:"addRemoteTextTrack",value:function(e,t){var i=Zt((0,Wt.Z)(n.prototype),"addRemoteTextTrack",this).call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}},{key:"removeRemoteTextTrack",value:function(e){if(Zt((0,Wt.Z)(n.prototype),"removeRemoteTextTrack",this).call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])}},{key:"getVideoPlaybackQuality",value:function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Kt().performance&&(e.creationTime=Kt().performance.now()),e}}]),n}(Cs);jr(Tu,"TEST_VID",(function(){if(ca()){var e=$t().createElement("video"),t=$t().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),Tu.isSupported=function(){try{Tu.TEST_VID.volume=.5}catch(e){return!1}return!(!Tu.TEST_VID||!Tu.TEST_VID.canPlayType)},Tu.canPlayType=function(e){return Tu.TEST_VID.canPlayType(e)},Tu.canPlaySource=function(e,t){return Tu.canPlayType(e.type)},Tu.canControlVolume=function(){try{var e=Tu.TEST_VID.volume;Tu.TEST_VID.volume=e/2+.1;var t=e!==Tu.TEST_VID.volume;return t&&oa?(Kt().setTimeout((function(){Tu&&Tu.prototype&&(Tu.prototype.featuresVolumeControl=e!==Tu.TEST_VID.volume)})),!1):t}catch(n){return!1}},Tu.canMuteVolume=function(){try{var e=Tu.TEST_VID.muted;return Tu.TEST_VID.muted=!e,Tu.TEST_VID.muted?Sa(Tu.TEST_VID,"muted","muted"):Ea(Tu.TEST_VID,"muted"),e!==Tu.TEST_VID.muted}catch(t){return!1}},Tu.canControlPlaybackRate=function(){if(Wr&&Yr&&Qr<58)return!1;try{var e=Tu.TEST_VID.playbackRate;return Tu.TEST_VID.playbackRate=e/2+.1,e!==Tu.TEST_VID.playbackRate}catch(t){return!1}},Tu.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty($t().createElement("video"),"src",{get:e,set:e}),Object.defineProperty($t().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty($t().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty($t().createElement("audio"),"innerHTML",{get:e,set:e})}catch(t){return!1}return!0},Tu.supportsNativeTextTracks=function(){return sa||oa&&Yr},Tu.supportsNativeVideoTracks=function(){return!(!Tu.TEST_VID||!Tu.TEST_VID.videoTracks)},Tu.supportsNativeAudioTracks=function(){return!(!Tu.TEST_VID||!Tu.TEST_VID.audioTracks)},Tu.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=d(e,2),n=t[0],i=t[1];jr(Tu.prototype,n,(function(){return Tu[i]()}),!0)})),Tu.prototype.featuresVolumeControl=Tu.canControlVolume(),Tu.prototype.movingMediaElementInDOM=!oa,Tu.prototype.featuresFullscreenResize=!0,Tu.prototype.featuresProgressEvents=!0,Tu.prototype.featuresTimeupdateEvents=!0,Tu.prototype.featuresVideoFrameCallback=!(!Tu.TEST_VID||!Tu.TEST_VID.requestVideoFrameCallback),Tu.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},Tu.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Tu.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Tu.prototype["set"+Po(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Tu.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Tu.prototype["set"+Po(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Tu.prototype[e]=function(){return this.el_[e]()}})),Cs.withSourceHandlers(Tu),Tu.nativeSourceHandler={},Tu.nativeSourceHandler.canPlayType=function(e){try{return Tu.TEST_VID.canPlayType(e)}catch(t){return""}},Tu.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Tu.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=ms(e.src);return Tu.nativeSourceHandler.canPlayType("video/".concat(n))}return""},Tu.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Tu.nativeSourceHandler.dispose=function(){},Tu.registerSourceHandler(Tu.nativeSourceHandler),Cs.registerTech("Html5",Tu);var Su=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Eu={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ku=["tiny","xsmall","small","medium","large","xlarge","huge"],Cu={};ku.forEach((function(e){var t="x"===e.charAt(0)?"x-".concat(e.substring(1)):e;Cu[e]="vjs-layout-".concat(t)}));var Mu={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Au=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){var a;if((0,re.Z)(this,n),e.id=e.id||i.id||"vjs_video_".concat(Qa()),(i=Object.assign(n.getTagSettings(e),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){var o=e.closest("[lang]");o&&(i.language=o.getAttribute("lang"))}if((a=t.call(this,null,i,r)).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=Ir(a.id_),a.fsApi_=Sr,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=e,a.tagAttributes=e&&wa(e),a.language(a.options_.language),i.languages){var s={};Object.getOwnPropertyNames(i.languages).forEach((function(e){s[e.toLowerCase()]=i.languages[e]})),a.languages_=s}else a.languages_=n.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,e.controls=!1,e.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],e.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach((function(e){if("function"!==typeof a[e])throw new Error('plugin "'.concat(e,'" does not exist'))})),a.scrubbing_=!1,a.el_=a.createEl(),ko((0,Gt.Z)(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(io($t(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var l=Fr(a.options_);i.plugins&&Object.keys(i.plugins).forEach((function(e){a[e](i.plugins[e])})),i.debug&&a.debug(!0),a.options_.playerOptions=l,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===e.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),ia&&a.addClass("vjs-touch-enabled"),oa||a.addClass("vjs-workinghover"),n.players[a.id_]=(0,Gt.Z)(a);var u=_r.split(".")[0];return a.addClass("vjs-v".concat(u)),a.userActive(!0),a.reportUserActivity(),a.one("play",(function(e){return a.listenForUserActivity_(e)})),a.on("keydown",(function(e){return a.handleKeyDown(e)})),a.on("languagechange",(function(e){return a.handleLanguagechange(e)})),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",(function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)})),a}return(0,ae.Z)(n,[{key:"dispose",value:function(){var e=this;this.trigger("dispose"),this.off("dispose"),ro($t(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ro($t(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),n.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),As[this.id()]=null,ks.names.forEach((function(t){var n=ks[t],i=e[n.getterName]();i&&i.off&&i.off()})),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this,{restoreEl:this.options_.restoreEl})}},{key:"createEl",value:function(){var e,t=this.tag,i=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();i?e=this.el_=t.parentNode:r||(e=this.el_=Zt((0,Wt.Z)(n.prototype),"createEl",this).call(this,"div"));var a=wa(t);if(r){for(e=this.el_=t,t=this.tag=$t().createElement("video");e.children.length;)t.appendChild(e.firstChild);va(e,"video-js")||ya(e,"video-js"),e.appendChild(t),i=this.playerElIngest_=e,Object.keys(e).forEach((function(n){try{t[n]=e[n]}catch(i){}}))}if(t.setAttribute("tabindex","-1"),a.tabindex="-1",Yr&&ea&&(t.setAttribute("role","application"),a.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach((function(n){r&&"class"===n||e.setAttribute(n,a[n]),r&&t.setAttribute(n,a[n])})),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused"),!0!==Kt().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=qa("vjs-styles-dimensions");var o=Ua(".vjs-styles-defaults"),s=Ua("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var l=t.getElementsByTagName("a"),u=0;u<l.length;u++){var c=l.item(u);ya(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!i&&t.parentNode.insertBefore(e,t),ga(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}},{key:"crossOrigin",value:function(e){if("undefined"===typeof e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):Lr.warn('crossOrigin must be null,  "anonymous" or "use-credentials", given "'.concat(e,'"'))}},{key:"width",value:function(e){return this.dimension("width",e)}},{key:"height",value:function(e){return this.dimension("height",e)}},{key:"dimension",value:function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?Lr.error('Improper value "'.concat(t,'" supplied for for ').concat(e)):(this[n]=i,this.updateStyleEl_())}},{key:"fluid",value:function(e){var t,n,i=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,yo(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){i.on(["playerreset","resize"],i.boundUpdateStyleEl_)},yo(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}},{key:"fill",value:function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}},{key:"aspectRatio",value:function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}},{key:"updateStyleEl_",value:function(){if(!0!==Kt().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Xa(this.styleEl_,"\n      .".concat(n," {\n        width: ").concat(e,"px;\n        height: ").concat(t,"px;\n      }\n\n      .").concat(n,".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ").concat(100*r,"%;\n      }\n    "))}else{var a="number"===typeof this.width_?this.width_:this.options_.width,o="number"===typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(a>=0&&(s.width=a),o>=0&&(s.height=o))}}},{key:"loadTech_",value:function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=Po(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Cs.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay();("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(a=!1);var o={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:"".concat(this.id(),"_").concat(r,"_api"),playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ks.names.forEach((function(e){var t=ks[e];o[t.getterName]=n[t.privateName]})),Object.assign(o,this.options_[i]),Object.assign(o,this.options_[r]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var s=Cs.getTech(e);if(!s)throw new Error("No Tech named '".concat(i,"' exists! '").concat(i,"' should be registered using videojs.registerTech()'"));this.tech_=new s(o),this.tech_.ready(ho(this,this.handleTechReady_),!0),Ko(this.textTracksJson_||[],this.tech_),Su.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech".concat(Po(e),"_")](t)}))})),Object.keys(Eu).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech".concat(Eu[e],"_")].bind(n),event:t}):n["handleTech".concat(Eu[e],"_")](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||ga(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}},{key:"unloadTech_",value:function(){var e=this;ks.names.forEach((function(t){var n=ks[t];e[n.privateName]=e[n.getterName]()})),this.textTracksJson_=Yo(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}},{key:"tech",value:function(e){return void 0===e&&Lr.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}},{key:"addTechControlsListeners_",value:function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}},{key:"removeTechControlsListeners_",value:function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}},{key:"handleTechReady_",value:function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}},{key:"handleTechLoadStart_",value:function(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}},{key:"manualAutoplay_",value:function(e){var t=this;if(this.tech_&&"string"===typeof e){var n,i=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var i=t.play();if(Zo(i))return i.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. ".concat(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():i():Zo(n=this.play())&&(n=n.catch(i)),Zo(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}}},{key:"updateSourceCaches_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,n="";"string"!==typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return Fs(t)}(this,t)),this.cache_.source=Fr({},e,{src:t,type:n});for(var i=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var l=wa(a[s]);r.push(l),l.src&&l.src===t&&o.push(l.src)}o.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}},{key:"handleTechSourceset_",value:function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(n=function(){}),n(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}},{key:"hasStarted",value:function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}},{key:"handleTechPlay_",value:function(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}},{key:"handleTechRateChange_",value:function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}},{key:"handleTechWaiting_",value:function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))}},{key:"handleTechCanPlay_",value:function(){this.removeClass("vjs-waiting"),this.trigger("canplay")}},{key:"handleTechCanPlayThrough_",value:function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}},{key:"handleTechPlaying_",value:function(){this.removeClass("vjs-waiting"),this.trigger("playing")}},{key:"handleTechSeeking_",value:function(){this.addClass("vjs-seeking"),this.trigger("seeking")}},{key:"handleTechSeeked_",value:function(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}},{key:"handleTechPause_",value:function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}},{key:"handleTechEnded_",value:function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}},{key:"handleTechDurationChange_",value:function(){this.duration(this.techGet_("duration"))}},{key:"handleTechClick_",value:function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?qo(this.play()):this.pause()))}},{key:"handleTechDoubleClick_",value:function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}},{key:"handleTechTap_",value:function(){this.userActive(!this.userActive())}},{key:"handleTechTouchStart_",value:function(){this.userWasActive=this.userActive()}},{key:"handleTechTouchMove_",value:function(){this.userWasActive&&this.reportUserActivity()}},{key:"handleTechTouchEnd_",value:function(e){e.cancelable&&e.preventDefault()}},{key:"toggleFullscreenClass_",value:function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}},{key:"documentFullscreenChange_",value:function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),i=$t()[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}}},{key:"handleTechFullscreenChange_",value:function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))}},{key:"handleTechFullscreenError_",value:function(e,t){this.trigger("fullscreenerror",t)}},{key:"togglePictureInPictureClass_",value:function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}},{key:"handleTechEnterPictureInPicture_",value:function(e){this.isInPictureInPicture(!0)}},{key:"handleTechLeavePictureInPicture_",value:function(e){this.isInPictureInPicture(!1)}},{key:"handleTechError_",value:function(){var e=this.tech_.error();this.error(e)}},{key:"handleTechTextData_",value:function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}},{key:"getCache",value:function(){return this.cache_}},{key:"resetCache_",value:function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}},{key:"techCall_",value:function(e,t){this.ready((function(){if(e in Rs)return function(e,t,n,i){return t[n](e.reduce(Ns(n),i))}(this.middleware_,this.tech_,e,t);if(e in Ds)return Is(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw Lr(n),n}}),!0)}},{key:"techGet_",value:function(e){if(this.tech_&&this.tech_.isReady_){if(e in Os)return function(e,t,n){return e.reduceRight(Ns(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Ds)return Is(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw Lr("Video.js: ".concat(e," method not defined for ").concat(this.techName_," playback technology."),t),t;if("TypeError"===t.name)throw Lr("Video.js: ".concat(e," unavailable on ").concat(this.techName_," playback technology element."),t),this.tech_.isReady_=!1,t;throw Lr(t),t}}}},{key:"play",value:function(){var e=this;return new Promise((function(t){e.play_(t)}))}},{key:"play_",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qo;this.playCallbacks_.push(t);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(t){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!sa&&!oa||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}},{key:"runPlayTerminatedQueue_",value:function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))}},{key:"runPlayCallbacks_",value:function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))}},{key:"pause",value:function(){this.techCall_("pause")}},{key:"paused",value:function(){return!1!==this.techGet_("paused")}},{key:"played",value:function(){return this.techGet_("played")||No(0,0)}},{key:"scrubbing",value:function(e){if("undefined"===typeof e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}},{key:"currentTime",value:function(e){return"undefined"!==typeof e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}},{key:"applyInitTime_",value:function(){this.currentTime(this.cache_.initTime)}},{key:"duration",value:function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}},{key:"remainingTime",value:function(){return this.duration()-this.currentTime()}},{key:"remainingTimeDisplay",value:function(){return Math.floor(this.duration())-Math.floor(this.currentTime())}},{key:"buffered",value:function(){var e=this.techGet_("buffered");return e&&e.length||(e=No(0,0)),e}},{key:"bufferedPercent",value:function(){return Vo(this.buffered(),this.duration())}},{key:"bufferedEnd",value:function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n}},{key:"volume",value:function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}},{key:"muted",value:function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}},{key:"defaultMuted",value:function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}},{key:"lastVolume_",value:function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}},{key:"supportsFullScreen",value:function(){return this.techGet_("supportsFullScreen")||!1}},{key:"isFullscreen",value:function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}},{key:"requestFullscreen",value:function(e){this.isInPictureInPicture()&&this.exitPictureInPicture();var t=this;return new Promise((function(n,i){function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){r(),n()}function o(e,t){r(),i(t)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);var s=t.requestFullscreenHelper_(e);s&&(s.then(r,r),s.then(n,i))}))}},{key:"requestFullscreenHelper_",value:function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}},{key:"exitFullscreen",value:function(){var e=this;return new Promise((function(t,n){function i(){e.off("fullscreenerror",a),e.off("fullscreenchange",r)}function r(){i(),t()}function a(e,t){i(),n(t)}e.one("fullscreenchange",r),e.one("fullscreenerror",a);var o=e.exitFullscreenHelper_();o&&(o.then(i,i),o.then(t,n))}))}},{key:"exitFullscreenHelper_",value:function(){var e=this;if(this.fsApi_.requestFullscreen){var t=$t()[this.fsApi_.exitFullscreen]();return t&&qo(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}},{key:"enterFullWindow",value:function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=$t().documentElement.style.overflow,io($t(),"keydown",this.boundFullWindowOnEscKey_),$t().documentElement.style.overflow="hidden",ya($t().body,"vjs-full-window"),this.trigger("enterFullWindow")}},{key:"fullWindowOnEscKey",value:function(e){en().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}},{key:"exitFullWindow",value:function(){this.isFullscreen(!1),this.isFullWindow=!1,ro($t(),"keydown",this.boundFullWindowOnEscKey_),$t().documentElement.style.overflow=this.docOrigOverflow,ba($t().body,"vjs-full-window"),this.trigger("exitFullWindow")}},{key:"disablePictureInPicture",value:function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}},{key:"isInPictureInPicture",value:function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}},{key:"requestPictureInPicture",value:function(){if("pictureInPictureEnabled"in $t()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){if("pictureInPictureEnabled"in $t())return $t().exitPictureInPicture()}},{key:"handleKeyDown",value:function(e){var t=this.options_.userActions;if(t&&t.hotkeys){(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"===typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}}},{key:"handleHotkeys",value:function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,i=void 0===n?function(e){return en().isEventKey(e,"f")}:n,r=t.muteKey,a=void 0===r?function(e){return en().isEventKey(e,"m")}:r,o=t.playPauseKey,s=void 0===o?function(e){return en().isEventKey(e,"k")||en().isEventKey(e,"Space")}:o;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var l=Oo.getComponent("FullscreenToggle");!1!==$t()[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else if(a.call(this,e)){e.preventDefault(),e.stopPropagation(),Oo.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(s.call(this,e)){e.preventDefault(),e.stopPropagation(),Oo.getComponent("PlayToggle").prototype.handleClick.call(this,e)}}},{key:"canPlayType",value:function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=Cs.getTech(r);if(a||(a=Oo.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else Lr.error('The "'.concat(r,'" tech is undefined. Skipped browser support check for that tech.'))}return""}},{key:"selectSource",value:function(e){var t,n=this,i=this.options_.techOrder.map((function(e){return[e,Cs.getTech(e)]})).filter((function(e){var t=d(e,2),n=t[0],i=t[1];return i?i.isSupported():(Lr.error('The "'.concat(n,'" tech is undefined. Skipped browser support check for that tech.')),!1)})),r=function(e,t,n){var i;return e.some((function(e){return t.some((function(t){if(i=n(e,t))return!0}))})),i},a=function(e,t){var i=d(e,2),r=i[0];if(i[1].canPlaySource(t,n.options_[r.toLowerCase()]))return{source:t,tech:r}};return(this.options_.sourceOrder?r(e,i,(t=a,function(e,n){return t(n,e)})):r(i,e,a))||!1}},{key:"handleSrc_",value:function(e,t){var n=this;if("undefined"===typeof e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i=js(e);if(i.length){if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),Ls(this,i[0],(function(e,r){var a,o;if(n.middleware_=r,t||(n.cache_.sources=i),n.updateSourceCaches_(e),n.src_(e))return i.length>1?n.handleSrc_(i.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void n.triggerReady());a=r,o=n.tech_,a.forEach((function(e){return e.setTech&&e.setTech(o)}))})),i.length>1){var r=function(){n.error(null),n.handleSrc_(i.slice(1),!0)},a=function(){n.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",a)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)}},{key:"src",value:function(e){return this.handleSrc_(e,!1)}},{key:"src_",value:function(e){var t=this,n=this.selectSource([e]);return!n||(Lo(n.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready((function(){t.changingSrc_=!1})),!1))}},{key:"load",value:function(){this.techCall_("load")}},{key:"reset",value:function(){var e=this;this.paused()?this.doReset_():qo(this.play().then((function(){return e.doReset_()})))}},{key:"doReset_",value:function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),yo(this)&&this.trigger("playerreset")}},{key:"resetControlBarUI_",value:function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}},{key:"resetProgressBar_",value:function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()}},{key:"resetPlaybackRate_",value:function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}},{key:"resetVolumeBar_",value:function(){this.volume(1),this.trigger("volumechange")}},{key:"currentSources",value:function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}},{key:"currentSource",value:function(){return this.cache_.source||{}}},{key:"currentSrc",value:function(){return this.currentSource()&&this.currentSource().src||""}},{key:"currentType",value:function(){return this.currentSource()&&this.currentSource().type||""}},{key:"preload",value:function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}},{key:"autoplay",value:function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"===typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"===typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t="undefined"===typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}},{key:"playsinline",value:function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}},{key:"loop",value:function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}},{key:"poster",value:function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}},{key:"handleTechPosterChange_",value:function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}},{key:"controls",value:function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}},{key:"usingNativeControls",value:function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}},{key:"error",value:function(e){var t=this;if(void 0===e)return this.error_||null;if(wr("beforeerror").forEach((function(n){var i=n(t,e);Ur(i)&&!Array.isArray(i)||"string"===typeof i||"number"===typeof i||null===i?e=i:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Go(e),this.addClass("vjs-error"),Lr.error("(CODE:".concat(this.error_.code," ").concat(Go.errorTypes[this.error_.code],")"),this.error_.message,this.error_),this.trigger("error"),wr("error").forEach((function(e){return e(t,t.error_)}))}},{key:"reportUserActivity",value:function(e){this.userActivity_=!0}},{key:"userActive",value:function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}},{key:"listenForUserActivity_",value:function(){var e,t,n,i=ho(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);var a,o=this.getChild("controlBar");!o||oa||Wr||(o.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),o.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)}},{key:"playbackRate",value:function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}},{key:"defaultPlaybackRate",value:function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}},{key:"isAudio",value:function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}},{key:"enableAudioOnlyUI_",value:function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),i=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")}},{key:"disableAudioOnlyUI_",value:function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}},{key:"audioOnlyMode",value:function(e){var t=this;if("boolean"!==typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){var n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then((function(){return t.enableAudioOnlyUI_()}))}return Promise.resolve().then((function(){return t.disableAudioOnlyUI_()}))}},{key:"enablePosterModeUI_",value:function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}},{key:"disablePosterModeUI_",value:function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}},{key:"audioPosterMode",value:function(e){var t=this;return"boolean"!==typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):Promise.resolve().then((function(){t.enablePosterModeUI_()})):Promise.resolve().then((function(){t.disablePosterModeUI_()})))}},{key:"addTextTrack",value:function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}},{key:"addRemoteTextTrack",value:function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}},{key:"removeRemoteTextTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}},{key:"getVideoPlaybackQuality",value:function(){return this.techGet_("getVideoPlaybackQuality")}},{key:"videoWidth",value:function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}},{key:"videoHeight",value:function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}},{key:"language",value:function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),yo(this)&&this.trigger("languagechange"))}},{key:"languages",value:function(){return Fr(n.prototype.options_.languages,this.languages_)}},{key:"toJSON",value:function(){var e=Fr(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=Fr(i)).player=void 0,e.tracks[n]=i}return e}},{key:"createModal",value:function(e,t){var n=this;(t=t||{}).content=e||"";var i=new $o(this,t);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i}},{key:"updateCurrentBreakpoint_",value:function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<ku.length;n++){var i=ku[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Cu[e]),this.addClass(Cu[i]),this.breakpoint_=i;break}}}},{key:"removeCurrentBreakpoint_",value:function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}},{key:"breakpoints",value:function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},Mu,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}},{key:"responsive",value:function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}},{key:"currentBreakpoint",value:function(){return this.breakpoint_}},{key:"currentBreakpointClass",value:function(){return Cu[this.breakpoint_]||""}},{key:"loadMedia",value:function(e,t){var n=this;if(e&&"object"===typeof e){this.reset(),this.cache_.media=Fr(e);var i=this.cache_.media,r=i.artist,a=i.artwork,o=i.description,s=i.poster,l=i.src,u=i.textTracks,c=i.title;!a&&s&&(this.cache_.media.artwork=[{src:s,type:Fs(s)}]),l&&this.src(l),s&&this.poster(s),Array.isArray(u)&&u.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.titleBar&&this.titleBar.update({title:c,description:o||r||""}),this.ready(t)}}},{key:"getMedia",value:function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Fs(t.poster)}]),t}return Fr(this.cache_.media)}},{key:"debug",value:function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}},{key:"playbackRates",value:function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"===typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}],[{key:"getTagSettings",value:function(e){var t={sources:[],tracks:[]},n=wa(e),i=n["data-setup"];if(va(e,"vjs-fill")&&(n.fill=!0),va(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=d(nn()(i||"{}"),2),a=r[0],o=r[1];a&&Lr.error(a),Object.assign(n,o)}if(Object.assign(t,n),e.hasChildNodes())for(var s=e.childNodes,l=0,u=s.length;l<u;l++){var c=s[l],h=c.nodeName.toLowerCase();"source"===h?t.sources.push(wa(c)):"track"===h&&t.tracks.push(wa(c))}return t}}]),n}(Oo);ks.names.forEach((function(e){var t=ks[e];Au.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Au.prototype.crossorigin=Au.prototype.crossOrigin,Au.players={};var Pu=Kt().navigator;Au.prototype.options_={techOrder:Cs.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Pu&&(Pu.languages&&Pu.languages[0]||Pu.userLanguage||Pu.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Au.prototype[e]=function(){return this.techGet_(e)}})),Su.forEach((function(e){Au.prototype["handleTech".concat(Po(e),"_")]=function(){return this.trigger(e)}})),Oo.registerComponent("Player",Au);var Lu="plugin",Iu="activePlugins_",Ou={},Ru=function(e){return Ou.hasOwnProperty(e)},Du=function(e){return Ru(e)?Ou[e]:void 0},Nu=function(e,t){e[Iu]=e[Iu]||{},e[Iu][t]=!0},Uu=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},Bu=function(e,t){return t.prototype.name=e,function(){Uu(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Ht(t,[this].concat(i));return this[e]=function(){return a},Uu(this,a.getEventHash()),a}},Fu=function(){function e(t){if((0,re.Z)(this,e),this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),ko(this),delete this.trigger,Mo(this,this.constructor.defaultState),Nu(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}return(0,ae.Z)(e,[{key:"version",value:function(){return this.constructor.VERSION}},{key:"getEventHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ao(this.eventBusEl_,e,this.getEventHash(t))}},{key:"handleStateChanged",value:function(e){}},{key:"dispose",value:function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Iu][e]=!1,this.player=this.state=null,t[e]=Bu(e,Ou[e])}}],[{key:"isBasic",value:function(t){var n="string"===typeof t?Du(t):t;return"function"===typeof n&&!e.prototype.isPrototypeOf(n.prototype)}},{key:"registerPlugin",value:function(t,n){if("string"!==typeof t)throw new Error('Illegal plugin name, "'.concat(t,'", must be a string, was ').concat(typeof t,"."));if(Ru(t))Lr.warn('A plugin named "'.concat(t,'" already exists. You may want to avoid re-registering plugins!'));else if(Au.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'.concat(t,'", cannot share a name with an existing player method!'));if("function"!==typeof n)throw new Error('Illegal plugin for "'.concat(t,'", must be a function, was ').concat(typeof n,"."));return Ou[t]=n,t!==Lu&&(e.isBasic(n)?Au.prototype[t]=function(e,t){var n=function(){Uu(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Nu(this,e),Uu(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Au.prototype[t]=Bu(t,n)),n}},{key:"deregisterPlugin",value:function(e){if(e===Lu)throw new Error("Cannot de-register base plugin.");Ru(e)&&(delete Ou[e],delete Au.prototype[e])}},{key:"getPlugins",value:function(){var e;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(Ou)).forEach((function(t){var n=Du(t);n&&((e=e||{})[t]=n)})),e}},{key:"getPluginVersion",value:function(e){var t=Du(e);return t&&t.VERSION||""}}]),e}();function ju(e,t,n,i){return function(e,t){var n=!1;return function(){n||Lr.warn(e),n=!0;for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t.apply(this,r)}}("".concat(t," is deprecated and will be removed in ").concat(e,".0; please use ").concat(n," instead."),i)}Fu.getPlugin=Du,Fu.BASE_PLUGIN_NAME=Lu,Fu.registerPlugin(Lu,Fu),Au.prototype.usingPlugin=function(e){return!!this[Iu]&&!0===this[Iu][e]},Au.prototype.hasPlugin=function(e){return!!Ru(e)};var zu=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Hu(e,t,n){var i=Hu.getPlayer(e);if(i)return t&&Lr.warn('Player "'.concat(e,'" is already initialised. Options will not be applied.')),n&&i.ready(n),i;var r="string"===typeof e?Ua("#"+zu(e)):e;if(!da(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||Lr.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),wr("beforesetup").forEach((function(e){var n=e(r,Fr(t));Ur(n)&&!Array.isArray(n)?t=Fr(t,n):Lr.error("please return an object in beforesetup hooks")}));var a=Oo.getComponent("Player");return i=new a(r,t,n),wr("setup").forEach((function(e){return e(i)})),i}if(Hu.hooks_=xr,Hu.hooks=wr,Hu.hook=function(e,t){wr(e,t)},Hu.hookOnce=function(e,t){wr(e,[].concat(t).map((function(t){return function n(){return Tr(e,n),t.apply(void 0,arguments)}})))},Hu.removeHook=Tr,!0!==Kt().VIDEOJS_NO_DYNAMIC_STYLE&&ca()){var Vu=Ua(".vjs-styles-defaults");if(!Vu){Vu=qa("vjs-styles-defaults");var Gu=Ua("head");Gu&&Gu.insertBefore(Vu,Gu.firstChild),Xa(Vu,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Ga(1,Hu),Hu.VERSION=_r,Hu.options=Au.prototype.options_,Hu.getPlayers=function(){return Au.players},Hu.getPlayer=function(e){var t,n=Au.players;if("string"===typeof e){var i=zu(e),r=n[i];if(r)return r;t=Ua("#"+i)}else t=e;if(da(t)){var a=t,o=a.player,s=a.playerId;if(o||n[s])return o||n[s]}},Hu.getAllPlayers=function(){return Object.keys(Au.players).map((function(e){return Au.players[e]})).filter(Boolean)},Hu.players=Au.players,Hu.getComponent=Oo.getComponent,Hu.registerComponent=function(e,t){Cs.isTech(t)&&Lr.warn("The ".concat(e," tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")),Oo.registerComponent.call(Oo,e,t)},Hu.getTech=Cs.getTech,Hu.registerTech=Cs.registerTech,Hu.use=function(e,t){Ms[e]=Ms[e]||[],Ms[e].push(t)},Object.defineProperty(Hu,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Hu.middleware,"TERMINATOR",{value:Ps,writeable:!1,enumerable:!0}),Hu.browser=la,Hu.obj=Hr,Hu.mergeOptions=ju(9,"videojs.mergeOptions","videojs.obj.merge",Fr),Hu.defineLazyProperty=ju(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",jr),Hu.bind=ju(9,"videojs.bind","native Function.prototype.bind",ho),Hu.registerPlugin=Fu.registerPlugin,Hu.deregisterPlugin=Fu.deregisterPlugin,Hu.plugin=function(e,t){return Lr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Fu.registerPlugin(e,t)},Hu.getPlugins=Fu.getPlugins,Hu.getPlugin=Fu.getPlugin,Hu.getPluginVersion=Fu.getPluginVersion,Hu.addLanguage=function(e,t){return e=(""+e).toLowerCase(),Hu.options.languages=Fr(Hu.options.languages,$({},e,t)),Hu.options.languages[e]},Hu.log=Lr,Hu.createLogger=Ir,Hu.time=Ho,Hu.createTimeRange=ju(9,"videojs.createTimeRange","videojs.time.createTimeRanges",No),Hu.createTimeRanges=ju(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",No),Hu.formatTime=ju(9,"videojs.formatTime","videojs.time.formatTime",zo),Hu.setFormatTime=ju(9,"videojs.setFormatTime","videojs.time.setFormatTime",Fo),Hu.resetFormatTime=ju(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",jo),Hu.parseUrl=ju(9,"videojs.parseUrl","videojs.url.parseUrl",ps),Hu.isCrossOrigin=ju(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",gs),Hu.EventTarget=go,Hu.any=so,Hu.on=io,Hu.one=oo,Hu.off=ro,Hu.trigger=ao,Hu.xhr=an(),Hu.TextTrack=_s,Hu.AudioTrack=xs,Hu.VideoTrack=ws,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){Hu[e]=function(){return Lr.warn("videojs.".concat(e,"() is deprecated; use videojs.dom.").concat(e,"() instead")),za[e].apply(null,arguments)}})),Hu.computedStyle=ju(9,"videojs.computedStyle","videojs.dom.computedStyle",Fa),Hu.dom=za,Hu.fn=mo,Hu.num=cl,Hu.str=Io,Hu.url=vs;var Wu=(0,ae.Z)((function e(t){(0,re.Z)(this,e);var n=this;return n.id=t.id,n.label=n.id,n.width=t.width,n.height=t.height,n.bitrate=t.bandwidth,n.frameRate=t.frameRate,n.enabled_=t.enabled,Object.defineProperty(n,"enabled",{get:function(){return n.enabled_()},set:function(e){n.enabled_(e)}}),n})),Zu=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e;(0,re.Z)(this,n),e=t.call(this);var i=(0,Gt.Z)(e);return i.levels_=[],i.selectedIndex_=-1,Object.defineProperty(i,"selectedIndex",{get:function(){return i.selectedIndex_}}),Object.defineProperty(i,"length",{get:function(){return i.levels_.length}}),(0,Vt.Z)(e,i)}return(0,ae.Z)(n,[{key:"addQualityLevel",value:function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var n=this.levels_.length;return t=new Wu(e),""+n in this||Object.defineProperty(this,n,{get:function(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}},{key:"removeQualityLevel",value:function(e){for(var t=null,n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}},{key:"getQualityLevelById",value:function(e){for(var t=0,n=this.length;t<n;t++){var i=this[t];if(i.id===e)return i}return null}},{key:"dispose",value:function(){this.selectedIndex_=-1,this.levels_.length=0}}]),n}(Hu.EventTarget);for(var qu in Zu.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},Zu.prototype.allowedEvents_)Zu.prototype["on"+qu]=null;var Xu="3.0.0",Yu=Hu.registerPlugin||Hu.plugin,Ku=function(e){return function(e,t){var n=e.qualityLevels,i=new Zu;return e.on("dispose",(function t(){i.dispose(),e.qualityLevels=n,e.off("dispose",t)})),e.qualityLevels=function(){return i},e.qualityLevels.VERSION=Xu,i}(this,Hu.mergeOptions({},e))};Yu("qualityLevels",Ku),Ku.VERSION=Xu;var Qu=dn,$u=function(e,t){return t&&t.responseURL&&e!==t.responseURL?t.responseURL:e},Ju=function(e){return Hu.log.debug?Hu.log.debug.bind(Hu,"VHS:","".concat(e," >")):function(){}};function ec(){for(var e=Hu.obj||Hu,t=e.merge||e.mergeOptions,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t.apply(e,i)}function tc(){for(var e=Hu.time||Hu,t=e.createTimeRanges||e.createTimeRanges,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t.apply(e,i)}var nc=1/30,ic=.1,rc=function(e,t){var n,i=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return tc(i)},ac=function(e,t){return rc(e,(function(e,n){return e-ic<=t&&n+ic>=t}))},oc=function(e,t){return rc(e,(function(e){return e-nc>=t}))},sc=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},lc=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},uc=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},cc=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);t>a||(n+=t>r&&t<=a?a-t:a-r)}return n},dc=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},hc=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},pc=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},fc=function(e){var t=e.preloadSegment;if(t){var n=t.parts,i=(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0);return i+=n&&n.length?n.length:0}},mc=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=pc(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},gc=function(e,t,n){if("undefined"===typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!==typeof r.start)return{result:r.start,precise:!0};if("undefined"!==typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if("undefined"!==typeof(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=dc(e,r),"undefined"!==typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;var r=function(e,t){for(var n,i=0,r=t-e.mediaSequence;r<e.segments.length;r++){if("undefined"!==typeof(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=dc(e,n),"undefined"!==typeof n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:i.result+n},vc=function(e,t,n){if(!e)return 0;if("number"!==typeof n&&(n=0),"undefined"===typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Kt()[1/0]}return gc(e,t,n)},yc=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,r=e.endIndex,a=0;if(i>r){var o=[r,i];i=o[0],r=o[1]}if(i<0){for(var s=i;s<Math.min(0,r);s++)a+=t;i=0}for(var l=i;l<r;l++)a+=n[l].duration;return a},bc=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return vc(e);if(null===t)return null;t=t||0;var r=gc(e,e.mediaSequence+e.segments.length,t);return n&&(r-=i="number"===typeof i?i:mc(null,e)),Math.max(0,r)},_c=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},xc=function(e){return e.excludeUntil&&e.excludeUntil===1/0},wc=function(e){var t=_c(e);return!e.disabled&&!t},Tc=function(e,t){return t.attributes&&t.attributes[e]},Sc=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!wc(e)&&(e.attributes.BANDWIDTH||0)<n})).length},Ec=function(e,t){return!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri))))},kc=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var r in n){for(var a in n[r])if(i=t(n[r][a]))break;if(i)break}return!!i},Cc=function(e){if(!e||!e.playlists||!e.playlists.length)return kc(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(){var t=e.playlists[n],i=t.attributes&&t.attributes.CODECS;return i&&i.split(",").every((function(e){return Pn(e)}))||kc(e,(function(e){return Ec(t,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var i=t();if("continue"!==i&&"object"===typeof i)return i.v}return!0},Mc={liveEdgeDelay:mc,duration:vc,seekable:function(e,t,n){var i=t||0,r=bc(e,t,!0,n);return null===r?tc():tc(i,r)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,o=e.exactManifestTimings,s=n-a,l=hc(t),u=0,c=0;c<l.length;c++){var d=l[c];if(i===d.segmentIndex&&("number"!==typeof r||"number"!==typeof d.partIndex||r===d.partIndex)){u=c;break}}if(s<0){if(u>0)for(var h=u-1;h>=0;h--){var p=l[h];if(s+=p.duration,o){if(s<0)continue}else if(s+nc<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:a-yc({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n}}if(u<0){for(var f=u;f<0;f++)if((s-=t.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n};u=0}for(var m=u;m<l.length;m++){var g=l[m];if(s-=g.duration,o){if(s>0)continue}else if(s-nc>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:a+yc({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:m})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:n}},isEnabled:wc,isDisabled:function(e){return e.disabled},isExcluded:_c,isIncompatible:xc,playlistEnd:bc,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Tc,estimateSegmentRequestTime:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Tc("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:Sc,isAudioOnly:Cc,playlistMatch:Ec,segmentDurationWithParts:dc},Ac=Hu.log,Pc=function(e,t){return"".concat(e,"-").concat(t)},Lc=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][r];t(a,n,i,r)}}))},Ic=function(e){var t=e.playlist,n=e.uri,i=e.id;t.id=i,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},Oc=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var i="placeholder-uri-".concat(n);e.playlists[n].uri=i}var r=Cc(e);Lc(e,(function(t,n,i,a){var o="placeholder-uri-".concat(n,"-").concat(i,"-").concat(a);if(!t.playlists||!t.playlists.length){if(r&&"AUDIO"===n&&!t.uri)for(var s=0;s<e.playlists.length;s++){var l=e.playlists[s];if(l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===i)return}t.playlists=[hn({},t)]}t.playlists.forEach((function(t,n){var i=Pc(n,o);t.uri?t.resolvedUri=t.resolvedUri||Qu(e.uri,t.uri):(t.uri=0===n?o:i,t.resolvedUri=t.uri),t.id=t.id||i,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Ic({playlist:n,id:Pc(t,n.uri)}),n.resolvedUri=Qu(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||Ac.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){Lc(e,(function(t){t.uri&&(t.resolvedUri=Qu(e.uri,t.uri))}))}(e)},Rc=Hu.EventTarget,Dc=function(e,t){if(!e)return t;var n=ec(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=ec(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Nc=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=Qu(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Qu(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Qu(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Qu(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=Qu(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=Qu(t,e.uri))}))},Uc=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},Bc=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},Fc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc,i=ec(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=Uc(t);var a=ec(r,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var i=e.slice(),r=t.slice();n=n||0;for(var a,o=[],s=0;s<r.length;s++){var l=i[s+n],u=r[s];l?(a=l.map||a,o.push(Dc(l,u))):(a&&!u.map&&(u.map=a),o.push(u))}return o}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach((function(e){Nc(e,a.resolvedUri)}));for(var s=0;s<i.playlists.length;s++)i.playlists[s].id===t.id&&(i.playlists[s]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,Lc(e,(function(e,n,i,r){if(e.playlists)for(var o=0;o<e.playlists.length;o++)t.id===e.playlists[o].id&&(e.playlists[o]=a)})),i},jc=function(e,t){var n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],a=r&&r.duration||i&&i.duration;return t&&a?1e3*a:500*(e.partTargetDuration||e.targetDuration||10)},zc=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((0,re.Z)(this,n),r=t.call(this),!e)throw new Error("A non-empty playlist URL or object is required");r.logger_=Ju("PlaylistLoader");var o=a.withCredentials,s=void 0!==o&&o;r.src=e,r.vhs_=i,r.withCredentials=s;var l=i.options_;return r.customTagParsers=l&&l.customTagParsers||[],r.customTagMappers=l&&l.customTagMappers||[],r.llhls=l&&l.llhls,r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind((0,Gt.Z)(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}return(0,ae.Z)(n,[{key:"handleMediaupdatetimeout_",value:function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=Qu(this.main.uri,t.uri);this.llhls&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,r=t.mediaSequence+t.segments.length;if(i){var a=i.parts||[],o=fc(t)-1;o>-1&&o!==a.length-1&&(n._HLS_part=o),(o>-1||a.length)&&r--}n._HLS_msn=r}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var s=new(Kt().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&s.searchParams.set(e,n[e])})),e=s.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}}},{key:"playlistRequestError",value:function(e,t,n){var i=t.uri,r=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:"HLS playlist request error at URL: ".concat(i,"."),responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"parseManifest_",value:function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,r=e.customTagParsers,a=void 0===r?[]:r,o=e.customTagMappers,s=void 0===o?[]:o,l=e.llhls,u=new Sn;t&&u.on("warn",t),n&&u.on("info",n),a.forEach((function(e){return u.addParser(e)})),s.forEach((function(e){return u.addTagMapper(e)})),u.push(i),u.end();var c=u.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){c.hasOwnProperty(e)&&delete c[e]})),c.segments&&c.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!c.targetDuration){var d=10;c.segments&&c.segments.length&&(d=c.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to ".concat(d)),c.targetDuration=d}var h=pc(c);if(h.length&&!c.partTargetDuration){var p=h.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to ".concat(p)),Ac.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=p}return c}({onwarn:function(e){var i=e.message;return t.logger_("m3u8-parser warn for ".concat(n,": ").concat(i))},oninfo:function(e){var i=e.message;return t.logger_("m3u8-parser info for ".concat(n,": ").concat(i))},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}},{key:"haveMetadata",value:function(e){var t=e.playlistString,n=e.playlistObject,i=e.url,r=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:i,manifestString:t});a.lastRequest=Date.now(),Ic({playlist:a,uri:i,id:r});var o=Fc(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(jc(this.media(),!!o)),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),Kt().clearTimeout(this.mediaUpdateTimeout),Kt().clearTimeout(this.finalRenditionTimeout),this.off()}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"===typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(Kt().clearTimeout(this.finalRenditionTimeout),t){var i=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Kt().setTimeout(this.media.bind(this,e,!1),i)}else{var r=this.state,a=!this.media_||e.id!==this.media_.id,o=this.main.playlists[e.id];if(o&&o.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(jc(e,!0)),a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=$u(e.resolvedUri,i),t)return n.playlistRequestError(n.request,e,r);n.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}}},{key:"pause",value:function(){this.mediaUpdateTimeout&&(Kt().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;this.mediaUpdateTimeout&&(Kt().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var i=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Kt().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"updateMediaUpdateTimeout_",value:function(e){var t=this;this.mediaUpdateTimeout&&(Kt().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Kt().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))}},{key:"start",value:function(){var e=this;if(this.started=!0,"object"===typeof this.src)return this.src.uri||(this.src.uri=Kt().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: ".concat(e.src,"."),responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=$u(e.src,n);var i=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(i)}}))}},{key:"srcUri",value:function(){return"string"===typeof this.src?this.src:this.src.uri}},{key:"setupInitialPlaylist",value:function(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,Oc(this.main,this.srcUri()),e.playlists.forEach((function(e){e.segments=Uc(e),e.segments.forEach((function(t){Nc(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));var t=this.srcUri()||Kt().location.href;this.main=function(e,t){var n=Pc(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Kt().location.href,resolvedUri:Kt().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}]),n}(Rc),Hc=Hu.xhr,Vc=function(e,t,n,i){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},Gc=function(){var e=function e(t,n){t=ec({timeout:45e3},t);var i=e.beforeRequest||Hu.Vhs.xhr.beforeRequest;if(i&&"function"===typeof i){var r=i(t);r&&(t=r)}var a=(!0===Hu.Vhs.xhr.original?Hc:Hu.Vhs.xhr)(t,(function(e,t){return Vc(a,e,t,n)})),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a};return e.original=!0,e},Wc=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"===typeof t.offset||"bigint"===typeof t.length?Kt().BigInt(t.offset)+Kt().BigInt(t.length)-Kt().BigInt(1):t.offset+t.length-1)),n},Zc=function(e,t){return e.start(t)+"-"+e.end(t)},qc=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Xc=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Yc=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];Bn(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},Kc=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Qc=function(e){return e.resolvedUri},$c=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",r=0;r<t.length/n;r++)i+=t.slice(r*n,r*n+n).map(qc).join("")+" "+t.slice(r*n,r*n+n).map(Xc).join("")+"\n";return i},Jc=Object.freeze({__proto__:null,createTransferableMessage:Yc,initSegmentId:Kc,segmentKeyId:Qc,hexDump:$c,tagDump:function(e){var t=e.bytes;return $c(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=Zc(e,t)+" ";return n}}),ed=function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,i=0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:i},s=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)}(i,a.segment);return s&&(o.programDateTime=s.toISOString()),r(null,o)},td=function(e){var t=e.programTime,n=e.playlist,i=e.retryCount,r=void 0===i?2:i,a=e.seekTo,o=e.pauseAfterSeek,s=void 0===o||o,l=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if("undefined"===typeof t||!n||!a)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!l.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return u({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var c=function(e,t){var n;try{n=new Date(e)}catch(u){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<t.segments[r+1].dateTimeObject));r++);var a,o=t.segments[t.segments.length-1],s=o.dateTimeObject,l=o.videoTimingInfo?(a=o.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:o.duration+.25*o.duration;return n>new Date(s.getTime()+1e3*l)?null:(n>s&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Mc.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(t,n);if(!c)return u({message:"".concat(t," was not found in the stream")});var d=c.segment,h=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch(a){}var r=n.getTime();return(i.getTime()-r)/1e3}(d.dateTimeObject,t);if("estimate"===c.type)return 0===r?u({message:"".concat(t," is not buffered yet. Try again")}):(a(c.estimatedStart+h),void l.one("seeked",(function(){td({programTime:t,playlist:n,retryCount:r-1,seekTo:a,pauseAfterSeek:s,tech:l,callback:u})})));var p=d.start+h;l.one("seeked",(function(){return u(null,l.currentTime())})),s&&l.pause(),a(p)},nd=function(e,t){if(4===e.readyState)return t()},id=function(e,t,n){var i,r=[],a=!1,o=function(e,t,i,r){return t.abort(),a=!0,n(e,t,i,r)},s=function(e,t){if(!a){if(e)return o(e,t,"",r);var n=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!==typeof e}))).length<=1)return Fn(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),a=0;return t.forEach((function(e){e=Fn(e),r.set(e,a),a+=e.byteLength})),r}(r,Gn(n,!0)),i=i||$i(r),r.length<10||i&&r.length<i+2)return nd(t,(function(){return o(e,t,"",r)}));var s=yr(r);return"ts"===s&&r.length<188||!s&&r.length<376?nd(t,(function(){return o(e,t,"",r)})):o(null,t,s,r)}},l={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){t.total,t.loaded;return Vc(e,null,{statusCode:e.status},s)}))}},u=t(l,(function(e,t){return Vc(u,e,t,s)}));return u},rd=Hu.EventTarget,ad=function(e,t){if(!Bc(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(i.byterange||r.byterange){var a=i.byterange,o=r.byterange;if(a&&!o||!a&&o)return!1;if(a.offset!==o.offset||a.length!==o.length)return!1}}return!0},od=function(e,t){var n,i,r={};for(var a in e){var o=e[a].sidx;if(o){var s=vi(o);if(!t[s])break;var l=t[s].sidxInfo;n=l,i=o,(Boolean(!n.map&&!i.map)||Boolean(n.map&&i.map&&n.map.byterange.offset===i.map.byterange.offset&&n.map.byterange.length===i.map.byterange.length))&&n.uri===i.uri&&n.byterange.offset===i.byterange.offset&&n.byterange.length===i.byterange.length&&(r[s]=t[s])}}return r},sd=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;(0,re.Z)(this,n),(r=t.call(this)).mainPlaylistLoader_=o||(0,Gt.Z)(r),o||(r.isMain_=!0);var s=a.withCredentials,l=void 0!==s&&s;if(r.vhs_=i,r.withCredentials=l,!e)throw new Error("A non-empty playlist URL or object is required");return r.on("minimumUpdatePeriod",(function(){r.refreshXml_()})),r.on("mediaupdatetimeout",(function(){r.refreshMedia_(r.media().id)})),r.state="HAVE_NOTHING",r.loadedPlaylists_={},r.logger_=Ju("DashPlaylistLoader"),r.isMain_?(r.mainPlaylistLoader_.srcUrl=e,r.mainPlaylistLoader_.sidxMapping_={}):r.childPlaylist_=e,r}return(0,ae.Z)(n,[{key:"requestErrored_",value:function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!==typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}},{key:"addSidxSegments_",value:function(e,t,n){var i=this,r=e.sidx&&vi(e.sidx);if(e.sidx&&r&&!this.mainPlaylistLoader_.sidxMapping_[r]){var a=$u(e.sidx.resolvedUri),o=function(a,o){if(!i.requestErrored_(a,o,t)){var s,l=i.mainPlaylistLoader_.sidxMapping_;try{s=Ki()(Fn(o.response).subarray(8))}catch(u){return void i.requestErrored_(u,o,t)}return l[r]={sidxInfo:e.sidx,sidx:s},di(e,s,e.sidx.resolvedUri),n(!0)}};this.request=id(a,this.vhs_.xhr,(function(t,n,r,s){if(t)return o(t,n);if(!r||"mp4"!==r)return o({status:n.status,message:"Unsupported ".concat(r||"unknown"," container type for sidx segment at URL: ").concat(a),response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},n);var l=e.sidx.byterange,u=l.offset,c=l.length;if(s.length>=c+u)return o(t,{response:s.subarray(u,u+c),status:n.status,uri:n.uri});i.request=i.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:Wc({byterange:e.sidx.byterange})},o)}))}else this.mediaRequest_=Kt().setTimeout((function(){return n(!1)}),0)}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Kt().clearTimeout(this.minimumUpdatePeriodTimeout_),Kt().clearTimeout(this.mediaRequest_),Kt().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"===typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}var i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(i){t.haveMetadata({startingState:n,playlist:e})})))}},{key:"haveMetadata",value:function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MAIN_MANIFEST"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Kt().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(Kt().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(e){var t=this;Kt().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Kt().setTimeout((function(){return t.load()}),i)}else this.started?n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var e=this;this.started=!0,this.isMain_?this.requestMain_((function(t,n){e.haveMain_(),e.hasPendingRequest()||e.media_||e.media(e.mainPlaylistLoader_.main.playlists[0])})):this.mediaRequest_=Kt().setTimeout((function(){return e.haveMain_()}),0)}},{key:"requestMain_",value:function(e){var t=this;this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(!t.requestErrored_(n,i)){var r=i.responseText!==t.mainPlaylistLoader_.mainXml_;return t.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.mainLoaded_=Date.parse(i.responseHeaders.date):t.mainLoaded_=Date.now(),t.mainPlaylistLoader_.srcUrl=$u(t.mainPlaylistLoader_.srcUrl,i),r?(t.handleMain_(),void t.syncClientServerClock_((function(){return e(i,r)}))):e(i,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))}},{key:"syncClientServerClock_",value:function(e){var t=this,n=Xi(this.mainPlaylistLoader_.mainXml_);return null===n?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Qu(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(t.request){if(i)return t.mainPlaylistLoader_.clientOffset_=t.mainLoaded_-Date.now(),e();var a;a="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.mainLoaded_:Date.parse(r.responseText),t.mainPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))}},{key:"haveMain_",value:function(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}},{key:"handleMain_",value:function(){this.mediaRequest_=null;var e=this.mainPlaylistLoader_.main,t=function(e){var t=e.mainXml,n=e.srcUrl,i=e.clientOffset,r=e.sidxMapping,a=e.previousManifest,o=qi(t,{manifestUri:n,clientOffset:i,sidxMapping:r,previousManifest:a});return Oc(o,n),o}({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=function(e,t,n){for(var i=!0,r=ec(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var s=vi(o.sidx);n&&n[s]&&n[s].sidx&&di(o,n[s].sidx,o.sidx.resolvedUri)}var l=Fc(r,o,ad);l&&(r=l,i=!1)}return Lc(t,(function(e,t,n,a){if(e.playlists&&e.playlists.length){var o=e.playlists[0].id,s=Fc(r,e.playlists[0],ad);s&&((r=s).mediaGroups[t][n][a].playlists[0]=r.playlists[o],i=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r}(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;var n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)}},{key:"updateMinimumUpdatePeriodTimeout_",value:function(){var e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Kt().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!==typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of ".concat(t,", not setting a timeout")):this.createMUPTimeout_(t)}},{key:"createMUPTimeout_",value:function(e){var t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Kt().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)}},{key:"refreshXml_",value:function(){var e=this;this.requestMain_((function(t,n){n&&(e.media_&&(e.media_=e.mainPlaylistLoader_.main.playlists[e.media_.id]),e.mainPlaylistLoader_.sidxMapping_=function(e,t){var n=od(e.playlists,t);return Lc(e,(function(e,i,r,a){if(e.playlists&&e.playlists.length){var o=e.playlists;n=ec(n,od(o,t))}})),n}(e.mainPlaylistLoader_.main,e.mainPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))}},{key:"refreshMedia_",value:function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();var n=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==n[e];if(i?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){!function e(){t.media().endList||(t.mediaUpdateTimeout=Kt().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),jc(t.media(),Boolean(i))))}()}this.trigger("loadedplaylist")}}]),n}(rd),ld={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},ud=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},cd=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=ud(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},dd=function(e){return"var browserWorkerPolyFill = ".concat(ud.toString(),";\n")+"browserWorkerPolyFill(self);\n"+e},hd=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},pd=dd(hd((function(){var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var i,r,a,o,s,l,u,c,d,h,p,f,m,g,v,y,b,_,x,w,T,S,E,k,C,M,A,P,L,I,O,R,D,N,U,B,F=t,j=Math.pow(2,32),z={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*j+n.getUint32(4)},MAX_UINT32:j},H=z.MAX_UINT32;!function(){var e;if(E={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(e in E)E.hasOwnProperty(e)&&(E[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);k=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),M=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),L={video:A,audio:P},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),N=D,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=D,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),i=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},r=function(){return i(E.dinf,i(E.dref,R))},a=function(e){return i(E.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},o=function(){return i(E.ftyp,k,C,k,M)},y=function(e){return i(E.hdlr,L[e])},s=function(e){return i(E.mdat,e)},v=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),i(E.mdhd,t)},g=function(e){return i(E.mdia,v(e),y(e.type),u(e))},l=function(e){return i(E.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return i(E.minf,"video"===e.type?i(E.vmhd,I):i(E.smhd,O),r(),_(e))},c=function(e,t){for(var n=[],r=t.length;r--;)n[r]=w(t[r]);return i.apply(null,[E.moof,l(e)].concat(n))},d=function(e){for(var t=e.length,n=[];t--;)n[t]=f(e[t]);return i.apply(null,[E.moov,p(4294967295)].concat(n).concat(h(e)))},h=function(e){for(var t=e.length,n=[];t--;)n[t]=T(e[t]);return i.apply(null,[E.mvex].concat(n))},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(E.mvhd,t)},b=function(e){var t,n,r=e.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,a[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return i(E.sdtp,a)},_=function(e){return i(E.stbl,x(e),i(E.stts,B),i(E.stsc,N),i(E.stsz,U),i(E.stco,D))},function(){var e,t;x=function(n){return i(E.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):t(n))},e=function(e){var t,n,r=e.sps||[],a=e.pps||[],o=[],s=[];for(t=0;t<r.length;t++)o.push((65280&r[t].byteLength)>>>8),o.push(255&r[t].byteLength),o=o.concat(Array.prototype.slice.call(r[t]));for(t=0;t<a.length;t++)s.push((65280&a[t].byteLength)>>>8),s.push(255&a[t].byteLength),s=s.concat(Array.prototype.slice.call(a[t]));if(n=[E.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(E.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],o,[a.length],s))),i(E.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];n.push(i(E.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return i.apply(null,n)},t=function(e){return i(E.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),a(e))}}(),m=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return i(E.tkhd,t)},w=function(e){var t,n,r,a,o,s;return t=i(E.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/H),s=Math.floor(e.baseMediaDecodeTime%H),n=i(E.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),92,"audio"===e.type?(r=S(e,92),i(E.traf,t,n,r)):(a=b(e),r=S(e,a.length+92),i(E.traf,t,n,r,a))},f=function(e){return e.duration=e.duration||4294967295,i(E.trak,m(e),g(e))},T=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),i(E.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var r,a,o,s,l,u;for(t+=20+16*(s=e.samples||[]).length,o=n(s,t),(a=new Uint8Array(o.length+16*s.length)).set(o),r=o.length,u=0;u<s.length;u++)l=s[u],a[r++]=(4278190080&l.duration)>>>24,a[r++]=(16711680&l.duration)>>>16,a[r++]=(65280&l.duration)>>>8,a[r++]=255&l.duration,a[r++]=(4278190080&l.size)>>>24,a[r++]=(16711680&l.size)>>>16,a[r++]=(65280&l.size)>>>8,a[r++]=255&l.size,a[r++]=l.flags.isLeading<<2|l.flags.dependsOn,a[r++]=l.flags.isDependedOn<<6|l.flags.hasRedundancy<<4|l.flags.paddingValue<<1|l.flags.isNonSyncSample,a[r++]=61440&l.flags.degradationPriority,a[r++]=15&l.flags.degradationPriority,a[r++]=(4278190080&l.compositionTimeOffset)>>>24,a[r++]=(16711680&l.compositionTimeOffset)>>>16,a[r++]=(65280&l.compositionTimeOffset)>>>8,a[r++]=255&l.compositionTimeOffset;return i(E.trun,a)},e=function(e,t){var r,a,o,s,l,u;for(t+=20+8*(s=e.samples||[]).length,o=n(s,t),(r=new Uint8Array(o.length+8*s.length)).set(o),a=o.length,u=0;u<s.length;u++)l=s[u],r[a++]=(4278190080&l.duration)>>>24,r[a++]=(16711680&l.duration)>>>16,r[a++]=(65280&l.duration)>>>8,r[a++]=255&l.duration,r[a++]=(4278190080&l.size)>>>24,r[a++]=(16711680&l.size)>>>16,r[a++]=(65280&l.size)>>>8,r[a++]=255&l.size;return i(E.trun,r)},S=function(n,i){return"audio"===n.type?e(n,i):t(n,i)}}();var V,G,W,Z,q,X,Y,K,Q={ftyp:o,mdat:s,moof:c,moov:d,initSegment:function(e){var t,n=o(),i=d(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}},$=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},J={groupNalsIntoFrames:function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},groupFramesIntoGops:function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var n,i,r,a,o,s=t||0,l=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)o=a[i],s+=(r=$(o,s)).size,l.push(r);return l},concatenateNalData:function(e){var t,n,i,r,a,o,s=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)o=a[i],d.setUint32(s,o.data.byteLength),s+=4,c.set(o.data,s),s+=o.data.byteLength;return c},generateSampleTableForFrame:function(e,t){var n,i=[];return n=$(e,t||0),i.push(n),i},concatenateNalDataForFrame:function(e){var t,n,i=0,r=e.byteLength,a=e.length,o=new Uint8Array(r+4*a),s=new DataView(o.buffer);for(t=0;t<e.length;t++)n=e[t],s.setUint32(i,n.data.byteLength),i+=4,o.set(n.data,i),i+=n.data.byteLength;return o}},ee=[33,16,5,32,164,27],te=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ne=function(e){for(var t=[];e--;)t.push(0);return t},ie=9e4;X=function(e,t){return G(q(e,t))},Y=function(e,t){return W(Z(e),t)},K=function(e,t,n){return Z(n?e:e-t)};var oe={ONE_SECOND_IN_TS:ie,secondsToVideoTs:G=function(e){return e*ie},secondsToAudioTs:W=function(e,t){return e*t},videoTsToSeconds:Z=function(e){return e/ie},audioTsToSeconds:q=function(e,t){return e/t},audioTsToVideoTs:X,videoTsToAudioTs:Y,metadataTsToSeconds:K},se=function(){if(!V){var e={96e3:[ee,[227,64],ne(154),[56]],88200:[ee,[231],ne(170),[56]],64e3:[ee,[248,192],ne(240),[56]],48e3:[ee,[255,192],ne(268),[55,148,128],ne(54),[112]],44100:[ee,[255,192],ne(268),[55,163,128],ne(84),[112]],32e3:[ee,[255,192],ne(268),[55,234],ne(226),[112]],24e3:[ee,[255,192],ne(268),[55,255,128],ne(268),[111,112],ne(126),[224]],16e3:[ee,[255,192],ne(268),[55,255,128],ne(268),[111,255],ne(269),[223,108],ne(195),[1,192]],12e3:[te,ne(268),[3,127,248],ne(268),[6,255,240],ne(268),[13,255,224],ne(268),[27,253,128],ne(259),[56]],11025:[te,ne(268),[3,127,248],ne(268),[6,255,240],ne(268),[13,255,224],ne(268),[27,255,192],ne(268),[55,175,128],ne(108),[112]],8e3:[te,ne(268),[3,121,16],ne(47),[7]]};t=e,V=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return V},le=oe,ue={prefixWithSilence:function(e,t,n,i){var r,a,o,s,l,u=0,c=0,d=0;if(t.length&&(r=le.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(le.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(u=r-Math.max(n,i),d=(c=Math.floor(u/a))*a),!(c<1||d>le.ONE_SECOND_IN_TS/2))){for((o=se()[e.samplerate])||(o=t[0].data),s=0;s<c;s++)l=t[0],t.splice(0,0,{data:o,dts:l.dts-a,pts:l.pts-a});return e.baseMediaDecodeTime-=Math.floor(le.videoTsToAudioTs(d,e.samplerate)),d}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},generateSampleTable:function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},concatenateFrameData:function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}},ce=oe.ONE_SECOND_IN_TS,de={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/ce,n=Math.floor(n)),n},collectDtsInfo:function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}},he={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},parseUserData:function(e){return 181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,i,r,a,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],o.push(a));return o},discardEmulationPreventionBytes:function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},USER_DATA_REGISTERED_ITU_T_T35:4},pe=F,fe=he,me=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!==typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ee(0,0),new Ee(0,1),new Ee(1,0),new Ee(1,1)],this.parse708captions_&&(this.cc708Stream_=new _e({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(me.prototype=new pe).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=fe.parseSei(e.escapedRBSP)).payload&&t.payloadType===fe.USER_DATA_REGISTERED_ITU_T_T35&&(n=fe.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=fe.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},me.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},me.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},me.prototype.flush=function(){return this.flushStream("flush")},me.prototype.partialFlush=function(){return this.flushStream("partialFlush")},me.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},me.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},me.prototype.setsChannel1Active=function(e){return 4096===(30720&e.ccData)},me.prototype.setsChannel2Active=function(e){return 6144===(30720&e.ccData)},me.prototype.setsTextOrXDSActive=function(e){return 256===(28928&e.ccData)||4138===(30974&e.ccData)||6186===(30974&e.ccData)},me.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ge={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ve=function(e){return 32<=e&&e<=127||160<=e&&e<=255},ye=function(e){this.windowNum=e,this.reset()};ye.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ye.prototype.getText=function(){return this.rows.join("\n")},ye.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ye.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ye.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ye.prototype.addText=function(e){this.rows[this.rowIdx]+=e},ye.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var be=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new ye(-1),this.windows=[],this.stream=n,"string"===typeof t&&this.createTextDecoder(t)};be.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new ye(n),"function"===typeof t&&(this.windows[n].beforeRowOverflow=t)},be.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},be.prototype.createTextDecoder=function(e){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var _e=function e(t){t=t||{},e.prototype.init.call(this);var n,i=this,r=t.captionServices||{},a={};Object.keys(r).forEach((function(e){n=r[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(i.new708Packet(),i.add708Bytes(e)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(e))}};_e.prototype=new pe,_e.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},_e.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},_e.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)i=31&(a=t[r++]),7===(n=a>>5)&&i>0&&(n=a=t[r++]),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},_e.prototype.pushServiceBlock=function(e,t,n){var i,r=t,a=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,r));r<t+n&&r<a.length;r++)i=a[r],ve(i)?r=this.handleText(r,o):24===i?r=this.multiByteCharacter(r,o):16===i?r=this.extendedCommands(r,o):128<=i&&i<=135?r=this.setCurrentWindow(r,o):152<=i&&i<=159?r=this.defineWindow(r,o):136===i?r=this.clearWindows(r,o):140===i?r=this.deleteWindows(r,o):137===i?r=this.displayWindows(r,o):138===i?r=this.hideWindows(r,o):139===i?r=this.toggleWindows(r,o):151===i?r=this.setWindowAttributes(r,o):144===i?r=this.setPenAttributes(r,o):145===i?r=this.setPenColor(r,o):146===i?r=this.setPenLocation(r,o):143===i?o=this.reset(r,o):8===i?o.currentWindow.backspace():12===i?o.currentWindow.clearText():13===i?o.currentWindow.pendingNewLine=!0:14===i?o.currentWindow.clearText():141===i&&r++},_e.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return ve(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},_e.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},_e.prototype.initService=function(e,t){var n,i,r=this;return(n="SERVICE"+e)in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[e]=new be(e,i,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},_e.prototype.handleText=function(e,t,n){var i,r,a=n&&n.isExtended,o=n&&n.isMultiByte,s=this.current708Packet.data,l=a?4096:0,u=s[e],c=s[e+1],d=t.currentWindow;return t.textDecoder_&&!a?(o?(r=[u,c],e++):r=[u],i=t.textDecoder_.decode(new Uint8Array(r))):i=function(e){var t=ge[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)}(l|u),d.pendingNewLine&&!d.isEmpty()&&d.newLine(this.getPts(e)),d.pendingNewLine=!1,d.addText(i),e},_e.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return ve(i)&&ve(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},_e.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},_e.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var a=t.currentWindow;return i=n[++e],a.visible=(32&i)>>5,a.rowLock=(16&i)>>4,a.columnLock=(8&i)>>3,a.priority=7&i,i=n[++e],a.relativePositioning=(128&i)>>7,a.anchorVertical=127&i,i=n[++e],a.anchorHorizontal=i,i=n[++e],a.anchorPoint=(240&i)>>4,a.rowCount=15&i,i=n[++e],a.columnCount=63&i,i=n[++e],a.windowStyle=(56&i)>>3,a.penStyle=7&i,a.virtualRowCount=a.rowCount+1,e},_e.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},_e.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},_e.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},_e.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},_e.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},_e.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},_e.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},_e.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},_e.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},_e.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},_e.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},_e.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var xe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},we=function(e){return null===e?"":(e=xe[e]||e,String.fromCharCode(e))},Te=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Se=function(){for(var e=[],t=15;t--;)e.push("");return e},Ee=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096===(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Se();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Se();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Se()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=we((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=we((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14===(14&r)&&this.addFormatting(e.pts,["i"]),1===(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=Te.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16===(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=we(i),a+=we(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ee.prototype=new pe,Ee.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(n){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ee.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Se(),this.nonDisplayed_=Se(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ee.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ee.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ee.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ee.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ee.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ee.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ee.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ee.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ee.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Se(),this.displayed_=Se()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ee.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ee.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ee.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ee.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ee.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ee.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var ke={CaptionStream:me,Cea608Stream:Ee,Cea708Stream:_e},Ce={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Me="shared",Ae=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Pe=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||Me,this.push=function(e){this.type_!==Me&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=Ae(e.dts,i),e.pts=Ae(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Pe.prototype=new F;var Le,Ie=Pe,Oe=Ae,Re=function(e,t,n){if(!e)return-1;for(var i=n;i<e.length;i++)if(e[i]===t)return i;return-1},De=F,Ne=Ce,Ue=Re,Be=3,Fe=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},je=function(e,t,n){return decodeURIComponent(Fe(e,t,n))},ze=function(e,t,n){return unescape(Fe(e,t,n))},He=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ve={APIC:function(e){var t,n,i=1;e.data[0]===Be&&((t=Ue(e.data,0,i))<0||(e.mimeType=ze(e.data,i,t),i=t+1,e.pictureType=e.data[i],i++,(n=Ue(e.data,0,i))<0||(e.description=je(e.data,i,n),i=n+1,"--\x3e"===e.mimeType?e.url=ze(e.data,i,e.data.length):e.pictureData=e.data.subarray(i,e.data.length))))},"T*":function(e){e.data[0]===Be&&(e.value=je(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;e.data[0]===Be&&-1!==(t=Ue(e.data,0,1))&&(e.description=je(e.data,1,t),e.value=je(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value)},"W*":function(e){e.url=ze(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;e.data[0]===Be&&-1!==(t=Ue(e.data,0,1))&&(e.description=je(e.data,1,t),e.url=ze(e.data,t+1,e.data.length).replace(/\0.*$/,""))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=ze(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Le=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],a=0;if(Le.prototype.init.call(this),this.dispatchType=Ne.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,s,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),a+=e.data.byteLength,1===r.length&&(i=He(e.data.subarray(6,10)),i+=10),!(a<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<i;)t.data.set(r[0].data.subarray(0,i-l),l),l+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=He(t.data.subarray(10,14)),i-=He(t.data.subarray(16,20)));do{if((o=He(t.data.subarray(n+4,n+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=s.id,Ve[s.id]?Ve[s.id](s):"T"===s.id[0]?Ve["T*"](s):"W"===s.id[0]&&Ve["W*"](s),"com.apple.streaming.transportStreamTimestamp"===s.owner){var u=s.data,c=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;c*=4,c+=3&u[7],s.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=o}while(n<i);this.trigger("data",t)}}},Le.prototype=new De;var Ge,We,Ze,qe=Le,Xe=F,Ye=ke,Ke=Ce,Qe=Ie,$e=188;(Ge=function(){var e=new Uint8Array($e),t=0;Ge.prototype.init.call(this),this.push=function(n){var i,r=0,a=$e;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=$e,a+=$e);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===$e&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new Xe,We=function(){var e,t,n,i;We.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],o=(31&e[r+1])<<8|e[r+2];a===Ke.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=o:a===Ke.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=o:a===Ke.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][o]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Ke.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Ke.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},We.prototype=new Xe,We.STREAM_TYPES={h264:27,adts:15},Ze=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},o=function(e,n,i){var r,a,o=new Uint8Array(e.size),s={type:n},l=0,u=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,l=0;l<e.data.length;l++)a=e.data[l],o.set(a.data,u),u+=a.data.byteLength;!function(e,t){var n,i=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===i&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!==(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))}(o,s),r="video"===n||s.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",s)}};Ze.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Ke.H264_STREAM_TYPE:e=i,t="video";break;case Ke.ADTS_STREAM_TYPE:e=r,t="audio";break;case Ke.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(i,"video"),o(r,"audio"),o(a,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},Ze.prototype=new Xe;var Je={PAT_PID:0,MP2T_PACKET_LENGTH:$e,TransportPacketStream:Ge,TransportParseStream:We,ElementaryStream:Ze,TimestampRolloverStream:Qe,CaptionStream:Ye.CaptionStream,Cea608Stream:Ye.Cea608Stream,Cea708Stream:Ye.Cea708Stream,MetadataStream:qe};for(var et in Ke)Ke.hasOwnProperty(et)&&(Je[et]=Ke[et]);var tt,nt=Je,it=F,rt=oe.ONE_SECOND_IN_TS,at=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];tt=function(e){var t,n=0;tt.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes ".concat(e," to ").concat(t," in frame ").concat(n," outside syncword")})},this.push=function(i){var r,a,o,s,l,u=0;if(e||(n=0),"audio"===i.type){var c;for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+i.data.byteLength)).set(o),t.set(i.data,o.byteLength)):t=i.data;u+7<t.length;)if(255===t[u]&&240===(246&t[u+1])){if("number"===typeof c&&(this.skipWarn_(c,u),c=null),a=2*(1&~t[u+1]),r=(3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5,l=(s=1024*(1+(3&t[u+6])))*rt/at[(60&t[u+2])>>>2],t.byteLength-u<r)break;this.trigger("data",{pts:i.pts+n*l,dts:i.dts+n*l,sampleCount:s,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:at[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+a,u+r)}),n++,u+=r}else"number"!==typeof c&&(c=u),u++;"number"===typeof c&&(this.skipWarn_(c,u),c=null),t=t.subarray(u)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},tt.prototype=new it;var ot,st,lt,ut=tt,ct=F,dt=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(r,r+o)),n=new DataView(a.buffer).getUint32(0),i=8*o,t-=o},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!==(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};st=function(){var e,t,n=0;st.prototype.init.call(this),this.push=function(i){var r;t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},st.prototype=new ct,lt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ot=function(){var e,t,n,i,r,a,o,s=new st;ot.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:n,dts:i,data:o,nalUnitTypeCode:31&o[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},a=function(e){var t,n,i,r,a,s,l,u,c,d,h,p,f=0,m=0,g=0,v=0,y=[1,1];if(n=(t=new dt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),lt[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)t.readBoolean()&&o(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),p=0;p<l;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(u+1)-2*f-2*m,height:(2-d)*(c+1)*16-2*g-2*v,sarRatio:y}}},ot.prototype=new ct;var ht,pt={H264Stream:ot,NalByteStream:st},ft=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],mt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},gt=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=mt(t,n))},vt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},yt={isLikelyAacData:function(e){var t=gt(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},parseId3TagSize:mt,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240===(246&e[t+1]))return ft[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=vt(e.subarray(10,14)));do{if((n=vt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){var a=unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r));if("com.apple.streaming.transportStreamTimestamp"===a){var o=i.subarray(r+1),s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return s*=4,s+=3&o[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}},bt=yt;(ht=function(){var e=new Uint8Array,t=0;ht.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,a,o,s=0,l=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!==(255&e[l])||240!==(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(s=bt.parseAdtsSize(e,l))>e.length)break;a={type:"audio",data:e.subarray(l,l+s),pts:t,dts:t},this.trigger("data",a),l+=s}else{if(e.length-l<10)break;if(l+(s=bt.parseId3TagSize(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+s)},this.trigger("data",r),l+=s}i=e.length-l,e=i>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new F;var _t,xt,wt,Tt,St=F,Et=Q,kt=J,Ct=ue,Mt=de,At=nt,Pt=oe,Lt=ut,It=pt.H264Stream,Ot=ht,Rt=yt.isLikelyAacData,Dt=oe.ONE_SECOND_IN_TS,Nt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ut=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Bt=function(e,t){t.stream=e,this.trigger("log",t)},Ft=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",Bt.bind(e,r))}},jt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},zt=function(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};xt=function(e,t){var n,i=[],r=0,a=0,o=1/0;n=(t=t||{}).firstSequenceNumber||0,xt.prototype.init.call(this),this.push=function(t){Mt.collectDtsInfo(e,t),e&&Nt.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,l,u,c,d,h,p;0!==i.length?(s=Ct.trimAdtsFramesByEarliestDts(i,e,r),e.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=Ct.prefixWithSilence(e,s,a,o),e.samples=Ct.generateSampleTable(s),u=Et.mdat(Ct.concatenateFrameData(s)),i=[],l=Et.moof(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),Mt.clearDtsInfo(e),d=Math.ceil(1024*Dt/e.samplerate),s.length&&(h=s.length*d,this.trigger("segmentTimingInfo",zt(Pt.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+h,s[0].pts+h,p||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+h})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Mt.clearDtsInfo(e),i=[],this.trigger("reset")}},xt.prototype=new St,_t=function(e,t){var n,i,r,a=[],o=[];n=(t=t||{}).firstSequenceNumber||0,_t.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Mt.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Ut.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,r,s,l,u,c,d,h,p=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=kt.groupNalsIntoFrames(a),(s=kt.groupFramesIntoGops(i))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],e))?(p=r.duration,s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=kt.extendFirstKeyFrame(s)),o.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Mt.clearDtsInfo(e),s=f}Mt.collectDtsInfo(e,s),e.samples=kt.generateSampleTable(s),u=Et.mdat(kt.concatenateNalData(s)),e.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=s[0],h=s[s.length-1],this.trigger("segmentTimingInfo",zt(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Et.moof(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){Mt.clearDtsInfo(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)r=(a=this.gopCache_[o]).gop,e.pps&&jt(e.pps[0],a.pps[0])&&e.sps&&jt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||s>n)&&(i=a,s=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,l,u;for(a=e.byteLength,s=e.nalCount,l=e.duration,t=n=0;t<o.length&&n<e.length&&(i=o[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,l-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=l,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,l;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(i=o[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(l=s?n:a))return e;var u=e.slice(l),c=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){o=e}},_t.prototype=new St,Tt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!==typeof(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"===typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Tt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},Tt.prototype=new St,Tt.prototype.flush=function(e){var t,n,i,r,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Ut.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Nt.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,i=Et.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(i.byteLength),o.initSegment.set(i),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=Pt.metadataTsToSeconds(t.startPts,s,this.keepOriginalTimestamps),t.endTime=Pt.metadataTsToSeconds(t.endPts,s,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=Pt.metadataTsToSeconds(n.pts,s,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),r=0;r<o.captions.length;r++)t=o.captions[r],this.trigger("caption",t);for(r=0;r<o.metadata.length;r++)n=o.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Tt.prototype.setRemux=function(e){this.remuxTracks=e},wt=function(e){var t,n,i=this,r=!0;wt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new At.MetadataStream,r.aacStream=new Ot,r.audioTimestampRolloverStream=new At.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new At.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Lt,r.coalesceStream=new Tt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new xt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Ft(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new At.MetadataStream,r.packetStream=new At.TransportPacketStream,r.parseStream=new At.TransportParseStream,r.elementaryStream=new At.ElementaryStream,r.timestampRolloverStream=new At.TimestampRolloverStream,r.adtsStream=new Lt,r.h264Stream=new It,r.captionStream=new At.CaptionStream(e),r.coalesceStream=new Tt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new _t(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new xt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Ft(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=Rt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},wt.prototype=new St;var Ht,Vt,Gt,Wt,Zt={Transmuxer:wt,VideoSegmentStream:_t,AudioSegmentStream:xt,AUDIO_PROPERTIES:Nt,VIDEO_PROPERTIES:Ut,generateSegmentTimingInfo:zt},qt=function(e){return e>>>0},Xt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Yt=qt,Kt=Xt,Qt=function e(t,n){var i,r,a,o,s,l=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=Yt(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=Kt(t.subarray(i+4,i+8)),o=r>1?i+r:t.byteLength,a===n[0]&&(1===n.length?l.push(t.subarray(i+8,o)):(s=e(t.subarray(i+8,o),n.slice(1))).length&&(l=l.concat(s))),i=o;return l},$t=qt,Jt=z.getUint64,en=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Jt(e.subarray(4)):t.baseMediaDecodeTime=$t(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},tn=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},nn=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:tn(e.subarray(d,d+4))},d+=4,o&&(t.duration=i.getUint32(d),d+=4),s&&(t.size=i.getUint32(d),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},o&&(t.duration=i.getUint32(d),d+=4),s&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=tn(e.subarray(d,d+4)),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},rn=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],o=8&i.flags[2],s=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(i.defaultSampleDuration=n.getUint32(t),t+=4),s&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},an=(Ht="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},he.discardEmulationPreventionBytes),on=ke.CaptionStream,sn=Qt,ln=en,un=nn,cn=rn,dn=Ht,hn=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},pn=function(e,t){var n=sn(e,["moof","traf"]),i=sn(e,["mdat"]),r={},a=[];return i.forEach((function(e,t){var i=n[t];a.push({mdat:e,traf:i})})),a.forEach((function(e){var n,i,a=e.mdat,o=e.traf,s=sn(o,["tfhd"]),l=cn(s[0]),u=l.trackId,c=sn(o,["tfdt"]),d=c.length>0?ln(c[0]).baseMediaDecodeTime:0,h=sn(o,["trun"]);t===u&&h.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach((function(e){var t=un(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"===typeof i?(e.pts=i+dn.BigInt(e.compositionTimeOffset),i+=dn.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)})),s=s.concat(t)})),s}(h,d,l),i=function(e,t,n){var i,r,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=a)if(a=s.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=hn(r,t);if(i={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:an(u),trackId:n},c)i.pts=c.pts,i.dts=c.dts,o=c;else{if(!o){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=o.pts,i.dts=o.dts}l.seiNals.push(i)}return l}(a,n,u),r[u]||(r[u]={seiNals:[],logs:[]}),r[u].seiNals=r[u].seiNals.concat(i.seiNals),r[u].logs=r[u].logs.concat(i.logs))})),r},fn=function(){var e,t,n,i,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new on,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],i=o[n];else if(null===n||!i)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,a,o)}return s=function(e,t,n){if(null===t)return null;var i=pn(e,t)[t]||{};return{seiNals:i.seiNals,logs:i.logs,timescale:n}}(e,n,i),s&&s.logs&&(r.logs=r.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},mn=qt,gn=function(e){return("00"+e.toString(16)).slice(-2)},vn=Qt,yn=Xt,bn=rn,_n=nn,xn=en,wn=z.getUint64,Tn=Ht;Vt=function(e,t){var n=vn(t,["moof","traf"]).reduce((function(t,n){var i,r,a=vn(n,["tfhd"])[0],o=mn(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),s=e[o]||9e4,l=vn(n,["tfdt"])[0],u=new DataView(l.buffer,l.byteOffset,l.byteLength);return"bigint"===typeof(i=1===l[0]?wn(l.subarray(4,12)):u.getUint32(4))?r=i/Tn.BigInt(s):"number"!==typeof i||isNaN(i)||(r=i/s),r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r<t&&(t=r),t}),1/0);return"bigint"===typeof n||isFinite(n)?n:0},Wt=function(e){var t=0===e[0]?12:20;return mn(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},Gt=function(e){var t=vn(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},a=vn(e,["tkhd"])[0];a&&(i=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var o=vn(e,["mdia","hdlr"])[0];if(o){var s=yn(o.subarray(8,12));r.type="vide"===s?"video":"soun"===s?"audio":s}var l=vn(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=yn(u.subarray(4,8));var c,d=vn(u,[r.codec])[0];d&&(/^[asm]vc[1-9]$/i.test(r.codec)?(c=d.subarray(78),"avcC"===yn(c.subarray(4,8))&&c.length>11?(r.codec+=".",r.codec+=gn(c[9]),r.codec+=gn(c[10]),r.codec+=gn(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=d.subarray(28),"esds"===yn(c.subarray(4,8))&&c.length>20&&0!==c[19]?(r.codec+="."+gn(c[19]),r.codec+="."+gn(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var h=vn(e,["mdia","mdhd"])[0];h&&(r.timescale=Wt(h)),n.push(r)})),n};var Sn=Vt,En=Gt,kn=Ce,Cn=function(e){var t=31&e[1];return t<<=8,t|=e[2]},Mn=function(e){return!!(64&e[1])},An=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Pn=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ln={parseType:function(e,t){var n=Cn(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Mn(e),n=4+An(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Mn(e),i=4+An(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var o=i+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Mn,parsePesType:function(e,t){switch(t[Cn(e)]){case kn.H264_STREAM_TYPE:return"video";case kn.ADTS_STREAM_TYPE:return"audio";case kn.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Mn(e))return null;var t=4+An(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+An(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===Pn(31&n[r+3])&&(a=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Pn(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Pn(31&n[r+3])&&(a=!0),a}},In=Ce,On=Oe,Rn={};Rn.ts=Ln,Rn.aac=yt;var Dn=oe.ONE_SECOND_IN_TS,Nn=188,Un=71,Bn=function(e,t,n){for(var i,r,a,o,s=0,l=Nn,u=!1;l<=e.byteLength;)if(e[s]!==Un||e[l]!==Un&&l!==e.byteLength)s++,l++;else{if(i=e.subarray(s,l),"pes"===Rn.ts.parseType(i,t.pid))r=Rn.ts.parsePesType(i,t.table),a=Rn.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=Rn.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),u=!0);if(u)break;s+=Nn,l+=Nn}for(s=(l=e.byteLength)-Nn,u=!1;s>=0;)if(e[s]!==Un||e[l]!==Un&&l!==e.byteLength)s--,l--;else{if(i=e.subarray(s,l),"pes"===Rn.ts.parseType(i,t.pid))r=Rn.ts.parsePesType(i,t.table),a=Rn.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=Rn.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),u=!0);if(u)break;s-=Nn,l-=Nn}},Fn=function(e,t,n){for(var i,r,a,o,s,l,u,c=0,d=Nn,h=!1,p={data:[],size:0};d<e.byteLength;)if(e[c]!==Un||e[d]!==Un)c++,d++;else{if(i=e.subarray(c,d),"pes"===Rn.ts.parseType(i,t.pid))if(r=Rn.ts.parsePesType(i,t.table),a=Rn.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!h&&(o=Rn.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),h=!0),!n.firstKeyFrame)){if(a&&0!==p.size){for(s=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),s.set(u,l),l+=u.byteLength;if(Rn.ts.videoPacketContainsKeyFrame(s)){var f=Rn.ts.parsePesTime(s);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(i),p.size+=i.byteLength}if(h&&n.firstKeyFrame)break;c+=Nn,d+=Nn}for(c=(d=e.byteLength)-Nn,h=!1;c>=0;)if(e[c]!==Un||e[d]!==Un)c--,d--;else{if(i=e.subarray(c,d),"pes"===Rn.ts.parseType(i,t.pid))r=Rn.ts.parsePesType(i,t.table),a=Rn.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(o=Rn.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),h=!0);if(h)break;c-=Nn,d-=Nn}},jn=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=Nn;r<e.byteLength;)if(e[i]!==Un||e[r]!==Un)i++,r++;else{switch(n=e.subarray(i,r),Rn.ts.parseType(n,t.pid)){case"pat":t.pid=Rn.ts.parsePat(n);break;case"pmt":var a=Rn.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}i+=Nn,r+=Nn}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case In.H264_STREAM_TYPE:n.video=[],Fn(e,t,n),0===n.video.length&&delete n.video;break;case In.ADTS_STREAM_TYPE:n.audio=[],Bn(e,t,n),0===n.audio.length&&delete n.audio}}return n},zn=function(e,t){var n;return n=Rn.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,o=0,s=0;e.length-s>=3;){switch(Rn.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=Rn.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=Rn.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=Rn.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===r&&(t=e.subarray(s,s+o),r=Rn.aac.parseSampleRate(t)),i++,s+=o;break;default:s++}if(n)return null}if(null===r||null===a)return null;var l=Dn/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}(e):jn(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;("undefined"===typeof n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=On(e.dts,n),e.pts=On(e.pts,n),e.dtsTime=e.dts/Dn,e.ptsTime=e.pts/Dn}))}if(e.video&&e.video.length){var i=t;if(("undefined"===typeof i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=On(e.dts,i),e.pts=On(e.pts,i),e.dtsTime=e.dts/Dn,e.ptsTime=e.pts/Dn})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=On(r.dts,i),r.pts=On(r.pts,i),r.dtsTime=r.dts/Dn,r.ptsTime=r.pts/Dn}}}(n,t),n):null},Hn=function(){function e(t,n){(0,re.Z)(this,e),this.options=n||{},this.self=t,this.init()}return(0,ae.Z)(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Zt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:oe.videoTsToSeconds(t.start.dts),presentation:oe.videoTsToSeconds(t.start.pts)},end:{decode:oe.videoTsToSeconds(t.end.dts),presentation:oe.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:oe.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=oe.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:oe.videoTsToSeconds(t.start.dts),presentation:oe.videoTsToSeconds(t.start.pts)},end:{decode:oe.videoTsToSeconds(t.end.dts),presentation:oe.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:oe.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=oe.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:oe.videoTsToSeconds(t.start),end:oe.videoTsToSeconds(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:oe.videoTsToSeconds(t.start),end:oe.videoTsToSeconds(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)}},{key:"pushMp4Captions",value:function(e){this.captionParser||(this.captionParser=new fn,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])}},{key:"probeMp4StartTime",value:function(e){var t=e.timescales,n=e.data,i=Sn(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:i,data:n},[n.buffer])}},{key:"probeMp4Tracks",value:function(e){var t=e.data,n=En(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])}},{key:"probeTs",value:function(e){var t=e.data,n=e.baseStartTime,i="number"!==typeof n||isNaN(n)?void 0:n*oe.ONE_SECOND_IN_TS,r=zn(t,i),a=null;r&&((a={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(a.videoStart=r.video[0].ptsTime),a.hasAudio&&(a.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])}},{key:"clearAllMp4Captions",value:function(){this.captionParser&&this.captionParser.clearAllCaptions()}},{key:"clearParsedMp4Captions",value:function(){this.captionParser&&this.captionParser.clearParsedCaptions()}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.transmuxer.reset()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(oe.secondsToVideoTs(t)))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(oe.secondsToVideoTs(e.appendStart)))}},{key:"setRemux",value:function(e){this.transmuxer.setRemux(e.remux)}},{key:"flush",value:function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}},{key:"endTimeline",value:function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Hn(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new Hn(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),fd=cd(pd),md=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,o=e.onData,s=e.onTrackInfo,l=e.onAudioTimingInfo,u=e.onVideoTimingInfo,c=e.onVideoSegmentTimingInfo,d=e.onAudioSegmentTimingInfo,h=e.onId3,p=e.onCaptions,f=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},b=v;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var i=e.data.segment,r=i.type,a=i.initSegment,o=i.captions,s=i.captionStreams,l=i.metadata,u=i.videoFrameDtsTime,c=i.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:s,metadata:l});var d=e.data.segment.boxes||{data:e.data.segment.data},h={type:r,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};"undefined"!==typeof u&&(h.videoFrameDtsTime=u),"undefined"!==typeof c&&(h.videoFramePtsTime=c),n(h)}(n,y,o),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,y),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&u(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(b=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(b||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:y,callback:f}),gd(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),"undefined"!==typeof a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var _=n instanceof ArrayBuffer?n:n.buffer,x=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:_,byteOffset:x,byteLength:n.byteLength},[_])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},gd=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"===typeof e.currentTransmux?e.currentTransmux():md(e.currentTransmux))},vd=function(e,t){e.postMessage({action:t}),gd(e)},yd=function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void vd(t,e);t.transmuxQueue.push(vd.bind(null,t,e))},bd=function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void md(e);e.transmuxer.transmuxQueue.push(e)},_d=function(e){yd("reset",e)},xd=function(e){var t=new fd;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t},wd=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=hn({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function r(a){a.data.action===n&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),i(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;r.byteOffset=a?0:e.data.byteOffset,r.byteLength=e.data.byteLength;var o=[a?e.data:e.data.buffer];t.postMessage(r,o)}else t.postMessage(r)},Td=2,Sd=-101,Ed=-102,kd=function(e){e.forEach((function(e){e.abort()}))},Cd=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Sd,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Ed,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Td,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Td,xhr:t}:null},Md=function(e,t,n){return function(i,r){var a=r.response,o=Cd(i,r);if(o)return n(o,e);if(16!==a.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Td,xhr:r},e);for(var s=new DataView(a),l=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),u=0;u<t.length;u++)t[u].bytes=l;return n(null,e)}},Ad=function(e,t){var n=yr(e.map.bytes);if("mp4"!==n){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported ".concat(n||"unknown"," container for initialization segment at URL: ").concat(i),code:Td})}wd({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var i=n.tracks,r=n.data;return e.map.bytes=r,i.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"===typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},Pd=function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(e,r){var a=Cd(e,r);if(a)return n(a,t);var o="arraybuffer"!==i&&r.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(r.responseText.substring(t.lastReachedChar||0)):r.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),n(null,t)}},Ld=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=t.map&&t.map.tracks||{},m=Boolean(f.audio&&f.video),g=r.bind(null,t,"audio","start"),v=r.bind(null,t,"audio","end"),y=r.bind(null,t,"video","start"),b=r.bind(null,t,"video","end");wd({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var r=e.result;r&&(i(t,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:m}),i=null,r.hasAudio&&!m&&g(r.audioStart),r.hasVideo&&y(r.videoStart),g=null,y=null),bd({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:m,onData:function(e){e.type="combined"===e.type?"video":e.type,d(t,e)},onTrackInfo:function(e){i&&(m&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){g&&"undefined"!==typeof e.start&&(g(e.start),g=null),v&&"undefined"!==typeof e.end&&v(e.end)},onVideoTimingInfo:function(e){y&&"undefined"!==typeof e.start&&(y(e.start),y=null),b&&"undefined"!==typeof e.end&&b(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){o(e)},onId3:function(e,n){s(t,e,n)},onCaptions:function(e){l(t,[e])},isEndOfTimeline:u,onEndedTimeline:function(){c()},onTransmuxerLog:p,onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})},Id=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=new Uint8Array(n);if(function(e){return tr(e,["moof"]).length>0}(f)){t.isFmp4=!0;var m=t.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),i(t,g);var v=function(e){d(t,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),h(null,t,{})};wd({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var i=e.data,a=e.startTime;n=i.buffer,t.bytes=f=i,g.hasAudio&&!g.isMuxed&&r(t,"audio","start",a),g.hasVideo&&r(t,"video","start",a),m.video&&i.byteLength&&t.transmuxer?wd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[m.video.id],callback:function(e){n=e.data.buffer,t.bytes=f=e.data,e.logs.forEach((function(e){p(ec(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if("undefined"===typeof t.container&&(t.container=yr(f)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),void h(null,t,{});Ld({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})}else h(null,t,{})},Od=function(e,t){var n,i=e.id,r=e.key,a=e.encryptedBytes,o=e.decryptionWorker;o.addEventListener("message",(function e(n){if(n.data.source===i){o.removeEventListener("message",e);var r=n.data.decrypted;t(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),n=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),o.postMessage(Yc({source:i,encrypted:a,key:n,iv:r.iv}),[a.buffer,n.buffer])},Rd=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=0,m=!1;return function(e,g){if(!m){if(e)return m=!0,kd(t),h(e,g);if((f+=1)===t.length){var v=function(){if(g.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog;Od({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,Id({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})}))}({decryptionWorker:n,segment:g,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p});Id({segment:g,bytes:g.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return Od({decryptionWorker:n,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(function(e){g.map.bytes=e,Ad(g,(function(e){if(e)return kd(t),h(e,g);v()}))}));v()}}}},Dd=function(e){var t=e.segment,n=e.progressFn;e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn;return function(e){if(!e.target.aborted)return t.stats=ec(t.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}},Nd=function(e){var t=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,r=e.segment,a=e.abortFn,o=e.progressFn,s=e.trackInfoFn,l=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,d=e.id3Fn,h=e.captionsFn,p=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,v=e.onTransmuxerLog,y=[],b=Rd({activeXhrs:y,decryptionWorker:i,trackInfoFn:s,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m,doneFn:g,onTransmuxerLog:v});if(r.key&&!r.key.bytes){var _=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&_.push(r.map.key);var x=t(ec(n,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Md(r,_,b));y.push(x)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var w=t(ec(n,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Md(r,[r.map.key],b));y.push(w)}var T=ec(n,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Wc(r.map)}),S=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,i){var r=Cd(e,i);if(r)return n(r,t);var a=new Uint8Array(i.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,Ad(t,(function(e){if(e)return e.xhr=i,e.status=i.status,n(e,t);n(null,t)}))}}({segment:r,finishProcessingFn:b}),E=t(T,S);y.push(E)}var k=ec(n,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:Wc(r)}),C=t(k,Pd({segment:r,finishProcessingFn:b,responseType:k.responseType}));C.addEventListener("progress",Dd({segment:r,progressFn:o,trackInfoFn:s,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m})),y.push(C);var M={};return y.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:M,abortFn:a}))})),function(){return kd(y)}},Ud=Ju("CodecUtils"),Bd=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Fd=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,i=e.type,r=e.details;t[n]=t[n]||[],t[n].push(Mn("".concat(i).concat(r)))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return Ud("multiple ".concat(e," codecs found as attributes: ").concat(t[e].join(", "),". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.")),void(t[e]=null);t[e]=t[e][0]})),t},jd=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},zd=function(e,t){var n=t.attributes||{},i=Fd(function(e){var t=e.attributes||{};if(t.CODECS)return An(t.CODECS)}(t)||[]);if(Bd(e,t)&&!i.audio&&!function(e,t){if(!Bd(e,t))return!0;var n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1}(e,t)){var r=Fd(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return An(r.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},Hd=Ju("PlaylistSelector"),Vd=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Gd=function(e,t){if(!e)return"";var n=Kt().getComputedStyle(e);return n?n[t]:""},Wd=function(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},Zd=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Kt().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i=i||Kt().Number.MAX_VALUE)},qd=function(e,t,n,i,r,a){if(e){var o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r},s=e.playlists;Mc.isAudioOnly(e)&&(s=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=s.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||Kt().Number.MAX_VALUE,width:t,height:n,playlist:e}}));Wd(l,(function(e,t){return e.bandwidth-t.bandwidth}));var u=(l=l.filter((function(e){return!Mc.isIncompatible(e.playlist)}))).filter((function(e){return Mc.isEnabled(e.playlist)}));u.length||(u=l.filter((function(e){return!Mc.isDisabled(e.playlist)})));var c=u.filter((function(e){return e.bandwidth*ld.BANDWIDTH_VARIANCE<t})),d=c[c.length-1],h=c.filter((function(e){return e.bandwidth===d.bandwidth}))[0];if(!1===r){var p=h||u[0]||l[0];if(p&&p.playlist){var f="sortedPlaylistReps";return h&&(f="bandwidthBestRep"),u[0]&&(f="enabledPlaylistReps"),Hd("choosing ".concat(Vd(p)," using ").concat(f," with options"),o),p.playlist}return Hd("could not choose a playlist with options",o),null}var m=c.filter((function(e){return e.width&&e.height}));Wd(m,(function(e,t){return e.width-t.width}));var g=m.filter((function(e){return e.width===n&&e.height===i}));d=g[g.length-1];var v,y,b,_,x=g.filter((function(e){return e.bandwidth===d.bandwidth}))[0];if(x||(y=(v=m.filter((function(e){return e.width>n||e.height>i}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),d=y[y.length-1],b=y.filter((function(e){return e.bandwidth===d.bandwidth}))[0]),a.leastPixelDiffSelector){var w=m.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e}));Wd(w,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),_=w[0]}var T=_||b||x||h||u[0]||l[0];if(T&&T.playlist){var S="sortedPlaylistReps";return _?S="leastPixelDiffRep":b?S="resolutionPlusOneRep":x?S="resolutionBestRep":h?S="bandwidthBestRep":u[0]&&(S="enabledPlaylistReps"),Hd("choosing ".concat(Vd(T)," using ").concat(S," with options"),o),T.playlist}return Hd("could not choose a playlist with options",o),null}},Xd=function(){var e=this.useDevicePixelRatio&&Kt().devicePixelRatio||1;return qd(this.playlists.main,this.systemBandwidth,parseInt(Gd(this.tech_.el(),"width"),10)*e,parseInt(Gd(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},Yd=function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,r=e.videoDuration;if(n){var a=Kt().WebKitDataCue||Kt().VTTCue,o=t.metadataTrack_;if(o&&(n.forEach((function(e){var t=e.cueTime+i;!("number"!==typeof t||Kt().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new a(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Hu.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Hu.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Hu.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),o.addCue(n)}))})),o.cues&&o.cues.length)){for(var s=o.cues,l=[],u=0;u<s.length;u++)s[u]&&l.push(s[u]);var c=l.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),d=Object.keys(c).sort((function(e,t){return Number(e)-Number(t)}));d.forEach((function(e,t){var n=c[e],i=Number(d[t+1])||r;n.forEach((function(e){e.endTime=i}))}))}}},Kd=function(e,t,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=e&&r.endTime<=t&&n.removeCue(r)},Qd=function(e){return"number"===typeof e&&isFinite(e)},$d=1/60,Jd=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,r=e.part,a=e.playlist,o=a.mediaSequence,s=a.id,l=a.segments,u=void 0===l?[]:l,c=e.mediaIndex,d=e.partIndex,h=e.timeline,p=u.length-1,f="mediaIndex/partIndex increment";e.getMediaInfoForTime?f="getMediaInfoForTime (".concat(e.getMediaInfoForTime,")"):e.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(f+=" with independent ".concat(e.independent));var m="number"===typeof d,g=e.segment.uri?"segment":"pre-segment",v=m?fc({preloadSegment:i})-1:0;return"".concat(g," [").concat(o+c,"/").concat(o+p,"]")+(m?" part [".concat(d,"/").concat(v,"]"):"")+" segment start/end [".concat(i.start," => ").concat(i.end,"]")+(m?" part start/end [".concat(r.start," => ").concat(r.end,"]"):"")+" startOfSegment [".concat(t,"]")+" duration [".concat(n,"]")+" timeline [".concat(h,"]")+" selected by [".concat(f,"]")+" playlist [".concat(s,"]")},eh=function(e){return"".concat(e,"TimingInfo")},th=function(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(n===i)return!1;if("audio"===r){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==i}if("main"===r&&a){var s=t.pendingTimelineChange({type:"audio"});return!s||s.to!==i}return!1},nh=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+nc},ih=function(e,t){if("hls"!==t)return null;var n=function(e){var t=0;return["video","audio"].forEach((function(n){var i=e["".concat(n,"TimingInfo")];if(i){var r,a=i.start,o=i.end;"bigint"===typeof a||"bigint"===typeof o?r=Kt().BigInt(o)-Kt().BigInt(a):"number"===typeof a&&"number"===typeof o&&(r=o-a),"undefined"!==typeof r&&r>t&&(t=r)}})),"bigint"===typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t}({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,r=nh({segmentDuration:n,maxDuration:2*i}),a=nh({segmentDuration:n,maxDuration:i}),o="Segment with index ".concat(e.mediaIndex," ")+"from playlist ".concat(e.playlist.id," ")+"has a duration of ".concat(n," ")+"when the reported duration is ".concat(e.duration," ")+"and the target duration is ".concat(i,". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||a?{severity:r?"warn":"info",message:o}:null},rh=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i;if((0,re.Z)(this,n),i=t.call(this),!e)throw new TypeError("Initialization settings are required");if("function"!==typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=e.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=e.hasPlayed,i.currentTime_=e.currentTime,i.seekable_=e.seekable,i.seeking_=e.seeking,i.duration_=e.duration,i.mediaSource_=e.mediaSource,i.vhs_=e.vhs,i.loaderType_=e.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=e.segmentMetadataTrack,i.goalBufferLength_=e.goalBufferLength,i.sourceType_=e.sourceType,i.sourceUpdater_=e.sourceUpdater,i.inbandTextTracks_=e.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=e.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=e.parse708captions,i.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,i.captionServices_=e.captionServices,i.exactManifestTimings=e.exactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=Hu.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=e.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=e.decrypter,i.syncController_=e.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=Ju("SegmentLoader[".concat(i.loaderType_,"]")),Object.defineProperty((0,Gt.Z)(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_("".concat(this.state_," -> ").concat(e)),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",(function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}return(0,ae.Z)(n,[{key:"createTransmuxer_",value:function(){return xd({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}},{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}},{key:"dispose",value:function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Kt().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}},{key:"setAudio",value:function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Kt().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}},{key:"checkForAbort_",value:function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}},{key:"error",value:function(e){return"undefined"!==typeof e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.transmuxer_&&_d(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return tc();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,i=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}},{key:"initSegmentForMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=Kc(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}},{key:"segmentKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=Qc(e),i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update [".concat(r," => ").concat(e.id||e.uri,"]")),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift [".concat(a,"]")),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){var s=this.mediaIndex;this.logger_("currently processing part (index ".concat(this.partIndex,") no longer exists.")),this.resetLoader(),this.mediaIndex=s}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(Kt().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"resetEverything",value:function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.transmuxer_&&_d(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},{key:"remove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,a=function(){0===--r&&n()};for(var o in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,a)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil((t-i)*br.ONE_SECOND_IN_TS),a=Math.ceil((n-i)*br.ONE_SECOND_IN_TS),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var l=s+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),o.splice(l,s-l+1),o}(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)Kd(e,t,this.inbandTextTracks_[o]);Kd(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&Kt().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Kt().setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Kt().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Kt().setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"===typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}}},{key:"isEndOfStream_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mediaIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.playlist_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.partIndex;if(!t||!this.mediaSource_)return!1;var i="number"===typeof e&&t.segments[e],r=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&a}},{key:"chooseNextRequest_",value:function(){var e=this.buffered_(),t=uc(e)||0,n=cc(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(e,t,n){t=t||[];for(var i=[],r=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(i.push(a),(r+=o.duration)>n))return a}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,a,t);else if(null!==this.mediaIndex){var s=a[this.mediaIndex],l="number"===typeof this.partIndex?this.partIndex:-1;o.startOfSegment=s.end?s.end:t,s.parts&&s.parts[l+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=l+1):o.mediaIndex=this.mediaIndex+1}else{var u=Mc.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),c=u.segmentIndex,d=u.startTime,h=u.partIndex;o.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd ".concat(t):"currentTime ".concat(this.currentTime_()),o.mediaIndex=c,o.startOfSegment=d,o.partIndex=h}var p=a[o.mediaIndex],f=p&&"number"===typeof o.partIndex&&p.parts&&p.parts[o.partIndex];if(!p||"number"===typeof o.partIndex&&!f)return null;if("number"!==typeof o.partIndex&&p.parts&&(o.partIndex=0,f=p.parts[0]),!n&&f&&!f.independent)if(0===o.partIndex){var m=a[o.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=m.parts.length-1,o.independent="previous segment")}else p.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");var v=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=a.length-1&&v&&!this.seeking_()?null:this.generateSegmentInfo_(o)}},{key:"generateSegmentInfo_",value:function(e){var t=e.independent,n=e.playlist,i=e.mediaIndex,r=e.startOfSegment,a=e.isSyncRequest,o=e.partIndex,s=e.forceTimestampOffset,l=e.getMediaInfoForTime,u=n.segments[i],c="number"===typeof o&&u.parts[o],d={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||u.resolvedUri,mediaIndex:i,partIndex:c?o:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:c&&c.duration||u.duration,segment:u,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h="undefined"!==typeof s?s:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:h});var p=uc(this.sourceUpdater_.audioBuffered());return"number"===typeof p&&(d.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(d.gopsToAlignWith=function(e,t,n){if("undefined"===typeof t||null===t||!e.length)return[];var i,r=Math.ceil((t-n+3)*br.ONE_SECOND_IN_TS);for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d}},{key:"timestampOffsetForSegment_",value:function(e){return function(e){var t=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,r=e.buffered;return e.overrideCheck||t!==n?t<n?i:r.length?r.end(r.length-1):i:null}(e)}},{key:"earlyAbortWhenNeeded_",value:function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=Mc.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var o=function(e){var t=e.main,n=e.currentTime,i=e.bandwidth,r=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,s=e.currentTimeline,l=e.syncController,u=t.playlists.filter((function(e){return!Mc.isIncompatible(e)})),c=u.filter(Mc.isEnabled);c.length||(c=u.filter((function(e){return!Mc.isDisabled(e)})));var d=c.filter(Mc.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=l.getSyncPoint(e,r,s,n)?1:2;return{playlist:e,rebufferingImpact:Mc.estimateSegmentRequestTime(a,i,e)*t-o}})),h=d.filter((function(e){return e.rebufferingImpact<=0}));return Wd(h,(function(e,t){return Zd(t.playlist,e.playlist)})),h.length?h[0]:(Wd(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=r-a-o.rebufferingImpact,l=.5;a<=nc&&(l=1),!o.playlist||o.playlist.uri===this.playlist_.uri||s<l||(this.bandwidth=o.playlist.attributes.BANDWIDTH*ld.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}}},{key:"handleAbort_",value:function(e){this.logger_("Aborting ".concat(Jd(e))),this.mediaRequestsAborted+=1}},{key:"handleProgress_",value:function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}},{key:"handleTrackInfo_",value:function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=n[r];if(a!==i[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}},{key:"handleTimingInfo_",value:function(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=eh(t);r[a]=r[a]||{},r[a][n]=i,this.logger_("timinginfo: ".concat(t," - ").concat(n," - ").concat(i)),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}}},{key:"handleCaptions_",value:function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((function(e){r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+i),t.endTime=Math.max(t.endTime,e.endTime+i),t.captions.push(e)})),Object.keys(r).forEach((function(e){var t=r[e],a=t.startTime,o=t.endTime,s=t.captions,l=n.inbandTextTracks_;n.logger_("adding cues from ".concat(a," -> ").concat(o," for ").concat(e)),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{var a=n,o=n,s=!1,l=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];l&&(a=l.label,o=l.language,s=l.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:s,label:a,language:o},!1).track}}}(l,n.vhs_.tech_,e),Kd(a,o,l[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var r=Kt().WebKitDataCue||Kt().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new r(e.startTime+i,e.endTime+i,e.text))}))}}({captionArray:s,inbandTextTracks:l,timestampOffset:i})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")}},{key:"handleId3_",value:function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),Yd({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))}},{key:"processMetadataQueue_",value:function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}},{key:"processCallQueue_",value:function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))}},{key:"processLoadQueue_",value:function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))}},{key:"hasEnoughInfoToLoad_",value:function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!th({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}},{key:"getCurrentMediaInfo_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pendingSegment_;return e&&e.trackInfo||this.currentMediaInfo_}},{key:"getMediaInfo_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pendingSegment_;return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}},{key:"hasEnoughInfoToAppend_",value:function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed;return!(i&&!e.videoTimingInfo)&&(!(n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!th({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}},{key:"handleData_",value:function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[eh(t.type)].start;else{var i,r=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&r&&r.hasVideo;a&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var o=this.chooseNextRequest_();if(o.mediaIndex!==n.mediaIndex||o.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))}},{key:"updateAppendInitSegmentStatus",value:function(e,t){"main"!==this.loaderType_||"number"!==typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}},{key:"getInitSegmentAndUpdateState_",value:function(e){var t=e.type,n=e.initSegment,i=e.map,r=e.playlist;if(i){var a=Kc(i);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null}},{key:"handleQuotaExceededError_",value:function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes,o=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+lc(o).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+lc(s).join(", "));var l=o.length?o.start(0):0,u=o.length?o.end(o.length-1):0,c=s.length?s.start(0):0,d=s.length?s.end(s.length-1):0;if(u-l<=1&&d-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+"Appended byte length: ".concat(a.byteLength,", ")+"audio buffer: ".concat(lc(o).join(", "),", ")+"video buffer: ".concat(lc(s).join(", "),", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:r,bytes:a}));var h=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ".concat(h)),this.remove(0,h,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in ".concat(1,"s")),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=Kt().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)}},{key:"handleAppendError_",value:function(e,t){var n=e.segmentInfo,i=e.type,r=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error("".concat(i," append of ").concat(r.length,"b failed for segment ")+"#".concat(n.mediaIndex," in playlist ").concat(n.playlist.id)),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:i,bytes:r}))}},{key:"appendToSourceBuffer_",value:function(e){var t=e.segmentInfo,n=e.type,i=e.initSegment,r=e.data,a=e.bytes;if(!a){var o=[r],s=r.byteLength;i&&(o.unshift(i),s+=i.byteLength),a=function(e){var t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((function(e){t.set(e,n),n+=e.byteLength}))),t}({bytes:s,segments:o})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:n,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:t,type:n,bytes:a}))}},{key:"handleSegmentTimingInfo_",value:function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment,r="".concat(e,"TimingInfo");i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}}},{key:"appendData_",value:function(e,t){var n=t.type,i=t.data;if(i&&i.byteLength&&("audio"!==n||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}}},{key:"loadSegment_",value:function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"===typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=hn({},e,{forceTimestampOffset:!0});hn(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))}},{key:"updateTransmuxerAndRequestSegment_",value:function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,o=i||r&&a;this.logger_("Requesting ".concat(Jd(e))),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Nd({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var i=n.message,r=n.level,a=n.stream;t.logger_("".concat(Jd(e)," logged from transmuxer stream ").concat(a," as a ").concat(r,": ").concat(i))}})}},{key:"trimBackBuffer_",value:function(e){var t=function(e,t,n){var i=t-ld.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var r=t-n;return Math.min(r,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n=e.part,i={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=a}return t.map&&(i.map=this.initSegmentForMap(t.map)),i}},{key:"saveTransferStats_",value:function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}},{key:"saveBandwidthRelatedStats_",value:function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<$d?this.logger_("Ignoring segment's bandwidth because its duration of ".concat(e)+" is less than the min to record ".concat($d)):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}},{key:"handleTimeout_",value:function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}},{key:"segmentRequestFinished_",value:function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Ed)return;return this.pause(),e.code===Sd?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}}},{key:"setTimeMapping_",value:function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}},{key:"updateMediaSecondsLoaded_",value:function(e){"number"===typeof e.start&&"number"===typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}},{key:"shouldUpdateTransmuxerTimestampOffset_",value:function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}},{key:"trueSegmentStart_",value:function(e){var t=e.currentStart,n=e.playlist,i=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,o=e.useVideoTimingInfo,s=e.videoTimingInfo,l=e.audioTimingInfo;if("undefined"!==typeof t)return t;if(!o)return l.start;var u=n.segments[i-1];return 0!==i&&u&&"undefined"!==typeof u.start&&u.end===r+a?s.start:r}},{key:"waitForAppendsToComplete_",value:function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&i,o=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!==typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}},{key:"checkAppendsDone_",value:function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}},{key:"checkForIllegalMediaSwitch",value:function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}},{key:"updateSourceBufferTimestampOffset_",value:function(e){if(null!==e.timestampOffset&&"number"===typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}}},{key:"getSegmentStartTimeForTimestampOffsetCalculation_",value:function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,i=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"===typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"===typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:i.start:i.start}},{key:"updateTimingInfoEnd_",value:function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"===typeof n.end?n.end:n.start+e.duration)}},{key:"handleAppendsDone_",value:function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=ih(e,this.sourceType_);if(t&&("warn"===t.severity?Hu.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended ".concat(Jd(e))),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,a=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||a)return this.logger_("bad ".concat(r?"segment":"part"," ").concat(Jd(e))),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request ".concat(Jd(e)))}},{key:"recordThroughput_",value:function(e){if(e.duration<$d)this.logger_("Ignoring segment's throughput because its duration of ".concat(e.duration)+" is less than the min to record ".concat($d));else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(Qd(n)&&Qd(i)){Kd(n,i,this.segmentMetadataTrack_);var r=Kt().WebKitDataCue||Kt().VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=new r(n,i,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}}}]),n}(Hu.EventTarget);function ah(){}var oh,sh=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},lh=["video","audio"],uh=function(e,t){var n=t["".concat(e,"Buffer")];return n&&n.updating||t.queuePending[e]},ch=function e(t,n){if(0!==n.queue.length){var i=0,r=n.queue[i];if("mediaSource"!==r.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!uh(t,n)){if(r.type!==t){if(i=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(t,n.queue),null===i)return;r=n.queue[i]}return n.queue.splice(i,1),n.queuePending[t]=r,r.action(t,n),r.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),r.action(n),r.doneFn&&r.doneFn(),e("audio",n),e("video",n))}},dh=function(e,t){var n=t["".concat(e,"Buffer")],i=sh(e);n&&(n.removeEventListener("updateend",t["on".concat(i,"UpdateEnd_")]),n.removeEventListener("error",t["on".concat(i,"Error_")]),t.codecs[e]=null,t["".concat(e,"Buffer")]=null)},hh=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},ph=function(e,t,n){return function(i,r){var a=r["".concat(i,"Buffer")];if(hh(r.mediaSource,a)){r.logger_("Appending segment ".concat(t.mediaIndex,"'s ").concat(e.length," bytes to ").concat(i,"Buffer"));try{a.appendBuffer(e)}catch(o){r.logger_("Error with code ".concat(o.code," ")+(22===o.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment ".concat(t.mediaIndex," to ").concat(i,"Buffer")),r.queuePending[i]=null,n(o)}}}},fh=function(e,t){return function(n,i){var r=i["".concat(n,"Buffer")];if(hh(i.mediaSource,r)){i.logger_("Removing ".concat(e," to ").concat(t," from ").concat(n,"Buffer"));try{r.remove(e,t)}catch(a){i.logger_("Remove ".concat(e," to ").concat(t," from ").concat(n,"Buffer failed"))}}}},mh=function(e){return function(t,n){var i=n["".concat(t,"Buffer")];hh(n.mediaSource,i)&&(n.logger_("Setting ".concat(t,"timestampOffset to ").concat(e)),i.timestampOffset=e)}},gh=function(e){return function(t,n){e()}},vh=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream(".concat(e||"",")"));try{t.mediaSource.endOfStream(e)}catch(n){Hu.log.warn("Failed to call media source endOfStream",n)}}}},yh=function(e){return function(t){t.logger_("Setting mediaSource duration to ".concat(e));try{t.mediaSource.duration=e}catch(n){Hu.log.warn("Failed to set media source duration",n)}}},bh=function(){return function(e,t){if("open"===t.mediaSource.readyState){var n=t["".concat(e,"Buffer")];if(hh(t.mediaSource,n)){t.logger_("calling abort on ".concat(e,"Buffer"));try{n.abort()}catch(i){Hu.log.warn("Failed to abort on ".concat(e,"Buffer"),i)}}}}},_h=function(e,t){return function(n){var i=sh(e),r=Ln(t);n.logger_("Adding ".concat(e,"Buffer with codec ").concat(t," to mediaSource"));var a=n.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",n["on".concat(i,"UpdateEnd_")]),a.addEventListener("error",n["on".concat(i,"Error_")]),n.codecs[e]=t,n["".concat(e,"Buffer")]=a}},xh=function(e){return function(t){var n=t["".concat(e,"Buffer")];if(dh(e,t),hh(t.mediaSource,n)){t.logger_("Removing ".concat(e,"Buffer with codec ").concat(t.codecs[e]," from mediaSource"));try{t.mediaSource.removeSourceBuffer(n)}catch(i){Hu.log.warn("Failed to removeSourceBuffer ".concat(e,"Buffer"),i)}}}},wh=function(e){return function(t,n){var i=n["".concat(t,"Buffer")],r=Ln(e);hh(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_("changing ".concat(t,"Buffer codec from ").concat(n.codecs[t]," to ").concat(e)),i.changeType(r),n.codecs[t]=e)}},Th=function(e){var t=e.type,n=e.sourceUpdater,i=e.action,r=e.doneFn,a=e.name;n.queue.push({type:t,action:i,doneFn:r,name:a}),ch(t,n)},Sh=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t["".concat(e,"Error_")])}ch(e,t)}},Eh=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i;return(0,re.Z)(this,n),(i=t.call(this)).mediaSource=e,i.sourceopenListener_=function(){return ch("mediaSource",(0,Gt.Z)(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Ju("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=Sh("video",(0,Gt.Z)(i)),i.onAudioUpdateEnd_=Sh("audio",(0,Gt.Z)(i)),i.onVideoError_=function(e){i.videoError_=e},i.onAudioError_=function(e){i.audioError_=e},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}return(0,ae.Z)(n,[{key:"initializedEme",value:function(){this.initializedEme_=!0,this.triggerReady()}},{key:"hasCreatedSourceBuffers",value:function(){return this.createdSourceBuffers_}},{key:"hasInitializedAnyEme",value:function(){return this.initializedEme_}},{key:"ready",value:function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}},{key:"createSourceBuffers",value:function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}},{key:"triggerReady",value:function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}},{key:"addSourceBuffer",value:function(e,t){Th({type:"mediaSource",sourceUpdater:this,action:_h(e,t),name:"addSourceBuffer"})}},{key:"abort",value:function(e){Th({type:e,sourceUpdater:this,action:bh(e),name:"abort"})}},{key:"removeSourceBuffer",value:function(e){this.canRemoveSourceBuffer()?Th({type:"mediaSource",sourceUpdater:this,action:xh(e),name:"removeSourceBuffer"}):Hu.log.error("removeSourceBuffer is not supported!")}},{key:"canRemoveSourceBuffer",value:function(){return!Hu.browser.IE_VERSION&&!Hu.browser.IS_FIREFOX&&Kt().MediaSource&&Kt().MediaSource.prototype&&"function"===typeof Kt().MediaSource.prototype.removeSourceBuffer}},{key:"canChangeType",value:function(){return this.constructor.canChangeType()}},{key:"changeType",value:function(e,t){this.canChangeType()?Th({type:e,sourceUpdater:this,action:wh(t),name:"changeType"}):Hu.log.error("changeType is not supported!")}},{key:"addOrChangeSourceBuffers",value:function(e){var t=this;if(!e||"object"!==typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var i=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,i);t.canChangeType()&&t.changeType(n,i)}))}},{key:"appendBuffer",value:function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of ".concat(a.length," until video append"));if(Th({type:r,sourceUpdater:this,action:ph(a,i||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var o=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio ".concat(o.length," appendBuffers")),this.delayedAudioAppendQueue_.length=0,o.forEach((function(e){n.appendBuffer.apply(n,e)}))}}},{key:"audioBuffered",value:function(){return hh(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:tc()}},{key:"videoBuffered",value:function(){return hh(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:tc()}},{key:"buffered",value:function(){var e=hh(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=hh(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,i=null,r=0,a=[],o=[];if(!e||!e.length||!t||!t.length)return tc();for(var s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),s=0;s<a.length;s++)"start"===a[s].type?2===++r&&(n=a[s].time):"end"===a[s].type&&1===--r&&(i=a[s].time),null!==n&&null!==i&&(o.push([n,i]),n=null,i=null);return tc(o)}(this.audioBuffered(),this.videoBuffered())}},{key:"setDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ah;Th({type:"mediaSource",sourceUpdater:this,action:yh(e),name:"duration",doneFn:t})}},{key:"endOfStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ah;"string"!==typeof e&&(e=void 0),Th({type:"mediaSource",sourceUpdater:this,action:vh(e),name:"endOfStream",doneFn:t})}},{key:"removeAudio",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ah;this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Th({type:"audio",sourceUpdater:this,action:fh(e,t),doneFn:n,name:"remove"}):n()}},{key:"removeVideo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ah;this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Th({type:"video",sourceUpdater:this,action:fh(e,t),doneFn:n,name:"remove"}):n()}},{key:"updating",value:function(){return!(!uh("audio",this)&&!uh("video",this))}},{key:"audioTimestampOffset",value:function(e){return"undefined"!==typeof e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Th({type:"audio",sourceUpdater:this,action:mh(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}},{key:"videoTimestampOffset",value:function(e){return"undefined"!==typeof e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Th({type:"video",sourceUpdater:this,action:mh(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}},{key:"audioQueueCallback",value:function(e){this.audioBuffer&&Th({type:"audio",sourceUpdater:this,action:gh(e),name:"callback"})}},{key:"videoQueueCallback",value:function(e){this.videoBuffer&&Th({type:"video",sourceUpdater:this,action:gh(e),name:"callback"})}},{key:"dispose",value:function(){var e=this;this.trigger("dispose"),lh.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e["".concat(t,"QueueCallback")]((function(){return dh(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}],[{key:"canChangeType",value:function(){return Kt().SourceBuffer&&Kt().SourceBuffer.prototype&&"function"===typeof Kt().SourceBuffer.prototype.changeType}}]),n}(Hu.EventTarget),kh=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Ch=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),Mh=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,re.Z)(this,n),(i=t.call(this,e,r)).mediaSource_=null,i.subtitlesTrack_=null,i.loaderType_="subtitle",i.featuresNativeTextTracks_=e.featuresNativeTextTracks,i.shouldSaveSegmentTimingInfo_=!1,i}return(0,ae.Z)(n,[{key:"createTransmuxer_",value:function(){return null}},{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return tc();var e=this.subtitlesTrack_.cues;return tc([[e[0].startTime,e[e.length-1].startTime]])}},{key:"initSegmentForMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=Kc(e),i=this.initSegments_[n];if(t&&!i&&e.bytes){var r=Ch.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(Ch,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return"undefined"===typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){Kd(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"timestampOffsetForSegment_",value:function(){return null}},{key:"chooseNextRequest_",value:function(){return this.skipEmptySegments_(Zt((0,Wt.Z)(n.prototype),"chooseNextRequest_",this).call(this))}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}},{key:"stopForError",value:function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}},{key:"segmentRequestFinished_",value:function(e,t,n){var i=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Sd&&this.handleTimeout_(),e.code===Ed?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!==typeof Kt().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,s=function(){i.subtitlesTrack_.tech_.off("vttjsloaded",o),i.stopForError({message:"Error loading vtt.js"})};return o=function(){i.subtitlesTrack_.tech_.off("vttjserror",s),i.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",s)}a.requested=!0;try{this.parseVTTCues_(r)}catch(l){return void this.stopForError({message:l.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach((function(e){i.subtitlesTrack_.addCue(i.featuresNativeTextTracks_?new(Kt().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],r=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&++r>1&&i.push(t[a]);i.length&&i.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"}},{key:"handleData_",value:function(){}},{key:"updateTimingInfoEnd_",value:function(){}},{key:"parseVTTCues_",value:function(e){var t,n=!1;"function"===typeof Kt().TextDecoder?t=new(Kt().TextDecoder)("utf8"):(t=Kt().WebVTT.StringDecoder(),n=!0);var i=new(Kt().WebVTT.Parser)(Kt(),Kt().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=function(t){e.timestampmap=t},i.onparsingerror=function(e){Hu.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;n&&(r=kh(r)),i.parse(r)}var a=e.bytes;n&&(a=kh(a)),i.parse(a),i.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/br.ONE_SECOND_IN_TS-r.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,s-i.duration)}}}else i.empty=!0}}]),n}(rh),Ah=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},Ph=[{name:"VOD",run:function(e,t,n,i,r){if(n!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,s=hc(t);r=r||0;for(var l=0;l<s.length;l++){var u=s[t.endList||0===r?l:s.length-(l+1)],c=u.segment,d=e.timelineToDatetimeMappings[c.timeline];if(d&&c.dateTimeObject){var h=c.dateTimeObject.getTime()/1e3+d;if(c.parts&&"number"===typeof u.partIndex)for(var p=0;p<u.partIndex;p++)h+=c.parts[p].duration;var f=Math.abs(r-h);if(null!==o&&(0===f||o<f))break;o=f,a={time:h,segmentIndex:u.segmentIndex,partIndex:u.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var a=null,o=null;r=r||0;for(var s=hc(t),l=0;l<s.length;l++){var u=s[t.endList||0===r?l:s.length-(l+1)],c=u.segment,d=u.part&&u.part.start||c&&c.start;if(c.timeline===i&&"undefined"!==typeof d){var h=Math.abs(r-d);if(null!==o&&o<h)break;(!a||null===o||o>=h)&&(o=h,a={time:d,segmentIndex:u.segmentIndex,partIndex:u.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var l=t.discontinuityStarts[s],u=t.discontinuitySequence+s+1,c=e.discontinuities[u];if(c){var d=Math.abs(r-c.time);if(null!==o&&o<d)break;(!a||null===o||o>=d)&&(o=d,a={time:c.time,segmentIndex:l,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],Lh=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e;return(0,re.Z)(this,n),(e=t.call(this)).timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=Ju("SyncController"),e}return(0,ae.Z)(n,[{key:"getSyncPoint",value:function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+yc({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}},{key:"runStrategies_",value:function(e,t,n,i){for(var r=[],a=0;a<Ph.length;a++){var o=Ph[a],s=o.run(this,e,t,n,i);s&&(s.strategy=o.name,r.push({strategy:o.name,syncPoint:s}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for [".concat(t.key,": ").concat(t.value,"] chosen with strategy")+" [".concat(r,"]: [time:").concat(n.time,",")+" segmentIndex:".concat(n.segmentIndex)+("number"===typeof n.partIndex?",partIndex:".concat(n.partIndex):"")+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)Hu.log.warn("Not saving expired segment info. Media sequence gap ".concat(n," is too large."));else for(var i=n-1;i>=0;i--){var r=e.segments[i];if(r&&"undefined"!==typeof r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist refresh sync: [time:".concat(t.syncInfo.time,",")+" mediaSequence: ".concat(t.syncInfo.mediaSequence,"]")),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMappingForStart",value:function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}},{key:"saveSegmentTimingInfo",value:function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),r=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:r.start}));var a=r.dateTimeObject;r.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[r.timeline]=-a.getTime()/1e3)}},{key:"timestampOffsetForTimeline",value:function(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t,n){var i,r,a=e.segment,o=e.part,s=this.timelines[e.timeline];if("number"===typeof e.timestampOffset)s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline ".concat(e.timeline,": ")+"[time: ".concat(s.time,"] [mapping: ").concat(s.mapping,"]"))),i=e.startOfSegment,r=t.end+s.mapping;else{if(!s)return!1;i=t.start+s.mapping,r=t.end+s.mapping}return o&&(o.start=i,o.end=r),(!a.start||i<a.start)&&(a.start=i),a.end=r,!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,o=r-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var l=void 0;l=o<0?n.start-yc({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+yc({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:l,accuracy:s}}}}},{key:"dispose",value:function(){this.trigger("dispose"),this.off()}}]),n}(Hu.EventTarget),Ih=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(){var e;return(0,re.Z)(this,n),(e=t.call(this)).pendingTimelineChanges_={},e.lastTimelineChanges_={},e}return(0,ae.Z)(n,[{key:"clearPendingTimelineChange",value:function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}},{key:"pendingTimelineChange",value:function(e){var t=e.type,n=e.from,i=e.to;return"number"===typeof n&&"number"===typeof i&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}},{key:"lastTimelineChange",value:function(e){var t=e.type,n=e.from,i=e.to;return"number"===typeof n&&"number"===typeof i&&(this.lastTimelineChanges_[t]={type:t,from:n,to:i},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]}},{key:"dispose",value:function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}]),n}(Hu.EventTarget),Oh=dd(hd((function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();var t,i=null,r=function(){function e(t){var n,r,a;(0,re.Z)(this,e),i||(i=function(){var e,t,n,i,r,a,o,s,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],c=l[1],d=u[4],h=c[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!d[t];t^=i||1,n=f[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,d[t]=a,h[a]=t,s=16843009*p[r=p[i=p[t]]]^65537*r^257*i^16843008*t,o=257*p[a]^16843008*a,e=0;e<4;e++)u[e][t]=o=o<<24^o>>>8,c[e][a]=s=s<<24^s>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),c[e]=c[e].slice(0);return l}()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var o=this._tables[0][4],s=this._tables[1],l=t.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");var c=t.slice(0),d=[];for(this._key=[c,d],n=l;n<4*l+28;n++)a=c[n-1],(n%l===0||8===l&&n%l===4)&&(a=o[a>>>24]<<24^o[a>>16&255]<<16^o[a>>8&255]<<8^o[255&a],n%l===0&&(a=a<<8^a>>>24^u<<24,u=u<<1^283*(u>>7))),c[n]=c[n-l]^a;for(r=0;n;r++,n--)a=c[3&r?n:n-4],d[r]=n<=4||r<4?a:s[0][o[a>>>24]]^s[1][o[a>>16&255]]^s[2][o[a>>8&255]]^s[3][o[255&a]]}return(0,ae.Z)(e,[{key:"decrypt",value:function(e,t,n,i,r,a){var o,s,l,u,c=this._key[1],d=e^c[0],h=i^c[1],p=n^c[2],f=t^c[3],m=c.length/4-2,g=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],x=v[3],w=v[4];for(u=0;u<m;u++)o=y[d>>>24]^b[h>>16&255]^_[p>>8&255]^x[255&f]^c[g],s=y[h>>>24]^b[p>>16&255]^_[f>>8&255]^x[255&d]^c[g+1],l=y[p>>>24]^b[f>>16&255]^_[d>>8&255]^x[255&h]^c[g+2],f=y[f>>>24]^b[d>>16&255]^_[h>>8&255]^x[255&p]^c[g+3],g+=4,d=o,h=s,p=l;for(u=0;u<4;u++)r[(3&-u)+a]=w[d>>>24]<<24^w[h>>16&255]<<16^w[p>>8&255]<<8^w[255&f]^c[g++],o=d,d=h,h=p,p=f,f=o}}]),e}(),a=function(t){(0,qt.Z)(i,t);var n=(0,Xt.Z)(i);function i(){var t;return(0,re.Z)(this,i),(t=n.call(this,e)).jobs=[],t.delay=1,t.timeout_=null,t}return(0,ae.Z)(i,[{key:"processJob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),i}(e),o=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},s=function(){function e(t,n,i,r){(0,re.Z)(this,e);var s=e.STEP,l=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+s),n,i,u)),c=s;c<l.length;c+=s)i=new Uint32Array([o(l[c-4]),o(l[c-3]),o(l[c-2]),o(l[c-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+s),n,i,u));this.asyncStream_.push((function(){var e;r(null,(e=u).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return(0,ae.Z)(e,[{key:"decryptChunk_",value:function(e,t,n,i){return function(){var a=function(e,t,n){var i,a,s,l,u,c,d,h,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new r(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),v=new Int32Array(g.buffer);for(i=n[0],a=n[1],s=n[2],l=n[3],p=0;p<f.length;p+=4)u=o(f[p]),c=o(f[p+1]),d=o(f[p+2]),h=o(f[p+3]),m.decrypt(u,c,d,h,v,p),v[p]=o(v[p]^i),v[p+1]=o(v[p+1]^a),v[p+2]=o(v[p+2]^s),v[p+3]=o(v[p+3]^l),i=u,a=c,s=d,l=h;return g}(e,t,n);i.set(a,e.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),e}(),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};t="undefined"!==typeof window?window:"undefined"!==typeof l?l:"undefined"!==typeof self?self:{};var u=t.BigInt||Number;u("0x1"),u("0x100"),u("0x10000"),u("0x1000000"),u("0x100000000"),u("0x10000000000"),u("0x1000000000000"),u("0x100000000000000"),u("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();var c=function(e){var t={};return Object.keys(e).forEach((function(n){var i,r=e[n];i=r,("function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t};self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new s(n,i,r,(function(e,n){self.postMessage(c({source:t.source,decrypted:n}),[n.buffer])}))}}))),Rh=cd(Oh),Dh=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Nh=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Uh=function(e,t){t.activePlaylistLoader=e,e.load()},Bh={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],r=t.excludePlaylist;Nh(n,i);var a=i.activeTrack(),o=i.activeGroup(),s=(o.filter((function(e){return e.default}))[0]||o[0]).id,l=i.tracks[s];if(a!==l){for(var u in Hu.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[u].enabled=i.tracks[u]===l;i.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];Hu.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Nh(n,i);var r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}}},Fh={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",Bh[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),a.track(o.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",Bh[e](e,n))}},jh={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,o=t.main.mediaGroups,s=t.mediaTypes[e],l=s.groups,u=s.tracks,c=s.logger_,d=t.mainPlaylistLoader,h=Cc(d.main);for(var p in o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},h&&(o[e].main.default.playlists=d.main.playlists)),o[e])for(var f in l[p]||(l[p]=[]),o[e][p]){var m=o[e][p][f],g=void 0;if(h?(c("AUDIO group '".concat(p,"' label '").concat(f,"' is a main playlist")),m.isMainPlaylist=!0,g=null):g="vhs-json"===i&&m.playlists?new zc(m.playlists[0],n,a):m.resolvedUri?new zc(m.resolvedUri,n,a):m.playlists&&"dash"===i?new sd(m.playlists[0],n,a,d):null,m=ec({id:f,playlistLoader:g},m),Fh[e](e,m.playlistLoader,t),l[p].push(m),"undefined"===typeof u[f]){var v=new Hu.AudioTrack({id:f,kind:Dh(m),enabled:!1,language:m.language,default:m.default,label:f});u[f]=v}}r.on("error",Bh[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.main.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.mainPlaylistLoader;for(var h in s[e])for(var p in u[h]||(u[h]=[]),s[e][h])if(!s[e][h][p].forced){var f=s[e][h][p],m=void 0;if("hls"===r)m=new zc(f.resolvedUri,i,o);else if("dash"===r){if(!f.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;m=new sd(f.playlists[0],i,o,d)}else"vhs-json"===r&&(m=new zc(f.playlists?f.playlists[0]:f.resolvedUri,i,o));if(f=ec({id:p,playlistLoader:m},f),Fh[e](e,f.playlistLoader,t),u[h].push(f),"undefined"===typeof c[p]){var g=n.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;c[p]=g}}a.on("error",Bh[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.main.mediaGroups,r=t.mediaTypes[e],a=r.groups,o=r.tracks;for(var s in i[e])for(var l in a[s]||(a[s]=[]),i[e][s]){var u=i[e][s][l];if(/^(?:CC|SERVICE)/.test(u.instreamId)){var c=n.options_.vhs&&n.options_.vhs.captionServices||{},d={label:l,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(c[d.instreamId]&&(d=ec(d,c[d.instreamId])),void 0===d.default&&delete d.default,a[s].push(ec({id:l},u)),"undefined"===typeof o[l]){var h=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;o[l]=h}}}}},zh=function e(t,n){for(var i=0;i<t.length;i++){if(Ec(n,t[i]))return!0;if(t[i].playlists&&e(t[i].playlists,n))return!0}return!1},Hh={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},Vh=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){jh[t](t,e)}));var t=e.mediaTypes,n=e.mainPlaylistLoader,i=e.tech,r=e.vhs,a=e.segmentLoaders,o=a.AUDIO,s=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var i=t.mainPlaylistLoader,r=t.mediaTypes[e].groups,a=i.media();if(!a)return null;var o=null;a.attributes[e]&&(o=r[a.attributes[e]]);var s=Object.keys(r);if(!o)if("AUDIO"===e&&s.length>1&&Cc(t.main))for(var l=0;l<s.length;l++){var u=r[s[l]];if(zh(u,a)){o=u;break}}else r.main?o=r.main:1===s.length&&(o=r[s[0]]);return"undefined"===typeof n?o:null!==n&&o&&o.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=Hh[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.getActiveGroup(),l=a.activePlaylistLoader,u=a.lastGroup_;s&&u&&s.id===u.id||(a.lastGroup_=s,a.lastTrack_=o,Nh(i,a),s&&!s.isMainPlaylist&&(s.playlistLoader?(i.resyncLoader(),Uh(s.playlistLoader,a)):l&&r.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.mainPlaylistLoader,i=t.segmentLoaders,r=i[e],a=i.main,o=t.mediaTypes[e],s=o.activeTrack(),l=o.getActiveGroup(),u=o.activePlaylistLoader,c=o.lastTrack_;if((!c||!s||c.id!==s.id)&&(o.lastGroup_=l,o.lastTrack_=s,Nh(r,o),l)){if(l.isMainPlaylist){if(!s||!c||s.id===c.id)return;var d=t.vhs.playlistController_,h=d.selectPlaylist();if(d.media()===h)return;return o.logger_("track change. Switching main audio from ".concat(c.id," to ").concat(s.id)),n.pause(),a.resetEverything(),void d.fastQualityChange_(h)}if("AUDIO"===e){if(!l.playlistLoader)return a.setAudio(!0),void a.resetEverything();r.setAudio(!0),a.setAudio(!1)}u!==l.playlistLoader?(r.track&&r.track(s),r.resetEverything(),Uh(l.playlistLoader,o)):Uh(l.playlistLoader,o)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var l=t.AUDIO.activeGroup();if(l){var u=(l.filter((function(e){return e.default}))[0]||l[0]).id;t.AUDIO.tracks[u].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),o.setAudio(!0)):s.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var c=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};for(var d in i.audioTracks().addEventListener("change",c),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",c),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[d])},Gh=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Wh=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Zh=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e){var i;(0,re.Z)(this,n),i=t.call(this);var r=e.src,a=e.withCredentials,o=e.tech,s=e.bandwidth,l=e.externVhs,u=e.useCueTags,c=e.playlistExclusionDuration,d=e.enableLowInitialPlaylist,h=e.sourceType,p=e.cacheEncryptionKeys,f=e.bufferBasedABR,m=e.leastPixelDiffSelector,g=e.captionServices;if(!r)throw new Error("A non-empty playlist URL or JSON manifest string is required");var v=e.maxPlaylistRetries;null!==v&&"undefined"!==typeof v||(v=1/0),oh=l,i.bufferBasedABR=Boolean(f),i.leastPixelDiffSelector=Boolean(m),i.withCredentials=a,i.tech_=o,i.vhs_=o.vhs,i.sourceType_=h,i.useCueTags_=u,i.playlistExclusionDuration=c,i.maxPlaylistRetries=v,i.enableLowInitialPlaylist=d,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,maxPlaylistRetries:v,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ah,activeTrack:ah,getActiveGroup:ah,onGroupChanged:ah,onTrackChanged:ah,lastTrack_:null,logger_:Ju("MediaGroups[".concat(t,"]"))}})),e}(),i.mediaSource=new(Kt().MediaSource),i.handleDurationChange_=i.handleDurationChange_.bind((0,Gt.Z)(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind((0,Gt.Z)(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind((0,Gt.Z)(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=tc(),i.hasPlayed_=!1,i.syncController_=new Lh(e),i.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Rh,i.sourceUpdater_=new Eh(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new Ih;var y={vhs:i.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:g,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:s,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:p,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};i.mainPlaylistLoader_="dash"===i.sourceType_?new sd(r,i.vhs_,i.requestOptions_):new zc(r,i.vhs_,i.requestOptions_),i.setupMainPlaylistLoaderListeners_(),i.mainSegmentLoader_=new rh(ec(y,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e),i.audioSegmentLoader_=new rh(ec(y,{loaderType:"audio"}),e),i.subtitleSegmentLoader_=new Mh(ec(y,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),e),i.setupSegmentLoaderListeners_(),i.bufferBasedABR&&(i.mainPlaylistLoader_.one("loadedplaylist",(function(){return i.startABRTimer_()})),i.tech_.on("pause",(function(){return i.stopABRTimer_()})),i.tech_.on("play",(function(){return i.startABRTimer_()}))),Gh.forEach((function(e){i[e+"_"]=Wh.bind((0,Gt.Z)(i),e)})),i.logger_=Ju("pc"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.mainPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.mainPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var b="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one(b,(function(){var e=Date.now();i.tech_.one("loadeddata",(function(){i.timeToLoadedData__=Date.now()-e,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends}))})),i}return(0,ae.Z)(n,[{key:"mainAppendsToLoadedData_",value:function(){return this.mainAppendsToLoadedData__}},{key:"audioAppendsToLoadedData_",value:function(){return this.audioAppendsToLoadedData__}},{key:"appendsToLoadedData_",value:function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}},{key:"timeToLoadedData_",value:function(){return this.timeToLoadedData__}},{key:"checkABR_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"abr",t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}},{key:"switchMedia_",value:function(e,t,n){var i=this.media(),r=i&&(i.id||i.uri),a=e.id||e.uri;r&&r!==a&&(this.logger_("switch media ".concat(r," -> ").concat(a," from ").concat(t)),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-".concat(t)})),this.mainPlaylistLoader_.media(e,n)}},{key:"startABRTimer_",value:function(){var e=this;this.stopABRTimer_(),this.abrTimer_=Kt().setInterval((function(){return e.checkABR_()}),250)}},{key:"stopABRTimer_",value:function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Kt().clearInterval(this.abrTimer_),this.abrTimer_=null)}},{key:"getAudioTrackPlaylists_",value:function(){var e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,i=e.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=i.main||r.length&&i[r[0]];for(var o in a)if(a[o].default){n={label:o};break}}if(!n)return t;var s=[];for(var l in i)if(i[l][n.label]){var u=i[l][n.label];if(u.playlists&&u.playlists.length)s.push.apply(s,u.playlists);else if(u.uri)s.push(u);else if(e.playlists.length)for(var c=0;c<e.playlists.length;c++){var d=e.playlists[c];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&s.push(d)}}return s.length?s:t}},{key:"setupMainPlaylistLoaderListeners_",value:function(){var e=this;this.mainPlaylistLoader_.on("loadedmetadata",(function(){var t=e.mainPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Sc(e.mainPlaylistLoader_.main,e.mainPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Vh({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,mainPlaylistLoader:e.mainPlaylistLoader_,vhs:e.vhs_,main:e.main(),mediaTypes:e.mediaTypes_,excludePlaylist:e.excludePlaylist.bind(e)}),e.triggerPresenceUsage_(e.main(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.mainPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),!("vhs-json"===e.sourceType_&&e.initialMedia_.segments))return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.mainPlaylistLoader_.on("error",(function(){var t=e.mainPlaylistLoader_.error;e.excludePlaylist({playlistToExclude:t.playlist,error:t})})),this.mainPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(function(){var t=e.mainPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Sc(e.mainPlaylistLoader_.main,e.mainPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.mainPlaylistLoader_.on("playlistunchanged",(function(){var t=e.mainPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&(e.stuckAtPlaylistEnd_(t)&&(e.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),e.tech_.trigger("playliststuck")))})),this.mainPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}},{key:"handleUpdatedMediaPlaylist",value:function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a]){n.AUDIO[a][o].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),oh.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}},{key:"shouldSwitchToMedia_",value:function(e){var t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,r=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,s=e.duration,l=e.bufferBasedABR,u=e.log;if(!r)return Hu.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch ".concat(t&&t.id||"null"," -> ").concat(r.id);if(!t)return u("".concat(c," as current playlist is not set")),!0;if(r.id===t.id)return!1;var d=Boolean(ac(n,i).length);if(!t.endList)return d||"number"!==typeof t.partTargetDuration?(u("".concat(c," as current playlist is live")),!0):(u("not ".concat(c," as current playlist is live llhls, but currentTime isn't in buffered.")),!1);var h=cc(n,i),p=l?ld.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ld.MAX_BUFFER_LOW_WATER_LINE;if(s<p)return u("".concat(c," as duration < max low water line (").concat(s," < ").concat(p,")")),!0;var f=r.attributes.BANDWIDTH,m=t.attributes.BANDWIDTH;if(f<m&&(!l||h<o)){var g="".concat(c," as next bandwidth < current bandwidth (").concat(f," < ").concat(m,")");return l&&(g+=" and forwardBuffer < bufferHighWaterLine (".concat(h," < ").concat(o,")")),u(g),!0}if((!l||f>m)&&h>=a){var v="".concat(c," as forwardBuffer >= bufferLowWaterLine (").concat(h," >= ").concat(a,")");return l&&(v+=" and next bandwidth > current bandwidth (".concat(f," > ").concat(m,")")),u(v),!0}return u("not ".concat(c," as no switching criteria met")),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(function(){e.bufferBasedABR&&e.mainSegmentLoader_.load()})),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){var t=e.mainSegmentLoader_.error();e.excludePlaylist({playlistToExclude:t.playlist,error:t})})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.bufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:120}))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectPlaylist();t!==this.mainPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){Hu.browser.IE_VERSION||Hu.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Hu.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0}},{key:"handleSourceOpen_",value:function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();"undefined"!==typeof e&&"function"===typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")}},{key:"handleSourceEnded_",value:function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}}},{key:"handleDurationChange_",value:function(){this.tech_.trigger("durationchange")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=oh.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=ic;var a=r.end(r.length-1);return a-i<=ic&&n-a<=ic}},{key:"excludePlaylist",value:function(e){var t=e.playlistToExclude,n=void 0===t?this.mainPlaylistLoader_.media():t,i=e.error,r=void 0===i?{}:i,a=e.playlistExclusionDuration;if(n=n||this.mainPlaylistLoader_.media(),a=a||r.playlistExclusionDuration||this.playlistExclusionDuration,!n)return this.error=r,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var o,s=this.mainPlaylistLoader_.main.playlists,l=s.filter(wc),u=1===l.length&&l[0]===n;if(1===s.length&&a!==1/0)return Hu.log.warn("Problem encountered with playlist ".concat(n.id,". ")+"Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(u);if(u){var c=!1;s.forEach((function(e){if(e!==n){var t=e.excludeUntil;"undefined"!==typeof t&&t!==1/0&&(c=!0,delete e.excludeUntil)}})),c&&(Hu.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}o=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*a,n.excludeUntil=o,r.reason&&(n.lastExcludeReason_=r.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});var d=this.selectPlaylist();if(!d)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var h=r.internal?this.logger_:Hu.log.warn,p=r.message?" "+r.message:"";h("".concat(r.internal?"Internal problem":"Problem"," encountered with playlist ").concat(n.id,".")+"".concat(p," Switching to playlist ").concat(d.id,".")),d.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),d.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var f=d.targetDuration/2*1e3||5e3,m="number"===typeof d.lastRequest&&Date.now()-d.lastRequest<=f;return this.switchMedia_(d,"exclude",u||m)}},{key:"pauseLoading",value:function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}},{key:"delegateLoaders_",value:function(e,t){var n=this,i=[],r="all"===e;(r||"main"===e)&&i.push(this.mainPlaylistLoader_);var a=[];(r||"audio"===e)&&a.push("AUDIO"),(r||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&i.push(t)})),["main","audio","subtitle"].forEach((function(t){var r=n["".concat(t,"SegmentLoader_")];!r||e!==t&&"all"!==e||i.push(r)})),i.forEach((function(e){return t.forEach((function(t){"function"===typeof e[t]&&e[t]()}))}))}},{key:"setCurrentTime",value:function(e){var t=ac(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){if(!this.mainPlaylistLoader_)return 0;var e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:oh.Playlist.duration(e):1/0:0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e;if(this.mainPlaylistLoader_){var t=this.mainPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var i=this.mainPlaylistLoader_.main,r=oh.Playlist.seekable(t,n,oh.Playlist.liveEdgeDelay(i,t));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=oh.Playlist.seekable(t,n,oh.Playlist.liveEdgeDelay(i,t))).length)return}var a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=tc([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o||(this.logger_("seekable updated [".concat(sc(this.seekable_),"]")),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),i=oh.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}}},{key:"dispose",value:function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var i in n)n[i].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}},{key:"main",value:function(){return this.mainPlaylistLoader_.main}},{key:"media",value:function(){return this.mainPlaylistLoader_.media()||this.initialMedia_}},{key:"areMediaTypesKnown_",value:function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}},{key:"getCodecsOrExclude_",value:function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=zd(this.main(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=n.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(i.video+=",".concat(n.audio||t.main.audioCodec||Rn)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(i.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||Rn,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),i.audio||i.video){var a,o={};if(["video","audio"].forEach((function(e){if(i.hasOwnProperty(e)&&(r=t[e].isFmp4,s=i[e],!(r?In(s):On(s)))){var n=t[e].isFmp4?"browser":"muxer";o[n]=o[n]||[],o[n].push(i[e]),"audio"===e&&(a=n)}var r,s})),r&&a&&this.media().attributes.AUDIO){var s=this.media().attributes.AUDIO;this.main().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===s&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group ".concat(s," as ").concat(a,' does not support codec(s): "').concat(i.audio,'"'))}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach((function(t){var n=(An(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(An(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&l.push('"'.concat(e.sourceUpdater_.codecs[t],'" -> "').concat(i[t],'"'))})),l.length)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Codec switching not supported: ".concat(l.join(", "),"."),internal:!0},playlistExclusionDuration:1/0})}return i}var u=Object.keys(o).reduce((function(e,t){return e&&(e+=", "),e+="".concat(t,' does not support codec(s): "').concat(o[t].join(","),'"')}),"")+".";this.excludePlaylist({playlistToExclude:this.media(),error:{internal:!0,message:u},playlistExclusionDuration:1/0})}else this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0})}},{key:"tryToCreateSourceBuffers_",value:function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}}},{key:"excludeUnsupportedVariants_",value:function(){var e=this,t=this.main().playlists,n=[];Object.keys(t).forEach((function(i){var r=t[i];if(-1===n.indexOf(r.id)){n.push(r.id);var a=zd(e.main,r),o=[];!a.audio||On(a.audio)||In(a.audio)||o.push("audio codec ".concat(a.audio)),!a.video||On(a.video)||In(a.video)||o.push("video codec ".concat(a.video)),a.text&&"stpp.ttml.im1t"===a.text&&o.push("text codec ".concat(a.text)),o.length&&(r.excludeUntil=1/0,e.logger_("excluding ".concat(r.id," for unsupported: ").concat(o.join(", "))))}}))}},{key:"excludeIncompatibleVariants_",value:function(e){var t=this,n=[],i=this.main().playlists,r=Fd(An(e)),a=jd(r),o=r.video&&An(r.video)[0]||null,s=r.audio&&An(r.audio)[0]||null;Object.keys(i).forEach((function(e){var r=i[e];if(-1===n.indexOf(r.id)&&r.excludeUntil!==1/0){n.push(r.id);var l=[],u=zd(t.mainPlaylistLoader_.main,r),c=jd(u);if(u.audio||u.video){if(c!==a&&l.push('codec count "'.concat(c,'" !== "').concat(a,'"')),!t.sourceUpdater_.canChangeType()){var d=u.video&&An(u.video)[0]||null,h=u.audio&&An(u.audio)[0]||null;d&&o&&d.type.toLowerCase()!==o.type.toLowerCase()&&l.push('video codec "'.concat(d.type,'" !== "').concat(o.type,'"')),h&&s&&h.type.toLowerCase()!==s.type.toLowerCase()&&l.push('audio codec "'.concat(h.type,'" !== "').concat(s.type,'"'))}l.length&&(r.excludeUntil=1/0,t.logger_("excluding ".concat(r.id,": ").concat(l.join(" && "))))}}}))}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var i,r=n,a=0;a<e.segments.length;a++){var o=e.segments[a];if(i||(i=Ah(t,r+o.duration/2)),i){if("cueIn"in o){i.endTime=r,i.adEndTime=r,r+=o.duration,i=null;continue}if(r<i.endTime){r+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&((i=new(Kt().VTTCue)(r,r+o.duration,o.cueOut)).adStartTime=r,i.adEndTime=r+parseFloat(o.cueOut),t.addCue(i)),"cueOutCont"in o){var s=d(o.cueOutCont.split("/").map(parseFloat),2),l=s[0],u=s[1];(i=new(Kt().VTTCue)(r,r+o.duration,"")).adStartTime=r-l,i.adEndTime=i.adStartTime+u,t.addCue(i)}r+=o.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=ld.GOAL_BUFFER_LENGTH,n=ld.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,ld.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=ld.BUFFER_LOW_WATER_LINE,n=ld.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,ld.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,ld.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:i)}},{key:"bufferHighWaterLine",value:function(){return ld.BUFFER_HIGH_WATER_LINE}}]),n}(Hu.EventTarget),qh=(0,ae.Z)((function e(t,n,i){(0,re.Z)(this,e);var r,a,o,s=t.playlistController_,l=s.fastQualityChange_.bind(s);if(n.attributes){var u=n.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=zd(s.main(),n),this.playlist=n,this.id=i,this.enabled=(r=t.playlists,a=n.id,o=l,function(e){var t=r.main.playlists[a],n=xc(t),i=wc(t);return"undefined"===typeof e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(o(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})})),Xh=["seeking","seeked","pause","playing","error"],Yh=function(){function e(t){var n=this;(0,re.Z)(this,e),this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ju("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},r=function(){return n.monitorCurrentTime_()},a=function(){return n.techWaiting_()},o=function(){return n.resetTimeUpdate_()},s=this.playlistController_,l=["main","subtitle","audio"],u={};l.forEach((function(e){u[e]={reset:function(){return n.resetSegmentDownloads_(e)},updateend:function(){return n.checkSegmentDownloads_(e)}},s["".concat(e,"SegmentLoader_")].on("appendsdone",u[e].updateend),s["".concat(e,"SegmentLoader_")].on("playlistupdate",u[e].reset),n.tech_.on(["seeked","seeking"],u[e].reset)}));var c=function(e){["main","audio"].forEach((function(t){s["".concat(t,"SegmentLoader_")][e]("appended",n.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=function(){return c("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(Xh,o),this.tech_.on("canplay",r),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",a),n.tech_.off(Xh,o),n.tech_.off("canplay",r),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),l.forEach((function(e){s["".concat(e,"SegmentLoader_")].off("appendsdone",u[e].updateend),s["".concat(e,"SegmentLoader_")].off("playlistupdate",u[e].reset),n.tech_.off(["seeked","seeking"],u[e].reset)})),n.checkCurrentTimeTimeout_&&Kt().clearTimeout(n.checkCurrentTimeTimeout_),n.resetTimeUpdate_()}}return(0,ae.Z)(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Kt().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Kt().setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"resetSegmentDownloads_",value:function(e){var t=this.playlistController_["".concat(e,"SegmentLoader_")];this["".concat(e,"StalledDownloads_")]>0&&this.logger_("resetting possible stalled download count for ".concat(e," loader")),this["".concat(e,"StalledDownloads_")]=0,this["".concat(e,"Buffered_")]=t.buffered_()}},{key:"checkSegmentDownloads_",value:function(e){var t=this.playlistController_,n=t["".concat(e,"SegmentLoader_")],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this["".concat(e,"Buffered_")],i);this["".concat(e,"Buffered_")]=i,r?this.resetSegmentDownloads_(e):(this["".concat(e,"StalledDownloads_")]++,this.logger_("found #".concat(this["".concat(e,"StalledDownloads_")]," ").concat(e," appends that did not increase buffer (possible stalled download)"),{playlistId:n.playlist_&&n.playlist_.id,buffered:lc(i)}),this["".concat(e,"StalledDownloads_")]<10||(this.logger_("".concat(e," loader stalled download exclusion")),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-".concat(e,"-download-exclusion")}),"subtitle"!==e&&t.excludePlaylist({error:{message:"Excessive ".concat(e," segment downloading detected.")},playlistExclusionDuration:1/0})))}},{key:"checkCurrentTime_",value:function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+ic>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"resetTimeUpdate_",value:function(){this.consecutiveUpdates=0}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1));if(this.beforeSeekableWindow_(t,n)){var i=t.start(0);e=i+(i===t.end(0)?0:ic)}if("undefined"!==typeof e)return this.logger_("Trying to seek outside of seekable at time ".concat(n," with ")+"seekable range ".concat(sc(t),". Seeking to ")+"".concat(e,".")),this.tech_.setCurrentTime(e),!0;for(var r=this.playlistController_.sourceUpdater_,a=this.tech_.buffered(),o=r.audioBuffer?r.audioBuffered():null,s=r.videoBuffer?r.videoBuffered():null,l=this.media(),u=l.partTargetDuration?l.partTargetDuration:2*(l.targetDuration-nc),c=[o,s],d=0;d<c.length;d++){if(c[d])if(cc(c[d],n)<u)return!1}var h=oc(a,n);return 0!==h.length&&(e=h.start(0)+ic,this.logger_("Buffered region starts (".concat(h.start(0),") ")+" just beyond seek point (".concat(n,"). Seeking to ").concat(e,".")),this.tech_.setCurrentTime(e),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=ac(t,e);return n.length&&e+3<=n.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at ".concat(e," while inside a buffered region ")+"[".concat(n.start(0)," -> ").concat(n.end(0),"]. Attempting to resume ")+"playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time ".concat(t,". Seeking to ")+"live point (seekable end) ".concat(n)),this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}var i=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;var a=oc(r,t);return a.length>0&&(this.logger_("Stopped at ".concat(t," and seeking to ").concat(a.start(0))),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}},{key:"afterSeekableWindow_",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length)return!1;var r=e.end(e.length-1)+ic;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}},{key:"videoUnderflow_",value:function(e){var t=e.videoBuffered,n=e.audioBuffered,i=e.currentTime;if(t){var r;if(t.length&&n.length){var a=ac(t,i-3),o=ac(t,i),s=ac(n,i);s.length&&!o.length&&a.length&&(r={start:a.end(0),end:s.end(0)})}else{oc(t,i).length||(r=this.gapFromVideoUnderflow_(t,i))}return!!r&&(this.logger_("Encountered a gap in video from ".concat(r.start," to ").concat(r.end,". ")+"Seeking to current time ".concat(i)),!0)}}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=oc(t,n);this.resetTimeUpdate_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+nc),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return tc();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return tc(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&t-r>2)return{start:r,end:a}}return null}}]),e}(),Kh={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Qh=function e(t,n){var i=0,r=0,a=ec(Kh,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));var o=function(){r&&t.currentTime(r)},s=function(e){null!==e&&void 0!==e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},l=function(){if(Date.now()-i<1e3*a.errorInterval)t.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(a.getSource&&"function"===typeof a.getSource)return i=Date.now(),a.getSource.call(t,s);Hu.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){t.off("loadedmetadata",o),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(n){u(),e(t,n)}},$h="3.0.0",Jh={PlaylistLoader:zc,Playlist:Mc,utils:Jc,STANDARD_PLAYLIST_SELECTOR:Xd,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.main.playlists.filter(Mc.isEnabled);return Wd(t,(function(e,t){return Zd(e,t)})),t.filter((function(t){return!!zd(e.playlists.main,t).video}))[0]||null},lastBandwidthSelector:Xd,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Kt().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),qd(this.playlists.main,t,parseInt(Gd(this.tech_.el(),"width"),10)*i,parseInt(Gd(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:Zd,comparePlaylistResolution:function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Kt().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||Kt().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:Gc()};Object.keys(ld).forEach((function(e){Object.defineProperty(Jh,e,{get:function(){return Hu.log.warn("using Vhs.".concat(e," is UNSAFE be sure you know what you are doing")),ld[e]},set:function(t){Hu.log.warn("using Vhs.".concat(e," is UNSAFE be sure you know what you are doing")),"number"!==typeof t||t<0?Hu.log.warn("value of Vhs.".concat(e," must be greater than or equal to 0")):ld[e]=t}})}));var ep="videojs-vhs",tp=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};Jh.canPlaySource=function(){return Hu.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var np=function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=function(e,t){return e.reduce((function(e,n){if(!n.contentProtection)return e;var i=t.reduce((function(e,t){var i=n.contentProtection[t];return i&&i.pssh&&(e[t]={pssh:i.pssh}),e}),{});return Object.keys(i).length&&e.push(i),e}),[])}(i?r.concat([i]):r,Object.keys(n)),o=[],s=[];return a.forEach((function(e){s.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),o.push(new Promise((function(n,i){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?i(e):n()}))})))})),Promise.race([Promise.all(o),Promise.race(s)])},ip=function(e){var t=e.player,n=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=Fd(An(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r=Ln(i.video),a=Ln(i.audio),o={};for(var s in e)o[s]={},a&&(o[s].audioContentType=a),r&&(o[s].videoContentType=r),t.contentProtection&&t.contentProtection[s]&&t.contentProtection[s].pssh&&(o[s].pssh=t.contentProtection[s].pssh),"string"===typeof e[s]&&(o[s].url=e[s]);return ec(e,o)}(e.sourceKeySystems,e.media,e.audioMedia);return!!n&&(t.currentSource().keySystems=n,!(n&&!t.eme)||(Hu.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},rp=function(){if(!Kt().localStorage)return null;var e=Kt().localStorage.getItem(ep);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}};Jh.supportsNativeHls=function(){if(!$t()||!$t().createElement)return!1;var e=$t().createElement("video");if(!Hu.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Jh.supportsNativeDash=!!($t()&&$t().createElement&&Hu.getTech("Html5").isSupported())&&/maybe|probably/i.test($t().createElement("video").canPlayType("application/dash+xml")),Jh.supportsTypeNatively=function(e){return"hls"===e?Jh.supportsNativeHls:"dash"===e&&Jh.supportsNativeDash},Jh.isSupported=function(){return Hu.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var ap=function(e){(0,qt.Z)(n,e);var t=(0,Xt.Z)(n);function n(e,i,r){var a;if((0,re.Z)(this,n),a=t.call(this,i,r.vhs),"number"===typeof r.initialBandwidth&&(a.options_.bandwidth=r.initialBandwidth),a.logger_=Ju("VhsHandler"),i.options_&&i.options_.playerId){var o=Hu.getPlayer(i.options_.playerId);a.player_=o}if(a.tech_=i,a.source_=e,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");return a.on($t(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=$t().fullscreenElement||$t().webkitFullscreenElement||$t().mozFullScreenElement||$t().msFullscreenElement;t&&t.contains(a.tech_.el())?a.playlistController_.fastQualityChange_():a.playlistController_.checkABR_()})),a.on(a.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),a.on(a.tech_,"error",(function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()})),a.on(a.tech_,"play",a.play),a}return(0,ae.Z)(n,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!==typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=rp();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=ld.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ld.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach((function(t){"undefined"!==typeof e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function(e,t){var n=this;if(e){var i;this.setOptions_(),this.options_.src=0===(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=Jh,this.options_.sourceType=Un(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.playlistController_=new Zh(this.options_);var r=ec({liveRangeSafeTimeDelta:ic},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.playlistController_.media()},playlistController:this.playlistController_});this.playbackWatcher_=new Yh(r),this.playlistController_.on("error",(function(){var e=Hu.players[n.tech_.options_.playerId],t=n.playlistController_.error;"object"!==typeof t||t.code?"string"===typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var a=this.options_.bufferBasedABR?Jh.movingAverageBandwidthSelector(.55):Jh.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.playlistController_.selectInitialPlaylist=Jh.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.playlistController_.selectPlaylist},set:function(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.playlistController_.mainSegmentLoader_.bandwidth,t=Kt().navigator.connection||Kt().navigator.mozConnection||Kt().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set:function(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){Hu.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.playlistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.playlistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.playlistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.playlistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.playlistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.playlistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.playlistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.playlistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.playlistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.playlistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.playlistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.playlistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return lc(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},main:{get:function(){return n.playlists.main},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return lc(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!Kt().localStorage)return!1;var t=rp();t=t?ec(t,e):e;try{Kt().localStorage.setItem(ep,JSON.stringify(t))}catch(n){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.playlistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.playlistController_.main(),n=Cc(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!xc(e)})).map((function(t,n){return new qh(e,t,t.id)})):[]}})),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.playlistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Kt().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}}},{key:"createKeySessions_",value:function(){var e=this,t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),np({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then((function(){e.logger_("created EME key session"),e.playlistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}},{key:"handleWaitingForKey_",value:function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}},{key:"setupEme_",value:function(){var e=this,t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=ip({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",(function(t){if("output-restricted"===t.status){var n=e.playlistController_.main();if(n&&n.playlists){var i,r=[];if(n.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,r.push(e))})),r.length)(i=Hu.log).warn.apply(i,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(r)),e.playlistController_.fastQualityChange_()}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==Hu.browser.IE_VERSION&&n?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}},{key:"setupQualityLevels_",value:function(){var e=this,t=Hu.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",(function(){!function(e,t){t.representations().forEach((function(t){e.addQualityLevel(t)})),tp(e,t.playlists)}(e.qualityLevels_,e)})),this.playlists.on("mediachange",(function(){tp(e.qualityLevels_,e.playlists)})))}},{key:"version",value:function(){return this.constructor.version()}},{key:"canChangeType",value:function(){return Eh.canChangeType()}},{key:"play",value:function(){this.playlistController_.play()}},{key:"setCurrentTime",value:function(e){this.playlistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.playlistController_.duration()}},{key:"seekable",value:function(){return this.playlistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&Kt().URL.revokeObjectURL&&(Kt().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),Zt((0,Wt.Z)(n.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return ed({playlist:this.playlistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return td({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}],[{key:"version",value:function(){return{"@videojs/http-streaming":$h,"mux.js":"6.2.0","mpd-parser":"1.0.1","m3u8-parser":"6.0.0","aes-decrypter":"4.0.1"}}}]),n}(Hu.getComponent("Component")),op={name:"videojs-http-streaming",VERSION:$h,canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ec(Hu.options,t);return op.canPlayType(e.type,n)},handleSource:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=ec(Hu.options,n);return t.vhs=new ap(e,t,i),t.vhs.xhr=Gc(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ec(Hu.options,t).vhs,i=(void 0===n?{}:n).overrideNative,r=void 0===i?!Hu.browser.IS_ANY_SAFARI:i,a=Un(e);return a&&(!Jh.supportsTypeNatively(a)||r)?"maybe":""}};In("avc1.4d400d,mp4a.40.2")&&Hu.getTech("Html5").registerSourceHandler(op,0),Hu.VhsHandler=ap,Hu.VhsSourceHandler=op,Hu.Vhs=Jh,Hu.use||Hu.registerComponent("Vhs",Jh),Hu.options.vhs=Hu.options.vhs||{},Hu.getPlugin&&Hu.getPlugin("reloadSourceOnError")||Hu.registerPlugin("reloadSourceOnError",(function(e){Qh(this,e)}));var sp=n.p+"static/media/video.6b2d34e76a6059dbdf0a.mp4";var lp,up,cp,dp,hp,pp,fp=n.p+"static/media/close-circle.0674a066652d4c34f1609c4954b69b6e.svg",mp=a.ZP.div(lp||(lp=(0,r.Z)(["\n  position: fixed;\n    width: 100vw;\n  left: 0;\n  top: 0;\n  height: 100vh;\n  z-index: 9999;\n  background: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),gp=a.ZP.div(up||(up=(0,r.Z)(["\n    background: #000;\n  padding: 20px;\n width: 80vw;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  overflow: hidden;\n  @media (max-width: 1279px) {\n    width: 100vw;\n    height: 100vh;\n    padding: 0;\n  }\n"]))),vp=a.ZP.div(cp||(cp=(0,r.Z)(["\n  width: 100%;\n  video{\n    background: #000;\n    width: 100%;\n  }\n"]))),yp=a.ZP.div(dp||(dp=(0,r.Z)(["\n    position: absolute;\n  right: 40px;\n  top: 10px;\n  z-index: 999;\n  cursor: pointer;\n  img{\n    width: 40px;\n  }\n\n  @media (max-width: 1279px) {\n    right: 10px;\n    top: 10px;\n    img{\n      margin: 0!important;\n    }\n  }\n"]))),bp=function(e){var n=(0,t.useRef)(null),i=d((0,t.useState)(null),2),r=i[0],a=i[1];return(0,t.useEffect)((function(){if(n.current){var t=Hu(n.current,e);return a(t),function(){null!==r&&r.dispose()}}}),[]),(0,L.jsx)(vp,{"data-vjs-player":!0,children:(0,L.jsx)("video",{ref:n,className:"video-js"})})};function _p(e){var t=e.closeModal,n={fill:!0,fluid:!0,autoplay:!0,controls:!0,preload:"metadata",sources:[{src:sp,type:"video/mp4"}]};return(0,L.jsx)(mp,{children:(0,L.jsxs)(gp,{children:[(0,L.jsx)(yp,{onClick:function(){t()},children:(0,L.jsx)("img",{src:fp,alt:""})}),(0,L.jsx)(bp,ee({},n))]})})}var xp=a.ZP.div(hp||(hp=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #000;\n  padding: 100px 0;\n  position: relative;\n  @media (max-width: 1279px) {\n    padding: 0;\n    img{\n      width: 90%;\n      margin: 50px 0;\n      text-align: center;\n      padding-left: 5%;\n    }\n  }\n"]))),wp=a.ZP.div(pp||(pp=(0,r.Z)(["\n  cursor: pointer;\n  position: absolute;\n    height: 80px;\n    width: 80px;\n    top: calc(50% - 40px);\n    left: calc(50% - 40px);\n    z-index: 1;\n    border-radius: 50px;\n    line-height: 77px;\n    text-align: center;\n    color: #ffffff;\n    background: #024d9290;\n    display: inline-block;\n    -webkit-border-radius: 50px;\n    -webkit-box-shadow: 0 0 0 0 #08297c;\n    box-shadow: 0 0 0 0 #0c6082;\n    -webkit-transform: translate(-50%,-50%);\n    -ms-transform: translate(-50%,-50%);\n    -o-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n  \n  &:hover {\n    -o-animation: ripple 1.3s infinite;\n    -webkit-animation: ripple 1.3s infinite;\n    animation: ripple-button 1.3s infinite;\n  }\n\n  &.slider-play-button {\n    margin: 10px;\n    -webkit-transform: translate(0%,0%);\n    -ms-transform: translate(0%,0%);\n    -o-transform: translate(0%,0%);\n    transform: translate(0%,0%);\n  }\n\n  & i {\n    font-size: 20px;\n    border: 2px solid #ffffff;\n    border-radius: 50%;\n    transition: .5s ease;\n    position: absolute;\n    width: 55px;\n    height: 55px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    top: 50%;\n    left: 50%;\n    font-style: normal;\n    transform: translate(-50%,-50%);\n  }\n\n  &:hover i {\n    color: #ffffff;\n  }\n  @-webkit-keyframes ripple-button {\n    70% {\n      -webkit-box-shadow: 0 0 0 20px rgba(0, 159, 153, 0);\n      box-shadow: 0 0 0 20px rgba(0, 159, 153, 0);\n    }\n    to {\n      -webkit-box-shadow: 0 0 0 0 rgba(0, 159, 153, 0);\n      box-shadow: 0 0 0 0 rgba(0, 159, 153, 0);\n    }\n  }\n\n  @keyframes ripple-button {\n    70% {\n      -webkit-box-shadow: 0 0 0 20px rgba(0, 159, 153, 0);\n      box-shadow: 0 0 0 20px rgba(0, 159, 153, 0);\n    }\n    to {\n      -webkit-box-shadow: 0 0 0 0 rgba(0, 159, 153, 0);\n      box-shadow: 0 0 0 0 rgba(0, 159, 153, 0);\n    }\n  }\n  @media (max-width: 1279px) {\n    left: 50%;\n  }\n  \n"])));function Tp(){var e=d((0,t.useState)(!1),2),n=e[0],i=e[1],r=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return(0,L.jsxs)(xp,{id:"videoInner",children:[n&&(0,L.jsx)(_p,{closeModal:function(){i(!1)}}),(0,L.jsxs)("div",{className:"wow animate__animated animate__bounceInLeft","data-wow-offset":r?"0":"400",children:[(0,L.jsx)(wp,{onClick:function(){i(!0)},children:(0,L.jsx)("i",{children:"\u25b6"})}),(0,L.jsx)("img",{src:Ft,alt:""})]})]})}var Sp,Ep,kp,Cp,Mp,Ap,Pp,Lp=n.p+"static/media/blog-bg.cf31cea2dad22d3f2b58.jpg",Ip=n.p+"static/media/flow.756760aa89941709f70e.png",Op=a.ZP.div(Sp||(Sp=(0,r.Z)(["\n  margin: 100px auto 0;\n  background: url(",");\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  @media (max-width: 1279px) {\n    flex-direction: column;\n    margin: 0 auto;\n  }\n"])),Lp),Rp=a.ZP.div(Ep||(Ep=(0,r.Z)(["\n    width: 50%;\n  @media (max-width: 1279px) {\n    width: 100%;\n    order: 2;\n  }\n"]))),Dp=a.ZP.div(kp||(kp=(0,r.Z)(['\n    color: #edbd55;\n  font-size: 20px;\n  padding:100px 40px;\n  \n  .tips{\n    color: #ffffff;\n    font-size: 40px;\n    margin-top: 20px;\n    font-family: "Lato-Light";\n    text-transform: uppercase;\n\n  }\n  .content{\n    margin-top: 40px;\n    color: #797979;\n    line-height: 2em;\n  }\n  @media (max-width: 1279px) {\n    font-size: 16px;\n    padding-top: 10px;\n    .tips{\n      font-size: 20px;\n    }\n  }\n']))),Np=a.ZP.div(Cp||(Cp=(0,r.Z)(["\n    width: 50%;\n  position: relative;\n  \n  img{\n    width: 100%;\n  }\n  @media (max-width: 1279px) {\n    width: 100%;\n  }\n"])));function Up(){return(0,L.jsxs)(Op,{id:"Technology",children:[(0,L.jsx)(Rp,{children:(0,L.jsxs)(Dp,{children:["Our Technology",(0,L.jsx)("div",{className:"tips",children:"decentralized storage & smart contract"}),(0,L.jsx)("div",{className:"content",children:"Designer is based on the decentralized storage project IPFS and the WASM smart contract platform Gear. Anyone can access the web app and agreement files at anytime, without worry about losing them. The Gear Smart Contract provides the abilitiy to store and verify the co-sign information of the agreements, without any other SaaS dependencies, such as thegraph in Ethereum ecosystem, nor the subquery in Polkadot ecosystem."})]})}),(0,L.jsx)(Np,{children:(0,L.jsx)("div",{className:"hover-effect",children:(0,L.jsx)("img",{src:Ip,alt:""})})})]})}var Bp,Fp,jp=a.ZP.div(Mp||(Mp=(0,r.Z)(["\n  width: 80%;\n  margin: 100px auto;\n  display: flex;\n  flex-direction: column;\n"]))),zp=a.ZP.div(Ap||(Ap=(0,r.Z)(['\n    color: #edbd55;\n  font-size: 20px;\n  padding:20px 40px;\n  text-align: center;\n  .tips{\n    color: #ffffff;\n    font-size: 40px;\n    margin-top: 20px;\n    font-family: "Lato-Light";\n    text-transform: uppercase;\n\n  }\n  @media (max-width: 1279px) {\n    font-size: 16px;\n    .tips{\n      font-size: 20px;\n    }\n  }\n']))),Hp=a.ZP.div(Pp||(Pp=(0,r.Z)(["\n  margin-top: 20px;\n  color: #797979;\n  line-height: 2em;\n"])));function Vp(){return(0,L.jsxs)(jp,{id:"overview",className:"wow animate__animated animate__zoomIn","data-wow-offset":"500",children:[(0,L.jsxs)(zp,{children:["Overview",(0,L.jsx)("div",{className:"tips",children:"Development overview"})]}),(0,L.jsxs)(Hp,{children:["Digital agreement is not a new thing. For a long time, digital agreements are supported by centralized services, like hellosign, docusign. By using those services, we are facing their censorship requirements, and we may lose our treasures if these services providers are broke. Based on blockchain, smart contract and decentralized storage, we can build decentralized digital agreement platforms or tools. In the past years, there are several other tools saying they are based on decentralized technologies. Is it real? No, they are cheating. They are using decentralized technologies, but they don't let you know, there are also centralized SaaS/APIs used too. You will lose your treasures again, and you will facing censorship.",(0,L.jsx)("br",{}),(0,L.jsx)("br",{}),"Designer is a pure decentralized digital agreement tool for DAO, because it's not rely on centralized technologies.Designer uses Gear Smart Contracts which is a new way, and IPFS as decentralized storage layer. The front end uses React + gear-js + polkadot-js/extention."]})]})}var Gp=a.ZP.div(Bp||(Bp=(0,r.Z)(["\n    width: 80%;\n  margin: 0 auto;\n  padding: 50px 0;\n"]))),Wp=a.ZP.div(Fp||(Fp=(0,r.Z)(["\n    display: flex;\n  align-items: center;\n  justify-content: center;\n  li{\n    margin: 0 20px;\n    a{\n      color: #ffffff;\n      padding-right: 10px;\n    }\n    img{\n      width: 35px;\n      opacity: 0.6;\n    }\n    &:hover{\n      img{\n        opacity: 1;\n      }\n    }\n  }\n"])));function Zp(){return(0,L.jsx)(Gp,{children:(0,L.jsxs)(Wp,{children:[(0,L.jsxs)("li",{children:[" ",(0,L.jsx)("a",{href:"https://twitter.com/Designer__team",target:"_blank",rel:"noreferrer",children:(0,L.jsx)("img",{src:v,alt:""})})]}),(0,L.jsx)("li",{children:(0,L.jsx)("a",{href:"https://github.com/TeamTaoist/Designer",target:"_blank",rel:"noreferrer",children:(0,L.jsx)("img",{src:P,alt:""})})})]})})}var qp,Xp,Yp,Kp,Qp,$p,Jp,ef,tf,nf=n(8417),rf=n.p+"static/media/wendy.929f5d9db045973ac585.png",af=a.ZP.div(qp||(qp=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding: 80px 0;\n"]))),of=a.ZP.div(Xp||(Xp=(0,r.Z)(['\n    color: #edbd55;\n  font-size: 20px;\n  padding:20px 40px;\n  text-align: center;\n  .tips{\n    color: #ffffff;\n    font-size: 40px;\n    margin-top: 20px;\n    font-family: "Lato-Light";\n    text-transform: uppercase;\n\n  }\n  @media (max-width: 1279px) {\n    font-size: 16px;\n    .tips{\n      font-size: 20px;\n    }\n  }\n']))),sf=a.ZP.div(Yp||(Yp=(0,r.Z)(["\n  width: 80%;\n  margin: 20px auto 0;\n"]))),lf=a.ZP.ul(Kp||(Kp=(0,r.Z)(["\n  display: flex;\n  justify-content: space-between;\n    li{\n      width: calc((100% - 100px)/3);\n      margin-right: 50px;\n      &:last-child{\n        margin-right: 0;\n      }\n    }\n  img{\n    width: 100%;\n  }\n\n  @media (max-width: 1279px) {\n    flex-wrap: wrap;\n    li{\n      width: 90%;\n      margin: 0 auto 40px;\n      &:last-child{\n        margin-right: auto;\n      }\n    }\n  }\n"]))),uf=a.ZP.div(Qp||(Qp=(0,r.Z)(['\n    margin-top: 20px;\n    text-align: center;\n  .nameTop{\n    font-family: "black";\n    margin-bottom: 10px;\n    font-size: 24px;\n    color: #fff;\n  }\n  .po{\n    font-size: 16px;\n  }\n  @media (max-width: 1279px) {\n    .nameTop{\n      font-size: 16px;\n    }\n    .po{\n      font-size: 12px;\n    }\n  }\n'])));function cf(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return(0,L.jsxs)(af,{id:"Team",children:[(0,L.jsxs)(of,{className:"wow animate__animated animate__bounceInLeft","data-wow-offset":e?"0":"400",children:["Team",(0,L.jsx)("div",{className:"tips",children:"Our team of designer"})]}),(0,L.jsx)(sf,{children:(0,L.jsxs)(lf,{children:[(0,L.jsxs)("li",{className:"wow animate__animated animate__fadeInLeft","data-wow-offset":e?"0":"400",children:[(0,L.jsx)("div",{children:(0,L.jsx)("img",{src:rf,alt:""})}),(0,L.jsxs)(uf,{children:[(0,L.jsx)("div",{className:"nameTop",children:"WendyChaung"}),(0,L.jsx)("div",{className:"po",children:"Front End Developer"})]})]}),(0,L.jsxs)("li",{className:"wow animate__animated animate__fadeInLeft","data-wow-offset":e?"0":"400","data-wow-delay":"0.2s",children:[(0,L.jsx)("div",{children:(0,L.jsx)("img",{src:rf,alt:""})}),(0,L.jsxs)(uf,{children:[(0,L.jsx)("div",{className:"nameTop",children:"WendyChaung"}),(0,L.jsx)("div",{className:"po",children:"Front End Developer"})]})]}),(0,L.jsxs)("li",{className:"wow animate__animated animate__fadeInLeft","data-wow-offset":e?"0":"400","data-wow-delay":"0.4s",children:[(0,L.jsx)("div",{children:(0,L.jsx)("img",{src:rf,alt:""})}),(0,L.jsxs)(uf,{children:[(0,L.jsx)("div",{className:"nameTop",children:"WendyChaung"}),(0,L.jsx)("div",{className:"po",children:"Front End Developer"})]})]})]})})]})}var df,hf,pf=a.ZP.div($p||($p=(0,r.Z)(["\n    background: #000;\n  padding: 100px 0 100px;\n"]))),ff=a.ZP.div(Jp||(Jp=(0,r.Z)(["\n  margin: 0 ;\n"]))),mf=a.ZP.div(ef||(ef=(0,r.Z)(['\n    color: #edbd55;\n  font-size: 20px;\n  padding:20px 40px;\n  text-align: center;\n  .tips{\n    color: #ffffff;\n    font-size: 40px;\n    margin-top: 20px;\n    font-family: "Lato-Light";\n    text-transform: uppercase;\n\n  }\n']))),gf=a.ZP.div(tf||(tf=(0,r.Z)(["\n\n  position: relative;\n  min-height: 400px;\n  width: 100%;\n  overflow-x: auto;\n\n  .timelines-years {\n    position: absolute;\n    top: 300px;\n    left:360px;\n    //padding: 0 0 0 200px;\n    margin: 0;\n    white-space: nowrap;\n    border-top: 1px solid #282828;\n    list-style: none;\n    /* Fix display: inline-block spacing issue */;\n    font-size: 0;\n  }\n\n  .timelines-years li {\n    position: relative;\n    top: -6px;\n    display: inline-block;\n    width: 200px;\n    color: #868686;\n    font-size: 11px;\n    line-height: 11px;\n    text-indent: -12px;\n    span{\n      background: #000;\n      padding: 0 5px;\n    }\n  }\n\n  /* Display last year */\n\n  .timelines-years li:last-child {\n    width: 100px;\n  }\n\n  /* Timeline - Events */\n\n  .timeline-events {\n    position: absolute;\n    top: 170px;\n    padding: 0;\n    list-style: none;\n    white-space: nowrap;\n    /* Fix display: inline-block spacing issue */;\n    font-size: 0;\n  }\n\n  .timeline-events h2,\n  .timeline-events h3,\n  .timeline-events h4 {\n    margin: 0 0 1px 0;\n    font-weight: normal;\n    font-size: 11px;\n  }\n\n  .timeline-events h2 {\n    color: #777;\n    text-transform: uppercase;\n  }\n\n  .timeline-events h4 {\n    color: #fff;\n    font-style: italic;\n  }\n\n  .timeline-events li {\n    position: relative;\n    display: inline-block;\n  }\n\n  .timeline-events li:before {\n    position: absolute;\n    left: 0;\n    bottom: -36px;\n    height: 8px;\n    border-radius: 8px;\n    content: '';\n  }\n  \n\n  .timeline-events li:nth-child(0) {\n    bottom: -16px;\n  }\n  .timeline-events li:nth-child(1) {\n    bottom: 0;\n  }\n  .timeline-events li:nth-child(2) {\n    bottom: 16px;\n  }\n  .timeline-events li:nth-child(3) {\n    bottom: 32px;\n  }\n  .timeline-events li:nth-child(4) {\n    bottom: 48px;\n  }\n  .timeline-events li:nth-child(5) {\n    bottom: 64px;\n  }\n  .timeline-events li:nth-child(1):before {\n    background: linear-gradient(90deg,rgba(194,227,78,0), rgba(194,227,78,1));\n    border-radius: 0 6px 6px 0;\n  }\n\n  .timeline-events li:nth-child(1) h3 {\n    color: #C2E34E;\n  }\n  \n  .timeline-events li:nth-child(2):before {\n    background: #FF9704;\n  }\n\n  .timeline-events li:nth-child(2) h3 {\n    color: #FF9704;\n  }\n  .timeline-events li:nth-child(3):before {\n    background: #56C2F3;\n  }\n\n  .timeline-events li:nth-child(3) h3 {\n    color: #56C2F3;\n  }\n  .timeline-events li:nth-child(4):before {\n    background: #DD3D01;\n  }\n\n  .timeline-events li:nth-child(4) h3 {\n    color: #DD3D01;\n  }\n  .timeline-events li:nth-child(5):before {\n    background: linear-gradient(270deg,rgba(74,139,143,0), rgba(74,139,143,1));\n    border-radius: 6px 0 0 6px;\n  }\n\n  .timeline-events li:nth-child(5) h3 {\n    color: #4A8B8F;\n  }\n  \n  .timeline-event-years-0,\n  .timeline-event-years-0:before {\n    width: 0;\n  } \n  .timeline-event-years-1,\n  .timeline-event-years-1:before {\n    width: 100px;\n  }\n  .timeline-event-years-2,\n  .timeline-event-years-2:before {\n    width: 200px;\n  }\n  .timeline-event-years-3,\n  .timeline-event-years-3:before {\n    width: 300px;\n  }\n  .timeline-event-years-4,\n  .timeline-event-years-4:before {\n    width: 400px;\n  }\n  .timeline-event-years-5,\n  .timeline-event-years-5:before {\n    width: 500px;\n  }\n  .timeline-event-years-6,\n  .timeline-event-years-6:before {\n    width: 600px;\n  }\n  .timeline-event-years-7,\n  .timeline-event-years-7:before {\n    width: 700px;\n  }\n  .timeline-event-years-8,\n  .timeline-event-years-8:before {\n    width: 800px;\n  }\n  \n\n  .timeline-event-years-0-5,\n  .timeline-event-years-0-5:before {\n    width: 50px;\n  }\n  .timeline-event-years-1-5,\n  .timeline-event-years-1-5:before {\n    width: 150px;\n  }\n  .timeline-event-years-2-5,\n  .timeline-event-years-2-5:before {\n    width: 250px;\n  }\n  .timeline-event-years-3-5,\n  .timeline-event-years-3-5:before {\n    width: 350px;\n  }\n  .timeline-event-years-4-5,\n  .timeline-event-years-4-5:before {\n    width: 450px;\n  }\n  .timeline-event-years-5-5,\n  .timeline-event-years-5-5:before {\n    width: 550px;\n  }\n  .timeline-event-years-6-5,\n  .timeline-event-years-6-5:before {\n    //width: 650px;\n    width: 350px;\n  }\n  .timeline-event-years-7-5,\n  .timeline-event-years-7-5:before {\n    width: 750px;\n  }\n  .timeline-event-years-8-5,\n  .timeline-event-years-8-5:before {\n    width: 850px;\n  }\n\n  .timeline-event-legend {\n    position: relative;\n  }\n\n  .timeline-event-legend span {\n    position: absolute;\n    bottom: -150px;\n    left: 850px;\n  }\n\n  .timeline-event-legend h2,\n  .timeline-event-legend h3,\n  .timeline-event-legend h4 {\n    display: inline;\n    margin-right: 10px;\n  }\n\n  .timeline-event-legend i {\n    position: absolute;\n    width: 0;\n    height: 0;\n    border: 4px solid transparent;\n    border-bottom-color: #fff;\n  }\n\n  .timeline-event-legend i:after {\n    content: '';\n    position: absolute;\n    width: 0;\n    height: 0;\n    border: 4px solid transparent;\n    border-top-color: #fff;\n  }\n\n  .timeline-event-legend > i {\n    bottom: -32px;\n    right: -12px;\n  }\n\n  .timeline-event-legend > i:after {\n    left: -4px;\n    bottom: -12px;\n  }\n\n  .timeline-event-legend span > i {\n    top: -1px;\n    left: -14px;\n  }\n\n  .timeline-event-legend span > i:after {\n    left: -4px;\n    bottom: -12px;\n  }\n"])));function vf(){return(0,L.jsx)(pf,{id:"Roadmap",children:(0,L.jsxs)(ff,{className:"wow animate__animated animate__bounceInLeft","data-wow-offset":"600",children:[(0,L.jsx)(mf,{children:(0,L.jsx)("div",{className:"tips",children:"Roadmap"})}),(0,L.jsxs)(gf,{children:[(0,L.jsxs)("ul",{className:"timeline-events",children:[(0,L.jsxs)("li",{className:"timeline-event-years-6-5 timeline-event-legend",children:[(0,L.jsxs)("span",{children:[(0,L.jsx)("i",{}),(0,L.jsx)("h2",{children:"Start"}),(0,L.jsx)("h3",{children:"AAA"}),(0,L.jsx)("h4",{children:"Visual"})]}),(0,L.jsx)("i",{})]}),(0,L.jsxs)("li",{className:"timeline-event-years-2",children:[(0,L.jsx)("h2",{children:"2023 Q1"}),(0,L.jsx)("h3",{children:"111"}),(0,L.jsx)("h4",{children:" Designer"})]}),(0,L.jsxs)("li",{className:"timeline-event-years-2",children:[(0,L.jsx)("h2",{children:"2023 Q2 - Q3"}),(0,L.jsx)("h3",{children:"222"}),(0,L.jsx)("h4",{children:"Creative"})]}),(0,L.jsxs)("li",{className:"timeline-event-years-3",children:[(0,L.jsx)("h2",{children:"2023 Q2 - Q3"}),(0,L.jsx)("h3",{children:"333"}),(0,L.jsx)("h4",{children:"Creative"})]}),(0,L.jsxs)("li",{className:"timeline-event-years-7",children:[(0,L.jsx)("h2",{children:"2023 Q2 - Q3"}),(0,L.jsx)("h3",{children:"444"}),(0,L.jsx)("h4",{children:"Interactive"})]})]}),(0,L.jsxs)("ul",{className:"timelines-years",children:[(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2023 Q1"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2023 Q2"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2023 Q3"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2023 Q4"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2024 Q1"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2024 Q2"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2024 Q3"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2024 Q4"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2025 Q1"})}),(0,L.jsx)("li",{children:(0,L.jsx)("span",{children:"2025 Q2"})})]})]})]})})}var yf=a.ZP.div(df||(df=(0,r.Z)(["\n    .inner{\n      width: 100vw;\n      height: 100vh;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n"]))),bf=a.ZP.div(hf||(hf=(0,r.Z)(["\n    width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: url(",") no-repeat;\n  background-size: 100% 100%;\n  position: relative;\n"])),X);var _f=function(){return(0,t.useEffect)((function(){(new nf.WOW).init()}),[]),(0,L.jsxs)("div",{children:[(0,L.jsxs)(yf,{children:[(0,L.jsxs)(bf,{children:[(0,L.jsx)(W,{}),(0,L.jsx)(q.Z,{})]}),(0,L.jsx)(K,{}),(0,L.jsx)(Tp,{}),(0,L.jsx)(Vp,{}),(0,L.jsx)(Up,{}),(0,L.jsx)(cf,{}),(0,L.jsx)(vf,{}),(0,L.jsx)(Bt,{}),(0,L.jsx)(Zp,{})]}),(0,L.jsx)(o,{})]})};i.createRoot(document.getElementById("root")).render((0,L.jsx)(_f,{}))}()}();
//# sourceMappingURL=main.51d23578.js.map